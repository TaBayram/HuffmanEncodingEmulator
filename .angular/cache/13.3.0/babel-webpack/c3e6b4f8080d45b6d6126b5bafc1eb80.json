{"ast":null,"code":"/** [p5.sound]  Version: 1.0.1 - 2021-05-25 */\n\n/**\n*  <p>p5.sound extends p5 with <a href=\"http://caniuse.com/audio-api\"\n*  target=\"_blank\">Web Audio</a> functionality including audio input,\n*  playback, analysis and synthesis.\n*  </p>\n*  <ul>\n*  <li><a href=\"#/p5.SoundFile\"><b>p5.SoundFile</b></a>: Load and play sound files.</li>\n*  <li><a href=\"#/p5.Amplitude\"><b>p5.Amplitude</b></a>: Get the current volume of a sound.</li>\n*  <li><a href=\"#/p5.AudioIn\"><b>p5.AudioIn</b></a>: Get sound from an input source, typically\n*    a computer microphone.</li>\n*  <li><a href=\"#/p5.FFT\"><b>p5.FFT</b></a>: Analyze the frequency of sound. Returns\n*    results from the frequency spectrum or time domain (waveform).</li>\n*  <li><a href=\"#/p5.Oscillator\"><b>p5.Oscillator</b></a>: Generate Sine,\n*    Triangle, Square and Sawtooth waveforms. Base class of\n*    <li><a href=\"#/p5.Noise\">p5.Noise</a> and <a href=\"#/p5.Pulse\">p5.Pulse</a>.\n*    </li>\n*  <li>\n*    <a href=\"#/p5.MonoSynth\">p5.MonoSynth</a> and <a href=\"#/p5.PolySynth\">p5.PolySynth</a>: Play musical notes\n*  </li>\n*  <li><a href=\"#/p5.Envelope\"><b>p5.Envelope</b></a>: An Envelope is a series\n*    of fades over time. Often used to control an object's\n*    output gain level as an \"ADSR Envelope\" (Attack, Decay,\n*    Sustain, Release). Can also modulate other parameters.</li>\n*  <li><a href=\"#/p5.Delay\"><b>p5.Delay</b></a>: A delay effect with\n*    parameters for feedback, delayTime, and lowpass filter.</li>\n*  <li><a href=\"#/p5.Filter\"><b>p5.Filter</b></a>: Filter the frequency range of a\n*    sound.\n*  </li>\n*  <li><a href=\"#/p5.Reverb\"><b>p5.Reverb</b></a>: Add reverb to a sound by specifying\n*    duration and decay. </li>\n*  <b><li><a href=\"#/p5.Convolver\">p5.Convolver</a>:</b> Extends\n*  <a href=\"#/p5.Reverb\">p5.Reverb</a> to simulate the sound of real\n*    physical spaces through convolution.</li>\n*  <b><li><a href=\"#/p5.SoundRecorder\">p5.SoundRecorder</a></b>: Record sound for playback\n*    / save the .wav file.\n*  <b><li><a href=\"#/p5.SoundLoop\">p5.SoundLoop</a>, <a href=\"#/p5.Phrase\">p5.Phrase</a></b>, <b><a href=\"#/p5.Part\">p5.Part</a></b> and\n*  <b><a href=\"#/p5.Score\">p5.Score</a></b>: Compose musical sequences.\n*  </li>\n*  <li><a href=\"#/p5/userStartAudio\">userStartAudio</a>: Enable audio in a\n*  browser- and user-friendly way.</a>\n*  <p>p5.sound is on <a href=\"https://github.com/processing/p5.js-sound/\">GitHub</a>.\n*  Download the latest version\n*  <a href=\"https://github.com/processing/p5.js-sound/blob/master/lib/p5.sound.js\">here</a>.</p>\n*\n*  @module p5.sound\n*  @submodule p5.sound\n*  @for p5.sound\n*  @main\n*/\n\n/**\n *  p5.sound \n *  https://p5js.org/reference/#/libraries/p5.sound\n *\n *  From the Processing Foundation and contributors\n *  https://github.com/processing/p5.js-sound/graphs/contributors\n *\n *  MIT License (MIT)\n *  https://github.com/processing/p5.js-sound/blob/master/LICENSE\n *\n *  Some of the many audio libraries & resources that inspire p5.sound:\n *   - TONE.js (c) Yotam Mann. Licensed under The MIT License (MIT). https://github.com/TONEnoTONE/Tone.js\n *   - buzz.js (c) Jay Salvat. Licensed under The MIT License (MIT). http://buzz.jaysalvat.com/\n *   - Boris Smus Web Audio API book, 2013. Licensed under the Apache License http://www.apache.org/licenses/LICENSE-2.0\n *   - wavesurfer.js https://github.com/katspaugh/wavesurfer.js\n *   - Web Audio Components by Jordan Santell https://github.com/web-audio-components\n *   - Wilm Thoben's Sound library for Processing https://github.com/processing/processing/tree/master/java/libraries/sound\n *\n *   Web Audio API: http://w3.org/TR/webaudio/\n */\n(function (modules) {\n  var installedModules = {};\n\n  function __webpack_require__(moduleId) {\n    if (installedModules[moduleId]) {\n      return installedModules[moduleId].exports;\n    }\n\n    var module = installedModules[moduleId] = {\n      i: moduleId,\n      l: false,\n      exports: {}\n    };\n    modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n    module.l = true;\n    return module.exports;\n  }\n\n  __webpack_require__.m = modules;\n  __webpack_require__.c = installedModules;\n\n  __webpack_require__.d = function (exports, name, getter) {\n    if (!__webpack_require__.o(exports, name)) {\n      Object.defineProperty(exports, name, {\n        enumerable: true,\n        get: getter\n      });\n    }\n  };\n\n  __webpack_require__.r = function (exports) {\n    if (typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n      Object.defineProperty(exports, Symbol.toStringTag, {\n        value: 'Module'\n      });\n    }\n\n    Object.defineProperty(exports, '__esModule', {\n      value: true\n    });\n  };\n\n  __webpack_require__.t = function (value, mode) {\n    if (mode & 1) value = __webpack_require__(value);\n    if (mode & 8) return value;\n    if (mode & 4 && typeof value === 'object' && value && value.__esModule) return value;\n    var ns = Object.create(null);\n\n    __webpack_require__.r(ns);\n\n    Object.defineProperty(ns, 'default', {\n      enumerable: true,\n      value: value\n    });\n    if (mode & 2 && typeof value != 'string') for (var key in value) __webpack_require__.d(ns, key, function (key) {\n      return value[key];\n    }.bind(null, key));\n    return ns;\n  };\n\n  __webpack_require__.n = function (module) {\n    var getter = module && module.__esModule ? function getDefault() {\n      return module['default'];\n    } : function getModuleExports() {\n      return module;\n    };\n\n    __webpack_require__.d(getter, 'a', getter);\n\n    return getter;\n  };\n\n  __webpack_require__.o = function (object, property) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  };\n\n  __webpack_require__.p = \"\";\n  return __webpack_require__(__webpack_require__.s = 40);\n})([function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_RESULT__ = function () {\n    \"use strict\";\n\n    function a(t, e) {\n      this.isUndef(t) || 1 === t ? this.input = this.context.createGain() : 1 < t && (this.input = new Array(t)), this.isUndef(e) || 1 === e ? this.output = this.context.createGain() : 1 < e && (this.output = new Array(t));\n    }\n\n    var e;\n    return a.prototype.set = function (t, e, n) {\n      if (this.isObject(t)) n = e;else if (this.isString(t)) {\n        var o = {};\n        o[t] = e, t = o;\n      }\n\n      t: for (var i in t) {\n        e = t[i];\n        var r = this;\n\n        if (-1 !== i.indexOf(\".\")) {\n          for (var s = i.split(\".\"), u = 0; u < s.length - 1; u++) if ((r = r[s[u]]) instanceof a) {\n            s.splice(0, u + 1);\n            var p = s.join(\".\");\n            r.set(p, e);\n            continue t;\n          }\n\n          i = s[s.length - 1];\n        }\n\n        var c = r[i];\n        this.isUndef(c) || (a.Signal && c instanceof a.Signal || a.Param && c instanceof a.Param ? c.value !== e && (this.isUndef(n) ? c.value = e : c.rampTo(e, n)) : c instanceof AudioParam ? c.value !== e && (c.value = e) : c instanceof a ? c.set(e) : c !== e && (r[i] = e));\n      }\n\n      return this;\n    }, a.prototype.get = function (t) {\n      this.isUndef(t) ? t = this._collectDefaults(this.constructor) : this.isString(t) && (t = [t]);\n\n      for (var e = {}, n = 0; n < t.length; n++) {\n        var o = t[n],\n            i = this,\n            r = e;\n\n        if (-1 !== o.indexOf(\".\")) {\n          for (var s = o.split(\".\"), u = 0; u < s.length - 1; u++) {\n            var p = s[u];\n            r[p] = r[p] || {}, r = r[p], i = i[p];\n          }\n\n          o = s[s.length - 1];\n        }\n\n        var c = i[o];\n        this.isObject(t[o]) ? r[o] = c.get() : a.Signal && c instanceof a.Signal ? r[o] = c.value : a.Param && c instanceof a.Param ? r[o] = c.value : c instanceof AudioParam ? r[o] = c.value : c instanceof a ? r[o] = c.get() : this.isFunction(c) || this.isUndef(c) || (r[o] = c);\n      }\n\n      return e;\n    }, a.prototype._collectDefaults = function (t) {\n      var e = [];\n      if (this.isUndef(t.defaults) || (e = Object.keys(t.defaults)), !this.isUndef(t._super)) for (var n = this._collectDefaults(t._super), o = 0; o < n.length; o++) -1 === e.indexOf(n[o]) && e.push(n[o]);\n      return e;\n    }, a.prototype.toString = function () {\n      for (var t in a) {\n        var e = t[0].match(/^[A-Z]$/),\n            n = a[t] === this.constructor;\n        if (this.isFunction(a[t]) && e && n) return t;\n      }\n\n      return \"Tone\";\n    }, Object.defineProperty(a.prototype, \"numberOfInputs\", {\n      get: function () {\n        return this.input ? this.isArray(this.input) ? this.input.length : 1 : 0;\n      }\n    }), Object.defineProperty(a.prototype, \"numberOfOutputs\", {\n      get: function () {\n        return this.output ? this.isArray(this.output) ? this.output.length : 1 : 0;\n      }\n    }), a.prototype.dispose = function () {\n      return this.isUndef(this.input) || (this.input instanceof AudioNode && this.input.disconnect(), this.input = null), this.isUndef(this.output) || (this.output instanceof AudioNode && this.output.disconnect(), this.output = null), this;\n    }, a.prototype.connect = function (t, e, n) {\n      return Array.isArray(this.output) ? (e = this.defaultArg(e, 0), this.output[e].connect(t, 0, n)) : this.output.connect(t, e, n), this;\n    }, a.prototype.disconnect = function (t, e, n) {\n      this.isArray(this.output) ? this.isNumber(t) ? this.output[t].disconnect() : (e = this.defaultArg(e, 0), this.output[e].disconnect(t, 0, n)) : this.output.disconnect.apply(this.output, arguments);\n    }, a.prototype.connectSeries = function () {\n      if (1 < arguments.length) for (var t = arguments[0], e = 1; e < arguments.length; e++) {\n        var n = arguments[e];\n        t.connect(n), t = n;\n      }\n      return this;\n    }, a.prototype.chain = function () {\n      if (0 < arguments.length) for (var t = this, e = 0; e < arguments.length; e++) {\n        var n = arguments[e];\n        t.connect(n), t = n;\n      }\n      return this;\n    }, a.prototype.fan = function () {\n      if (0 < arguments.length) for (var t = 0; t < arguments.length; t++) this.connect(arguments[t]);\n      return this;\n    }, AudioNode.prototype.chain = a.prototype.chain, AudioNode.prototype.fan = a.prototype.fan, a.prototype.defaultArg = function (t, e) {\n      if (this.isObject(t) && this.isObject(e)) {\n        var n = {};\n\n        for (var o in t) n[o] = this.defaultArg(e[o], t[o]);\n\n        for (var i in e) n[i] = this.defaultArg(t[i], e[i]);\n\n        return n;\n      }\n\n      return this.isUndef(t) ? e : t;\n    }, a.prototype.optionsObject = function (t, e, n) {\n      var o = {};\n      if (1 === t.length && this.isObject(t[0])) o = t[0];else for (var i = 0; i < e.length; i++) o[e[i]] = t[i];\n      return this.isUndef(n) ? o : this.defaultArg(o, n);\n    }, a.prototype.isUndef = function (t) {\n      return void 0 === t;\n    }, a.prototype.isFunction = function (t) {\n      return \"function\" == typeof t;\n    }, a.prototype.isNumber = function (t) {\n      return \"number\" == typeof t;\n    }, a.prototype.isObject = function (t) {\n      return \"[object Object]\" === Object.prototype.toString.call(t) && t.constructor === Object;\n    }, a.prototype.isBoolean = function (t) {\n      return \"boolean\" == typeof t;\n    }, a.prototype.isArray = function (t) {\n      return Array.isArray(t);\n    }, a.prototype.isString = function (t) {\n      return \"string\" == typeof t;\n    }, a.noOp = function () {}, a.prototype._readOnly = function (t) {\n      if (Array.isArray(t)) for (var e = 0; e < t.length; e++) this._readOnly(t[e]);else Object.defineProperty(this, t, {\n        writable: !1,\n        enumerable: !0\n      });\n    }, a.prototype._writable = function (t) {\n      if (Array.isArray(t)) for (var e = 0; e < t.length; e++) this._writable(t[e]);else Object.defineProperty(this, t, {\n        writable: !0\n      });\n    }, a.State = {\n      Started: \"started\",\n      Stopped: \"stopped\",\n      Paused: \"paused\"\n    }, a.prototype.equalPowerScale = function (t) {\n      var e = .5 * Math.PI;\n      return Math.sin(t * e);\n    }, a.prototype.dbToGain = function (t) {\n      return Math.pow(2, t / 6);\n    }, a.prototype.gainToDb = function (t) {\n      return Math.log(t) / Math.LN10 * 20;\n    }, a.prototype.intervalToFrequencyRatio = function (t) {\n      return Math.pow(2, t / 12);\n    }, a.prototype.now = function () {\n      return a.context.now();\n    }, a.now = function () {\n      return a.context.now();\n    }, a.extend = function (t, e) {\n      function n() {}\n\n      a.prototype.isUndef(e) && (e = a), n.prototype = e.prototype, t.prototype = new n(), (t.prototype.constructor = t)._super = e;\n    }, Object.defineProperty(a, \"context\", {\n      get: function () {\n        return e;\n      },\n      set: function (t) {\n        e = a.Context && t instanceof a.Context ? t : new a.Context(t), a.Context && a.Context.emit(\"init\", e);\n      }\n    }), Object.defineProperty(a.prototype, \"context\", {\n      get: function () {\n        return a.context;\n      }\n    }), a.setContext = function (t) {\n      a.context = t;\n    }, Object.defineProperty(a.prototype, \"blockTime\", {\n      get: function () {\n        return 128 / this.context.sampleRate;\n      }\n    }), Object.defineProperty(a.prototype, \"sampleTime\", {\n      get: function () {\n        return 1 / this.context.sampleRate;\n      }\n    }), Object.defineProperty(a, \"supported\", {\n      get: function () {\n        var t = window.hasOwnProperty(\"AudioContext\") || window.hasOwnProperty(\"webkitAudioContext\"),\n            e = window.hasOwnProperty(\"Promise\"),\n            n = window.hasOwnProperty(\"Worker\");\n        return t && e && n;\n      }\n    }), a.version = \"r10\", window.TONE_SILENCE_VERSION_LOGGING || console.log(\"%c * Tone.js \" + a.version + \" * \", \"background: #000; color: #fff\"), a;\n  }.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(2), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (i) {\n    \"use strict\";\n\n    return i.Multiply = function (t) {\n      this.createInsOuts(2, 0), this._mult = this.input[0] = this.output = new i.Gain(), this._param = this.input[1] = this.output.gain, this._param.value = this.defaultArg(t, 0);\n    }, i.extend(i.Multiply, i.Signal), i.Multiply.prototype.dispose = function () {\n      return i.prototype.dispose.call(this), this._mult.dispose(), this._mult = null, this._param = null, this;\n    }, i.Multiply;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(6), __webpack_require__(9), __webpack_require__(18), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (n) {\n    \"use strict\";\n\n    return n.Signal = function () {\n      var t = this.optionsObject(arguments, [\"value\", \"units\"], n.Signal.defaults);\n      this.output = this._gain = this.context.createGain(), t.param = this._gain.gain, n.Param.call(this, t), this.input = this._param = this._gain.gain, this.context.getConstant(1).chain(this._gain);\n    }, n.extend(n.Signal, n.Param), n.Signal.defaults = {\n      value: 0,\n      units: n.Type.Default,\n      convert: !0\n    }, n.Signal.prototype.connect = n.SignalBase.prototype.connect, n.Signal.prototype.dispose = function () {\n      return n.Param.prototype.dispose.call(this), this._param = null, this._gain.disconnect(), this._gain = null, this;\n    }, n.Signal;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  (function (global) {\n    __webpack_require__.d(__webpack_exports__, \"b\", function () {\n      return getAudioContext;\n    });\n\n    __webpack_require__.d(__webpack_exports__, \"c\", function () {\n      return userStartAudio;\n    });\n\n    var startaudiocontext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22);\n\n    var startaudiocontext__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(startaudiocontext__WEBPACK_IMPORTED_MODULE_0__);\n\n    var Tone_core_Tone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n\n    var Tone_core_Tone__WEBPACK_IMPORTED_MODULE_1___default = __webpack_require__.n(Tone_core_Tone__WEBPACK_IMPORTED_MODULE_1__);\n\n    var Tone_core_Context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12);\n\n    var Tone_core_Context__WEBPACK_IMPORTED_MODULE_2___default = __webpack_require__.n(Tone_core_Context__WEBPACK_IMPORTED_MODULE_2__);\n\n    global.TONE_SILENCE_VERSION_LOGGING = true;\n    var audiocontext = new window.AudioContext();\n    Tone_core_Tone__WEBPACK_IMPORTED_MODULE_1___default.a.setContext(audiocontext);\n    /**\n     * <p>Returns the Audio Context for this sketch. Useful for users\n     * who would like to dig deeper into the <a target='_blank' href=\n     * 'http://webaudio.github.io/web-audio-api/'>Web Audio API\n     * </a>.</p>\n     *\n     * <p>Some browsers require users to startAudioContext\n     * with a user gesture, such as touchStarted in the example below.</p>\n     *\n     * @for p5\n     * @method getAudioContext\n     * @return {Object}    AudioContext for this sketch\n     * @example\n     * <div><code>\n     *  function draw() {\n     *    background(255);\n     *    textAlign(CENTER);\n     *\n     *    if (getAudioContext().state !== 'running') {\n     *      text('click to start audio', width/2, height/2);\n     *    } else {\n     *      text('audio is enabled', width/2, height/2);\n     *    }\n     *  }\n     *\n     *  function touchStarted() {\n     *    if (getAudioContext().state !== 'running') {\n     *      getAudioContext().resume();\n     *    }\n     *    var synth = new p5.MonoSynth();\n     *    synth.play('A4', 0.5, 0, 0.2);\n     *  }\n     *\n     * </div></code>\n     */\n\n    function getAudioContext() {\n      return audiocontext;\n    }\n    /**\n     *  <p>It is not only a good practice to give users control over starting\n     *  audio. This policy is enforced by many web browsers, including iOS and\n     *  <a href=\"https://goo.gl/7K7WLu\" title=\"Google Chrome's autoplay\n     *  policy\">Google Chrome</a>, which create the Web Audio API's\n     *  <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/AudioContext\"\n     *  title=\"Audio Context @ MDN\">Audio Context</a>\n     *  in a suspended state.</p>\n     *\n     *  <p>In these browser-specific policies, sound will not play until a user\n     *  interaction event (i.e. <code>mousePressed()</code>) explicitly resumes\n     *  the AudioContext, or starts an audio node. This can be accomplished by\n     *  calling <code>start()</code> on a <code>p5.Oscillator</code>,\n     *  <code> play()</code> on a <code>p5.SoundFile</code>, or simply\n     *  <code>userStartAudio()</code>.</p>\n     *\n     *  <p><code>userStartAudio()</code> starts the AudioContext on a user\n     *  gesture. The default behavior will enable audio on any\n     *  mouseUp or touchEnd event. It can also be placed in a specific\n     *  interaction function, such as <code>mousePressed()</code> as in the\n     *  example below. This method utilizes\n     *  <a href=\"https://github.com/tambien/StartAudioContext\">StartAudioContext\n     *  </a>, a library by Yotam Mann (MIT Licence, 2016).</p>\n     *  @param  {Element|Array}   [element(s)] This argument can be an Element,\n     *                                Selector String, NodeList, p5.Element,\n     *                                jQuery Element, or an Array of any of those.\n     *  @param  {Function} [callback] Callback to invoke when the AudioContext\n     *                                has started\n     *  @return {Promise}            Returns a Promise that resolves when\n     *                                       the AudioContext state is 'running'\n     *  @method userStartAudio\n     *  @for p5\n     *  @example\n     *  <div><code>\n     *  function setup() {\n     *    // mimics the autoplay policy\n     *    getAudioContext().suspend();\n     *\n     *    let mySynth = new p5.MonoSynth();\n     *\n     *    // This won't play until the context has resumed\n     *    mySynth.play('A6');\n     *  }\n     *  function draw() {\n     *    background(220);\n     *    textAlign(CENTER, CENTER);\n     *    text(getAudioContext().state, width/2, height/2);\n     *  }\n     *  function mousePressed() {\n     *    userStartAudio();\n     *  }\n     *  </code></div>\n     */\n\n\n    function userStartAudio(elements, callback) {\n      var elt = elements;\n\n      if (elements instanceof p5.Element) {\n        elt = elements.elt;\n      } else if (elements instanceof Array && elements[0] instanceof p5.Element) {\n        elt = elements.map(function (e) {\n          return e.elt;\n        });\n      }\n\n      return startaudiocontext__WEBPACK_IMPORTED_MODULE_0___default()(audiocontext, elt, callback);\n    }\n\n    __webpack_exports__[\"a\"] = audiocontext;\n  }).call(this, __webpack_require__(26));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(2), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (i) {\n    \"use strict\";\n\n    return i.Add = function (t) {\n      this.createInsOuts(2, 0), this._sum = this.input[0] = this.input[1] = this.output = new i.Gain(), this._param = this.input[1] = new i.Signal(t), this._param.connect(this._sum);\n    }, i.extend(i.Add, i.Signal), i.Add.prototype.dispose = function () {\n      return i.prototype.dispose.call(this), this._sum.dispose(), this._sum = null, this._param.dispose(), this._param = null, this;\n    }, i.Add;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports) {\n  module.exports = {\n    recorderProcessor: 'recorder-processor',\n    soundFileProcessor: 'sound-file-processor',\n    amplitudeProcessor: 'amplitude-processor'\n  };\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (e) {\n    \"use strict\";\n\n    return e.WaveShaper = function (e, t) {\n      this._shaper = this.input = this.output = this.context.createWaveShaper(), this._curve = null, Array.isArray(e) ? this.curve = e : isFinite(e) || this.isUndef(e) ? this._curve = new Float32Array(this.defaultArg(e, 1024)) : this.isFunction(e) && (this._curve = new Float32Array(this.defaultArg(t, 1024)), this.setMap(e));\n    }, e.extend(e.WaveShaper, e.SignalBase), e.WaveShaper.prototype.setMap = function (e) {\n      for (var t = 0, r = this._curve.length; t < r; t++) {\n        var s = t / (r - 1) * 2 - 1;\n        this._curve[t] = e(s, t);\n      }\n\n      return this._shaper.curve = this._curve, this;\n    }, Object.defineProperty(e.WaveShaper.prototype, \"curve\", {\n      get: function () {\n        return this._shaper.curve;\n      },\n      set: function (e) {\n        this._curve = new Float32Array(e), this._shaper.curve = this._curve;\n      }\n    }), Object.defineProperty(e.WaveShaper.prototype, \"oversample\", {\n      get: function () {\n        return this._shaper.oversample;\n      },\n      set: function (e) {\n        if (-1 === [\"none\", \"2x\", \"4x\"].indexOf(e)) throw new RangeError(\"Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'\");\n        this._shaper.oversample = e;\n      }\n    }), e.WaveShaper.prototype.dispose = function () {\n      return e.prototype.dispose.call(this), this._shaper.disconnect(), this._shaper = null, this._curve = null, this;\n    }, e.WaveShaper;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(2), __webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = function (o) {\n    \"use strict\";\n\n    return o.TimelineSignal = function () {\n      var e = this.optionsObject(arguments, [\"value\", \"units\"], o.Signal.defaults);\n      this._events = new o.Timeline(10), o.Signal.apply(this, e), e.param = this._param, o.Param.call(this, e), this._initial = this._fromUnits(this._param.value);\n    }, o.extend(o.TimelineSignal, o.Param), o.TimelineSignal.Type = {\n      Linear: \"linear\",\n      Exponential: \"exponential\",\n      Target: \"target\",\n      Curve: \"curve\",\n      Set: \"set\"\n    }, Object.defineProperty(o.TimelineSignal.prototype, \"value\", {\n      get: function () {\n        var e = this.now(),\n            t = this.getValueAtTime(e);\n        return this._toUnits(t);\n      },\n      set: function (e) {\n        var t = this._fromUnits(e);\n\n        this._initial = t, this.cancelScheduledValues(), this._param.value = t;\n      }\n    }), o.TimelineSignal.prototype.setValueAtTime = function (e, t) {\n      return e = this._fromUnits(e), t = this.toSeconds(t), this._events.add({\n        type: o.TimelineSignal.Type.Set,\n        value: e,\n        time: t\n      }), this._param.setValueAtTime(e, t), this;\n    }, o.TimelineSignal.prototype.linearRampToValueAtTime = function (e, t) {\n      return e = this._fromUnits(e), t = this.toSeconds(t), this._events.add({\n        type: o.TimelineSignal.Type.Linear,\n        value: e,\n        time: t\n      }), this._param.linearRampToValueAtTime(e, t), this;\n    }, o.TimelineSignal.prototype.exponentialRampToValueAtTime = function (e, t) {\n      t = this.toSeconds(t);\n\n      var i = this._searchBefore(t);\n\n      i && 0 === i.value && this.setValueAtTime(this._minOutput, i.time), e = this._fromUnits(e);\n      var n = Math.max(e, this._minOutput);\n      return this._events.add({\n        type: o.TimelineSignal.Type.Exponential,\n        value: n,\n        time: t\n      }), e < this._minOutput ? (this._param.exponentialRampToValueAtTime(this._minOutput, t - this.sampleTime), this.setValueAtTime(0, t)) : this._param.exponentialRampToValueAtTime(e, t), this;\n    }, o.TimelineSignal.prototype.setTargetAtTime = function (e, t, i) {\n      return e = this._fromUnits(e), e = Math.max(this._minOutput, e), i = Math.max(this._minOutput, i), t = this.toSeconds(t), this._events.add({\n        type: o.TimelineSignal.Type.Target,\n        value: e,\n        time: t,\n        constant: i\n      }), this._param.setTargetAtTime(e, t, i), this;\n    }, o.TimelineSignal.prototype.setValueCurveAtTime = function (e, t, i, n) {\n      n = this.defaultArg(n, 1);\n\n      for (var a = new Array(e.length), l = 0; l < a.length; l++) a[l] = this._fromUnits(e[l]) * n;\n\n      t = this.toSeconds(t), i = this.toSeconds(i), this._events.add({\n        type: o.TimelineSignal.Type.Curve,\n        value: a,\n        time: t,\n        duration: i\n      }), this._param.setValueAtTime(a[0], t);\n\n      for (var s = 1; s < a.length; s++) {\n        var r = t + s / (a.length - 1) * i;\n\n        this._param.linearRampToValueAtTime(a[s], r);\n      }\n\n      return this;\n    }, o.TimelineSignal.prototype.cancelScheduledValues = function (e) {\n      return e = this.toSeconds(e), this._events.cancel(e), this._param.cancelScheduledValues(e), this;\n    }, o.TimelineSignal.prototype.setRampPoint = function (e) {\n      e = this.toSeconds(e);\n\n      var t = this._toUnits(this.getValueAtTime(e)),\n          i = this._searchBefore(e);\n\n      if (i && i.time === e) this.cancelScheduledValues(e + this.sampleTime);else if (i && i.type === o.TimelineSignal.Type.Curve && i.time + i.duration > e) this.cancelScheduledValues(e), this.linearRampToValueAtTime(t, e);else {\n        var n = this._searchAfter(e);\n\n        n && (this.cancelScheduledValues(e), n.type === o.TimelineSignal.Type.Linear ? this.linearRampToValueAtTime(t, e) : n.type === o.TimelineSignal.Type.Exponential && this.exponentialRampToValueAtTime(t, e)), this.setValueAtTime(t, e);\n      }\n      return this;\n    }, o.TimelineSignal.prototype.linearRampToValueBetween = function (e, t, i) {\n      return this.setRampPoint(t), this.linearRampToValueAtTime(e, i), this;\n    }, o.TimelineSignal.prototype.exponentialRampToValueBetween = function (e, t, i) {\n      return this.setRampPoint(t), this.exponentialRampToValueAtTime(e, i), this;\n    }, o.TimelineSignal.prototype._searchBefore = function (e) {\n      return this._events.get(e);\n    }, o.TimelineSignal.prototype._searchAfter = function (e) {\n      return this._events.getAfter(e);\n    }, o.TimelineSignal.prototype.getValueAtTime = function (e) {\n      e = this.toSeconds(e);\n\n      var t = this._searchAfter(e),\n          i = this._searchBefore(e),\n          n = this._initial;\n\n      if (null === i) n = this._initial;else if (i.type === o.TimelineSignal.Type.Target) {\n        var a,\n            l = this._events.getBefore(i.time);\n\n        a = null === l ? this._initial : l.value, n = this._exponentialApproach(i.time, a, i.value, i.constant, e);\n      } else n = i.type === o.TimelineSignal.Type.Curve ? this._curveInterpolate(i.time, i.value, i.duration, e) : null === t ? i.value : t.type === o.TimelineSignal.Type.Linear ? this._linearInterpolate(i.time, i.value, t.time, t.value, e) : t.type === o.TimelineSignal.Type.Exponential ? this._exponentialInterpolate(i.time, i.value, t.time, t.value, e) : i.value;\n      return n;\n    }, o.TimelineSignal.prototype.connect = o.SignalBase.prototype.connect, o.TimelineSignal.prototype._exponentialApproach = function (e, t, i, n, a) {\n      return i + (t - i) * Math.exp(-(a - e) / n);\n    }, o.TimelineSignal.prototype._linearInterpolate = function (e, t, i, n, a) {\n      return t + (a - e) / (i - e) * (n - t);\n    }, o.TimelineSignal.prototype._exponentialInterpolate = function (e, t, i, n, a) {\n      return (t = Math.max(this._minOutput, t)) * Math.pow(n / t, (a - e) / (i - e));\n    }, o.TimelineSignal.prototype._curveInterpolate = function (e, t, i, n) {\n      var a = t.length;\n      if (e + i <= n) return t[a - 1];\n      if (n <= e) return t[0];\n      var l = (n - e) / i,\n          s = Math.floor((a - 1) * l),\n          r = Math.ceil((a - 1) * l),\n          o = t[s],\n          p = t[r];\n      return r === s ? o : this._linearInterpolate(s, o, r, p, l * (a - 1));\n    }, o.TimelineSignal.prototype.dispose = function () {\n      o.Signal.prototype.dispose.call(this), o.Param.prototype.dispose.call(this), this._events.dispose(), this._events = null;\n    }, o.TimelineSignal;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(4), __webpack_require__(1), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (i) {\n    \"use strict\";\n\n    return i.Scale = function (t, e) {\n      this._outputMin = this.defaultArg(t, 0), this._outputMax = this.defaultArg(e, 1), this._scale = this.input = new i.Multiply(1), this._add = this.output = new i.Add(0), this._scale.connect(this._add), this._setRange();\n    }, i.extend(i.Scale, i.SignalBase), Object.defineProperty(i.Scale.prototype, \"min\", {\n      get: function () {\n        return this._outputMin;\n      },\n      set: function (t) {\n        this._outputMin = t, this._setRange();\n      }\n    }), Object.defineProperty(i.Scale.prototype, \"max\", {\n      get: function () {\n        return this._outputMax;\n      },\n      set: function (t) {\n        this._outputMax = t, this._setRange();\n      }\n    }), i.Scale.prototype._setRange = function () {\n      this._add.value = this._outputMin, this._scale.value = this._outputMax - this._outputMin;\n    }, i.Scale.prototype.dispose = function () {\n      return i.prototype.dispose.call(this), this._add.dispose(), this._add = null, this._scale.dispose(), this._scale = null, this;\n    }, i.Scale;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(16), __webpack_require__(30), __webpack_require__(31), __webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = function (t) {\n    return t.Type = {\n      Default: \"number\",\n      Time: \"time\",\n      Frequency: \"frequency\",\n      TransportTime: \"transportTime\",\n      Ticks: \"ticks\",\n      NormalRange: \"normalRange\",\n      AudioRange: \"audioRange\",\n      Decibels: \"db\",\n      Interval: \"interval\",\n      BPM: \"bpm\",\n      Positive: \"positive\",\n      Cents: \"cents\",\n      Degrees: \"degrees\",\n      MIDI: \"midi\",\n      BarsBeatsSixteenths: \"barsBeatsSixteenths\",\n      Samples: \"samples\",\n      Hertz: \"hertz\",\n      Note: \"note\",\n      Milliseconds: \"milliseconds\",\n      Seconds: \"seconds\",\n      Notation: \"notation\"\n    }, t.prototype.toSeconds = function (e) {\n      return this.isNumber(e) ? e : this.isUndef(e) ? this.now() : this.isString(e) ? new t.Time(e).toSeconds() : e instanceof t.TimeBase ? e.toSeconds() : void 0;\n    }, t.prototype.toFrequency = function (e) {\n      return this.isNumber(e) ? e : this.isString(e) || this.isUndef(e) ? new t.Frequency(e).valueOf() : e instanceof t.TimeBase ? e.toFrequency() : void 0;\n    }, t.prototype.toTicks = function (e) {\n      return this.isNumber(e) || this.isString(e) ? new t.TransportTime(e).toTicks() : this.isUndef(e) ? t.Transport.ticks : e instanceof t.TimeBase ? e.toTicks() : void 0;\n    }, t;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(18), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (i) {\n    \"use strict\";\n\n    return window.GainNode && !AudioContext.prototype.createGain && (AudioContext.prototype.createGain = AudioContext.prototype.createGainNode), i.Gain = function () {\n      var t = this.optionsObject(arguments, [\"gain\", \"units\"], i.Gain.defaults);\n      this.input = this.output = this._gainNode = this.context.createGain(), this.gain = new i.Param({\n        param: this._gainNode.gain,\n        units: t.units,\n        value: t.gain,\n        convert: t.convert\n      }), this._readOnly(\"gain\");\n    }, i.extend(i.Gain), i.Gain.defaults = {\n      gain: 1,\n      convert: !0\n    }, i.Gain.prototype.dispose = function () {\n      i.Param.prototype.dispose.call(this), this._gainNode.disconnect(), this._gainNode = null, this._writable(\"gain\"), this.gain.dispose(), this.gain = null;\n    }, i.prototype.createInsOuts = function (t, n) {\n      1 === t ? this.input = new i.Gain() : 1 < t && (this.input = new Array(t)), 1 === n ? this.output = new i.Gain() : 1 < n && (this.output = new Array(t));\n    }, i.Gain;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(7), __webpack_require__(39), __webpack_require__(14), __webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = function (o) {\n    \"use strict\";\n\n    return o.Clock = function () {\n      o.Emitter.call(this);\n      var t = this.optionsObject(arguments, [\"callback\", \"frequency\"], o.Clock.defaults);\n      this.callback = t.callback, this._nextTick = 0, this._lastState = o.State.Stopped, this.frequency = new o.TimelineSignal(t.frequency, o.Type.Frequency), this._readOnly(\"frequency\"), this.ticks = 0, this._state = new o.TimelineState(o.State.Stopped), this._boundLoop = this._loop.bind(this), this.context.on(\"tick\", this._boundLoop);\n    }, o.extend(o.Clock, o.Emitter), o.Clock.defaults = {\n      callback: o.noOp,\n      frequency: 1,\n      lookAhead: \"auto\"\n    }, Object.defineProperty(o.Clock.prototype, \"state\", {\n      get: function () {\n        return this._state.getValueAtTime(this.now());\n      }\n    }), o.Clock.prototype.start = function (t, e) {\n      return t = this.toSeconds(t), this._state.getValueAtTime(t) !== o.State.Started && this._state.add({\n        state: o.State.Started,\n        time: t,\n        offset: e\n      }), this;\n    }, o.Clock.prototype.stop = function (t) {\n      return t = this.toSeconds(t), this._state.cancel(t), this._state.setStateAtTime(o.State.Stopped, t), this;\n    }, o.Clock.prototype.pause = function (t) {\n      return t = this.toSeconds(t), this._state.getValueAtTime(t) === o.State.Started && this._state.setStateAtTime(o.State.Paused, t), this;\n    }, o.Clock.prototype._loop = function () {\n      for (var t = this.now() + this.context.lookAhead + this.context.updateInterval + 2 * this.context.lag; t > this._nextTick && this._state;) {\n        var e = this._state.getValueAtTime(this._nextTick);\n\n        if (e !== this._lastState) {\n          this._lastState = e;\n\n          var i = this._state.get(this._nextTick);\n\n          e === o.State.Started ? (this._nextTick = i.time, this.isUndef(i.offset) || (this.ticks = i.offset), this.emit(\"start\", i.time, this.ticks)) : e === o.State.Stopped ? (this.ticks = 0, this.emit(\"stop\", i.time)) : e === o.State.Paused && this.emit(\"pause\", i.time);\n        }\n\n        var s = this._nextTick;\n        this.frequency && (this._nextTick += 1 / this.frequency.getValueAtTime(this._nextTick), e === o.State.Started && (this.callback(s), this.ticks++));\n      }\n    }, o.Clock.prototype.getStateAtTime = function (t) {\n      return t = this.toSeconds(t), this._state.getValueAtTime(t);\n    }, o.Clock.prototype.dispose = function () {\n      o.Emitter.prototype.dispose.call(this), this.context.off(\"tick\", this._boundLoop), this._writable(\"frequency\"), this.frequency.dispose(), this.frequency = null, this._boundLoop = null, this._nextTick = 1 / 0, this.callback = null, this._state.dispose(), this._state = null;\n    }, o.Clock;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = function (o) {\n    function t(e, t, n) {\n      if (e.input) Array.isArray(e.input) ? (o.prototype.isUndef(n) && (n = 0), this.connect(e.input[n])) : this.connect(e.input, t, n);else try {\n        e instanceof AudioNode ? i.call(this, e, t, n) : i.call(this, e, t);\n      } catch (t) {\n        throw new Error(\"error connecting to node: \" + e + \"\\n\" + t);\n      }\n    }\n\n    var i, r;\n    return !window.hasOwnProperty(\"AudioContext\") && window.hasOwnProperty(\"webkitAudioContext\") && (window.AudioContext = window.webkitAudioContext), o.Context = function (t) {\n      for (var e in o.Emitter.call(this), t = t || new window.AudioContext(), this._context = t, this._context) this._defineProperty(this._context, e);\n\n      this._latencyHint = \"interactive\", this._lookAhead = .1, this._updateInterval = this._lookAhead / 3, this._computedUpdateInterval = 0, this._worker = this._createWorker(), this._constants = {};\n    }, o.extend(o.Context, o.Emitter), o.Emitter.mixin(o.Context), o.Context.prototype._defineProperty = function (e, n) {\n      this.isUndef(this[n]) && Object.defineProperty(this, n, {\n        get: function () {\n          return \"function\" == typeof e[n] ? e[n].bind(e) : e[n];\n        },\n        set: function (t) {\n          e[n] = t;\n        }\n      });\n    }, o.Context.prototype.now = function () {\n      return this._context.currentTime;\n    }, o.Context.prototype._createWorker = function () {\n      window.URL = window.URL || window.webkitURL;\n      var t = new Blob([\"var timeoutTime = \" + (1e3 * this._updateInterval).toFixed(1) + \";self.onmessage = function(msg){\\ttimeoutTime = parseInt(msg.data);};function tick(){\\tsetTimeout(tick, timeoutTime);\\tself.postMessage('tick');}tick();\"]),\n          e = URL.createObjectURL(t),\n          n = new Worker(e);\n      return n.addEventListener(\"message\", function () {\n        this.emit(\"tick\");\n      }.bind(this)), n.addEventListener(\"message\", function () {\n        var t = this.now();\n\n        if (this.isNumber(this._lastUpdate)) {\n          var e = t - this._lastUpdate;\n          this._computedUpdateInterval = Math.max(e, .97 * this._computedUpdateInterval);\n        }\n\n        this._lastUpdate = t;\n      }.bind(this)), n;\n    }, o.Context.prototype.getConstant = function (t) {\n      if (this._constants[t]) return this._constants[t];\n\n      for (var e = this._context.createBuffer(1, 128, this._context.sampleRate), n = e.getChannelData(0), o = 0; o < n.length; o++) n[o] = t;\n\n      var i = this._context.createBufferSource();\n\n      return i.channelCount = 1, i.channelCountMode = \"explicit\", i.buffer = e, i.loop = !0, i.start(0), this._constants[t] = i;\n    }, Object.defineProperty(o.Context.prototype, \"lag\", {\n      get: function () {\n        var t = this._computedUpdateInterval - this._updateInterval;\n        return t = Math.max(t, 0);\n      }\n    }), Object.defineProperty(o.Context.prototype, \"lookAhead\", {\n      get: function () {\n        return this._lookAhead;\n      },\n      set: function (t) {\n        this._lookAhead = t;\n      }\n    }), Object.defineProperty(o.Context.prototype, \"updateInterval\", {\n      get: function () {\n        return this._updateInterval;\n      },\n      set: function (t) {\n        this._updateInterval = Math.max(t, o.prototype.blockTime), this._worker.postMessage(Math.max(1e3 * t, 1));\n      }\n    }), Object.defineProperty(o.Context.prototype, \"latencyHint\", {\n      get: function () {\n        return this._latencyHint;\n      },\n      set: function (t) {\n        var e = t;\n        if (this._latencyHint = t, this.isString(t)) switch (t) {\n          case \"interactive\":\n            e = .1, this._context.latencyHint = t;\n            break;\n\n          case \"playback\":\n            e = .8, this._context.latencyHint = t;\n            break;\n\n          case \"balanced\":\n            e = .25, this._context.latencyHint = t;\n            break;\n\n          case \"fastest\":\n            e = .01;\n        }\n        this.lookAhead = e, this.updateInterval = e / 3;\n      }\n    }), o.supported ? (i = AudioNode.prototype.connect, r = AudioNode.prototype.disconnect, AudioNode.prototype.connect !== t && (AudioNode.prototype.connect = t, AudioNode.prototype.disconnect = function (e, t, n) {\n      if (e && e.input && Array.isArray(e.input)) o.prototype.isUndef(n) && (n = 0), this.disconnect(e.input[n], t, n);else if (e && e.input) this.disconnect(e.input, t, n);else try {\n        r.apply(this, arguments);\n      } catch (t) {\n        throw new Error(\"error disconnecting node: \" + e + \"\\n\" + t);\n      }\n    }), o.context = new o.Context()) : console.warn(\"This browser does not support Tone.js\"), o.Context;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(4), __webpack_require__(20), __webpack_require__(2), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (n) {\n    \"use strict\";\n\n    return n.Subtract = function (t) {\n      this.createInsOuts(2, 0), this._sum = this.input[0] = this.output = new n.Gain(), this._neg = new n.Negate(), this._param = this.input[1] = new n.Signal(t), this._param.chain(this._neg, this._sum);\n    }, n.extend(n.Subtract, n.Signal), n.Subtract.prototype.dispose = function () {\n      return n.prototype.dispose.call(this), this._neg.dispose(), this._neg = null, this._sum.disconnect(), this._sum = null, this._param.dispose(), this._param = null, this;\n    }, n.Subtract;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0)], __WEBPACK_AMD_DEFINE_RESULT__ = function (o) {\n    \"use strict\";\n\n    return o.Emitter = function () {\n      this._events = {};\n    }, o.extend(o.Emitter), o.Emitter.prototype.on = function (t, e) {\n      for (var i = t.split(/\\W+/), r = 0; r < i.length; r++) {\n        var n = i[r];\n        this._events.hasOwnProperty(n) || (this._events[n] = []), this._events[n].push(e);\n      }\n\n      return this;\n    }, o.Emitter.prototype.off = function (t, e) {\n      for (var i = t.split(/\\W+/), r = 0; r < i.length; r++) if (t = i[r], this._events.hasOwnProperty(t)) if (o.prototype.isUndef(e)) this._events[t] = [];else for (var n = this._events[t], s = 0; s < n.length; s++) n[s] === e && n.splice(s, 1);\n\n      return this;\n    }, o.Emitter.prototype.emit = function (t) {\n      if (this._events) {\n        var e = Array.apply(null, arguments).slice(1);\n        if (this._events.hasOwnProperty(t)) for (var i = this._events[t], r = 0, n = i.length; r < n; r++) i[r].apply(this, e);\n      }\n\n      return this;\n    }, o.Emitter.mixin = function (t) {\n      var e = [\"on\", \"off\", \"emit\"];\n      t._events = {};\n\n      for (var i = 0; i < e.length; i++) {\n        var r = e[i],\n            n = o.Emitter.prototype[r];\n        t[r] = n;\n      }\n    }, o.Emitter.prototype.dispose = function () {\n      return o.prototype.dispose.call(this), this._events = null, this;\n    }, o.Emitter;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0)], __WEBPACK_AMD_DEFINE_RESULT__ = function (c) {\n    \"use strict\";\n\n    return c.SignalBase = function () {}, c.extend(c.SignalBase), c.SignalBase.prototype.connect = function (e, n, a) {\n      return c.Signal && c.Signal === e.constructor || c.Param && c.Param === e.constructor || c.TimelineSignal && c.TimelineSignal === e.constructor ? (e._param.cancelScheduledValues(0), e._param.value = 0, e.overridden = !0) : e instanceof AudioParam && (e.cancelScheduledValues(0), e.value = 0), c.prototype.connect.call(this, e, n, a), this;\n    }, c.SignalBase;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(17)], __WEBPACK_AMD_DEFINE_RESULT__ = function (o) {\n    return o.Time = function (t, e) {\n      if (!(this instanceof o.Time)) return new o.Time(t, e);\n      this._plusNow = !1, o.TimeBase.call(this, t, e);\n    }, o.extend(o.Time, o.TimeBase), o.Time.prototype._unaryExpressions = Object.create(o.TimeBase.prototype._unaryExpressions), o.Time.prototype._unaryExpressions.quantize = {\n      regexp: /^@/,\n      method: function (t) {\n        return o.Transport.nextSubdivision(t());\n      }\n    }, o.Time.prototype._unaryExpressions.now = {\n      regexp: /^\\+/,\n      method: function (t) {\n        return this._plusNow = !0, t();\n      }\n    }, o.Time.prototype.quantize = function (t, e) {\n      return e = this.defaultArg(e, 1), this._expr = function (t, e, o) {\n        return t = t(), e = e.toSeconds(), t + (Math.round(t / e) * e - t) * o;\n      }.bind(this, this._expr, new this.constructor(t), e), this;\n    }, o.Time.prototype.addNow = function () {\n      return this._plusNow = !0, this;\n    }, o.Time.prototype._defaultExpr = function () {\n      return this._plusNow = !0, this._noOp;\n    }, o.Time.prototype.copy = function (t) {\n      return o.TimeBase.prototype.copy.call(this, t), this._plusNow = t._plusNow, this;\n    }, o.Time.prototype.toNotation = function () {\n      var t = this.toSeconds(),\n          e = this._toNotationHelper(t, [\"1m\", \"2n\", \"4n\", \"8n\", \"16n\", \"32n\", \"64n\", \"128n\"]),\n          o = this._toNotationHelper(t, [\"1m\", \"2n\", \"2t\", \"4n\", \"4t\", \"8n\", \"8t\", \"16n\", \"16t\", \"32n\", \"32t\", \"64n\", \"64t\", \"128n\"]);\n\n      return o.split(\"+\").length < e.split(\"+\").length ? o : e;\n    }, o.Time.prototype._toNotationHelper = function (t, e) {\n      for (var o = this._notationToUnits(e[e.length - 1]), n = \"\", i = 0; i < e.length; i++) {\n        var r = this._notationToUnits(e[i]),\n            s = t / r;\n\n        if (1 - s % 1 < 1e-6 && (s += 1e-6), 0 < (s = Math.floor(s))) {\n          if (n += 1 === s ? e[i] : s.toString() + \"*\" + e[i], (t -= s * r) < o) break;\n          n += \" + \";\n        }\n      }\n\n      return \"\" === n && (n = \"0\"), n;\n    }, o.Time.prototype._notationToUnits = function (t) {\n      for (var e = this._primaryExpressions, o = [e.n, e.t, e.m], n = 0; n < o.length; n++) {\n        var i = o[n],\n            r = t.match(i.regexp);\n        if (r) return i.method.call(this, r[1]);\n      }\n    }, o.Time.prototype.toBarsBeatsSixteenths = function () {\n      var t = this._beatsToUnits(1),\n          e = this.toSeconds() / t,\n          o = Math.floor(e / this._timeSignature()),\n          n = e % 1 * 4;\n\n      return e = Math.floor(e) % this._timeSignature(), 3 < (n = n.toString()).length && (n = parseFloat(n).toFixed(3)), [o, e, n].join(\":\");\n    }, o.Time.prototype.toTicks = function () {\n      var t = this._beatsToUnits(1),\n          e = this.valueOf() / t;\n\n      return Math.floor(e * o.Transport.PPQ);\n    }, o.Time.prototype.toSamples = function () {\n      return this.toSeconds() * this.context.sampleRate;\n    }, o.Time.prototype.toFrequency = function () {\n      return 1 / this.toSeconds();\n    }, o.Time.prototype.toSeconds = function () {\n      return this.valueOf();\n    }, o.Time.prototype.toMilliseconds = function () {\n      return 1e3 * this.toSeconds();\n    }, o.Time.prototype.valueOf = function () {\n      return this._expr() + (this._plusNow ? this.now() : 0);\n    }, o.Time;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0)], __WEBPACK_AMD_DEFINE_RESULT__ = function (n) {\n    return n.TimeBase = function (e, t) {\n      if (!(this instanceof n.TimeBase)) return new n.TimeBase(e, t);\n      if (this._expr = this._noOp, e instanceof n.TimeBase) this.copy(e);else if (!this.isUndef(t) || this.isNumber(e)) {\n        t = this.defaultArg(t, this._defaultUnits);\n        var r = this._primaryExpressions[t].method;\n        this._expr = r.bind(this, e);\n      } else this.isString(e) ? this.set(e) : this.isUndef(e) && (this._expr = this._defaultExpr());\n    }, n.extend(n.TimeBase), n.TimeBase.prototype.set = function (e) {\n      return this._expr = this._parseExprString(e), this;\n    }, n.TimeBase.prototype.clone = function () {\n      var e = new this.constructor();\n      return e.copy(this), e;\n    }, n.TimeBase.prototype.copy = function (e) {\n      var t = e._expr();\n\n      return this.set(t);\n    }, n.TimeBase.prototype._primaryExpressions = {\n      n: {\n        regexp: /^(\\d+)n/i,\n        method: function (e) {\n          return 1 === (e = parseInt(e)) ? this._beatsToUnits(this._timeSignature()) : this._beatsToUnits(4 / e);\n        }\n      },\n      t: {\n        regexp: /^(\\d+)t/i,\n        method: function (e) {\n          return e = parseInt(e), this._beatsToUnits(8 / (3 * parseInt(e)));\n        }\n      },\n      m: {\n        regexp: /^(\\d+)m/i,\n        method: function (e) {\n          return this._beatsToUnits(parseInt(e) * this._timeSignature());\n        }\n      },\n      i: {\n        regexp: /^(\\d+)i/i,\n        method: function (e) {\n          return this._ticksToUnits(parseInt(e));\n        }\n      },\n      hz: {\n        regexp: /^(\\d+(?:\\.\\d+)?)hz/i,\n        method: function (e) {\n          return this._frequencyToUnits(parseFloat(e));\n        }\n      },\n      tr: {\n        regexp: /^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?/,\n        method: function (e, t, r) {\n          var n = 0;\n          return e && \"0\" !== e && (n += this._beatsToUnits(this._timeSignature() * parseFloat(e))), t && \"0\" !== t && (n += this._beatsToUnits(parseFloat(t))), r && \"0\" !== r && (n += this._beatsToUnits(parseFloat(r) / 4)), n;\n        }\n      },\n      s: {\n        regexp: /^(\\d+(?:\\.\\d+)?s)/,\n        method: function (e) {\n          return this._secondsToUnits(parseFloat(e));\n        }\n      },\n      samples: {\n        regexp: /^(\\d+)samples/,\n        method: function (e) {\n          return parseInt(e) / this.context.sampleRate;\n        }\n      },\n      default: {\n        regexp: /^(\\d+(?:\\.\\d+)?)/,\n        method: function (e) {\n          return this._primaryExpressions[this._defaultUnits].method.call(this, e);\n        }\n      }\n    }, n.TimeBase.prototype._binaryExpressions = {\n      \"+\": {\n        regexp: /^\\+/,\n        precedence: 2,\n        method: function (e, t) {\n          return e() + t();\n        }\n      },\n      \"-\": {\n        regexp: /^\\-/,\n        precedence: 2,\n        method: function (e, t) {\n          return e() - t();\n        }\n      },\n      \"*\": {\n        regexp: /^\\*/,\n        precedence: 1,\n        method: function (e, t) {\n          return e() * t();\n        }\n      },\n      \"/\": {\n        regexp: /^\\//,\n        precedence: 1,\n        method: function (e, t) {\n          return e() / t();\n        }\n      }\n    }, n.TimeBase.prototype._unaryExpressions = {\n      neg: {\n        regexp: /^\\-/,\n        method: function (e) {\n          return -e();\n        }\n      }\n    }, n.TimeBase.prototype._syntaxGlue = {\n      \"(\": {\n        regexp: /^\\(/\n      },\n      \")\": {\n        regexp: /^\\)/\n      }\n    }, n.TimeBase.prototype._tokenize = function (e) {\n      for (var t = -1, r = []; 0 < e.length;) {\n        var n = i(e = e.trim(), this);\n        r.push(n), e = e.substr(n.value.length);\n      }\n\n      function i(e, t) {\n        for (var r = [\"_binaryExpressions\", \"_unaryExpressions\", \"_primaryExpressions\", \"_syntaxGlue\"], n = 0; n < r.length; n++) {\n          var i = t[r[n]];\n\n          for (var s in i) {\n            var o = i[s],\n                p = o.regexp,\n                a = e.match(p);\n            if (null !== a) return {\n              method: o.method,\n              precedence: o.precedence,\n              regexp: o.regexp,\n              value: a[0]\n            };\n          }\n        }\n\n        throw new SyntaxError(\"Tone.TimeBase: Unexpected token \" + e);\n      }\n\n      return {\n        next: function () {\n          return r[++t];\n        },\n        peek: function () {\n          return r[t + 1];\n        }\n      };\n    }, n.TimeBase.prototype._matchGroup = function (e, t, r) {\n      if (!this.isUndef(e)) for (var n in t) {\n        var i = t[n];\n\n        if (i.regexp.test(e.value)) {\n          if (this.isUndef(r)) return i;\n          if (i.precedence === r) return i;\n        }\n      }\n      return !1;\n    }, n.TimeBase.prototype._parseBinary = function (e, t) {\n      var r;\n      this.isUndef(t) && (t = 2), r = t < 0 ? this._parseUnary(e) : this._parseBinary(e, t - 1);\n\n      for (var n = e.peek(); n && this._matchGroup(n, this._binaryExpressions, t);) r = (n = e.next()).method.bind(this, r, this._parseBinary(e, t - 1)), n = e.peek();\n\n      return r;\n    }, n.TimeBase.prototype._parseUnary = function (e) {\n      var t, r;\n      t = e.peek();\n\n      var n = this._matchGroup(t, this._unaryExpressions);\n\n      return n ? (t = e.next(), r = this._parseUnary(e), n.method.bind(this, r)) : this._parsePrimary(e);\n    }, n.TimeBase.prototype._parsePrimary = function (e) {\n      var t, r;\n      if (t = e.peek(), this.isUndef(t)) throw new SyntaxError(\"Tone.TimeBase: Unexpected end of expression\");\n\n      if (this._matchGroup(t, this._primaryExpressions)) {\n        var n = (t = e.next()).value.match(t.regexp);\n        return t.method.bind(this, n[1], n[2], n[3]);\n      }\n\n      if (t && \"(\" === t.value) {\n        if (e.next(), r = this._parseBinary(e), !(t = e.next()) || \")\" !== t.value) throw new SyntaxError(\"Expected )\");\n        return r;\n      }\n\n      throw new SyntaxError(\"Tone.TimeBase: Cannot process token \" + t.value);\n    }, n.TimeBase.prototype._parseExprString = function (e) {\n      this.isString(e) || (e = e.toString());\n\n      var t = this._tokenize(e);\n\n      return this._parseBinary(t);\n    }, n.TimeBase.prototype._noOp = function () {\n      return 0;\n    }, n.TimeBase.prototype._defaultExpr = function () {\n      return this._noOp;\n    }, n.TimeBase.prototype._defaultUnits = \"s\", n.TimeBase.prototype._frequencyToUnits = function (e) {\n      return 1 / e;\n    }, n.TimeBase.prototype._beatsToUnits = function (e) {\n      return 60 / n.Transport.bpm.value * e;\n    }, n.TimeBase.prototype._secondsToUnits = function (e) {\n      return e;\n    }, n.TimeBase.prototype._ticksToUnits = function (e) {\n      return e * (this._beatsToUnits(1) / n.Transport.PPQ);\n    }, n.TimeBase.prototype._timeSignature = function () {\n      return n.Transport.timeSignature;\n    }, n.TimeBase.prototype._pushExpr = function (e, t, r) {\n      return e instanceof n.TimeBase || (e = new this.constructor(e, r)), this._expr = this._binaryExpressions[t].method.bind(this, this._expr, e._expr), this;\n    }, n.TimeBase.prototype.add = function (e, t) {\n      return this._pushExpr(e, \"+\", t);\n    }, n.TimeBase.prototype.sub = function (e, t) {\n      return this._pushExpr(e, \"-\", t);\n    }, n.TimeBase.prototype.mult = function (e, t) {\n      return this._pushExpr(e, \"*\", t);\n    }, n.TimeBase.prototype.div = function (e, t) {\n      return this._pushExpr(e, \"/\", t);\n    }, n.TimeBase.prototype.valueOf = function () {\n      return this._expr();\n    }, n.TimeBase.prototype.dispose = function () {\n      this._expr = null;\n    }, n.TimeBase;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (a) {\n    \"use strict\";\n\n    return a.Param = function () {\n      var t = this.optionsObject(arguments, [\"param\", \"units\", \"convert\"], a.Param.defaults);\n      this._param = this.input = t.param, this.units = t.units, this.convert = t.convert, this.overridden = !1, this._lfo = null, this.isObject(t.lfo) ? this.value = t.lfo : this.isUndef(t.value) || (this.value = t.value);\n    }, a.extend(a.Param), a.Param.defaults = {\n      units: a.Type.Default,\n      convert: !0,\n      param: void 0\n    }, Object.defineProperty(a.Param.prototype, \"value\", {\n      get: function () {\n        return this._toUnits(this._param.value);\n      },\n      set: function (t) {\n        if (this.isObject(t)) {\n          if (this.isUndef(a.LFO)) throw new Error(\"Include 'Tone.LFO' to use an LFO as a Param value.\");\n          this._lfo && this._lfo.dispose(), this._lfo = new a.LFO(t).start(), this._lfo.connect(this.input);\n        } else {\n          var e = this._fromUnits(t);\n\n          this._param.cancelScheduledValues(0), this._param.value = e;\n        }\n      }\n    }), a.Param.prototype._fromUnits = function (t) {\n      if (!this.convert && !this.isUndef(this.convert)) return t;\n\n      switch (this.units) {\n        case a.Type.Time:\n          return this.toSeconds(t);\n\n        case a.Type.Frequency:\n          return this.toFrequency(t);\n\n        case a.Type.Decibels:\n          return this.dbToGain(t);\n\n        case a.Type.NormalRange:\n          return Math.min(Math.max(t, 0), 1);\n\n        case a.Type.AudioRange:\n          return Math.min(Math.max(t, -1), 1);\n\n        case a.Type.Positive:\n          return Math.max(t, 0);\n\n        default:\n          return t;\n      }\n    }, a.Param.prototype._toUnits = function (t) {\n      if (!this.convert && !this.isUndef(this.convert)) return t;\n\n      switch (this.units) {\n        case a.Type.Decibels:\n          return this.gainToDb(t);\n\n        default:\n          return t;\n      }\n    }, a.Param.prototype._minOutput = 1e-5, a.Param.prototype.setValueAtTime = function (t, e) {\n      return t = this._fromUnits(t), (e = this.toSeconds(e)) <= this.now() + this.blockTime ? this._param.value = t : this._param.setValueAtTime(t, e), this;\n    }, a.Param.prototype.setRampPoint = function (t) {\n      t = this.defaultArg(t, this.now());\n      var e = this._param.value;\n      return 0 === e && (e = this._minOutput), this._param.setValueAtTime(e, t), this;\n    }, a.Param.prototype.linearRampToValueAtTime = function (t, e) {\n      return t = this._fromUnits(t), this._param.linearRampToValueAtTime(t, this.toSeconds(e)), this;\n    }, a.Param.prototype.exponentialRampToValueAtTime = function (t, e) {\n      return t = this._fromUnits(t), t = Math.max(this._minOutput, t), this._param.exponentialRampToValueAtTime(t, this.toSeconds(e)), this;\n    }, a.Param.prototype.exponentialRampToValue = function (t, e, i) {\n      return i = this.toSeconds(i), this.setRampPoint(i), this.exponentialRampToValueAtTime(t, i + this.toSeconds(e)), this;\n    }, a.Param.prototype.linearRampToValue = function (t, e, i) {\n      return i = this.toSeconds(i), this.setRampPoint(i), this.linearRampToValueAtTime(t, i + this.toSeconds(e)), this;\n    }, a.Param.prototype.setTargetAtTime = function (t, e, i) {\n      return t = this._fromUnits(t), t = Math.max(this._minOutput, t), i = Math.max(this._minOutput, i), this._param.setTargetAtTime(t, this.toSeconds(e), i), this;\n    }, a.Param.prototype.setValueCurveAtTime = function (t, e, i) {\n      for (var a = 0; a < t.length; a++) t[a] = this._fromUnits(t[a]);\n\n      return this._param.setValueCurveAtTime(t, this.toSeconds(e), this.toSeconds(i)), this;\n    }, a.Param.prototype.cancelScheduledValues = function (t) {\n      return this._param.cancelScheduledValues(this.toSeconds(t)), this;\n    }, a.Param.prototype.rampTo = function (t, e, i) {\n      return e = this.defaultArg(e, 0), this.units === a.Type.Frequency || this.units === a.Type.BPM || this.units === a.Type.Decibels ? this.exponentialRampToValue(t, e, i) : this.linearRampToValue(t, e, i), this;\n    }, Object.defineProperty(a.Param.prototype, \"lfo\", {\n      get: function () {\n        return this._lfo;\n      }\n    }), a.Param.prototype.dispose = function () {\n      return a.prototype.dispose.call(this), this._param = null, this._lfo && (this._lfo.dispose(), this._lfo = null), this;\n    }, a.Param;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (i) {\n    \"use strict\";\n\n    return i.Timeline = function () {\n      var e = this.optionsObject(arguments, [\"memory\"], i.Timeline.defaults);\n      this._timeline = [], this._toRemove = [], this._iterating = !1, this.memory = e.memory;\n    }, i.extend(i.Timeline), i.Timeline.defaults = {\n      memory: 1 / 0\n    }, Object.defineProperty(i.Timeline.prototype, \"length\", {\n      get: function () {\n        return this._timeline.length;\n      }\n    }), i.Timeline.prototype.add = function (e) {\n      if (this.isUndef(e.time)) throw new Error(\"Tone.Timeline: events must have a time attribute\");\n\n      if (this._timeline.length) {\n        var i = this._search(e.time);\n\n        this._timeline.splice(i + 1, 0, e);\n      } else this._timeline.push(e);\n\n      if (this.length > this.memory) {\n        var t = this.length - this.memory;\n\n        this._timeline.splice(0, t);\n      }\n\n      return this;\n    }, i.Timeline.prototype.remove = function (e) {\n      if (this._iterating) this._toRemove.push(e);else {\n        var i = this._timeline.indexOf(e);\n\n        -1 !== i && this._timeline.splice(i, 1);\n      }\n      return this;\n    }, i.Timeline.prototype.get = function (e) {\n      var i = this._search(e);\n\n      return -1 !== i ? this._timeline[i] : null;\n    }, i.Timeline.prototype.peek = function () {\n      return this._timeline[0];\n    }, i.Timeline.prototype.shift = function () {\n      return this._timeline.shift();\n    }, i.Timeline.prototype.getAfter = function (e) {\n      var i = this._search(e);\n\n      return i + 1 < this._timeline.length ? this._timeline[i + 1] : null;\n    }, i.Timeline.prototype.getBefore = function (e) {\n      var i = this._timeline.length;\n      if (0 < i && this._timeline[i - 1].time < e) return this._timeline[i - 1];\n\n      var t = this._search(e);\n\n      return 0 <= t - 1 ? this._timeline[t - 1] : null;\n    }, i.Timeline.prototype.cancel = function (e) {\n      if (1 < this._timeline.length) {\n        var i = this._search(e);\n\n        if (0 <= i) {\n          if (this._timeline[i].time === e) {\n            for (var t = i; 0 <= t && this._timeline[t].time === e; t--) i = t;\n\n            this._timeline = this._timeline.slice(0, i);\n          } else this._timeline = this._timeline.slice(0, i + 1);\n        } else this._timeline = [];\n      } else 1 === this._timeline.length && this._timeline[0].time >= e && (this._timeline = []);\n\n      return this;\n    }, i.Timeline.prototype.cancelBefore = function (e) {\n      if (this._timeline.length) {\n        var i = this._search(e);\n\n        0 <= i && (this._timeline = this._timeline.slice(i + 1));\n      }\n\n      return this;\n    }, i.Timeline.prototype._search = function (e) {\n      var i = 0,\n          t = this._timeline.length,\n          n = t;\n      if (0 < t && this._timeline[t - 1].time <= e) return t - 1;\n\n      for (; i < n;) {\n        var r = Math.floor(i + (n - i) / 2),\n            s = this._timeline[r],\n            h = this._timeline[r + 1];\n\n        if (s.time === e) {\n          for (var l = r; l < this._timeline.length; l++) {\n            this._timeline[l].time === e && (r = l);\n          }\n\n          return r;\n        }\n\n        if (s.time < e && h.time > e) return r;\n        s.time > e ? n = r : s.time < e && (i = r + 1);\n      }\n\n      return -1;\n    }, i.Timeline.prototype._iterate = function (e, i, t) {\n      this._iterating = !0, i = this.defaultArg(i, 0), t = this.defaultArg(t, this._timeline.length - 1);\n\n      for (var n = i; n <= t; n++) e(this._timeline[n]);\n\n      if (this._iterating = !1, 0 < this._toRemove.length) {\n        for (var r = 0; r < this._toRemove.length; r++) {\n          var s = this._timeline.indexOf(this._toRemove[r]);\n\n          -1 !== s && this._timeline.splice(s, 1);\n        }\n\n        this._toRemove = [];\n      }\n    }, i.Timeline.prototype.forEach = function (e) {\n      return this._iterate(e), this;\n    }, i.Timeline.prototype.forEachBefore = function (e, i) {\n      var t = this._search(e);\n\n      return -1 !== t && this._iterate(i, 0, t), this;\n    }, i.Timeline.prototype.forEachAfter = function (e, i) {\n      var t = this._search(e);\n\n      return this._iterate(i, t + 1), this;\n    }, i.Timeline.prototype.forEachFrom = function (e, i) {\n      for (var t = this._search(e); 0 <= t && this._timeline[t].time >= e;) t--;\n\n      return this._iterate(i, t + 1), this;\n    }, i.Timeline.prototype.forEachAtTime = function (i, t) {\n      var e = this._search(i);\n\n      return -1 !== e && this._iterate(function (e) {\n        e.time === i && t(e);\n      }, 0, e), this;\n    }, i.Timeline.prototype.dispose = function () {\n      i.prototype.dispose.call(this), this._timeline = null, this._toRemove = null;\n    }, i.Timeline;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(1), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (t) {\n    \"use strict\";\n\n    return t.Negate = function () {\n      this._multiply = this.input = this.output = new t.Multiply(-1);\n    }, t.extend(t.Negate, t.SignalBase), t.Negate.prototype.dispose = function () {\n      return t.prototype.dispose.call(this), this._multiply.dispose(), this._multiply = null, this;\n    }, t.Negate;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(2), __webpack_require__(1), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (e) {\n    \"use strict\";\n\n    return e.GreaterThanZero = function () {\n      this._thresh = this.output = new e.WaveShaper(function (e) {\n        return e <= 0 ? 0 : 1;\n      }, 127), this._scale = this.input = new e.Multiply(1e4), this._scale.connect(this._thresh);\n    }, e.extend(e.GreaterThanZero, e.SignalBase), e.GreaterThanZero.prototype.dispose = function () {\n      return e.prototype.dispose.call(this), this._scale.dispose(), this._scale = null, this._thresh.dispose(), this._thresh = null, this;\n    }, e.GreaterThanZero;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !function (e, t) {\n    true ? !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = t, __WEBPACK_AMD_DEFINE_RESULT__ = typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? __WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__) : __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)) : undefined;\n  }(this, function () {\n    var r = function (e, t) {\n      this._dragged = !1, this._element = e, this._bindedMove = this._moved.bind(this), this._bindedEnd = this._ended.bind(this, t), e.addEventListener(\"touchstart\", this._bindedEnd), e.addEventListener(\"touchmove\", this._bindedMove), e.addEventListener(\"touchend\", this._bindedEnd), e.addEventListener(\"mouseup\", this._bindedEnd);\n    };\n\n    function o(e) {\n      return \"running\" === e.state;\n    }\n\n    return r.prototype._moved = function (e) {\n      this._dragged = !0;\n    }, r.prototype._ended = function (e) {\n      this._dragged || function (e) {\n        var t = e.createBuffer(1, 1, e.sampleRate),\n            n = e.createBufferSource();\n        n.buffer = t, n.connect(e.destination), n.start(0), e.resume && e.resume();\n      }(e), this._dragged = !1;\n    }, r.prototype.dispose = function () {\n      this._element.removeEventListener(\"touchstart\", this._bindedEnd), this._element.removeEventListener(\"touchmove\", this._bindedMove), this._element.removeEventListener(\"touchend\", this._bindedEnd), this._element.removeEventListener(\"mouseup\", this._bindedEnd), this._bindedMove = null, this._bindedEnd = null, this._element = null;\n    }, function (t, e, n) {\n      var i = new Promise(function (e) {\n        !function (t, n) {\n          o(t) ? n() : function e() {\n            o(t) ? n() : (requestAnimationFrame(e), t.resume && t.resume());\n          }();\n        }(t, e);\n      }),\n          d = [];\n      return function e(t, n, i) {\n        if (Array.isArray(t) || NodeList && t instanceof NodeList) for (var d = 0; d < t.length; d++) e(t[d], n, i);else if (\"string\" == typeof t) e(document.querySelectorAll(t), n, i);else if (t.jquery && \"function\" == typeof t.toArray) e(t.toArray(), n, i);else if (Element && t instanceof Element) {\n          var o = new r(t, i);\n          n.push(o);\n        }\n      }(e = e || document.body, d, t), i.then(function () {\n        for (var e = 0; e < d.length; e++) d[e].dispose();\n\n        d = null, n && n();\n      }), i;\n    };\n  });\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(2), __webpack_require__(32), __webpack_require__(38), __webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = function (i) {\n    \"use strict\";\n\n    return i.CrossFade = function (e) {\n      this.createInsOuts(2, 1), this.a = this.input[0] = new i.Gain(), this.b = this.input[1] = new i.Gain(), this.fade = new i.Signal(this.defaultArg(e, .5), i.Type.NormalRange), this._equalPowerA = new i.EqualPowerGain(), this._equalPowerB = new i.EqualPowerGain(), this._invert = new i.Expr(\"1 - $0\"), this.a.connect(this.output), this.b.connect(this.output), this.fade.chain(this._equalPowerB, this.b.gain), this.fade.chain(this._invert, this._equalPowerA, this.a.gain), this._readOnly(\"fade\");\n    }, i.extend(i.CrossFade), i.CrossFade.prototype.dispose = function () {\n      return i.prototype.dispose.call(this), this._writable(\"fade\"), this._equalPowerA.dispose(), this._equalPowerA = null, this._equalPowerB.dispose(), this._equalPowerB = null, this.fade.dispose(), this.fade = null, this._invert.dispose(), this._invert = null, this.a.dispose(), this.a = null, this.b.dispose(), this.b = null, this;\n    }, i.CrossFade;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports) {\n  !function () {\n    var l,\n        s = [];\n\n    function p(e) {\n      var o = this,\n          n = {},\n          i = -1;\n      this.parameters.forEach(function (e, t) {\n        var r = s[++i] || (s[i] = new Float32Array(o.bufferSize));\n        r.fill(e.value), n[t] = r;\n      }), this.processor.realm.exec(\"self.sampleRate=sampleRate=\" + this.context.sampleRate + \";self.currentTime=currentTime=\" + this.context.currentTime);\n      var t = a(e.inputBuffer),\n          r = a(e.outputBuffer);\n      this.instance.process([t], [r], n);\n    }\n\n    function a(e) {\n      for (var t = [], r = 0; r < e.numberOfChannels; r++) t[r] = e.getChannelData(r);\n\n      return t;\n    }\n\n    function f(e) {\n      return e.$$processors || (e.$$processors = {});\n    }\n\n    function e(e) {\n      this.$$context = e;\n    }\n\n    \"function\" != typeof AudioWorkletNode && (self.AudioWorkletNode = function (e, t, r) {\n      var o = f(e)[t],\n          n = e.createScriptProcessor(void 0, 2, r && r.outputChannelCount ? r.outputChannelCount[0] : 2);\n      if (n.parameters = new Map(), o.properties) for (var i = 0; i < o.properties.length; i++) {\n        var s = o.properties[i],\n            a = e.createGain().gain;\n        a.value = s.defaultValue, n.parameters.set(s.name, a);\n      }\n      var u = new MessageChannel();\n      l = u.port2;\n      var c = new o.Processor(r || {});\n      return l = null, n.port = u.port1, n.processor = o, n.instance = c, n.onaudioprocess = p, n;\n    }, Object.defineProperty((self.AudioContext || self.webkitAudioContext).prototype, \"audioWorklet\", {\n      get: function () {\n        return this.$$audioWorklet || (this.$$audioWorklet = new self.AudioWorklet(this));\n      }\n    }), self.AudioWorklet = (e.prototype.addModule = function (e, t) {\n      var n = this;\n      return fetch(e).then(function (e) {\n        if (!e.ok) throw Error(e.status);\n        return e.text();\n      }).then(function (e) {\n        var r = {\n          sampleRate: 0,\n          currentTime: 0,\n          AudioWorkletProcessor: function () {\n            this.port = l;\n          },\n          registerProcessor: function (e, t) {\n            f(n.$$context)[e] = {\n              realm: o,\n              context: r,\n              Processor: t,\n              properties: t.parameterDescriptors || []\n            };\n          }\n        },\n            o = new function (e, t) {\n          var r = document.createElement(\"iframe\");\n          r.style.cssText = \"position:absolute;left:0;top:-999px;width:1px;height:1px;\", t.appendChild(r);\n          var o = r.contentWindow,\n              n = o.document,\n              i = \"var window,$hook\";\n\n          for (var s in o) s in e || \"eval\" === s || (i += \",\", i += s);\n\n          for (var a in e) i += \",\", i += a, i += \"=self.\", i += a;\n\n          var u = n.createElement(\"script\");\n          u.appendChild(n.createTextNode('function $hook(self,console) {\"use strict\";\\n        ' + i + \";return function() {return eval(arguments[0])}}\")), n.body.appendChild(u), this.exec = o.$hook(e, console);\n        }(r.self = r, document.documentElement);\n        return o.exec((t && t.transpile || String)(e)), null;\n      });\n    }, e));\n  }();\n}, function (module, exports) {\n  /**\n   * This module has shims\n   */\n  (function () {\n    function fixSetTarget(param) {\n      if (!param) return;\n      if (!param.setTargetAtTime) param.setTargetAtTime = param.setTargetValueAtTime;\n    }\n\n    if (window.hasOwnProperty('webkitAudioContext') && !window.hasOwnProperty('AudioContext')) {\n      window.AudioContext = window.webkitAudioContext;\n      if (typeof AudioContext.prototype.createGain !== 'function') AudioContext.prototype.createGain = AudioContext.prototype.createGainNode;\n      if (typeof AudioContext.prototype.createDelay !== 'function') AudioContext.prototype.createDelay = AudioContext.prototype.createDelayNode;\n      if (typeof AudioContext.prototype.createScriptProcessor !== 'function') AudioContext.prototype.createScriptProcessor = AudioContext.prototype.createJavaScriptNode;\n      if (typeof AudioContext.prototype.createPeriodicWave !== 'function') AudioContext.prototype.createPeriodicWave = AudioContext.prototype.createWaveTable;\n      AudioContext.prototype.internal_createGain = AudioContext.prototype.createGain;\n\n      AudioContext.prototype.createGain = function () {\n        var node = this.internal_createGain();\n        fixSetTarget(node.gain);\n        return node;\n      };\n\n      AudioContext.prototype.internal_createDelay = AudioContext.prototype.createDelay;\n\n      AudioContext.prototype.createDelay = function (maxDelayTime) {\n        var node = maxDelayTime ? this.internal_createDelay(maxDelayTime) : this.internal_createDelay();\n        fixSetTarget(node.delayTime);\n        return node;\n      };\n\n      AudioContext.prototype.internal_createBufferSource = AudioContext.prototype.createBufferSource;\n\n      AudioContext.prototype.createBufferSource = function () {\n        var node = this.internal_createBufferSource();\n\n        if (!node.start) {\n          node.start = function (when, offset, duration) {\n            if (offset || duration) this.noteGrainOn(when || 0, offset, duration);else this.noteOn(when || 0);\n          };\n        } else {\n          node.internal_start = node.start;\n\n          node.start = function (when, offset, duration) {\n            if (typeof duration !== 'undefined') node.internal_start(when || 0, offset, duration);else node.internal_start(when || 0, offset || 0);\n          };\n        }\n\n        if (!node.stop) {\n          node.stop = function (when) {\n            this.noteOff(when || 0);\n          };\n        } else {\n          node.internal_stop = node.stop;\n\n          node.stop = function (when) {\n            node.internal_stop(when || 0);\n          };\n        }\n\n        fixSetTarget(node.playbackRate);\n        return node;\n      };\n\n      AudioContext.prototype.internal_createDynamicsCompressor = AudioContext.prototype.createDynamicsCompressor;\n\n      AudioContext.prototype.createDynamicsCompressor = function () {\n        var node = this.internal_createDynamicsCompressor();\n        fixSetTarget(node.threshold);\n        fixSetTarget(node.knee);\n        fixSetTarget(node.ratio);\n        fixSetTarget(node.reduction);\n        fixSetTarget(node.attack);\n        fixSetTarget(node.release);\n        return node;\n      };\n\n      AudioContext.prototype.internal_createBiquadFilter = AudioContext.prototype.createBiquadFilter;\n\n      AudioContext.prototype.createBiquadFilter = function () {\n        var node = this.internal_createBiquadFilter();\n        fixSetTarget(node.frequency);\n        fixSetTarget(node.detune);\n        fixSetTarget(node.Q);\n        fixSetTarget(node.gain);\n        return node;\n      };\n\n      if (typeof AudioContext.prototype.createOscillator !== 'function') {\n        AudioContext.prototype.internal_createOscillator = AudioContext.prototype.createOscillator;\n\n        AudioContext.prototype.createOscillator = function () {\n          var node = this.internal_createOscillator();\n\n          if (!node.start) {\n            node.start = function (when) {\n              this.noteOn(when || 0);\n            };\n          } else {\n            node.internal_start = node.start;\n\n            node.start = function (when) {\n              node.internal_start(when || 0);\n            };\n          }\n\n          if (!node.stop) {\n            node.stop = function (when) {\n              this.noteOff(when || 0);\n            };\n          } else {\n            node.internal_stop = node.stop;\n\n            node.stop = function (when) {\n              node.internal_stop(when || 0);\n            };\n          }\n\n          if (!node.setPeriodicWave) node.setPeriodicWave = node.setWaveTable;\n          fixSetTarget(node.frequency);\n          fixSetTarget(node.detune);\n          return node;\n        };\n      }\n    }\n\n    if (window.hasOwnProperty('webkitOfflineAudioContext') && !window.hasOwnProperty('OfflineAudioContext')) {\n      window.OfflineAudioContext = window.webkitOfflineAudioContext;\n    }\n  })(window);\n\n  navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n  /**\n   * Determine which filetypes are supported (inspired by buzz.js)\n   * The audio element (el) will only be used to test browser support for various audio formats\n   */\n\n  var el = document.createElement('audio');\n\n  p5.prototype.isSupported = function () {\n    return !!el.canPlayType;\n  };\n\n  var isOGGSupported = function isOGGSupported() {\n    return !!el.canPlayType && el.canPlayType('audio/ogg; codecs=\"vorbis\"');\n  };\n\n  var isMP3Supported = function isMP3Supported() {\n    return !!el.canPlayType && el.canPlayType('audio/mpeg;');\n  };\n\n  var isWAVSupported = function isWAVSupported() {\n    return !!el.canPlayType && el.canPlayType('audio/wav; codecs=\"1\"');\n  };\n\n  var isAACSupported = function isAACSupported() {\n    return !!el.canPlayType && (el.canPlayType('audio/x-m4a;') || el.canPlayType('audio/aac;'));\n  };\n\n  var isAIFSupported = function isAIFSupported() {\n    return !!el.canPlayType && el.canPlayType('audio/x-aiff;');\n  };\n\n  p5.prototype.isFileSupported = function (extension) {\n    switch (extension.toLowerCase()) {\n      case 'mp3':\n        return isMP3Supported();\n\n      case 'wav':\n        return isWAVSupported();\n\n      case 'ogg':\n        return isOGGSupported();\n\n      case 'aac':\n      case 'm4a':\n      case 'mp4':\n        return isAACSupported();\n\n      case 'aif':\n      case 'aiff':\n        return isAIFSupported();\n\n      default:\n        return false;\n    }\n  };\n}, function (module, exports) {\n  var g;\n\n  g = function () {\n    return this;\n  }();\n\n  try {\n    g = g || new Function(\"return this\")();\n  } catch (t) {\n    \"object\" == typeof window && (g = window);\n  }\n\n  module.exports = g;\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n\n  __webpack_exports__[\"default\"] = \"function _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \\\"function\\\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \\\"function\\\") { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } if (typeof _cache !== \\\"undefined\\\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\\n\\nfunction isNativeReflectConstruct() { if (typeof Reflect === \\\"undefined\\\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \\\"function\\\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\\n\\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\\n\\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\\\"[native code]\\\") !== -1; }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\n// import dependencies via preval.require so that they're available as values at compile time\\nvar processorNames = {\\n  \\\"recorderProcessor\\\": \\\"recorder-processor\\\",\\n  \\\"soundFileProcessor\\\": \\\"sound-file-processor\\\",\\n  \\\"amplitudeProcessor\\\": \\\"amplitude-processor\\\"\\n};\\nvar RingBuffer = {\\n  \\\"default\\\":\\n  /*#__PURE__*/\\n  function () {\\n    /**\\n     * @constructor\\n     * @param  {number} length Buffer length in frames.\\n     * @param  {number} channelCount Buffer channel count.\\n     */\\n    function RingBuffer(length, channelCount) {\\n      _classCallCheck(this, RingBuffer);\\n\\n      this._readIndex = 0;\\n      this._writeIndex = 0;\\n      this._framesAvailable = 0;\\n      this._channelCount = channelCount;\\n      this._length = length;\\n      this._channelData = [];\\n\\n      for (var i = 0; i < this._channelCount; ++i) {\\n        this._channelData[i] = new Float32Array(length);\\n      }\\n    }\\n    /**\\n     * Getter for Available frames in buffer.\\n     *\\n     * @return {number} Available frames in buffer.\\n     */\\n\\n\\n    _createClass(RingBuffer, [{\\n      key: \\\"push\\\",\\n\\n      /**\\n       * Push a sequence of Float32Arrays to buffer.\\n       *\\n       * @param  {array} arraySequence A sequence of Float32Arrays.\\n       */\\n      value: function push(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // Transfer data from the |arraySequence| storage to the internal buffer.\\n        var sourceLength = arraySequence[0] ? arraySequence[0].length : 0;\\n\\n        for (var i = 0; i < sourceLength; ++i) {\\n          var writeIndex = (this._writeIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            this._channelData[channel][writeIndex] = arraySequence[channel][i];\\n          }\\n        }\\n\\n        this._writeIndex += sourceLength;\\n\\n        if (this._writeIndex >= this._length) {\\n          this._writeIndex = 0;\\n        } // For excessive frames, the buffer will be overwritten.\\n\\n\\n        this._framesAvailable += sourceLength;\\n\\n        if (this._framesAvailable > this._length) {\\n          this._framesAvailable = this._length;\\n        }\\n      }\\n      /**\\n       * Pull data out of buffer and fill a given sequence of Float32Arrays.\\n       *\\n       * @param  {array} arraySequence An array of Float32Arrays.\\n       */\\n\\n    }, {\\n      key: \\\"pull\\\",\\n      value: function pull(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // If the FIFO is completely empty, do nothing.\\n        if (this._framesAvailable === 0) {\\n          return;\\n        }\\n\\n        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.\\n\\n        for (var i = 0; i < destinationLength; ++i) {\\n          var readIndex = (this._readIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            arraySequence[channel][i] = this._channelData[channel][readIndex];\\n          }\\n        }\\n\\n        this._readIndex += destinationLength;\\n\\n        if (this._readIndex >= this._length) {\\n          this._readIndex = 0;\\n        }\\n\\n        this._framesAvailable -= destinationLength;\\n\\n        if (this._framesAvailable < 0) {\\n          this._framesAvailable = 0;\\n        }\\n      }\\n    }, {\\n      key: \\\"framesAvailable\\\",\\n      get: function get() {\\n        return this._framesAvailable;\\n      }\\n    }]);\\n\\n    return RingBuffer;\\n  }()\\n}[\\\"default\\\"];\\n\\nvar RecorderProcessor =\\n/*#__PURE__*/\\nfunction (_AudioWorkletProcesso) {\\n  _inherits(RecorderProcessor, _AudioWorkletProcesso);\\n\\n  function RecorderProcessor(options) {\\n    var _this;\\n\\n    _classCallCheck(this, RecorderProcessor);\\n\\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RecorderProcessor).call(this));\\n    var processorOptions = options.processorOptions || {};\\n    _this.numOutputChannels = options.outputChannelCount || 2;\\n    _this.numInputChannels = processorOptions.numInputChannels || 2;\\n    _this.bufferSize = processorOptions.bufferSize || 1024;\\n    _this.recording = false;\\n\\n    _this.clear();\\n\\n    _this.port.onmessage = function (event) {\\n      var data = event.data;\\n\\n      if (data.name === 'start') {\\n        _this.record(data.duration);\\n      } else if (data.name === 'stop') {\\n        _this.stop();\\n      }\\n    };\\n\\n    return _this;\\n  }\\n\\n  _createClass(RecorderProcessor, [{\\n    key: \\\"process\\\",\\n    value: function process(inputs) {\\n      if (!this.recording) {\\n        return true;\\n      } else if (this.sampleLimit && this.recordedSamples >= this.sampleLimit) {\\n        this.stop();\\n        return true;\\n      }\\n\\n      var input = inputs[0];\\n      this.inputRingBuffer.push(input);\\n\\n      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {\\n        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);\\n\\n        for (var channel = 0; channel < this.numOutputChannels; ++channel) {\\n          var inputChannelCopy = this.inputRingBufferArraySequence[channel].slice();\\n\\n          if (channel === 0) {\\n            this.leftBuffers.push(inputChannelCopy);\\n\\n            if (this.numInputChannels === 1) {\\n              this.rightBuffers.push(inputChannelCopy);\\n            }\\n          } else if (channel === 1 && this.numInputChannels > 1) {\\n            this.rightBuffers.push(inputChannelCopy);\\n          }\\n        }\\n\\n        this.recordedSamples += this.bufferSize;\\n      }\\n\\n      return true;\\n    }\\n  }, {\\n    key: \\\"record\\\",\\n    value: function record(duration) {\\n      if (duration) {\\n        this.sampleLimit = Math.round(duration * sampleRate);\\n      }\\n\\n      this.recording = true;\\n    }\\n  }, {\\n    key: \\\"stop\\\",\\n    value: function stop() {\\n      this.recording = false;\\n      var buffers = this.getBuffers();\\n      var leftBuffer = buffers[0].buffer;\\n      var rightBuffer = buffers[1].buffer;\\n      this.port.postMessage({\\n        name: 'buffers',\\n        leftBuffer: leftBuffer,\\n        rightBuffer: rightBuffer\\n      }, [leftBuffer, rightBuffer]);\\n      this.clear();\\n    }\\n  }, {\\n    key: \\\"getBuffers\\\",\\n    value: function getBuffers() {\\n      var buffers = [];\\n      buffers.push(this.mergeBuffers(this.leftBuffers));\\n      buffers.push(this.mergeBuffers(this.rightBuffers));\\n      return buffers;\\n    }\\n  }, {\\n    key: \\\"mergeBuffers\\\",\\n    value: function mergeBuffers(channelBuffer) {\\n      var result = new Float32Array(this.recordedSamples);\\n      var offset = 0;\\n      var lng = channelBuffer.length;\\n\\n      for (var i = 0; i < lng; i++) {\\n        var buffer = channelBuffer[i];\\n        result.set(buffer, offset);\\n        offset += buffer.length;\\n      }\\n\\n      return result;\\n    }\\n  }, {\\n    key: \\\"clear\\\",\\n    value: function clear() {\\n      var _this2 = this;\\n\\n      this.leftBuffers = [];\\n      this.rightBuffers = [];\\n      this.inputRingBuffer = new RingBuffer(this.bufferSize, this.numInputChannels);\\n      this.inputRingBufferArraySequence = new Array(this.numInputChannels).fill(null).map(function () {\\n        return new Float32Array(_this2.bufferSize);\\n      });\\n      this.recordedSamples = 0;\\n      this.sampleLimit = null;\\n    }\\n  }]);\\n\\n  return RecorderProcessor;\\n}(_wrapNativeSuper(AudioWorkletProcessor));\\n\\nregisterProcessor(processorNames.recorderProcessor, RecorderProcessor);\";\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n\n  __webpack_exports__[\"default\"] = \"function _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \\\"function\\\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \\\"function\\\") { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } if (typeof _cache !== \\\"undefined\\\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\\n\\nfunction isNativeReflectConstruct() { if (typeof Reflect === \\\"undefined\\\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \\\"function\\\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\\n\\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\\n\\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\\\"[native code]\\\") !== -1; }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\n// import dependencies via preval.require so that they're available as values at compile time\\nvar processorNames = {\\n  \\\"recorderProcessor\\\": \\\"recorder-processor\\\",\\n  \\\"soundFileProcessor\\\": \\\"sound-file-processor\\\",\\n  \\\"amplitudeProcessor\\\": \\\"amplitude-processor\\\"\\n};\\nvar RingBuffer = {\\n  \\\"default\\\":\\n  /*#__PURE__*/\\n  function () {\\n    /**\\n     * @constructor\\n     * @param  {number} length Buffer length in frames.\\n     * @param  {number} channelCount Buffer channel count.\\n     */\\n    function RingBuffer(length, channelCount) {\\n      _classCallCheck(this, RingBuffer);\\n\\n      this._readIndex = 0;\\n      this._writeIndex = 0;\\n      this._framesAvailable = 0;\\n      this._channelCount = channelCount;\\n      this._length = length;\\n      this._channelData = [];\\n\\n      for (var i = 0; i < this._channelCount; ++i) {\\n        this._channelData[i] = new Float32Array(length);\\n      }\\n    }\\n    /**\\n     * Getter for Available frames in buffer.\\n     *\\n     * @return {number} Available frames in buffer.\\n     */\\n\\n\\n    _createClass(RingBuffer, [{\\n      key: \\\"push\\\",\\n\\n      /**\\n       * Push a sequence of Float32Arrays to buffer.\\n       *\\n       * @param  {array} arraySequence A sequence of Float32Arrays.\\n       */\\n      value: function push(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // Transfer data from the |arraySequence| storage to the internal buffer.\\n        var sourceLength = arraySequence[0] ? arraySequence[0].length : 0;\\n\\n        for (var i = 0; i < sourceLength; ++i) {\\n          var writeIndex = (this._writeIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            this._channelData[channel][writeIndex] = arraySequence[channel][i];\\n          }\\n        }\\n\\n        this._writeIndex += sourceLength;\\n\\n        if (this._writeIndex >= this._length) {\\n          this._writeIndex = 0;\\n        } // For excessive frames, the buffer will be overwritten.\\n\\n\\n        this._framesAvailable += sourceLength;\\n\\n        if (this._framesAvailable > this._length) {\\n          this._framesAvailable = this._length;\\n        }\\n      }\\n      /**\\n       * Pull data out of buffer and fill a given sequence of Float32Arrays.\\n       *\\n       * @param  {array} arraySequence An array of Float32Arrays.\\n       */\\n\\n    }, {\\n      key: \\\"pull\\\",\\n      value: function pull(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // If the FIFO is completely empty, do nothing.\\n        if (this._framesAvailable === 0) {\\n          return;\\n        }\\n\\n        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.\\n\\n        for (var i = 0; i < destinationLength; ++i) {\\n          var readIndex = (this._readIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            arraySequence[channel][i] = this._channelData[channel][readIndex];\\n          }\\n        }\\n\\n        this._readIndex += destinationLength;\\n\\n        if (this._readIndex >= this._length) {\\n          this._readIndex = 0;\\n        }\\n\\n        this._framesAvailable -= destinationLength;\\n\\n        if (this._framesAvailable < 0) {\\n          this._framesAvailable = 0;\\n        }\\n      }\\n    }, {\\n      key: \\\"framesAvailable\\\",\\n      get: function get() {\\n        return this._framesAvailable;\\n      }\\n    }]);\\n\\n    return RingBuffer;\\n  }()\\n}[\\\"default\\\"];\\n\\nvar SoundFileProcessor =\\n/*#__PURE__*/\\nfunction (_AudioWorkletProcesso) {\\n  _inherits(SoundFileProcessor, _AudioWorkletProcesso);\\n\\n  function SoundFileProcessor(options) {\\n    var _this;\\n\\n    _classCallCheck(this, SoundFileProcessor);\\n\\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SoundFileProcessor).call(this));\\n    var processorOptions = options.processorOptions || {};\\n    _this.bufferSize = processorOptions.bufferSize || 256;\\n    _this.inputRingBuffer = new RingBuffer(_this.bufferSize, 1);\\n    _this.inputRingBufferArraySequence = [new Float32Array(_this.bufferSize)];\\n    return _this;\\n  }\\n\\n  _createClass(SoundFileProcessor, [{\\n    key: \\\"process\\\",\\n    value: function process(inputs) {\\n      var input = inputs[0]; // we only care about the first input channel, because that contains the position data\\n\\n      this.inputRingBuffer.push([input[0]]);\\n\\n      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {\\n        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);\\n        var inputChannel = this.inputRingBufferArraySequence[0];\\n        var position = inputChannel[inputChannel.length - 1] || 0;\\n        this.port.postMessage({\\n          name: 'position',\\n          position: position\\n        });\\n      }\\n\\n      return true;\\n    }\\n  }]);\\n\\n  return SoundFileProcessor;\\n}(_wrapNativeSuper(AudioWorkletProcessor));\\n\\nregisterProcessor(processorNames.soundFileProcessor, SoundFileProcessor);\";\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n\n  __webpack_exports__[\"default\"] = \"function _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \\\"function\\\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \\\"function\\\") { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } if (typeof _cache !== \\\"undefined\\\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\\n\\nfunction isNativeReflectConstruct() { if (typeof Reflect === \\\"undefined\\\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \\\"function\\\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\\n\\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\\n\\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\\\"[native code]\\\") !== -1; }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\n// import dependencies via preval.require so that they're available as values at compile time\\nvar processorNames = {\\n  \\\"recorderProcessor\\\": \\\"recorder-processor\\\",\\n  \\\"soundFileProcessor\\\": \\\"sound-file-processor\\\",\\n  \\\"amplitudeProcessor\\\": \\\"amplitude-processor\\\"\\n};\\nvar RingBuffer = {\\n  \\\"default\\\":\\n  /*#__PURE__*/\\n  function () {\\n    /**\\n     * @constructor\\n     * @param  {number} length Buffer length in frames.\\n     * @param  {number} channelCount Buffer channel count.\\n     */\\n    function RingBuffer(length, channelCount) {\\n      _classCallCheck(this, RingBuffer);\\n\\n      this._readIndex = 0;\\n      this._writeIndex = 0;\\n      this._framesAvailable = 0;\\n      this._channelCount = channelCount;\\n      this._length = length;\\n      this._channelData = [];\\n\\n      for (var i = 0; i < this._channelCount; ++i) {\\n        this._channelData[i] = new Float32Array(length);\\n      }\\n    }\\n    /**\\n     * Getter for Available frames in buffer.\\n     *\\n     * @return {number} Available frames in buffer.\\n     */\\n\\n\\n    _createClass(RingBuffer, [{\\n      key: \\\"push\\\",\\n\\n      /**\\n       * Push a sequence of Float32Arrays to buffer.\\n       *\\n       * @param  {array} arraySequence A sequence of Float32Arrays.\\n       */\\n      value: function push(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // Transfer data from the |arraySequence| storage to the internal buffer.\\n        var sourceLength = arraySequence[0] ? arraySequence[0].length : 0;\\n\\n        for (var i = 0; i < sourceLength; ++i) {\\n          var writeIndex = (this._writeIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            this._channelData[channel][writeIndex] = arraySequence[channel][i];\\n          }\\n        }\\n\\n        this._writeIndex += sourceLength;\\n\\n        if (this._writeIndex >= this._length) {\\n          this._writeIndex = 0;\\n        } // For excessive frames, the buffer will be overwritten.\\n\\n\\n        this._framesAvailable += sourceLength;\\n\\n        if (this._framesAvailable > this._length) {\\n          this._framesAvailable = this._length;\\n        }\\n      }\\n      /**\\n       * Pull data out of buffer and fill a given sequence of Float32Arrays.\\n       *\\n       * @param  {array} arraySequence An array of Float32Arrays.\\n       */\\n\\n    }, {\\n      key: \\\"pull\\\",\\n      value: function pull(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // If the FIFO is completely empty, do nothing.\\n        if (this._framesAvailable === 0) {\\n          return;\\n        }\\n\\n        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.\\n\\n        for (var i = 0; i < destinationLength; ++i) {\\n          var readIndex = (this._readIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            arraySequence[channel][i] = this._channelData[channel][readIndex];\\n          }\\n        }\\n\\n        this._readIndex += destinationLength;\\n\\n        if (this._readIndex >= this._length) {\\n          this._readIndex = 0;\\n        }\\n\\n        this._framesAvailable -= destinationLength;\\n\\n        if (this._framesAvailable < 0) {\\n          this._framesAvailable = 0;\\n        }\\n      }\\n    }, {\\n      key: \\\"framesAvailable\\\",\\n      get: function get() {\\n        return this._framesAvailable;\\n      }\\n    }]);\\n\\n    return RingBuffer;\\n  }()\\n}[\\\"default\\\"];\\n\\nvar AmplitudeProcessor =\\n/*#__PURE__*/\\nfunction (_AudioWorkletProcesso) {\\n  _inherits(AmplitudeProcessor, _AudioWorkletProcesso);\\n\\n  function AmplitudeProcessor(options) {\\n    var _this;\\n\\n    _classCallCheck(this, AmplitudeProcessor);\\n\\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AmplitudeProcessor).call(this));\\n    var processorOptions = options.processorOptions || {};\\n    _this.numOutputChannels = options.outputChannelCount || 1;\\n    _this.numInputChannels = processorOptions.numInputChannels || 2;\\n    _this.normalize = processorOptions.normalize || false;\\n    _this.smoothing = processorOptions.smoothing || 0;\\n    _this.bufferSize = processorOptions.bufferSize || 2048;\\n    _this.inputRingBuffer = new RingBuffer(_this.bufferSize, _this.numInputChannels);\\n    _this.outputRingBuffer = new RingBuffer(_this.bufferSize, _this.numOutputChannels);\\n    _this.inputRingBufferArraySequence = new Array(_this.numInputChannels).fill(null).map(function () {\\n      return new Float32Array(_this.bufferSize);\\n    });\\n    _this.stereoVol = [0, 0];\\n    _this.stereoVolNorm = [0, 0];\\n    _this.volMax = 0.001;\\n\\n    _this.port.onmessage = function (event) {\\n      var data = event.data;\\n\\n      if (data.name === 'toggleNormalize') {\\n        _this.normalize = data.normalize;\\n      } else if (data.name === 'smoothing') {\\n        _this.smoothing = Math.max(0, Math.min(1, data.smoothing));\\n      }\\n    };\\n\\n    return _this;\\n  } // TO DO make this stereo / dependent on # of audio channels\\n\\n\\n  _createClass(AmplitudeProcessor, [{\\n    key: \\\"process\\\",\\n    value: function process(inputs, outputs) {\\n      var input = inputs[0];\\n      var output = outputs[0];\\n      var smoothing = this.smoothing;\\n      this.inputRingBuffer.push(input);\\n\\n      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {\\n        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);\\n\\n        for (var channel = 0; channel < this.numInputChannels; ++channel) {\\n          var inputBuffer = this.inputRingBufferArraySequence[channel];\\n          var bufLength = inputBuffer.length;\\n          var sum = 0;\\n\\n          for (var i = 0; i < bufLength; i++) {\\n            var x = inputBuffer[i];\\n\\n            if (this.normalize) {\\n              sum += Math.max(Math.min(x / this.volMax, 1), -1) * Math.max(Math.min(x / this.volMax, 1), -1);\\n            } else {\\n              sum += x * x;\\n            }\\n          } // ... then take the square root of the sum.\\n\\n\\n          var rms = Math.sqrt(sum / bufLength);\\n          this.stereoVol[channel] = Math.max(rms, this.stereoVol[channel] * smoothing);\\n          this.volMax = Math.max(this.stereoVol[channel], this.volMax);\\n        } // calculate stero normalized volume and add volume from all channels together\\n\\n\\n        var volSum = 0;\\n\\n        for (var index = 0; index < this.stereoVol.length; index++) {\\n          this.stereoVolNorm[index] = Math.max(Math.min(this.stereoVol[index] / this.volMax, 1), 0);\\n          volSum += this.stereoVol[index];\\n        } // volume is average of channels\\n\\n\\n        var volume = volSum / this.stereoVol.length; // normalized value\\n\\n        var volNorm = Math.max(Math.min(volume / this.volMax, 1), 0);\\n        this.port.postMessage({\\n          name: 'amplitude',\\n          volume: volume,\\n          volNorm: volNorm,\\n          stereoVol: this.stereoVol,\\n          stereoVolNorm: this.stereoVolNorm\\n        }); // pass input through to output\\n\\n        this.outputRingBuffer.push(this.inputRingBufferArraySequence);\\n      } // pull 128 frames out of the ring buffer\\n      // if the ring buffer does not have enough frames, the output will be silent\\n\\n\\n      this.outputRingBuffer.pull(output);\\n      return true;\\n    }\\n  }]);\\n\\n  return AmplitudeProcessor;\\n}(_wrapNativeSuper(AudioWorkletProcessor));\\n\\nregisterProcessor(processorNames.amplitudeProcessor, AmplitudeProcessor);\";\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(17)], __WEBPACK_AMD_DEFINE_RESULT__ = function (o) {\n    o.Frequency = function (e, t) {\n      if (!(this instanceof o.Frequency)) return new o.Frequency(e, t);\n      o.TimeBase.call(this, e, t);\n    }, o.extend(o.Frequency, o.TimeBase), o.Frequency.prototype._primaryExpressions = Object.create(o.TimeBase.prototype._primaryExpressions), o.Frequency.prototype._primaryExpressions.midi = {\n      regexp: /^(\\d+(?:\\.\\d+)?midi)/,\n      method: function (e) {\n        return this.midiToFrequency(e);\n      }\n    }, o.Frequency.prototype._primaryExpressions.note = {\n      regexp: /^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,\n      method: function (e, t) {\n        var r = n[e.toLowerCase()] + 12 * (parseInt(t) + 1);\n        return this.midiToFrequency(r);\n      }\n    }, o.Frequency.prototype._primaryExpressions.tr = {\n      regexp: /^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?/,\n      method: function (e, t, r) {\n        var n = 1;\n        return e && \"0\" !== e && (n *= this._beatsToUnits(this._timeSignature() * parseFloat(e))), t && \"0\" !== t && (n *= this._beatsToUnits(parseFloat(t))), r && \"0\" !== r && (n *= this._beatsToUnits(parseFloat(r) / 4)), n;\n      }\n    }, o.Frequency.prototype.transpose = function (e) {\n      return this._expr = function (e, t) {\n        return e() * this.intervalToFrequencyRatio(t);\n      }.bind(this, this._expr, e), this;\n    }, o.Frequency.prototype.harmonize = function (e) {\n      return this._expr = function (e, t) {\n        for (var r = e(), n = [], o = 0; o < t.length; o++) n[o] = r * this.intervalToFrequencyRatio(t[o]);\n\n        return n;\n      }.bind(this, this._expr, e), this;\n    }, o.Frequency.prototype.toMidi = function () {\n      return this.frequencyToMidi(this.valueOf());\n    }, o.Frequency.prototype.toNote = function () {\n      var e = this.valueOf(),\n          t = Math.log(e / o.Frequency.A4) / Math.LN2,\n          r = Math.round(12 * t) + 57,\n          n = Math.floor(r / 12);\n      return n < 0 && (r += -12 * n), i[r % 12] + n.toString();\n    }, o.Frequency.prototype.toSeconds = function () {\n      return 1 / this.valueOf();\n    }, o.Frequency.prototype.toFrequency = function () {\n      return this.valueOf();\n    }, o.Frequency.prototype.toTicks = function () {\n      var e = this._beatsToUnits(1),\n          t = this.valueOf() / e;\n\n      return Math.floor(t * o.Transport.PPQ);\n    }, o.Frequency.prototype._frequencyToUnits = function (e) {\n      return e;\n    }, o.Frequency.prototype._ticksToUnits = function (e) {\n      return 1 / (60 * e / (o.Transport.bpm.value * o.Transport.PPQ));\n    }, o.Frequency.prototype._beatsToUnits = function (e) {\n      return 1 / o.TimeBase.prototype._beatsToUnits.call(this, e);\n    }, o.Frequency.prototype._secondsToUnits = function (e) {\n      return 1 / e;\n    }, o.Frequency.prototype._defaultUnits = \"hz\";\n    var n = {\n      cbb: -2,\n      cb: -1,\n      c: 0,\n      \"c#\": 1,\n      cx: 2,\n      dbb: 0,\n      db: 1,\n      d: 2,\n      \"d#\": 3,\n      dx: 4,\n      ebb: 2,\n      eb: 3,\n      e: 4,\n      \"e#\": 5,\n      ex: 6,\n      fbb: 3,\n      fb: 4,\n      f: 5,\n      \"f#\": 6,\n      fx: 7,\n      gbb: 5,\n      gb: 6,\n      g: 7,\n      \"g#\": 8,\n      gx: 9,\n      abb: 7,\n      ab: 8,\n      a: 9,\n      \"a#\": 10,\n      ax: 11,\n      bbb: 9,\n      bb: 10,\n      b: 11,\n      \"b#\": 12,\n      bx: 13\n    },\n        i = [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"];\n    return o.Frequency.A4 = 440, o.Frequency.prototype.midiToFrequency = function (e) {\n      return o.Frequency.A4 * Math.pow(2, (e - 69) / 12);\n    }, o.Frequency.prototype.frequencyToMidi = function (e) {\n      return 69 + 12 * Math.log(e / o.Frequency.A4) / Math.LN2;\n    }, o.Frequency;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = function (o) {\n    return o.TransportTime = function (t, r) {\n      if (!(this instanceof o.TransportTime)) return new o.TransportTime(t, r);\n      o.Time.call(this, t, r);\n    }, o.extend(o.TransportTime, o.Time), o.TransportTime.prototype._unaryExpressions = Object.create(o.Time.prototype._unaryExpressions), o.TransportTime.prototype._unaryExpressions.quantize = {\n      regexp: /^@/,\n      method: function (t) {\n        var r = this._secondsToTicks(t()),\n            e = Math.ceil(o.Transport.ticks / r);\n\n        return this._ticksToUnits(e * r);\n      }\n    }, o.TransportTime.prototype._secondsToTicks = function (t) {\n      var r = t / this._beatsToUnits(1);\n\n      return Math.round(r * o.Transport.PPQ);\n    }, o.TransportTime.prototype.valueOf = function () {\n      return this._secondsToTicks(this._expr()) + (this._plusNow ? o.Transport.ticks : 0);\n    }, o.TransportTime.prototype.toTicks = function () {\n      return this.valueOf();\n    }, o.TransportTime.prototype.toSeconds = function () {\n      return this._expr() + (this._plusNow ? o.Transport.seconds : 0);\n    }, o.TransportTime.prototype.toFrequency = function () {\n      return 1 / this.toSeconds();\n    }, o.TransportTime;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(4), __webpack_require__(13), __webpack_require__(1), __webpack_require__(33), __webpack_require__(21), __webpack_require__(34), __webpack_require__(20), __webpack_require__(35), __webpack_require__(36), __webpack_require__(37)], __WEBPACK_AMD_DEFINE_RESULT__ = function (p) {\n    \"use strict\";\n\n    function r(e, n, r) {\n      var t = new e();\n      return r._eval(n[0]).connect(t, 0, 0), r._eval(n[1]).connect(t, 0, 1), t;\n    }\n\n    function t(e, n, r) {\n      var t = new e();\n      return r._eval(n[0]).connect(t, 0, 0), t;\n    }\n\n    function o(e) {\n      return e ? parseFloat(e) : void 0;\n    }\n\n    function i(e) {\n      return e && e.args ? parseFloat(e.args) : void 0;\n    }\n\n    return p.Expr = function () {\n      var n = this._replacements(Array.prototype.slice.call(arguments)),\n          e = this._parseInputs(n);\n\n      this._nodes = [], this.input = new Array(e);\n\n      for (var r = 0; r < e; r++) this.input[r] = this.context.createGain();\n\n      var t,\n          o = this._parseTree(n);\n\n      try {\n        t = this._eval(o);\n      } catch (e) {\n        throw this._disposeNodes(), new Error(\"Tone.Expr: Could evaluate expression: \" + n);\n      }\n\n      this.output = t;\n    }, p.extend(p.Expr, p.SignalBase), p.Expr._Expressions = {\n      value: {\n        signal: {\n          regexp: /^\\d+\\.\\d+|^\\d+/,\n          method: function (e) {\n            return new p.Signal(o(e));\n          }\n        },\n        input: {\n          regexp: /^\\$\\d/,\n          method: function (e, n) {\n            return n.input[o(e.substr(1))];\n          }\n        }\n      },\n      glue: {\n        \"(\": {\n          regexp: /^\\(/\n        },\n        \")\": {\n          regexp: /^\\)/\n        },\n        \",\": {\n          regexp: /^,/\n        }\n      },\n      func: {\n        abs: {\n          regexp: /^abs/,\n          method: t.bind(this, p.Abs)\n        },\n        mod: {\n          regexp: /^mod/,\n          method: function (e, n) {\n            var r = i(e[1]),\n                t = new p.Modulo(r);\n            return n._eval(e[0]).connect(t), t;\n          }\n        },\n        pow: {\n          regexp: /^pow/,\n          method: function (e, n) {\n            var r = i(e[1]),\n                t = new p.Pow(r);\n            return n._eval(e[0]).connect(t), t;\n          }\n        },\n        a2g: {\n          regexp: /^a2g/,\n          method: function (e, n) {\n            var r = new p.AudioToGain();\n            return n._eval(e[0]).connect(r), r;\n          }\n        }\n      },\n      binary: {\n        \"+\": {\n          regexp: /^\\+/,\n          precedence: 1,\n          method: r.bind(this, p.Add)\n        },\n        \"-\": {\n          regexp: /^\\-/,\n          precedence: 1,\n          method: function (e, n) {\n            return 1 === e.length ? t(p.Negate, e, n) : r(p.Subtract, e, n);\n          }\n        },\n        \"*\": {\n          regexp: /^\\*/,\n          precedence: 0,\n          method: r.bind(this, p.Multiply)\n        }\n      },\n      unary: {\n        \"-\": {\n          regexp: /^\\-/,\n          method: t.bind(this, p.Negate)\n        },\n        \"!\": {\n          regexp: /^\\!/,\n          method: t.bind(this, p.NOT)\n        }\n      }\n    }, p.Expr.prototype._parseInputs = function (e) {\n      var n = e.match(/\\$\\d/g),\n          r = 0;\n      if (null !== n) for (var t = 0; t < n.length; t++) {\n        var o = parseInt(n[t].substr(1)) + 1;\n        r = Math.max(r, o);\n      }\n      return r;\n    }, p.Expr.prototype._replacements = function (e) {\n      for (var n = e.shift(), r = 0; r < e.length; r++) n = n.replace(/\\%/i, e[r]);\n\n      return n;\n    }, p.Expr.prototype._tokenize = function (e) {\n      for (var n = -1, r = []; 0 < e.length;) {\n        var t = o(e = e.trim());\n        r.push(t), e = e.substr(t.value.length);\n      }\n\n      function o(e) {\n        for (var n in p.Expr._Expressions) {\n          var r = p.Expr._Expressions[n];\n\n          for (var t in r) {\n            var o = r[t],\n                i = o.regexp,\n                a = e.match(i);\n            if (null !== a) return {\n              type: n,\n              value: a[0],\n              method: o.method\n            };\n          }\n        }\n\n        throw new SyntaxError(\"Tone.Expr: Unexpected token \" + e);\n      }\n\n      return {\n        next: function () {\n          return r[++n];\n        },\n        peek: function () {\n          return r[n + 1];\n        }\n      };\n    }, p.Expr.prototype._parseTree = function (e) {\n      var t = this._tokenize(e),\n          a = this.isUndef.bind(this);\n\n      function r(e, n) {\n        return !a(e) && \"glue\" === e.type && e.value === n;\n      }\n\n      function o(e, n, r) {\n        var t = p.Expr._Expressions[n];\n        if (!a(e)) for (var o in t) {\n          var i = t[o];\n\n          if (i.regexp.test(e.value)) {\n            if (a(r)) return !0;\n            if (i.precedence === r) return !0;\n          }\n        }\n        return !1;\n      }\n\n      function i(e) {\n        var n;\n        a(e) && (e = 5), n = e < 0 ? function e() {\n          var n, r;\n          n = t.peek();\n          if (o(n, \"unary\")) return n = t.next(), r = e(), {\n            operator: n.value,\n            method: n.method,\n            args: [r]\n          };\n          return s();\n        }() : i(e - 1);\n\n        for (var r = t.peek(); o(r, \"binary\", e);) n = {\n          operator: (r = t.next()).value,\n          method: r.method,\n          args: [n, i(e - 1)]\n        }, r = t.peek();\n\n        return n;\n      }\n\n      function s() {\n        var e, n;\n        if (e = t.peek(), a(e)) throw new SyntaxError(\"Tone.Expr: Unexpected termination of expression\");\n        if (\"func\" === e.type) return function (e) {\n          var n = [];\n          if (!r(t.next(), \"(\")) throw new SyntaxError('Tone.Expr: Expected ( in a function call \"' + e.value + '\"');\n          r(t.peek(), \")\") || (n = function () {\n            var e,\n                n = [];\n\n            for (; e = i(), !a(e) && (n.push(e), r(t.peek(), \",\"));) t.next();\n\n            return n;\n          }());\n          if (r(t.next(), \")\")) return {\n            method: e.method,\n            args: n,\n            name: name\n          };\n          throw new SyntaxError('Tone.Expr: Expected ) in a function call \"' + e.value + '\"');\n        }(e = t.next());\n        if (\"value\" === e.type) return {\n          method: (e = t.next()).method,\n          args: e.value\n        };\n\n        if (r(e, \"(\")) {\n          if (t.next(), n = i(), !r(e = t.next(), \")\")) throw new SyntaxError(\"Expected )\");\n          return n;\n        }\n\n        throw new SyntaxError(\"Tone.Expr: Parse error, cannot process token \" + e.value);\n      }\n\n      return i();\n    }, p.Expr.prototype._eval = function (e) {\n      if (!this.isUndef(e)) {\n        var n = e.method(e.args, this);\n        return this._nodes.push(n), n;\n      }\n    }, p.Expr.prototype._disposeNodes = function () {\n      for (var e = 0; e < this._nodes.length; e++) {\n        var n = this._nodes[e];\n        this.isFunction(n.dispose) ? n.dispose() : this.isFunction(n.disconnect) && n.disconnect(), n = null, this._nodes[e] = null;\n      }\n\n      this._nodes = null;\n    }, p.Expr.prototype.dispose = function () {\n      p.prototype.dispose.call(this), this._disposeNodes();\n    }, p.Expr;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(21), __webpack_require__(13), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (e) {\n    \"use strict\";\n\n    return e.GreaterThan = function (t) {\n      this.createInsOuts(2, 0), this._param = this.input[0] = new e.Subtract(t), this.input[1] = this._param.input[1], this._gtz = this.output = new e.GreaterThanZero(), this._param.connect(this._gtz);\n    }, e.extend(e.GreaterThan, e.Signal), e.GreaterThan.prototype.dispose = function () {\n      return e.prototype.dispose.call(this), this._param.dispose(), this._param = null, this._gtz.dispose(), this._gtz = null, this;\n    }, e.GreaterThan;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(6), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function (s) {\n    \"use strict\";\n\n    return s.Abs = function () {\n      this._abs = this.input = this.output = new s.WaveShaper(function (s) {\n        return 0 === s ? 0 : Math.abs(s);\n      }, 127);\n    }, s.extend(s.Abs, s.SignalBase), s.Abs.prototype.dispose = function () {\n      return s.prototype.dispose.call(this), this._abs.dispose(), this._abs = null, this;\n    }, s.Abs;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(6), __webpack_require__(1), __webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = function (i) {\n    \"use strict\";\n\n    return i.Modulo = function (t) {\n      this.createInsOuts(1, 0), this._shaper = new i.WaveShaper(Math.pow(2, 16)), this._multiply = new i.Multiply(), this._subtract = this.output = new i.Subtract(), this._modSignal = new i.Signal(t), this.input.fan(this._shaper, this._subtract), this._modSignal.connect(this._multiply, 0, 0), this._shaper.connect(this._multiply, 0, 1), this._multiply.connect(this._subtract, 0, 1), this._setWaveShaper(t);\n    }, i.extend(i.Modulo, i.SignalBase), i.Modulo.prototype._setWaveShaper = function (i) {\n      this._shaper.setMap(function (t) {\n        return Math.floor((t + 1e-4) / i);\n      });\n    }, Object.defineProperty(i.Modulo.prototype, \"value\", {\n      get: function () {\n        return this._modSignal.value;\n      },\n      set: function (t) {\n        this._modSignal.value = t, this._setWaveShaper(t);\n      }\n    }), i.Modulo.prototype.dispose = function () {\n      return i.prototype.dispose.call(this), this._shaper.dispose(), this._shaper = null, this._multiply.dispose(), this._multiply = null, this._subtract.dispose(), this._subtract = null, this._modSignal.dispose(), this._modSignal = null, this;\n    }, i.Modulo;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (t) {\n    \"use strict\";\n\n    return t.Pow = function (e) {\n      this._exp = this.defaultArg(e, 1), this._expScaler = this.input = this.output = new t.WaveShaper(this._expFunc(this._exp), 8192);\n    }, t.extend(t.Pow, t.SignalBase), Object.defineProperty(t.Pow.prototype, \"value\", {\n      get: function () {\n        return this._exp;\n      },\n      set: function (e) {\n        this._exp = e, this._expScaler.setMap(this._expFunc(this._exp));\n      }\n    }), t.Pow.prototype._expFunc = function (t) {\n      return function (e) {\n        return Math.pow(Math.abs(e), t);\n      };\n    }, t.Pow.prototype.dispose = function () {\n      return t.prototype.dispose.call(this), this._expScaler.dispose(), this._expScaler = null, this;\n    }, t.Pow;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(6), __webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function (n) {\n    \"use strict\";\n\n    return n.AudioToGain = function () {\n      this._norm = this.input = this.output = new n.WaveShaper(function (n) {\n        return (n + 1) / 2;\n      });\n    }, n.extend(n.AudioToGain, n.SignalBase), n.AudioToGain.prototype.dispose = function () {\n      return n.prototype.dispose.call(this), this._norm.dispose(), this._norm = null, this;\n    }, n.AudioToGain;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = function (e) {\n    \"use strict\";\n\n    return e.EqualPowerGain = function () {\n      this._eqPower = this.input = this.output = new e.WaveShaper(function (e) {\n        return Math.abs(e) < .001 ? 0 : this.equalPowerScale(e);\n      }.bind(this), 4096);\n    }, e.extend(e.EqualPowerGain, e.SignalBase), e.EqualPowerGain.prototype.dispose = function () {\n      return e.prototype.dispose.call(this), this._eqPower.dispose(), this._eqPower = null, this;\n    }, e.EqualPowerGain;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, exports, __webpack_require__) {\n  var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;\n\n  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(19), __webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = function (t) {\n    \"use strict\";\n\n    return t.TimelineState = function (e) {\n      t.Timeline.call(this), this._initial = e;\n    }, t.extend(t.TimelineState, t.Timeline), t.TimelineState.prototype.getValueAtTime = function (e) {\n      var t = this.get(e);\n      return null !== t ? t.state : this._initial;\n    }, t.TimelineState.prototype.setStateAtTime = function (e, t) {\n      this.add({\n        state: e,\n        time: t\n      });\n    }, t.TimelineState;\n  }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n}, function (module, __webpack_exports__, __webpack_require__) {\n  \"use strict\";\n\n  __webpack_require__.r(__webpack_exports__);\n\n  var audioworklet_polyfill = __webpack_require__(24);\n\n  var shims = __webpack_require__(25);\n\n  var audiocontext = __webpack_require__(3);\n\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var main_Main = function Main() {\n    _classCallCheck(this, Main);\n\n    this.input = audiocontext[\"a\"].createGain();\n    this.output = audiocontext[\"a\"].createGain();\n    this.limiter = audiocontext[\"a\"].createDynamicsCompressor();\n    this.limiter.threshold.value = -3;\n    this.limiter.ratio.value = 20;\n    this.limiter.knee.value = 1;\n    this.audiocontext = audiocontext[\"a\"];\n    this.output.disconnect();\n    this.input.connect(this.limiter);\n    this.limiter.connect(this.output);\n    this.meter = audiocontext[\"a\"].createGain();\n    this.fftMeter = audiocontext[\"a\"].createGain();\n    this.output.connect(this.meter);\n    this.output.connect(this.fftMeter);\n    this.output.connect(this.audiocontext.destination);\n    this.soundArray = [];\n    this.parts = [];\n    this.extensions = [];\n  };\n\n  var p5sound = new main_Main();\n  /**\n   * Returns a number representing the output volume for sound\n   * in this sketch.\n   *\n   * @method getOutputVolume\n   * @return {Number} Output volume for sound in this sketch.\n   *                  Should be between 0.0 (silence) and 1.0.\n   */\n\n  p5.prototype.getOutputVolume = function () {\n    return p5sound.output.gain.value;\n  };\n  /**\n   *  <p>Scale the output of all sound in this sketch</p>\n   *  Scaled between 0.0 (silence) and 1.0 (full volume).\n   *  1.0 is the maximum amplitude of a digital sound, so multiplying\n   *  by greater than 1.0 may cause digital distortion. To\n   *  fade, provide a <code>rampTime</code> parameter. For more\n   *  complex fades, see the Envelope class.\n   *\n   *  Alternately, you can pass in a signal source such as an\n   *  oscillator to modulate the amplitude with an audio signal.\n   *\n   *  <p><b>How This Works</b>: When you load the p5.sound module, it\n   *  creates a single instance of p5sound. All sound objects in this\n   *  module output to p5sound before reaching your computer's output.\n   *  So if you change the amplitude of p5sound, it impacts all of the\n   *  sound in this module.</p>\n   *\n   *  <p>If no value is provided, returns a Web Audio API Gain Node</p>\n   *\n   *  @method  outputVolume\n   *  @param {Number|Object} volume  Volume (amplitude) between 0.0\n   *                                     and 1.0 or modulating signal/oscillator\n   *  @param {Number} [rampTime]  Fade for t seconds\n   *  @param {Number} [timeFromNow]  Schedule this event to happen at\n   *                                 t seconds in the future\n   */\n\n\n  p5.prototype.outputVolume = function (vol) {\n    var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n    if (typeof vol === 'number') {\n      var now = p5sound.audiocontext.currentTime;\n      var currentVol = p5sound.output.gain.value;\n      p5sound.output.gain.cancelScheduledValues(now + tFromNow);\n      p5sound.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n      p5sound.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n    } else if (vol) {\n      vol.connect(p5sound.output.gain);\n    } else {\n      return p5sound.output.gain;\n    }\n  };\n  /**\n   *  `p5.soundOut` is the p5.sound final output bus. It sends output to\n   *  the destination of this window's web audio context. It contains\n   *  Web Audio API nodes including a dyanmicsCompressor (<code>.limiter</code>),\n   *  and Gain Nodes for <code>.input</code> and <code>.output</code>.\n   *\n   *  @property {Object} soundOut\n   */\n\n\n  p5.prototype.soundOut = p5.soundOut = p5sound;\n  p5.soundOut._silentNode = p5sound.audiocontext.createGain();\n  p5.soundOut._silentNode.gain.value = 0;\n\n  p5.soundOut._silentNode.connect(p5sound.audiocontext.destination);\n\n  var main = p5sound;\n\n  var processorNames = __webpack_require__(5);\n\n  var processorNames_default = __webpack_require__.n(processorNames);\n\n  function _typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      _typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      _typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return _typeof(obj);\n  }\n  /**\n   * @for p5\n   */\n\n  /**\n   * Returns a number representing the sample rate, in samples per second,\n   * of all sound objects in this audio context. It is determined by the\n   * sampling rate of your operating system's sound card, and it is not\n   * currently possile to change.\n   * It is often 44100, or twice the range of human hearing.\n   *\n   * @method sampleRate\n   * @return {Number} samplerate samples per second\n   */\n\n\n  function sampleRate() {\n    return main.audiocontext.sampleRate;\n  }\n  /**\n   *  Returns the closest MIDI note value for\n   *  a given frequency.\n   *\n   *  @method freqToMidi\n   *  @param  {Number} frequency A freqeuncy, for example, the \"A\"\n   *                             above Middle C is 440Hz\n   *  @return {Number}   MIDI note value\n   */\n\n\n  function freqToMidi(f) {\n    var mathlog2 = Math.log(f / 440) / Math.log(2);\n    var m = Math.round(12 * mathlog2) + 69;\n    return m;\n  }\n  /**\n   *  Returns the frequency value of a MIDI note value.\n   *  General MIDI treats notes as integers where middle C\n   *  is 60, C# is 61, D is 62 etc. Useful for generating\n   *  musical frequencies with oscillators.\n   *\n   *  @method  midiToFreq\n   *  @param  {Number} midiNote The number of a MIDI note\n   *  @return {Number} Frequency value of the given MIDI note\n   *  @example\n   *  <div><code>\n   *  let midiNotes = [60, 64, 67, 72];\n   *  let noteIndex = 0;\n   *  let midiVal, freq;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(startSound);\n   *    osc = new p5.TriOsc();\n   *    env = new p5.Envelope();\n   *  }\n   *\n   *  function draw() {\n   *    background(220);\n   *    text('tap to play', 10, 20);\n   *    if (midiVal) {\n   *      text('MIDI: ' + midiVal, 10, 40);\n   *      text('Freq: ' + freq, 10, 60);\n   *    }\n   *  }\n   *\n   *  function startSound() {\n   *    // see also: userStartAudio();\n   *    osc.start();\n   *\n   *    midiVal = midiNotes[noteIndex % midiNotes.length];\n   *    freq = midiToFreq(midiVal);\n   *    osc.freq(freq);\n   *    env.ramp(osc, 0, 1.0, 0);\n   *\n   *    noteIndex++;\n   *  }\n   *  </code></div>\n   */\n\n\n  function midiToFreq(m) {\n    return 440 * Math.pow(2, (m - 69) / 12.0);\n  }\n\n  function noteToFreq(note) {\n    if (typeof note !== 'string') {\n      return note;\n    }\n\n    var wholeNotes = {\n      A: 21,\n      B: 23,\n      C: 24,\n      D: 26,\n      E: 28,\n      F: 29,\n      G: 31\n    };\n    var value = wholeNotes[note[0].toUpperCase()];\n    var octave = ~~note.slice(-1);\n    value += 12 * (octave - 1);\n\n    switch (note[1]) {\n      case '#':\n        value += 1;\n        break;\n\n      case 'b':\n        value -= 1;\n        break;\n\n      default:\n        break;\n    }\n\n    return midiToFreq(value);\n  }\n  /**\n   *  List the SoundFile formats that you will include. LoadSound\n   *  will search your directory for these extensions, and will pick\n   *  a format that is compatable with the client's web browser.\n   *  <a href=\"http://media.io/\">Here</a> is a free online file\n   *  converter.\n   *\n   *  @method soundFormats\n   *  @param {String} [...formats] i.e. 'mp3', 'wav', 'ogg'\n   *  @example\n   *  <div><code>\n   *  function preload() {\n   *    // set the global sound formats\n   *    soundFormats('mp3', 'ogg');\n   *\n   *    // load either beatbox.mp3, or .ogg, depending on browser\n   *    mySound = loadSound('assets/beatbox.mp3');\n   *  }\n   *\n   *  function setup() {\n   *       let cnv = createCanvas(100, 100);\n   *       background(220);\n   *       text('sound loaded! tap to play', 10, 20, width - 20);\n   *       cnv.mousePressed(function() {\n   *         mySound.play();\n   *       });\n   *     }\n   *  </code></div>\n   */\n\n\n  function soundFormats() {\n    main.extensions = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      arguments[i] = arguments[i].toLowerCase();\n\n      if (['mp3', 'wav', 'ogg', 'm4a', 'aac'].indexOf(arguments[i]) > -1) {\n        main.extensions.push(arguments[i]);\n      } else {\n        throw arguments[i] + ' is not a valid sound format!';\n      }\n    }\n  }\n\n  function disposeSound() {\n    for (var i = 0; i < main.soundArray.length; i++) {\n      main.soundArray[i].dispose();\n    }\n  }\n\n  function _checkFileFormats(paths) {\n    var path;\n\n    if (typeof paths === 'string') {\n      path = paths;\n      var extTest = path.split('.').pop();\n\n      if (['mp3', 'wav', 'ogg', 'm4a', 'aac'].indexOf(extTest) > -1) {\n        if (!p5.prototype.isFileSupported(extTest)) {\n          var pathSplit = path.split('.');\n          var pathCore = pathSplit[pathSplit.length - 1];\n\n          for (var _i = 0; _i < main.extensions.length; _i++) {\n            var _extension = main.extensions[_i];\n\n            var _supported = p5.prototype.isFileSupported(_extension);\n\n            if (_supported) {\n              pathCore = '';\n\n              if (pathSplit.length === 2) {\n                pathCore += pathSplit[0];\n              }\n\n              for (var _i2 = 1; _i2 <= pathSplit.length - 2; _i2++) {\n                var p = pathSplit[_i2];\n                pathCore += '.' + p;\n              }\n\n              path = pathCore += '.';\n              path = path += _extension;\n              break;\n            }\n          }\n        }\n      } else {\n        for (var _i3 = 0; _i3 < main.extensions.length; _i3++) {\n          var _extension2 = main.extensions[_i3];\n\n          var _supported2 = p5.prototype.isFileSupported(_extension2);\n\n          if (_supported2) {\n            path = path + '.' + _extension2;\n            break;\n          }\n        }\n      }\n    } else if (_typeof(paths) === 'object') {\n      for (var i = 0; i < paths.length; i++) {\n        var extension = paths[i].split('.').pop();\n        var supported = p5.prototype.isFileSupported(extension);\n\n        if (supported) {\n          path = paths[i];\n          break;\n        }\n      }\n    }\n\n    return path;\n  }\n  /**\n   *  Used by Osc and Envelope to chain signal math\n   */\n\n\n  function _mathChain(o, math, thisChain, nextChain, type) {\n    for (var i in o.mathOps) {\n      if (o.mathOps[i] instanceof type) {\n        o.mathOps[i].dispose();\n        thisChain = i;\n\n        if (thisChain < o.mathOps.length - 1) {\n          nextChain = o.mathOps[i + 1];\n        }\n      }\n    }\n\n    o.mathOps[thisChain - 1].disconnect();\n    o.mathOps[thisChain - 1].connect(math);\n    math.connect(nextChain);\n    o.mathOps[thisChain] = math;\n    return o;\n  }\n\n  function convertToWav(audioBuffer) {\n    var leftChannel, rightChannel;\n    leftChannel = audioBuffer.getChannelData(0);\n\n    if (audioBuffer.numberOfChannels > 1) {\n      rightChannel = audioBuffer.getChannelData(1);\n    } else {\n      rightChannel = leftChannel;\n    }\n\n    var interleaved = interleave(leftChannel, rightChannel);\n    var buffer = new window.ArrayBuffer(44 + interleaved.length * 2);\n    var view = new window.DataView(buffer);\n    writeUTFBytes(view, 0, 'RIFF');\n    view.setUint32(4, 36 + interleaved.length * 2, true);\n    writeUTFBytes(view, 8, 'WAVE');\n    writeUTFBytes(view, 12, 'fmt ');\n    view.setUint32(16, 16, true);\n    view.setUint16(20, 1, true);\n    view.setUint16(22, 2, true);\n    view.setUint32(24, main.audiocontext.sampleRate, true);\n    view.setUint32(28, main.audiocontext.sampleRate * 4, true);\n    view.setUint16(32, 4, true);\n    view.setUint16(34, 16, true);\n    writeUTFBytes(view, 36, 'data');\n    view.setUint32(40, interleaved.length * 2, true);\n    var lng = interleaved.length;\n    var index = 44;\n    var volume = 1;\n\n    for (var i = 0; i < lng; i++) {\n      view.setInt16(index, interleaved[i] * (0x7fff * volume), true);\n      index += 2;\n    }\n\n    return view;\n  }\n\n  function interleave(leftChannel, rightChannel) {\n    var length = leftChannel.length + rightChannel.length;\n    var result = new Float32Array(length);\n    var inputIndex = 0;\n\n    for (var index = 0; index < length;) {\n      result[index++] = leftChannel[inputIndex];\n      result[index++] = rightChannel[inputIndex];\n      inputIndex++;\n    }\n\n    return result;\n  }\n\n  function writeUTFBytes(view, offset, string) {\n    var lng = string.length;\n\n    for (var i = 0; i < lng; i++) {\n      view.setUint8(offset + i, string.charCodeAt(i));\n    }\n  }\n\n  function safeBufferSize(idealBufferSize) {\n    var bufferSize = idealBufferSize;\n    var tempAudioWorkletNode = new AudioWorkletNode(main.audiocontext, processorNames_default.a.soundFileProcessor);\n\n    if (tempAudioWorkletNode instanceof ScriptProcessorNode) {\n      bufferSize = tempAudioWorkletNode.bufferSize;\n    }\n\n    tempAudioWorkletNode.disconnect();\n    tempAudioWorkletNode = null;\n    return bufferSize;\n  }\n  /**\n   * Save a p5.SoundFile as a .wav file. The browser will prompt the user\n   * to download the file to their device.\n   * For uploading audio to a server, use\n   * <a href=\"/docs/reference/#/p5.SoundFile/saveBlob\">`p5.SoundFile.saveBlob`</a>.\n   *\n   *  @for p5\n   *  @method saveSound\n   *  @param  {p5.SoundFile} soundFile p5.SoundFile that you wish to save\n   *  @param  {String} fileName      name of the resulting .wav file.\n   */\n\n\n  function saveSound(soundFile, fileName) {\n    var dataView = convertToWav(soundFile.buffer);\n    p5.prototype.writeFile([dataView], fileName, 'wav');\n  }\n\n  var CustomError = function CustomError(name, errorTrace, failedPath) {\n    var err = new Error();\n    var tempStack, splitStack;\n    err.name = name;\n    err.originalStack = err.stack + errorTrace;\n    tempStack = err.stack + errorTrace;\n    err.failedPath = failedPath;\n    splitStack = tempStack.split('\\n').filter(function (ln) {\n      return !ln.match(/(p5.|native code|globalInit)/g);\n    });\n    err.stack = splitStack.join('\\n');\n    return err;\n  };\n\n  var errorHandler = CustomError;\n  var moduleSources = [__webpack_require__(27)[\"default\"], __webpack_require__(28)[\"default\"], __webpack_require__(29)[\"default\"]];\n  var audioWorklet_ac = main.audiocontext;\n  var initializedAudioWorklets = false;\n\n  function loadAudioWorkletModules() {\n    return Promise.all(moduleSources.map(function (moduleSrc) {\n      var blob = new Blob([moduleSrc], {\n        type: 'application/javascript'\n      });\n      var objectURL = URL.createObjectURL(blob);\n      return audioWorklet_ac.audioWorklet.addModule(objectURL);\n    }));\n  }\n\n  p5.prototype.registerMethod('init', function () {\n    if (initializedAudioWorklets) return;\n\n    if (!this.preload && !window.preload) {\n      this.preload = function () {};\n    }\n\n    this._incrementPreload();\n\n    var onWorkletModulesLoad = function () {\n      initializedAudioWorklets = true;\n\n      this._decrementPreload();\n    }.bind(this);\n\n    loadAudioWorkletModules().then(onWorkletModulesLoad);\n  });\n\n  function panner_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  var panner_ac = main.audiocontext;\n  var panner;\n\n  if (typeof panner_ac.createStereoPanner !== 'undefined') {\n    var Panner = function () {\n      function Panner(input, output) {\n        panner_classCallCheck(this, Panner);\n        this.stereoPanner = this.input = panner_ac.createStereoPanner();\n        input.connect(this.stereoPanner);\n        this.stereoPanner.connect(output);\n      }\n\n      _createClass(Panner, [{\n        key: \"pan\",\n        value: function pan(val, tFromNow) {\n          var time = tFromNow || 0;\n          var t = panner_ac.currentTime + time;\n          this.stereoPanner.pan.linearRampToValueAtTime(val, t);\n        }\n      }, {\n        key: \"inputChannels\",\n        value: function inputChannels() {}\n      }, {\n        key: \"connect\",\n        value: function connect(obj) {\n          this.stereoPanner.connect(obj);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect() {\n          if (this.stereoPanner) {\n            this.stereoPanner.disconnect();\n          }\n        }\n      }]);\n\n      return Panner;\n    }();\n\n    panner = Panner;\n  } else {\n    var _Panner = function () {\n      function _Panner(input, output, numInputChannels) {\n        panner_classCallCheck(this, _Panner);\n        this.input = panner_ac.createGain();\n        input.connect(this.input);\n        this.left = panner_ac.createGain();\n        this.right = panner_ac.createGain();\n        this.left.channelInterpretation = 'discrete';\n        this.right.channelInterpretation = 'discrete';\n\n        if (numInputChannels > 1) {\n          this.splitter = panner_ac.createChannelSplitter(2);\n          this.input.connect(this.splitter);\n          this.splitter.connect(this.left, 1);\n          this.splitter.connect(this.right, 0);\n        } else {\n          this.input.connect(this.left);\n          this.input.connect(this.right);\n        }\n\n        this.output = panner_ac.createChannelMerger(2);\n        this.left.connect(this.output, 0, 1);\n        this.right.connect(this.output, 0, 0);\n        this.output.connect(output);\n      }\n\n      _createClass(_Panner, [{\n        key: \"pan\",\n        value: function pan(val, tFromNow) {\n          var time = tFromNow || 0;\n          var t = panner_ac.currentTime + time;\n          var v = (val + 1) / 2;\n          var rightVal = Math.cos(v * Math.PI / 2);\n          var leftVal = Math.sin(v * Math.PI / 2);\n          this.left.gain.linearRampToValueAtTime(leftVal, t);\n          this.right.gain.linearRampToValueAtTime(rightVal, t);\n        }\n      }, {\n        key: \"inputChannels\",\n        value: function inputChannels(numChannels) {\n          if (numChannels === 1) {\n            this.input.disconnect();\n            this.input.connect(this.left);\n            this.input.connect(this.right);\n          } else if (numChannels === 2) {\n            if (typeof this.splitter === 'undefined') {\n              this.splitter = panner_ac.createChannelSplitter(2);\n            }\n\n            this.input.disconnect();\n            this.input.connect(this.splitter);\n            this.splitter.connect(this.left, 1);\n            this.splitter.connect(this.right, 0);\n          }\n        }\n      }, {\n        key: \"connect\",\n        value: function connect(obj) {\n          this.output.connect(obj);\n        }\n      }, {\n        key: \"disconnect\",\n        value: function disconnect() {\n          if (this.output) {\n            this.output.disconnect();\n          }\n        }\n      }]);\n\n      return _Panner;\n    }();\n\n    panner = _Panner;\n  }\n\n  var panner_0 = panner;\n\n  function soundfile_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      soundfile_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      soundfile_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return soundfile_typeof(obj);\n  }\n\n  function soundfile_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function soundfile_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) soundfile_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) soundfile_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function soundfile_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var soundfile_ac = main.audiocontext;\n\n  var _createCounterBuffer = function _createCounterBuffer(buffer) {\n    var len = buffer.length;\n    var audioBuf = soundfile_ac.createBuffer(1, buffer.length, soundfile_ac.sampleRate);\n    var arrayBuffer = audioBuf.getChannelData(0);\n\n    for (var index = 0; index < len; index++) {\n      arrayBuffer[index] = index;\n    }\n\n    return audioBuf;\n  };\n\n  var Cue = function Cue(callback, time, id, val) {\n    soundfile_classCallCheck(this, Cue);\n    this.callback = callback;\n    this.time = time;\n    this.id = id;\n    this.val = val;\n  };\n\n  function _clearOnEnd(e) {\n    var thisBufferSourceNode = e.target;\n    var soundFile = this;\n    thisBufferSourceNode._playing = false;\n    thisBufferSourceNode.removeEventListener('ended', soundFile._clearOnEnd);\n\n    soundFile._onended(soundFile);\n\n    soundFile.bufferSourceNodes.map(function (_, i) {\n      return i;\n    }).reverse().forEach(function (i) {\n      var n = soundFile.bufferSourceNodes[i];\n\n      if (n._playing === false) {\n        soundFile.bufferSourceNodes.splice(i, 1);\n      }\n    });\n\n    if (soundFile.bufferSourceNodes.length === 0) {\n      soundFile._playing = false;\n    }\n  }\n  /**\n   *  <p>SoundFile object with a path to a file.</p>\n   *\n   *  <p>The p5.SoundFile may not be available immediately because\n   *  it loads the file information asynchronously.</p>\n   *\n   *  <p>To do something with the sound as soon as it loads\n   *  pass the name of a function as the second parameter.</p>\n   *\n   *  <p>Only one file path is required. However, audio file formats\n   *  (i.e. mp3, ogg, wav and m4a/aac) are not supported by all\n   *  web browsers. If you want to ensure compatability, instead of a single\n   *  file path, you may include an Array of filepaths, and the browser will\n   *  choose a format that works.</p>\n   *\n   *  @class p5.SoundFile\n   *  @constructor\n   *  @param {String|Array} path   path to a sound file (String). Optionally,\n   *                               you may include multiple file formats in\n   *                               an array. Alternately, accepts an object\n   *                               from the HTML5 File API, or a p5.File.\n   *  @param {Function} [successCallback]   Name of a function to call once file loads\n   *  @param {Function} [errorCallback]   Name of a function to call if file fails to\n   *                                      load. This function will receive an error or\n   *                                     XMLHttpRequest object with information\n   *                                     about what went wrong.\n   *  @param {Function} [whileLoadingCallback]   Name of a function to call while file\n   *                                             is loading. That function will\n   *                                             receive progress of the request to\n   *                                             load the sound file\n   *                                             (between 0 and 1) as its first\n   *                                             parameter. This progress\n   *                                             does not account for the additional\n   *                                             time needed to decode the audio data.\n   *\n   *  @example\n   *  <div><code>\n   *  let mySound;\n   *  function preload() {\n   *    soundFormats('mp3', 'ogg');\n   *    mySound = loadSound('assets/doorbell');\n   *  }\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(canvasPressed);\n   *    background(220);\n   *    text('tap here to play', 10, 20);\n   *  }\n   *\n   *  function canvasPressed() {\n   *    // playing a sound file on a user gesture\n   *    // is equivalent to `userStartAudio()`\n   *    mySound.play();\n   *  }\n   * </code></div>\n   */\n\n\n  var soundfile_SoundFile = function () {\n    function SoundFile(paths, onload, onerror, whileLoading) {\n      soundfile_classCallCheck(this, SoundFile);\n\n      if (typeof paths !== 'undefined') {\n        if (typeof paths === 'string' || typeof paths[0] === 'string') {\n          var path = p5.prototype._checkFileFormats(paths);\n\n          this.url = path;\n        } else if (soundfile_typeof(paths) === 'object') {\n          if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n            throw 'Unable to load file because the File API is not supported';\n          }\n        }\n\n        if (paths.file) {\n          paths = paths.file;\n        }\n\n        this.file = paths;\n      }\n\n      this._onended = function () {};\n\n      this._looping = false;\n      this._playing = false;\n      this._paused = false;\n      this._pauseTime = 0;\n      this._cues = [];\n      this._cueIDCounter = 0;\n      this._lastPos = 0;\n      this._counterNode = null;\n      this._workletNode = null;\n      this.bufferSourceNodes = [];\n      this.bufferSourceNode = null;\n      this.buffer = null;\n      this.playbackRate = 1;\n      this.input = main.audiocontext.createGain();\n      this.output = main.audiocontext.createGain();\n      this.reversed = false;\n      this.startTime = 0;\n      this.endTime = null;\n      this.pauseTime = 0;\n      this.mode = 'sustain';\n      this.startMillis = null;\n      this.panPosition = 0.0;\n      this.panner = new panner_0(this.output, main.input, 2);\n\n      if (this.url || this.file) {\n        this.load(onload, onerror);\n      }\n\n      main.soundArray.push(this);\n\n      if (typeof whileLoading === 'function') {\n        this._whileLoading = whileLoading;\n      } else {\n        this._whileLoading = function () {};\n      }\n\n      this._clearOnEnd = _clearOnEnd.bind(this);\n      this.amp = this.setVolume;\n      this.fade = this.setVolume;\n    }\n    /**\n     * This is a helper function that the p5.SoundFile calls to load\n     * itself. Accepts a callback (the name of another function)\n     * as an optional parameter.\n     *\n     * @private\n     * @for p5.SoundFile\n     * @param {Function} [successCallback]   Name of a function to call once file loads\n     * @param {Function} [errorCallback]   Name of a function to call if there is an error\n     */\n\n\n    soundfile_createClass(SoundFile, [{\n      key: \"load\",\n      value: function load(callback, errorCallback) {\n        var self = this;\n        var errorTrace = new Error().stack;\n\n        if (this.url !== undefined && this.url !== '') {\n          var request = new XMLHttpRequest();\n          request.addEventListener('progress', function (evt) {\n            self._updateProgress(evt);\n          }, false);\n          request.open('GET', this.url, true);\n          request.responseType = 'arraybuffer';\n\n          request.onload = function () {\n            if (request.status === 200) {\n              if (!self.panner) return;\n              soundfile_ac.decodeAudioData(request.response, function (buff) {\n                if (!self.panner) return;\n                self.buffer = buff;\n                self.panner.inputChannels(buff.numberOfChannels);\n\n                if (callback) {\n                  callback(self);\n                }\n              }, function () {\n                if (!self.panner) return;\n                var err = new errorHandler('decodeAudioData', errorTrace, self.url);\n                var msg = 'AudioContext error at decodeAudioData for ' + self.url;\n\n                if (errorCallback) {\n                  err.msg = msg;\n                  errorCallback(err);\n                } else {\n                  console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n                }\n              });\n            } else {\n              if (!self.panner) return;\n              var err = new errorHandler('loadSound', errorTrace, self.url);\n              var msg = 'Unable to load ' + self.url + '. The request status was: ' + request.status + ' (' + request.statusText + ')';\n\n              if (errorCallback) {\n                err.message = msg;\n                errorCallback(err);\n              } else {\n                console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n              }\n            }\n          };\n\n          request.onerror = function () {\n            var err = new errorHandler('loadSound', errorTrace, self.url);\n            var msg = 'There was no response from the server at ' + self.url + '. Check the url and internet connectivity.';\n\n            if (errorCallback) {\n              err.message = msg;\n              errorCallback(err);\n            } else {\n              console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n            }\n          };\n\n          request.send();\n        } else if (this.file !== undefined) {\n          var reader = new FileReader();\n\n          reader.onload = function () {\n            if (!self.panner) return;\n            soundfile_ac.decodeAudioData(reader.result, function (buff) {\n              if (!self.panner) return;\n              self.buffer = buff;\n              self.panner.inputChannels(buff.numberOfChannels);\n\n              if (callback) {\n                callback(self);\n              }\n            });\n          };\n\n          reader.onerror = function (e) {\n            if (!self.panner) return;\n\n            if (onerror) {\n              onerror(e);\n            }\n          };\n\n          reader.readAsArrayBuffer(this.file);\n        }\n      }\n    }, {\n      key: \"_updateProgress\",\n      value: function _updateProgress(evt) {\n        if (evt.lengthComputable) {\n          var percentComplete = evt.loaded / evt.total * 0.99;\n\n          this._whileLoading(percentComplete, evt);\n        } else {\n          this._whileLoading('size unknown');\n        }\n      }\n      /**\n       *  Returns true if the sound file finished loading successfully.\n       *\n       *  @method  isLoaded\n       *  @for p5.SoundFile\n       *  @return {Boolean}\n       */\n\n    }, {\n      key: \"isLoaded\",\n      value: function isLoaded() {\n        if (this.buffer) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n      /**\n       * Play the p5.SoundFile\n       *\n       * @method play\n       * @for p5.SoundFile\n       * @param {Number} [startTime]            (optional) schedule playback to start (in seconds from now).\n       * @param {Number} [rate]             (optional) playback rate\n       * @param {Number} [amp]              (optional) amplitude (volume)\n       *                                     of playback\n       * @param {Number} [cueStart]        (optional) cue start time in seconds\n       * @param {Number} [duration]          (optional) duration of playback in seconds\n       */\n\n    }, {\n      key: \"play\",\n      value: function play(startTime, rate, amp, _cueStart, duration) {\n        if (!this.output) {\n          console.warn('SoundFile.play() called after dispose');\n          return;\n        }\n\n        var now = main.audiocontext.currentTime;\n        var cueStart, cueEnd;\n        var time = startTime || 0;\n\n        if (time < 0) {\n          time = 0;\n        }\n\n        time = time + now;\n\n        if (typeof rate !== 'undefined') {\n          this.rate(rate);\n        }\n\n        if (typeof amp !== 'undefined') {\n          this.setVolume(amp);\n        }\n\n        if (this.buffer) {\n          this._pauseTime = 0;\n\n          if (this.mode === 'restart' && this.buffer && this.bufferSourceNode) {\n            this.bufferSourceNode.stop(time);\n\n            this._counterNode.stop(time);\n          }\n\n          if (this.mode === 'untildone' && this.isPlaying()) {\n            return;\n          }\n\n          this.bufferSourceNode = this._initSourceNode();\n          delete this._counterNode;\n          this._counterNode = this._initCounterNode();\n\n          if (_cueStart) {\n            if (_cueStart >= 0 && _cueStart < this.buffer.duration) {\n              cueStart = _cueStart;\n            } else {\n              throw 'start time out of range';\n            }\n          } else {\n            cueStart = 0;\n          }\n\n          if (duration) {\n            duration = duration <= this.buffer.duration - cueStart ? duration : this.buffer.duration;\n          }\n\n          if (this._paused) {\n            this.bufferSourceNode.start(time, this.pauseTime, duration);\n\n            this._counterNode.start(time, this.pauseTime, duration);\n          } else {\n            this.bufferSourceNode.start(time, cueStart, duration);\n\n            this._counterNode.start(time, cueStart, duration);\n          }\n\n          this._playing = true;\n          this._paused = false;\n          this.bufferSourceNodes.push(this.bufferSourceNode);\n          this.bufferSourceNode._arrayIndex = this.bufferSourceNodes.length - 1;\n          this.bufferSourceNode.addEventListener('ended', this._clearOnEnd);\n        } else {\n          throw 'not ready to play file, buffer has yet to load. Try preload()';\n        }\n\n        this.bufferSourceNode.loop = this._looping;\n        this._counterNode.loop = this._looping;\n\n        if (this._looping === true) {\n          cueEnd = duration ? duration : cueStart - 0.000000000000001;\n          this.bufferSourceNode.loopStart = cueStart;\n          this.bufferSourceNode.loopEnd = cueEnd;\n          this._counterNode.loopStart = cueStart;\n          this._counterNode.loopEnd = cueEnd;\n        }\n      }\n      /**\n       *  p5.SoundFile has two play modes: <code>restart</code> and\n       *  <code>sustain</code>. Play Mode determines what happens to a\n       *  p5.SoundFile if it is triggered while in the middle of playback.\n       *  In sustain mode, playback will continue simultaneous to the\n       *  new playback. In restart mode, play() will stop playback\n       *  and start over. With untilDone, a sound will play only if it's\n       *  not already playing. Sustain is the default mode.\n       *\n       *  @method  playMode\n       *  @for p5.SoundFile\n       *  @param  {String} str 'restart' or 'sustain' or 'untilDone'\n       *  @example\n       *  <div><code>\n       *  let mySound;\n       *  function preload(){\n       *    mySound = loadSound('assets/Damscray_DancingTiger.mp3');\n       *  }\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(canvasPressed);\n       *    noFill();\n       *    rect(0, height/2, width - 1, height/2 - 1);\n       *    rect(0, 0, width - 1, height/2);\n       *    textAlign(CENTER, CENTER);\n       *    fill(20);\n       *    text('restart', width/2, 1 * height/4);\n       *    text('sustain', width/2, 3 * height/4);\n       *  }\n       *  function canvasPressed() {\n       *    if (mouseX < height/2) {\n       *      mySound.playMode('restart');\n       *    } else {\n       *      mySound.playMode('sustain');\n       *    }\n       *    mySound.play();\n       *  }\n       *\n       * </code></div>\n       */\n\n    }, {\n      key: \"playMode\",\n      value: function playMode(str) {\n        var s = str.toLowerCase();\n\n        if (s === 'restart' && this.buffer && this.bufferSourceNode) {\n          for (var i = 0; i < this.bufferSourceNodes.length - 1; i++) {\n            var now = main.audiocontext.currentTime;\n            this.bufferSourceNodes[i].stop(now);\n          }\n        }\n\n        if (s === 'restart' || s === 'sustain' || s === 'untildone') {\n          this.mode = s;\n        } else {\n          throw 'Invalid play mode. Must be either \"restart\" or \"sustain\"';\n        }\n      }\n      /**\n       *  Pauses a file that is currently playing. If the file is not\n       *  playing, then nothing will happen.\n       *\n       *  After pausing, .play() will resume from the paused\n       *  position.\n       *  If p5.SoundFile had been set to loop before it was paused,\n       *  it will continue to loop after it is unpaused with .play().\n       *\n       *  @method pause\n       *  @for p5.SoundFile\n       *  @param {Number} [startTime] (optional) schedule event to occur\n       *                               seconds from now\n       *  @example\n       *  <div><code>\n       *  let soundFile;\n       *  function preload() {\n       *    soundFormats('ogg', 'mp3');\n       *    soundFile = loadSound('assets/Damscray_-_Dancing_Tiger_02.mp3');\n       *  }\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(canvasPressed);\n       *    background(220);\n       *    text('tap to play, release to pause', 10, 20, width - 20);\n       *  }\n       *  function canvasPressed() {\n       *    soundFile.loop();\n       *    background(0, 200, 50);\n       *  }\n       *  function mouseReleased() {\n       *    soundFile.pause();\n       *    background(220);\n       *  }\n       *  </code>\n       *  </div>\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause(startTime) {\n        var now = main.audiocontext.currentTime;\n        var time = startTime || 0;\n        var pTime = time + now;\n\n        if (this.isPlaying() && this.buffer && this.bufferSourceNode) {\n          this._paused = true;\n          this._playing = false;\n          this.pauseTime = this.currentTime();\n          this.bufferSourceNode.stop(pTime);\n\n          this._counterNode.stop(pTime);\n\n          this._pauseTime = this.currentTime();\n        } else {\n          this._pauseTime = 0;\n        }\n      }\n      /**\n       * Loop the p5.SoundFile. Accepts optional parameters to set the\n       * playback rate, playback volume, loopStart, loopEnd.\n       *\n       * @method loop\n       * @for p5.SoundFile\n       * @param {Number} [startTime] (optional) schedule event to occur\n       *                             seconds from now\n       * @param {Number} [rate]        (optional) playback rate\n       * @param {Number} [amp]         (optional) playback volume\n       * @param {Number} [cueLoopStart] (optional) startTime in seconds\n       * @param {Number} [duration]  (optional) loop duration in seconds\n       * @example\n       *  <div><code>\n       *  let soundFile;\n       *  let loopStart = 0.5;\n       *  let loopDuration = 0.2;\n       *  function preload() {\n       *    soundFormats('ogg', 'mp3');\n       *    soundFile = loadSound('assets/Damscray_-_Dancing_Tiger_02.mp3');\n       *  }\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(canvasPressed);\n       *    background(220);\n       *    text('tap to play, release to pause', 10, 20, width - 20);\n       *  }\n       *  function canvasPressed() {\n       *    soundFile.loop();\n       *    background(0, 200, 50);\n       *  }\n       *  function mouseReleased() {\n       *    soundFile.pause();\n       *    background(220);\n       *  }\n       *  </code>\n       *  </div>\n       */\n\n    }, {\n      key: \"loop\",\n      value: function loop(startTime, rate, amp, loopStart, duration) {\n        this._looping = true;\n        this.play(startTime, rate, amp, loopStart, duration);\n      }\n      /**\n       * Set a p5.SoundFile's looping flag to true or false. If the sound\n       * is currently playing, this change will take effect when it\n       * reaches the end of the current playback.\n       *\n       * @method setLoop\n       * @for p5.SoundFile\n       * @param {Boolean} Boolean   set looping to true or false\n       */\n\n    }, {\n      key: \"setLoop\",\n      value: function setLoop(bool) {\n        if (bool === true) {\n          this._looping = true;\n        } else if (bool === false) {\n          this._looping = false;\n        } else {\n          throw 'Error: setLoop accepts either true or false';\n        }\n\n        if (this.bufferSourceNode) {\n          this.bufferSourceNode.loop = this._looping;\n          this._counterNode.loop = this._looping;\n        }\n      }\n      /**\n       * Returns 'true' if a p5.SoundFile is currently looping and playing, 'false' if not.\n       *\n       * @method isLooping\n       * @for p5.SoundFile\n       * @return {Boolean}\n       */\n\n    }, {\n      key: \"isLooping\",\n      value: function isLooping() {\n        if (!this.bufferSourceNode) {\n          return false;\n        }\n\n        if (this._looping === true && this.isPlaying() === true) {\n          return true;\n        }\n\n        return false;\n      }\n      /**\n       *  Returns true if a p5.SoundFile is playing, false if not (i.e.\n       *  paused or stopped).\n       *\n       *  @method isPlaying\n       *  @for p5.SoundFile\n       *  @return {Boolean}\n       */\n\n    }, {\n      key: \"isPlaying\",\n      value: function isPlaying() {\n        return this._playing;\n      }\n      /**\n       *  Returns true if a p5.SoundFile is paused, false if not (i.e.\n       *  playing or stopped).\n       *\n       *  @method  isPaused\n       *  @for p5.SoundFile\n       *  @return {Boolean}\n       */\n\n    }, {\n      key: \"isPaused\",\n      value: function isPaused() {\n        return this._paused;\n      }\n      /**\n       * Stop soundfile playback.\n       *\n       * @method stop\n       * @for p5.SoundFile\n       * @param {Number} [startTime] (optional) schedule event to occur\n       *                             in seconds from now\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop(timeFromNow) {\n        var time = timeFromNow || 0;\n\n        if (this.mode === 'sustain' || this.mode === 'untildone') {\n          this.stopAll(time);\n          this._playing = false;\n          this.pauseTime = 0;\n          this._paused = false;\n        } else if (this.buffer && this.bufferSourceNode) {\n          var now = main.audiocontext.currentTime;\n          var t = time || 0;\n          this.pauseTime = 0;\n          this.bufferSourceNode.stop(now + t);\n\n          this._counterNode.stop(now + t);\n\n          this._playing = false;\n          this._paused = false;\n        }\n      }\n      /**\n       *  Stop playback on all of this soundfile's sources.\n       *  @private\n       */\n\n    }, {\n      key: \"stopAll\",\n      value: function stopAll(_time) {\n        var now = main.audiocontext.currentTime;\n        var time = _time || 0;\n\n        if (this.buffer && this.bufferSourceNode) {\n          for (var i in this.bufferSourceNodes) {\n            var bufferSourceNode = this.bufferSourceNodes[i];\n\n            if (bufferSourceNode) {\n              try {\n                bufferSourceNode.stop(now + time);\n              } catch (e) {}\n            }\n          }\n\n          this._counterNode.stop(now + time);\n        }\n      }\n    }, {\n      key: \"getVolume\",\n      value: function getVolume() {\n        return this.output.gain.value;\n      }\n      /**\n       * Set the stereo panning of a p5.sound object to\n       * a floating point number between -1.0 (left) and 1.0 (right).\n       * Default is 0.0 (center).\n       *\n       * @method pan\n       * @for p5.SoundFile\n       * @param {Number} [panValue]     Set the stereo panner\n       * @param {Number} [timeFromNow]  schedule this event to happen\n       *                                 seconds from now\n       * @example\n       * <div><code>\n       *  let ballX = 0;\n       *  let soundFile;\n       *\n       *  function preload() {\n       *    soundFormats('ogg', 'mp3');\n       *    soundFile = loadSound('assets/beatbox.mp3');\n       *  }\n       *\n       *  function draw() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(canvasPressed);\n       *    background(220);\n       *    ballX = constrain(mouseX, 0, width);\n       *    ellipse(ballX, height/2, 20, 20);\n       *  }\n       *\n       *  function canvasPressed(){\n       *    // map the ball's x location to a panning degree\n       *    // between -1.0 (left) and 1.0 (right)\n       *    let panning = map(ballX, 0., width,-1.0, 1.0);\n       *    soundFile.pan(panning);\n       *    soundFile.play();\n       *  }\n       *  </div></code>\n       */\n\n    }, {\n      key: \"pan\",\n      value: function pan(pval, tFromNow) {\n        this.panPosition = pval;\n        this.panner.pan(pval, tFromNow);\n      }\n      /**\n       * Returns the current stereo pan position (-1.0 to 1.0)\n       *\n       * @method getPan\n       * @for p5.SoundFile\n       * @return {Number} Returns the stereo pan setting of the Oscillator\n       *                          as a number between -1.0 (left) and 1.0 (right).\n       *                          0.0 is center and default.\n       */\n\n    }, {\n      key: \"getPan\",\n      value: function getPan() {\n        return this.panPosition;\n      }\n      /**\n       *  Set the playback rate of a sound file. Will change the speed and the pitch.\n       *  Values less than zero will reverse the audio buffer.\n       *\n       *  @method rate\n       *  @for p5.SoundFile\n       *  @param {Number} [playbackRate]     Set the playback rate. 1.0 is normal,\n       *                                     .5 is half-speed, 2.0 is twice as fast.\n       *                                     Values less than zero play backwards.\n       *  @example\n       *  <div><code>\n       *  let mySound;\n       *\n       *  function preload() {\n       *    mySound = loadSound('assets/Damscray_DancingTiger.mp3');\n       *  }\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(canvasPressed);\n       *  }\n       *  function canvasPressed() {\n       *    mySound.loop();\n       *  }\n       *  function mouseReleased() {\n       *    mySound.pause();\n       *  }\n       *  function draw() {\n       *    background(220);\n       *\n       *    // Set the rate to a range between 0.1 and 4\n       *    // Changing the rate also alters the pitch\n       *    let playbackRate = map(mouseY, 0.1, height, 2, 0);\n       *    playbackRate = constrain(playbackRate, 0.01, 4);\n       *    mySound.rate(playbackRate);\n       *\n       *    line(0, mouseY, width, mouseY);\n       *    text('rate: ' + round(playbackRate * 100) + '%', 10, 20);\n       *  }\n       *\n       * </code>\n       * </div>\n       *\n       */\n\n    }, {\n      key: \"rate\",\n      value: function rate(playbackRate) {\n        var reverse = false;\n\n        if (typeof playbackRate === 'undefined') {\n          return this.playbackRate;\n        }\n\n        this.playbackRate = playbackRate;\n\n        if (playbackRate === 0) {\n          playbackRate = 0.0000000000001;\n        } else if (playbackRate < 0 && !this.reversed) {\n          playbackRate = Math.abs(playbackRate);\n          reverse = true;\n        } else if (playbackRate > 0 && this.reversed) {\n          reverse = true;\n        }\n\n        if (this.bufferSourceNode) {\n          var now = main.audiocontext.currentTime;\n          this.bufferSourceNode.playbackRate.cancelScheduledValues(now);\n          this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(playbackRate), now);\n\n          this._counterNode.playbackRate.cancelScheduledValues(now);\n\n          this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(playbackRate), now);\n        }\n\n        if (reverse) {\n          this.reverseBuffer();\n        }\n\n        return this.playbackRate;\n      }\n    }, {\n      key: \"setPitch\",\n      value: function setPitch(num) {\n        var newPlaybackRate = midiToFreq(num) / midiToFreq(60);\n        this.rate(newPlaybackRate);\n      }\n    }, {\n      key: \"getPlaybackRate\",\n      value: function getPlaybackRate() {\n        return this.playbackRate;\n      }\n      /**\n       *  Multiply the output volume (amplitude) of a sound file\n       *  between 0.0 (silence) and 1.0 (full volume).\n       *  1.0 is the maximum amplitude of a digital sound, so multiplying\n       *  by greater than 1.0 may cause digital distortion. To\n       *  fade, provide a <code>rampTime</code> parameter. For more\n       *  complex fades, see the Envelope class.\n       *\n       *  Alternately, you can pass in a signal source such as an\n       *  oscillator to modulate the amplitude with an audio signal.\n       *\n       *  @method  setVolume\n       *  @for p5.SoundFile\n       *  @param {Number|Object} volume  Volume (amplitude) between 0.0\n       *                                     and 1.0 or modulating signal/oscillator\n       *  @param {Number} [rampTime]  Fade for t seconds\n       *  @param {Number} [timeFromNow]  Schedule this event to happen at\n       *                                 t seconds in the future\n       */\n\n    }, {\n      key: \"setVolume\",\n      value: function setVolume(vol, _rampTime, _tFromNow) {\n        if (typeof vol === 'number') {\n          var rampTime = _rampTime || 0;\n          var tFromNow = _tFromNow || 0;\n          var now = main.audiocontext.currentTime;\n          var currentVol = this.output.gain.value;\n          this.output.gain.cancelScheduledValues(now + tFromNow);\n          this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n          this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n        } else if (vol) {\n          vol.connect(this.output.gain);\n        } else {\n          return this.output.gain;\n        }\n      }\n      /**\n       * Returns the duration of a sound file in seconds.\n       *\n       * @method duration\n       * @for p5.SoundFile\n       * @return {Number} The duration of the soundFile in seconds.\n       */\n\n    }, {\n      key: \"duration\",\n      value: function duration() {\n        if (this.buffer) {\n          return this.buffer.duration;\n        } else {\n          return 0;\n        }\n      }\n      /**\n       * Return the current position of the p5.SoundFile playhead, in seconds.\n       * Time is relative to the normal buffer direction, so if `reverseBuffer`\n       * has been called, currentTime will count backwards.\n       *\n       * @method currentTime\n       * @for p5.SoundFile\n       * @return {Number}   currentTime of the soundFile in seconds.\n       */\n\n    }, {\n      key: \"currentTime\",\n      value: function currentTime() {\n        return this.reversed ? Math.abs(this._lastPos - this.buffer.length) / soundfile_ac.sampleRate : this._lastPos / soundfile_ac.sampleRate;\n      }\n      /**\n       * Move the playhead of a soundfile that is currently playing to a\n       * new position and a new duration, in seconds.\n       * If none are given, will reset the file to play entire duration\n       * from start to finish. To set the position of a soundfile that is\n       * not currently playing, use the `play` or `loop` methods.\n       *\n       * @method jump\n       * @for p5.SoundFile\n       * @param {Number} cueTime    cueTime of the soundFile in seconds.\n       * @param {Number} duration    duration in seconds.\n       */\n\n    }, {\n      key: \"jump\",\n      value: function jump(cueTime, duration) {\n        if (cueTime < 0 || cueTime > this.buffer.duration) {\n          throw 'jump time out of range';\n        }\n\n        if (duration > this.buffer.duration - cueTime) {\n          throw 'end time out of range';\n        }\n\n        var cTime = cueTime || 0;\n        var dur = duration || undefined;\n\n        if (this.isPlaying()) {\n          this.stop(0);\n          this.play(0, this.playbackRate, this.output.gain.value, cTime, dur);\n        }\n      }\n      /**\n       * Return the number of channels in a sound file.\n       * For example, Mono = 1, Stereo = 2.\n       *\n       * @method channels\n       * @for p5.SoundFile\n       * @return {Number} [channels]\n       */\n\n    }, {\n      key: \"channels\",\n      value: function channels() {\n        return this.buffer.numberOfChannels;\n      }\n      /**\n       * Return the sample rate of the sound file.\n       *\n       * @method sampleRate\n       * @for p5.SoundFile\n       * @return {Number} [sampleRate]\n       */\n\n    }, {\n      key: \"sampleRate\",\n      value: function sampleRate() {\n        return this.buffer.sampleRate;\n      }\n      /**\n       * Return the number of samples in a sound file.\n       * Equal to sampleRate * duration.\n       *\n       * @method frames\n       * @for p5.SoundFile\n       * @return {Number} [sampleCount]\n       */\n\n    }, {\n      key: \"frames\",\n      value: function frames() {\n        return this.buffer.length;\n      }\n      /**\n       * Returns an array of amplitude peaks in a p5.SoundFile that can be\n       * used to draw a static waveform. Scans through the p5.SoundFile's\n       * audio buffer to find the greatest amplitudes. Accepts one\n       * parameter, 'length', which determines size of the array.\n       * Larger arrays result in more precise waveform visualizations.\n       *\n       * Inspired by Wavesurfer.js.\n       *\n       * @method  getPeaks\n       * @for p5.SoundFile\n       * @params {Number} [length] length is the size of the returned array.\n       *                          Larger length results in more precision.\n       *                          Defaults to 5*width of the browser window.\n       * @returns {Float32Array} Array of peaks.\n       */\n\n    }, {\n      key: \"getPeaks\",\n      value: function getPeaks(length) {\n        if (this.buffer) {\n          if (!length) {\n            length = window.width * 5;\n          }\n\n          if (this.buffer) {\n            var buffer = this.buffer;\n            var sampleSize = buffer.length / length;\n            var sampleStep = ~~(sampleSize / 10) || 1;\n            var channels = buffer.numberOfChannels;\n            var peaks = new Float32Array(Math.round(length));\n\n            for (var c = 0; c < channels; c++) {\n              var chan = buffer.getChannelData(c);\n\n              for (var i = 0; i < length; i++) {\n                var start = ~~(i * sampleSize);\n                var end = ~~(start + sampleSize);\n                var max = 0;\n\n                for (var j = start; j < end; j += sampleStep) {\n                  var value = chan[j];\n\n                  if (value > max) {\n                    max = value;\n                  } else if (-value > max) {\n                    max = value;\n                  }\n                }\n\n                if (c === 0 || Math.abs(max) > peaks[i]) {\n                  peaks[i] = max;\n                }\n              }\n            }\n\n            return peaks;\n          }\n        } else {\n          throw 'Cannot load peaks yet, buffer is not loaded';\n        }\n      }\n      /**\n       *  Reverses the p5.SoundFile's buffer source.\n       *  Playback must be handled separately (see example).\n       *\n       *  @method  reverseBuffer\n       *  @for p5.SoundFile\n       *  @example\n       *  <div><code>\n       *  let drum;\n       *  function preload() {\n       *    drum = loadSound('assets/drum.mp3');\n       *  }\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(canvasPressed);\n       *    background(220);\n       *    text('tap to play', 20, 20);\n       *  }\n       *\n       *  function canvasPressed() {\n       *    drum.stop();\n       *    drum.reverseBuffer();\n       *    drum.play();\n       *  }\n       * </code>\n       * </div>\n       */\n\n    }, {\n      key: \"reverseBuffer\",\n      value: function reverseBuffer() {\n        if (this.buffer) {\n          var currentPos = this._lastPos / soundfile_ac.sampleRate;\n          var curVol = this.getVolume();\n          this.setVolume(0, 0.001);\n          var numChannels = this.buffer.numberOfChannels;\n\n          for (var i = 0; i < numChannels; i++) {\n            this.buffer.getChannelData(i).reverse();\n          }\n\n          this.reversed = !this.reversed;\n\n          if (this.isPlaying() && currentPos) {\n            this.jump(this.duration() - currentPos);\n          }\n\n          this.setVolume(curVol, 0.001);\n        } else {\n          throw 'SoundFile is not done loading';\n        }\n      }\n      /**\n       *  Schedule an event to be called when the soundfile\n       *  reaches the end of a buffer. If the soundfile is\n       *  playing through once, this will be called when it\n       *  ends. If it is looping, it will be called when\n       *  stop is called.\n       *\n       *  @method  onended\n       *  @for p5.SoundFile\n       *  @param  {Function} callback function to call when the\n       *                              soundfile has ended.\n       */\n\n    }, {\n      key: \"onended\",\n      value: function onended(callback) {\n        this._onended = callback;\n        return this;\n      }\n    }, {\n      key: \"add\",\n      value: function add() {}\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        var now = main.audiocontext.currentTime;\n        var index = main.soundArray.indexOf(this);\n        main.soundArray.splice(index, 1);\n        this.stop(now);\n\n        if (this.buffer && this.bufferSourceNode) {\n          for (var i = 0; i < this.bufferSourceNodes.length - 1; i++) {\n            if (this.bufferSourceNodes[i] !== null) {\n              this.bufferSourceNodes[i].disconnect();\n\n              try {\n                this.bufferSourceNodes[i].stop(now);\n              } catch (e) {\n                console.warn('no buffer source node to dispose');\n              }\n\n              this.bufferSourceNodes[i] = null;\n            }\n          }\n\n          if (this.isPlaying()) {\n            try {\n              this._counterNode.stop(now);\n            } catch (e) {\n              console.log(e);\n            }\n\n            this._counterNode = null;\n          }\n        }\n\n        if (this.output) {\n          this.output.disconnect();\n          this.output = null;\n        }\n\n        if (this.panner) {\n          this.panner.disconnect();\n          this.panner = null;\n        }\n      }\n      /**\n       * Connects the output of a p5sound object to input of another\n       * p5.sound object. For example, you may connect a p5.SoundFile to an\n       * FFT or an Effect. If no parameter is given, it will connect to\n       * the main output. Most p5sound objects connect to the master\n       * output when they are created.\n       *\n       * @method connect\n       * @for p5.SoundFile\n       * @param {Object} [object] Audio object that accepts an input\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect(unit) {\n        if (!unit) {\n          this.panner.connect(main.input);\n        } else {\n          if (unit.hasOwnProperty('input')) {\n            this.panner.connect(unit.input);\n          } else {\n            this.panner.connect(unit);\n          }\n        }\n      }\n      /**\n       * Disconnects the output of this p5sound object.\n       *\n       * @method disconnect\n       * @for p5.SoundFile\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.panner) {\n          this.panner.disconnect();\n        }\n      }\n      /**\n       */\n\n    }, {\n      key: \"getLevel\",\n      value: function getLevel() {\n        console.warn('p5.SoundFile.getLevel has been removed from the library. Use p5.Amplitude instead');\n      }\n      /**\n       *  Reset the source for this SoundFile to a\n       *  new path (URL).\n       *\n       *  @method  setPath\n       *  @for p5.SoundFile\n       *  @param {String}   path     path to audio file\n       *  @param {Function} callback Callback\n       */\n\n    }, {\n      key: \"setPath\",\n      value: function setPath(p, callback) {\n        var path = p5.prototype._checkFileFormats(p);\n\n        this.url = path;\n        this.load(callback);\n      }\n      /**\n       *  Replace the current Audio Buffer with a new Buffer.\n       *\n       *  @method setBuffer\n       *  @for p5.SoundFile\n       *  @param {Array} buf Array of Float32 Array(s). 2 Float32 Arrays\n       *                     will create a stereo source. 1 will create\n       *                     a mono source.\n       */\n\n    }, {\n      key: \"setBuffer\",\n      value: function setBuffer(buf) {\n        var numChannels = buf.length;\n        var size = buf[0].length;\n        var newBuffer = soundfile_ac.createBuffer(numChannels, size, soundfile_ac.sampleRate);\n\n        if (!(buf[0] instanceof Float32Array)) {\n          buf[0] = new Float32Array(buf[0]);\n        }\n\n        for (var channelNum = 0; channelNum < numChannels; channelNum++) {\n          var channel = newBuffer.getChannelData(channelNum);\n          channel.set(buf[channelNum]);\n        }\n\n        this.buffer = newBuffer;\n        this.panner.inputChannels(numChannels);\n      }\n    }, {\n      key: \"_initCounterNode\",\n      value: function _initCounterNode() {\n        var _this = this;\n\n        var self = this;\n        var now = soundfile_ac.currentTime;\n        var cNode = soundfile_ac.createBufferSource();\n        var workletBufferSize = safeBufferSize(256);\n\n        if (self._workletNode) {\n          self._workletNode.disconnect();\n\n          delete self._workletNode;\n        }\n\n        self._workletNode = new AudioWorkletNode(soundfile_ac, processorNames_default.a.soundFileProcessor, {\n          processorOptions: {\n            bufferSize: workletBufferSize\n          }\n        });\n\n        self._workletNode.port.onmessage = function (event) {\n          if (event.data.name === 'position') {\n            if (event.data.position === 0) {\n              return;\n            }\n\n            _this._lastPos = event.data.position;\n\n            _this._onTimeUpdate(self._lastPos);\n          }\n        };\n\n        cNode.buffer = _createCounterBuffer(self.buffer);\n        cNode.playbackRate.setValueAtTime(self.playbackRate, now);\n        cNode.connect(self._workletNode);\n\n        self._workletNode.connect(p5.soundOut._silentNode);\n\n        return cNode;\n      }\n    }, {\n      key: \"_initSourceNode\",\n      value: function _initSourceNode() {\n        var bufferSourceNode = soundfile_ac.createBufferSource();\n        bufferSourceNode.buffer = this.buffer;\n        bufferSourceNode.playbackRate.value = this.playbackRate;\n        bufferSourceNode.connect(this.output);\n        return bufferSourceNode;\n      }\n    }, {\n      key: \"processPeaks\",\n      value: function processPeaks(callback, _initThreshold, _minThreshold, _minPeaks) {\n        console.warn('processPeaks is deprecated');\n      }\n      /**\n       *  Schedule events to trigger every time a MediaElement\n       *  (audio/video) reaches a playback cue point.\n       *\n       *  Accepts a callback function, a time (in seconds) at which to trigger\n       *  the callback, and an optional parameter for the callback.\n       *\n       *  Time will be passed as the first parameter to the callback function,\n       *  and param will be the second parameter.\n       *\n       *\n       *  @method  addCue\n       *  @for p5.SoundFile\n       *  @param {Number}   time     Time in seconds, relative to this media\n       *                             element's playback. For example, to trigger\n       *                             an event every time playback reaches two\n       *                             seconds, pass in the number 2. This will be\n       *                             passed as the first parameter to\n       *                             the callback function.\n       *  @param {Function} callback Name of a function that will be\n       *                             called at the given time. The callback will\n       *                             receive time and (optionally) param as its\n       *                             two parameters.\n       *  @param {Object} [value]    An object to be passed as the\n       *                             second parameter to the\n       *                             callback function.\n       *  @return {Number} id ID of this cue,\n       *                      useful for removeCue(id)\n       *  @example\n       *  <div><code>\n       *  let mySound;\n       *  function preload() {\n       *    mySound = loadSound('assets/Damscray_DancingTiger.mp3');\n       *  }\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(canvasPressed);\n       *    background(220);\n       *    text('tap to play', 10, 20);\n       *\n       *    // schedule calls to changeText\n       *    mySound.addCue(0, changeText, \"hello\" );\n       *    mySound.addCue(0.5, changeText, \"hello,\" );\n       *    mySound.addCue(1, changeText, \"hello, p5!\");\n       *    mySound.addCue(1.5, changeText, \"hello, p5!!\");\n       *    mySound.addCue(2, changeText, \"hello, p5!!!!!\");\n       *  }\n       *\n       *  function changeText(val) {\n       *    background(220);\n       *    text(val, 10, 20);\n       *  }\n       *\n       *  function canvasPressed() {\n       *    mySound.play();\n       *  }\n       *  </code></div>\n       */\n\n    }, {\n      key: \"addCue\",\n      value: function addCue(time, callback, val) {\n        var id = this._cueIDCounter++;\n        var cue = new Cue(callback, time, id, val);\n\n        this._cues.push(cue);\n\n        return id;\n      }\n      /**\n       *  Remove a callback based on its ID. The ID is returned by the\n       *  addCue method.\n       *\n       *  @method removeCue\n       *  @for p5.SoundFile\n       *  @param  {Number} id ID of the cue, as returned by addCue\n       */\n\n    }, {\n      key: \"removeCue\",\n      value: function removeCue(id) {\n        var cueLength = this._cues.length;\n\n        for (var i = 0; i < cueLength; i++) {\n          var cue = this._cues[i];\n\n          if (cue.id === id) {\n            this._cues.splice(i, 1);\n\n            break;\n          }\n        }\n\n        if (this._cues.length === 0) {}\n      }\n      /**\n       *  Remove all of the callbacks that had originally been scheduled\n       *  via the addCue method.\n       *\n       *  @method  clearCues\n       */\n\n    }, {\n      key: \"clearCues\",\n      value: function clearCues() {\n        this._cues = [];\n      }\n    }, {\n      key: \"_onTimeUpdate\",\n      value: function _onTimeUpdate(position) {\n        var playbackTime = position / this.buffer.sampleRate;\n        var cueLength = this._cues.length;\n\n        for (var i = 0; i < cueLength; i++) {\n          var cue = this._cues[i];\n          var callbackTime = cue.time;\n          var val = cue.val;\n          var leftLimit = this._prevUpdateTime || 0;\n          var rightLimit = playbackTime;\n\n          if (leftLimit <= callbackTime && callbackTime <= rightLimit) {\n            cue.callback(val);\n          }\n        }\n\n        this._prevUpdateTime = playbackTime;\n      }\n      /**\n       * Save a p5.SoundFile as a .wav file. The browser will prompt the user\n       * to download the file to their device. To upload a file to a server, see\n       * <a href=\"/reference/#/p5.SoundFile/getBlob\">getBlob</a>\n       *\n       * @method save\n       * @for p5.SoundFile\n       * @param  {String} [fileName]      name of the resulting .wav file.\n       * @example\n       *  <div><code>\n       *  let mySound;\n       *  function preload() {\n       *    mySound = loadSound('assets/doorbell.mp3');\n       *  }\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(canvasPressed);\n       *    background(220);\n       *    text('tap to download', 10, 20);\n       *  }\n       *\n       *  function canvasPressed() {\n       *    mySound.save('my cool filename');\n       *  }\n       * </code></div>\n       */\n\n    }, {\n      key: \"save\",\n      value: function save(fileName) {\n        p5.prototype.saveSound(this, fileName, 'wav');\n      }\n      /**\n       * This method is useful for sending a SoundFile to a server. It returns the\n       * .wav-encoded audio data as a \"<a target=\"_blank\" title=\"Blob reference at\n       * MDN\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Blob\">Blob</a>\".\n       * A Blob is a file-like data object that can be uploaded to a server\n       * with an <a href=\"/reference/#/p5/httpDo\">http</a> request. We'll\n       * use the `httpDo` options object to send a POST request with some\n       * specific options: we encode the request as `multipart/form-data`,\n       * and attach the blob as one of the form values using `FormData`.\n       *\n       *\n       * @method getBlob\n       * @for p5.SoundFile\n       * @returns {Blob} A file-like data object\n       * @example\n       *  <div><code>\n       *  function preload() {\n       *    mySound = loadSound('assets/doorbell.mp3');\n       *  }\n       *\n       *  function setup() {\n       *    noCanvas();\n       *    let soundBlob = mySound.getBlob();\n       *\n       *    // Now we can send the blob to a server...\n       *    let serverUrl = 'https://jsonplaceholder.typicode.com/posts';\n       *    let httpRequestOptions = {\n       *      method: 'POST',\n       *      body: new FormData().append('soundBlob', soundBlob),\n       *      headers: new Headers({\n       *        'Content-Type': 'multipart/form-data'\n       *      })\n       *    };\n       *    httpDo(serverUrl, httpRequestOptions);\n       *\n       *    // We can also create an `ObjectURL` pointing to the Blob\n       *    let blobUrl = URL.createObjectURL(soundBlob);\n       *\n       *    // The `<Audio>` Element accepts Object URL's\n       *    createAudio(blobUrl).showControls();\n       *\n       *    createDiv();\n       *\n       *    // The ObjectURL exists as long as this tab is open\n       *    let input = createInput(blobUrl);\n       *    input.attribute('readonly', true);\n       *    input.mouseClicked(function() { input.elt.select() });\n       *  }\n       *\n       * </code></div>\n       */\n\n    }, {\n      key: \"getBlob\",\n      value: function getBlob() {\n        var dataView = convertToWav(this.buffer);\n        return new Blob([dataView], {\n          type: 'audio/wav'\n        });\n      }\n    }]);\n    return SoundFile;\n  }();\n  /**\n   *  loadSound() returns a new p5.SoundFile from a specified\n   *  path. If called during preload(), the p5.SoundFile will be ready\n   *  to play in time for setup() and draw(). If called outside of\n   *  preload, the p5.SoundFile will not be ready immediately, so\n   *  loadSound accepts a callback as the second parameter. Using a\n   *  <a href=\"https://github.com/processing/p5.js/wiki/Local-server\">\n   *  local server</a> is recommended when loading external files.\n   *\n   *  @method loadSound\n   *  @for p5\n   *  @param  {String|Array}   path     Path to the sound file, or an array with\n   *                                    paths to soundfiles in multiple formats\n   *                                    i.e. ['sound.ogg', 'sound.mp3'].\n   *                                    Alternately, accepts an object: either\n   *                                    from the HTML5 File API, or a p5.File.\n   *  @param {Function} [successCallback]   Name of a function to call once file loads\n   *  @param {Function} [errorCallback]   Name of a function to call if there is\n   *                                      an error loading the file.\n   *  @param {Function} [whileLoading] Name of a function to call while file is loading.\n   *                                 This function will receive the percentage loaded\n   *                                 so far, from 0.0 to 1.0.\n   *  @return {SoundFile}            Returns a p5.SoundFile\n   *  @example\n   *  <div><code>\n   *  let mySound;\n   *  function preload() {\n   *    soundFormats('mp3', 'ogg');\n   *    mySound = loadSound('assets/doorbell');\n   *  }\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(canvasPressed);\n   *    background(220);\n   *    text('tap here to play', 10, 20);\n   *  }\n   *\n   *  function canvasPressed() {\n   *    // playing a sound file on a user gesture\n   *    // is equivalent to `userStartAudio()`\n   *    mySound.play();\n   *  }\n   *  </code></div>\n   */\n\n\n  function loadSound(path, callback, onerror, whileLoading) {\n    if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n      window.alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n    }\n\n    var self = this;\n    var s = new soundfile_SoundFile(path, function () {\n      if (typeof callback === 'function') {\n        callback.apply(self, arguments);\n      }\n\n      if (typeof self._decrementPreload === 'function') {\n        self._decrementPreload();\n      }\n    }, onerror, whileLoading);\n    return s;\n  }\n\n  var soundfile = soundfile_SoundFile;\n\n  function amplitude_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function amplitude_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function amplitude_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) amplitude_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) amplitude_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  /**\n   *  Amplitude measures volume between 0.0 and 1.0.\n   *  Listens to all p5sound by default, or use setInput()\n   *  to listen to a specific sound source. Accepts an optional\n   *  smoothing value, which defaults to 0.\n   *\n   *  @class p5.Amplitude\n   *  @constructor\n   *  @param {Number} [smoothing] between 0.0 and .999 to smooth\n   *                             amplitude readings (defaults to 0)\n   *  @example\n   *  <div><code>\n   *  let sound, amplitude;\n   *\n   *  function preload(){\n   *    sound = loadSound('assets/beat.mp3');\n   *  }\n   *  function setup() {\n   *    let cnv = createCanvas(100,100);\n   *    cnv.mouseClicked(togglePlay);\n   *    amplitude = new p5.Amplitude();\n   *  }\n   *\n   *  function draw() {\n   *    background(220);\n   *    text('tap to play', 20, 20);\n   *\n   *    let level = amplitude.getLevel();\n   *    let size = map(level, 0, 1, 0, 200);\n   *    ellipse(width/2, height/2, size, size);\n   *  }\n   *\n   *  function togglePlay() {\n   *    if (sound.isPlaying() ){\n   *      sound.pause();\n   *    } else {\n   *      sound.loop();\n   *\t\tamplitude = new p5.Amplitude();\n   *\t\tamplitude.setInput(sound);\n   *    }\n   *  }\n   *\n   *  </code></div>\n   */\n\n\n  var amplitude_Amplitude = function () {\n    function Amplitude(smoothing) {\n      amplitude_classCallCheck(this, Amplitude);\n      this.bufferSize = safeBufferSize(2048);\n      this.audiocontext = main.audiocontext;\n      this._workletNode = new AudioWorkletNode(this.audiocontext, processorNames_default.a.amplitudeProcessor, {\n        outputChannelCount: [1],\n        parameterData: {\n          smoothing: smoothing || 0\n        },\n        processorOptions: {\n          normalize: false,\n          smoothing: smoothing || 0,\n          numInputChannels: 2,\n          bufferSize: this.bufferSize\n        }\n      });\n\n      this._workletNode.port.onmessage = function (event) {\n        if (event.data.name === 'amplitude') {\n          this.volume = event.data.volume;\n          this.volNorm = event.data.volNorm;\n          this.stereoVol = event.data.stereoVol;\n          this.stereoVolNorm = event.data.stereoVolNorm;\n        }\n      }.bind(this);\n\n      this.input = this._workletNode;\n      this.output = this.audiocontext.createGain();\n      this.volume = 0;\n      this.volNorm = 0;\n      this.stereoVol = [0, 0];\n      this.stereoVolNorm = [0, 0];\n      this.normalize = false;\n\n      this._workletNode.connect(this.output);\n\n      this.output.gain.value = 0;\n      this.output.connect(this.audiocontext.destination);\n      main.meter.connect(this._workletNode);\n      main.soundArray.push(this);\n    }\n    /**\n     *  Connects to the p5sound instance (main output) by default.\n     *  Optionally, you can pass in a specific source (i.e. a soundfile).\n     *\n     *  @method setInput\n     *  @for p5.Amplitude\n     *  @param {soundObject|undefined} [snd] set the sound source\n     *                                       (optional, defaults to\n     *                                       main output)\n     *  @param {Number|undefined} [smoothing] a range between 0.0 and 1.0\n     *                                        to smooth amplitude readings\n     *  @example\n     *  <div><code>\n     *  function preload(){\n     *    sound1 = loadSound('assets/beat.mp3');\n     *    sound2 = loadSound('assets/drum.mp3');\n     *  }\n     *  function setup(){\n     *    cnv = createCanvas(100, 100);\n     *    cnv.mouseClicked(toggleSound);\n     *\n     *    amplitude = new p5.Amplitude();\n     *    amplitude.setInput(sound2);\n     *  }\n     *\n     *  function draw() {\n     *    background(220);\n     *    text('tap to play', 20, 20);\n     *\n     *    let level = amplitude.getLevel();\n     *    let size = map(level, 0, 1, 0, 200);\n     *    ellipse(width/2, height/2, size, size);\n     *  }\n     *\n     *  function toggleSound(){\n     *    if (sound1.isPlaying() && sound2.isPlaying()) {\n     *      sound1.stop();\n     *      sound2.stop();\n     *    } else {\n     *      sound1.play();\n     *      sound2.play();\n     *    }\n     *  }\n     *  </code></div>\n     */\n\n\n    amplitude_createClass(Amplitude, [{\n      key: \"setInput\",\n      value: function setInput(source, smoothing) {\n        main.meter.disconnect();\n\n        if (smoothing) {\n          this._workletNode.parameters.get('smoothing').value = smoothing;\n        }\n\n        if (source == null) {\n          console.log('Amplitude input source is not ready! Connecting to main output instead');\n          main.meter.connect(this._workletNode);\n        } else if (source) {\n          source.connect(this._workletNode);\n\n          this._workletNode.disconnect();\n\n          this._workletNode.connect(this.output);\n        } else {\n          main.meter.connect(this._workletNode);\n        }\n      }\n    }, {\n      key: \"connect\",\n      value: function connect(unit) {\n        if (unit) {\n          if (unit.hasOwnProperty('input')) {\n            this.output.connect(unit.input);\n          } else {\n            this.output.connect(unit);\n          }\n        } else {\n          this.output.connect(this.panner.connect(main.input));\n        }\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.output) {\n          this.output.disconnect();\n        }\n      }\n      /**\n       *  Returns a single Amplitude reading at the moment it is called.\n       *  For continuous readings, run in the draw loop.\n       *\n       *  @method getLevel\n       *  @for p5.Amplitude\n       *  @param {Number} [channel] Optionally return only channel 0 (left) or 1 (right)\n       *  @return {Number}       Amplitude as a number between 0.0 and 1.0\n       *  @example\n       *  <div><code>\n       *  function preload(){\n       *    sound = loadSound('assets/beat.mp3');\n       *  }\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mouseClicked(toggleSound);\n       *    amplitude = new p5.Amplitude();\n       *  }\n       *\n       *  function draw() {\n       *    background(220, 150);\n       *    textAlign(CENTER);\n       *    text('tap to play', width/2, 20);\n       *\n       *    let level = amplitude.getLevel();\n       *    let size = map(level, 0, 1, 0, 200);\n       *    ellipse(width/2, height/2, size, size);\n       *  }\n       *\n       *  function toggleSound(){\n       *    if (sound.isPlaying()) {\n       *      sound.stop();\n       *    } else {\n       *      sound.play();\n       *    }\n       *  }\n       *  </code></div>\n       */\n\n    }, {\n      key: \"getLevel\",\n      value: function getLevel(channel) {\n        if (typeof channel !== 'undefined') {\n          if (this.normalize) {\n            return this.stereoVolNorm[channel];\n          } else {\n            return this.stereoVol[channel];\n          }\n        } else if (this.normalize) {\n          return this.volNorm;\n        } else {\n          return this.volume;\n        }\n      }\n      /**\n       * Determines whether the results of Amplitude.process() will be\n       * Normalized. To normalize, Amplitude finds the difference the\n       * loudest reading it has processed and the maximum amplitude of\n       * 1.0. Amplitude adds this difference to all values to produce\n       * results that will reliably map between 0.0 and 1.0. However,\n       * if a louder moment occurs, the amount that Normalize adds to\n       * all the values will change. Accepts an optional boolean parameter\n       * (true or false). Normalizing is off by default.\n       *\n       * @method toggleNormalize\n       * @for p5.Amplitude\n       * @param {boolean} [boolean] set normalize to true (1) or false (0)\n       */\n\n    }, {\n      key: \"toggleNormalize\",\n      value: function toggleNormalize(bool) {\n        if (typeof bool === 'boolean') {\n          this.normalize = bool;\n        } else {\n          this.normalize = !this.normalize;\n        }\n\n        this._workletNode.port.postMessage({\n          name: 'toggleNormalize',\n          normalize: this.normalize\n        });\n      }\n      /**\n       *  Smooth Amplitude analysis by averaging with the last analysis\n       *  frame. Off by default.\n       *\n       *  @method smooth\n       *  @for p5.Amplitude\n       *  @param {Number} set smoothing from 0.0 <= 1\n       */\n\n    }, {\n      key: \"smooth\",\n      value: function smooth(s) {\n        if (s >= 0 && s < 1) {\n          this._workletNode.port.postMessage({\n            name: 'smoothing',\n            smoothing: s\n          });\n        } else {\n          console.log('Error: smoothing must be between 0 and 1');\n        }\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        var index = main.soundArray.indexOf(this);\n        main.soundArray.splice(index, 1);\n\n        if (this.input) {\n          this.input.disconnect();\n          delete this.input;\n        }\n\n        if (this.output) {\n          this.output.disconnect();\n          delete this.output;\n        }\n\n        this._workletNode.disconnect();\n\n        delete this._workletNode;\n      }\n    }]);\n    return Amplitude;\n  }();\n\n  var amplitude = amplitude_Amplitude;\n\n  function fft_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function fft_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function fft_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) fft_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) fft_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  /**\n   *  <p>FFT (Fast Fourier Transform) is an analysis algorithm that\n   *  isolates individual\n   *  <a href=\"https://en.wikipedia.org/wiki/Audio_frequency\">\n   *  audio frequencies</a> within a waveform.</p>\n   *\n   *  <p>Once instantiated, a p5.FFT object can return an array based on\n   *  two types of analyses: <br> • <code>FFT.waveform()</code> computes\n   *  amplitude values along the time domain. The array indices correspond\n   *  to samples across a brief moment in time. Each value represents\n   *  amplitude of the waveform at that sample of time.<br>\n   *  • <code>FFT.analyze() </code> computes amplitude values along the\n   *  frequency domain. The array indices correspond to frequencies (i.e.\n   *  pitches), from the lowest to the highest that humans can hear. Each\n   *  value represents amplitude at that slice of the frequency spectrum.\n   *  Use with <code>getEnergy()</code> to measure amplitude at specific\n   *  frequencies, or within a range of frequencies. </p>\n   *\n   *  <p>FFT analyzes a very short snapshot of sound called a sample\n   *  buffer. It returns an array of amplitude measurements, referred\n   *  to as <code>bins</code>. The array is 1024 bins long by default.\n   *  You can change the bin array length, but it must be a power of 2\n   *  between 16 and 1024 in order for the FFT algorithm to function\n   *  correctly. The actual size of the FFT buffer is twice the\n   *  number of bins, so given a standard sample rate, the buffer is\n   *  2048/44100 seconds long.</p>\n   *\n   *\n   *  @class p5.FFT\n   *  @constructor\n   *  @param {Number} [smoothing]   Smooth results of Freq Spectrum.\n   *                                0.0 < smoothing < 1.0.\n   *                                Defaults to 0.8.\n   *  @param {Number} [bins]    Length of resulting array.\n   *                            Must be a power of two between\n   *                            16 and 1024. Defaults to 1024.\n   *  @example\n   *  <div><code>\n   *  function preload(){\n   *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *\n   *  function setup(){\n   *    let cnv = createCanvas(100,100);\n   *    cnv.mouseClicked(togglePlay);\n   *    fft = new p5.FFT();\n   *    sound.amp(0.2);\n   *  }\n   *\n   *  function draw(){\n   *    background(220);\n   *\n   *    let spectrum = fft.analyze();\n   *    noStroke();\n   *    fill(255, 0, 255);\n   *    for (let i = 0; i< spectrum.length; i++){\n   *      let x = map(i, 0, spectrum.length, 0, width);\n   *      let h = -height + map(spectrum[i], 0, 255, height, 0);\n   *      rect(x, height, width / spectrum.length, h )\n   *    }\n   *\n   *    let waveform = fft.waveform();\n   *    noFill();\n   *    beginShape();\n   *    stroke(20);\n   *    for (let i = 0; i < waveform.length; i++){\n   *      let x = map(i, 0, waveform.length, 0, width);\n   *      let y = map( waveform[i], -1, 1, 0, height);\n   *      vertex(x,y);\n   *    }\n   *    endShape();\n   *\n   *    text('tap to play', 20, 20);\n   *  }\n   *\n   *  function togglePlay() {\n   *    if (sound.isPlaying()) {\n   *      sound.pause();\n   *    } else {\n   *      sound.loop();\n   *    }\n   *  }\n   *  </code></div>\n   */\n\n\n  var fft_FFT = function () {\n    function FFT(smoothing, bins) {\n      fft_classCallCheck(this, FFT);\n      this.input = this.analyser = main.audiocontext.createAnalyser();\n      Object.defineProperties(this, {\n        bins: {\n          get: function get() {\n            return this.analyser.fftSize / 2;\n          },\n          set: function set(b) {\n            this.analyser.fftSize = b * 2;\n          },\n          configurable: true,\n          enumerable: true\n        },\n        smoothing: {\n          get: function get() {\n            return this.analyser.smoothingTimeConstant;\n          },\n          set: function set(s) {\n            this.analyser.smoothingTimeConstant = s;\n          },\n          configurable: true,\n          enumerable: true\n        }\n      });\n      this.smooth(smoothing);\n      this.bins = bins || 1024;\n      main.fftMeter.connect(this.analyser);\n      this.freqDomain = new Uint8Array(this.analyser.frequencyBinCount);\n      this.timeDomain = new Uint8Array(this.analyser.frequencyBinCount);\n      this.bass = [20, 140];\n      this.lowMid = [140, 400];\n      this.mid = [400, 2600];\n      this.highMid = [2600, 5200];\n      this.treble = [5200, 14000];\n      main.soundArray.push(this);\n    }\n    /**\n     *  Set the input source for the FFT analysis. If no source is\n     *  provided, FFT will analyze all sound in the sketch.\n     *\n     *  @method  setInput\n     *  @for p5.FFT\n     *  @param {Object} [source] p5.sound object (or web audio API source node)\n     */\n\n\n    fft_createClass(FFT, [{\n      key: \"setInput\",\n      value: function setInput(source) {\n        if (!source) {\n          main.fftMeter.connect(this.analyser);\n        } else {\n          if (source.output) {\n            source.output.connect(this.analyser);\n          } else if (source.connect) {\n            source.connect(this.analyser);\n          }\n\n          main.fftMeter.disconnect();\n        }\n      }\n      /**\n       *  Returns an array of amplitude values (between -1.0 and +1.0) that represent\n       *  a snapshot of amplitude readings in a single buffer. Length will be\n       *  equal to bins (defaults to 1024). Can be used to draw the waveform\n       *  of a sound.\n       *\n       *  @method waveform\n       *  @for p5.FFT\n       *  @param {Number} [bins]    Must be a power of two between\n       *                            16 and 1024. Defaults to 1024.\n       *  @param {String} [precision] If any value is provided, will return results\n       *                              in a Float32 Array which is more precise\n       *                              than a regular array.\n       *  @return {Array}  Array    Array of amplitude values (-1 to 1)\n       *                            over time. Array length = bins.\n       *\n       */\n\n    }, {\n      key: \"waveform\",\n      value: function waveform() {\n        var bins, mode;\n        var normalArray = new Array();\n\n        for (var i = 0; i < arguments.length; i++) {\n          if (typeof arguments[i] === 'number') {\n            bins = arguments[i];\n            this.analyser.fftSize = bins * 2;\n          }\n\n          if (typeof arguments[i] === 'string') {\n            mode = arguments[i];\n          }\n        }\n\n        if (mode && !p5.prototype._isSafari()) {\n          timeToFloat(this, this.timeDomain);\n          this.analyser.getFloatTimeDomainData(this.timeDomain);\n          return this.timeDomain;\n        } else {\n          timeToInt(this, this.timeDomain);\n          this.analyser.getByteTimeDomainData(this.timeDomain);\n\n          for (var j = 0; j < this.timeDomain.length; j++) {\n            var scaled = p5.prototype.map(this.timeDomain[j], 0, 255, -1, 1);\n            normalArray.push(scaled);\n          }\n\n          return normalArray;\n        }\n      }\n      /**\n       *  Returns an array of amplitude values (between 0 and 255)\n       *  across the frequency spectrum. Length is equal to FFT bins\n       *  (1024 by default). The array indices correspond to frequencies\n       *  (i.e. pitches), from the lowest to the highest that humans can\n       *  hear. Each value represents amplitude at that slice of the\n       *  frequency spectrum. Must be called prior to using\n       *  <code>getEnergy()</code>.\n       *\n       *  @method analyze\n       *  @for p5.FFT\n       *  @param {Number} [bins]    Must be a power of two between\n       *                             16 and 1024. Defaults to 1024.\n       *  @param {Number} [scale]    If \"dB,\" returns decibel\n       *                             float measurements between\n       *                             -140 and 0 (max).\n       *                             Otherwise returns integers from 0-255.\n       *  @return {Array} spectrum    Array of energy (amplitude/volume)\n       *                              values across the frequency spectrum.\n       *                              Lowest energy (silence) = 0, highest\n       *                              possible is 255.\n       *  @example\n       *  <div><code>\n       *  let osc, fft;\n       *\n       *  function setup(){\n       *    let cnv = createCanvas(100,100);\n       *    cnv.mousePressed(startSound);\n       *    osc = new p5.Oscillator();\n       *    osc.amp(0);\n       *    fft = new p5.FFT();\n       *  }\n       *\n       *  function draw(){\n       *    background(220);\n       *\n       *    let freq = map(mouseX, 0, windowWidth, 20, 10000);\n       *    freq = constrain(freq, 1, 20000);\n       *    osc.freq(freq);\n       *\n       *    let spectrum = fft.analyze();\n       *    noStroke();\n       *    fill(255, 0, 255);\n       *    for (let i = 0; i< spectrum.length; i++){\n       *      let x = map(i, 0, spectrum.length, 0, width);\n       *      let h = -height + map(spectrum[i], 0, 255, height, 0);\n       *      rect(x, height, width / spectrum.length, h );\n       *    }\n       *\n       *    stroke(255);\n       *    if (!osc.started) {\n       *      text('tap here and drag to change frequency', 10, 20, width - 20);\n       *    } else {\n       *      text(round(freq)+'Hz', 10, 20);\n       *    }\n       *  }\n       *\n       *  function startSound() {\n       *    osc.start();\n       *    osc.amp(0.5, 0.2);\n       *  }\n       *\n       *  function mouseReleased() {\n       *    osc.amp(0, 0.2);\n       *  }\n       *  </code></div>\n       *\n       *\n       */\n\n    }, {\n      key: \"analyze\",\n      value: function analyze() {\n        var mode;\n\n        for (var i = 0; i < arguments.length; i++) {\n          if (typeof arguments[i] === 'number') {\n            this.bins = arguments[i];\n            this.analyser.fftSize = this.bins * 2;\n          }\n\n          if (typeof arguments[i] === 'string') {\n            mode = arguments[i];\n          }\n        }\n\n        if (mode && mode.toLowerCase() === 'db') {\n          freqToFloat(this);\n          this.analyser.getFloatFrequencyData(this.freqDomain);\n          return this.freqDomain;\n        } else {\n          freqToInt(this, this.freqDomain);\n          this.analyser.getByteFrequencyData(this.freqDomain);\n          var normalArray = Array.apply([], this.freqDomain);\n          return normalArray;\n        }\n      }\n      /**\n       *  Returns the amount of energy (volume) at a specific\n       *  <a href=\"https://en.wikipedia.org/wiki/Audio_frequency\" target=\"_blank\">\n       *  frequency</a>, or the average amount of energy between two\n       *  frequencies. Accepts Number(s) corresponding\n       *  to frequency (in Hz), or a \"string\" corresponding to predefined\n       *  frequency ranges (\"bass\", \"lowMid\", \"mid\", \"highMid\", \"treble\").\n       *  Returns a range between 0 (no energy/volume at that frequency) and\n       *  255 (maximum energy).\n       *  <em>NOTE: analyze() must be called prior to getEnergy(). analyze()\n       *  tells the FFT to analyze frequency data, and getEnergy() uses\n       *  the results to determine the value at a specific frequency or\n       *  range of frequencies.</em></p>\n       *\n       *  @method  getEnergy\n       *  @for p5.FFT\n       *  @param  {Number|String} frequency1   Will return a value representing\n       *                                energy at this frequency. Alternately,\n       *                                the strings \"bass\", \"lowMid\" \"mid\",\n       *                                \"highMid\", and \"treble\" will return\n       *                                predefined frequency ranges.\n       *  @param  {Number} [frequency2] If a second frequency is given,\n       *                                will return average amount of\n       *                                energy that exists between the\n       *                                two frequencies.\n       *  @return {Number}   Energy   Energy (volume/amplitude) from\n       *                              0 and 255.\n       *\n       */\n\n    }, {\n      key: \"getEnergy\",\n      value: function getEnergy(frequency1, frequency2) {\n        var nyquist = main.audiocontext.sampleRate / 2;\n\n        if (frequency1 === 'bass') {\n          frequency1 = this.bass[0];\n          frequency2 = this.bass[1];\n        } else if (frequency1 === 'lowMid') {\n          frequency1 = this.lowMid[0];\n          frequency2 = this.lowMid[1];\n        } else if (frequency1 === 'mid') {\n          frequency1 = this.mid[0];\n          frequency2 = this.mid[1];\n        } else if (frequency1 === 'highMid') {\n          frequency1 = this.highMid[0];\n          frequency2 = this.highMid[1];\n        } else if (frequency1 === 'treble') {\n          frequency1 = this.treble[0];\n          frequency2 = this.treble[1];\n        }\n\n        if (typeof frequency1 !== 'number') {\n          throw 'invalid input for getEnergy()';\n        } else if (!frequency2) {\n          var index = Math.round(frequency1 / nyquist * this.freqDomain.length);\n          return this.freqDomain[index];\n        } else if (frequency1 && frequency2) {\n          if (frequency1 > frequency2) {\n            var swap = frequency2;\n            frequency2 = frequency1;\n            frequency1 = swap;\n          }\n\n          var lowIndex = Math.round(frequency1 / nyquist * this.freqDomain.length);\n          var highIndex = Math.round(frequency2 / nyquist * this.freqDomain.length);\n          var total = 0;\n          var numFrequencies = 0;\n\n          for (var i = lowIndex; i <= highIndex; i++) {\n            total += this.freqDomain[i];\n            numFrequencies += 1;\n          }\n\n          var toReturn = total / numFrequencies;\n          return toReturn;\n        } else {\n          throw 'invalid input for getEnergy()';\n        }\n      }\n    }, {\n      key: \"getFreq\",\n      value: function getFreq(freq1, freq2) {\n        console.log('getFreq() is deprecated. Please use getEnergy() instead.');\n        var x = this.getEnergy(freq1, freq2);\n        return x;\n      }\n      /**\n       *  Returns the\n       *  <a href=\"http://en.wikipedia.org/wiki/Spectral_centroid\" target=\"_blank\">\n       *  spectral centroid</a> of the input signal.\n       *  <em>NOTE: analyze() must be called prior to getCentroid(). Analyze()\n       *  tells the FFT to analyze frequency data, and getCentroid() uses\n       *  the results determine the spectral centroid.</em></p>\n       *\n       *  @method  getCentroid\n       *  @for p5.FFT\n       *  @return {Number}   Spectral Centroid Frequency  of the spectral centroid in Hz.\n       *\n       *\n       * @example\n       *  <div><code>\n       * function setup(){\n       *  cnv = createCanvas(100,100);\n       *  cnv.mousePressed(userStartAudio);\n       *  sound = new p5.AudioIn();\n       *  sound.start();\n       *  fft = new p5.FFT();\n       *  sound.connect(fft);\n       *}\n       *\n       *function draw() {\n       *  if (getAudioContext().state !== 'running') {\n       *    background(220);\n       *    text('tap here and enable mic to begin', 10, 20, width - 20);\n       *    return;\n       *  }\n       *  let centroidplot = 0.0;\n       *  let spectralCentroid = 0;\n       *\n       *  background(0);\n       *  stroke(0,255,0);\n       *  let spectrum = fft.analyze();\n       *  fill(0,255,0); // spectrum is green\n       *\n       *  //draw the spectrum\n       *  for (let i = 0; i < spectrum.length; i++){\n       *    let x = map(log(i), 0, log(spectrum.length), 0, width);\n       *    let h = map(spectrum[i], 0, 255, 0, height);\n       *    let rectangle_width = (log(i+1)-log(i))*(width/log(spectrum.length));\n       *    rect(x, height, rectangle_width, -h )\n       *  }\n       *  let nyquist = 22050;\n       *\n       *  // get the centroid\n       *  spectralCentroid = fft.getCentroid();\n       *\n       *  // the mean_freq_index calculation is for the display.\n       *  let mean_freq_index = spectralCentroid/(nyquist/spectrum.length);\n       *\n       *  centroidplot = map(log(mean_freq_index), 0, log(spectrum.length), 0, width);\n       *\n       *  stroke(255,0,0); // the line showing where the centroid is will be red\n       *\n       *  rect(centroidplot, 0, width / spectrum.length, height)\n       *  noStroke();\n       *  fill(255,255,255);  // text is white\n       *  text('centroid: ', 10, 20);\n       *  text(round(spectralCentroid)+' Hz', 10, 40);\n       *}\n       * </code></div>\n       */\n\n    }, {\n      key: \"getCentroid\",\n      value: function getCentroid() {\n        var nyquist = main.audiocontext.sampleRate / 2;\n        var cumulative_sum = 0;\n        var centroid_normalization = 0;\n\n        for (var i = 0; i < this.freqDomain.length; i++) {\n          cumulative_sum += i * this.freqDomain[i];\n          centroid_normalization += this.freqDomain[i];\n        }\n\n        var mean_freq_index = 0;\n\n        if (centroid_normalization !== 0) {\n          mean_freq_index = cumulative_sum / centroid_normalization;\n        }\n\n        var spec_centroid_freq = mean_freq_index * (nyquist / this.freqDomain.length);\n        return spec_centroid_freq;\n      }\n      /**\n       *  Smooth FFT analysis by averaging with the last analysis frame.\n       *\n       *  @method smooth\n       *  @param {Number} smoothing    0.0 < smoothing < 1.0.\n       *                               Defaults to 0.8.\n       */\n\n    }, {\n      key: \"smooth\",\n      value: function smooth(s) {\n        if (typeof s !== 'undefined') {\n          this.smoothing = s;\n        }\n\n        return this.smoothing;\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        var index = main.soundArray.indexOf(this);\n        main.soundArray.splice(index, 1);\n\n        if (this.analyser) {\n          this.analyser.disconnect();\n          delete this.analyser;\n        }\n      }\n      /**\n       *  Returns an array of average amplitude values for a given number\n       *  of frequency bands split equally. N defaults to 16.\n       *  <em>NOTE: analyze() must be called prior to linAverages(). Analyze()\n       *  tells the FFT to analyze frequency data, and linAverages() uses\n       *  the results to group them into a smaller set of averages.</em></p>\n       *\n       *  @method  linAverages\n       *  @for p5.FFT\n       *  @param  {Number}  N                Number of returned frequency groups\n       *  @return {Array}   linearAverages   Array of average amplitude values for each group\n       */\n\n    }, {\n      key: \"linAverages\",\n      value: function linAverages(_N) {\n        var N = _N || 16;\n        var spectrum = this.freqDomain;\n        var spectrumLength = spectrum.length;\n        var spectrumStep = Math.floor(spectrumLength / N);\n        var linearAverages = new Array(N);\n        var groupIndex = 0;\n\n        for (var specIndex = 0; specIndex < spectrumLength; specIndex++) {\n          linearAverages[groupIndex] = linearAverages[groupIndex] !== undefined ? (linearAverages[groupIndex] + spectrum[specIndex]) / 2 : spectrum[specIndex];\n\n          if (specIndex % spectrumStep === spectrumStep - 1) {\n            groupIndex++;\n          }\n        }\n\n        return linearAverages;\n      }\n      /**\n       *  Returns an array of average amplitude values of the spectrum, for a given\n       *  set of <a href=\"https://en.wikipedia.org/wiki/Octave_band\" target=\"_blank\">\n       *  Octave Bands</a>\n       *  <em>NOTE: analyze() must be called prior to logAverages(). Analyze()\n       *  tells the FFT to analyze frequency data, and logAverages() uses\n       *  the results to group them into a smaller set of averages.</em></p>\n       *\n       *  @method  logAverages\n       *  @for p5.FFT\n       *  @param  {Array}   octaveBands    Array of Octave Bands objects for grouping\n       *  @return {Array}   logAverages    Array of average amplitude values for each group\n       */\n\n    }, {\n      key: \"logAverages\",\n      value: function logAverages(octaveBands) {\n        var nyquist = main.audiocontext.sampleRate / 2;\n        var spectrum = this.freqDomain;\n        var spectrumLength = spectrum.length;\n        var logAverages = new Array(octaveBands.length);\n        var octaveIndex = 0;\n\n        for (var specIndex = 0; specIndex < spectrumLength; specIndex++) {\n          var specIndexFrequency = Math.round(specIndex * nyquist / this.freqDomain.length);\n\n          if (specIndexFrequency > octaveBands[octaveIndex].hi) {\n            octaveIndex++;\n          }\n\n          logAverages[octaveIndex] = logAverages[octaveIndex] !== undefined ? (logAverages[octaveIndex] + spectrum[specIndex]) / 2 : spectrum[specIndex];\n        }\n\n        return logAverages;\n      }\n      /**\n       *  Calculates and Returns the 1/N\n       *  <a href=\"https://en.wikipedia.org/wiki/Octave_band\" target=\"_blank\">Octave Bands</a>\n       *  N defaults to 3 and minimum central frequency to 15.625Hz.\n       *  (1/3 Octave Bands ~= 31 Frequency Bands)\n       *  Setting fCtr0 to a central value of a higher octave will ignore the lower bands\n       *  and produce less frequency groups.\n       *\n       *  @method   getOctaveBands\n       *  @for p5.FFT\n       *  @param  {Number}  N             Specifies the 1/N type of generated octave bands\n       *  @param  {Number}  fCtr0         Minimum central frequency for the lowest band\n       *  @return {Array}   octaveBands   Array of octave band objects with their bounds\n       */\n\n    }, {\n      key: \"getOctaveBands\",\n      value: function getOctaveBands(_N, _fCtr0) {\n        var N = _N || 3;\n        var fCtr0 = _fCtr0 || 15.625;\n        var octaveBands = [];\n        var lastFrequencyBand = {\n          lo: fCtr0 / Math.pow(2, 1 / (2 * N)),\n          ctr: fCtr0,\n          hi: fCtr0 * Math.pow(2, 1 / (2 * N))\n        };\n        octaveBands.push(lastFrequencyBand);\n        var nyquist = main.audiocontext.sampleRate / 2;\n\n        while (lastFrequencyBand.hi < nyquist) {\n          var newFrequencyBand = {};\n          newFrequencyBand.lo = lastFrequencyBand.hi;\n          newFrequencyBand.ctr = lastFrequencyBand.ctr * Math.pow(2, 1 / N);\n          newFrequencyBand.hi = newFrequencyBand.ctr * Math.pow(2, 1 / (2 * N));\n          octaveBands.push(newFrequencyBand);\n          lastFrequencyBand = newFrequencyBand;\n        }\n\n        return octaveBands;\n      }\n    }]);\n    return FFT;\n  }();\n\n  function freqToFloat(fft) {\n    if (fft.freqDomain instanceof Float32Array === false) {\n      fft.freqDomain = new Float32Array(fft.analyser.frequencyBinCount);\n    }\n  }\n\n  function freqToInt(fft) {\n    if (fft.freqDomain instanceof Uint8Array === false) {\n      fft.freqDomain = new Uint8Array(fft.analyser.frequencyBinCount);\n    }\n  }\n\n  function timeToFloat(fft) {\n    if (fft.timeDomain instanceof Float32Array === false) {\n      fft.timeDomain = new Float32Array(fft.analyser.frequencyBinCount);\n    }\n  }\n\n  function timeToInt(fft) {\n    if (fft.timeDomain instanceof Uint8Array === false) {\n      fft.timeDomain = new Uint8Array(fft.analyser.frequencyBinCount);\n    }\n  }\n\n  var fft = fft_FFT;\n\n  var Add = __webpack_require__(4);\n\n  var Add_default = __webpack_require__.n(Add);\n\n  var Multiply = __webpack_require__(1);\n\n  var Multiply_default = __webpack_require__.n(Multiply);\n\n  var Scale = __webpack_require__(8);\n\n  var Scale_default = __webpack_require__.n(Scale);\n\n  function oscillator_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      oscillator_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      oscillator_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return oscillator_typeof(obj);\n  }\n\n  function _possibleConstructorReturn(self, call) {\n    if (call && (oscillator_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return _assertThisInitialized(self);\n  }\n\n  function _assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _getPrototypeOf(o) {\n    _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return _getPrototypeOf(o);\n  }\n\n  function _inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) _setPrototypeOf(subClass, superClass);\n  }\n\n  function _setPrototypeOf(o, p) {\n    _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return _setPrototypeOf(o, p);\n  }\n\n  function oscillator_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function oscillator_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function oscillator_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) oscillator_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) oscillator_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function sigChain(o, mathObj, thisChain, nextChain, type) {\n    var chainSource = o.oscillator;\n\n    for (var i in o.mathOps) {\n      if (o.mathOps[i] instanceof type) {\n        chainSource.disconnect();\n        o.mathOps[i].dispose();\n        thisChain = i;\n\n        if (thisChain < o.mathOps.length - 2) {\n          nextChain = o.mathOps[i + 1];\n        }\n      }\n    }\n\n    if (thisChain === o.mathOps.length - 1) {\n      o.mathOps.push(nextChain);\n    }\n\n    if (i > 0) {\n      chainSource = o.mathOps[i - 1];\n    }\n\n    chainSource.disconnect();\n    chainSource.connect(mathObj);\n    mathObj.connect(nextChain);\n    o.mathOps[thisChain] = mathObj;\n    return o;\n  }\n  /**\n   *  <p>Creates a signal that oscillates between -1.0 and 1.0.\n   *  By default, the oscillation takes the form of a sinusoidal\n   *  shape ('sine'). Additional types include 'triangle',\n   *  'sawtooth' and 'square'. The frequency defaults to\n   *  440 oscillations per second (440Hz, equal to the pitch of an\n   *  'A' note).</p>\n   *\n   *  <p>Set the type of oscillation with setType(), or by instantiating a\n   *  specific oscillator: <a href=\"/reference/#/p5.SinOsc\">p5.SinOsc</a>, <a\n   *  href=\"/reference/#/p5.TriOsc\">p5.TriOsc</a>, <a\n   *  href=\"/reference/#/p5.SqrOsc\">p5.SqrOsc</a>, or <a\n   *  href=\"/reference/#/p5.SawOsc\">p5.SawOsc</a>.\n   *  </p>\n   *\n   *  @class p5.Oscillator\n   *  @constructor\n   *  @param {Number} [freq] frequency defaults to 440Hz\n   *  @param {String} [type] type of oscillator. Options:\n   *                         'sine' (default), 'triangle',\n   *                         'sawtooth', 'square'\n   *  @example\n   *  <div><code>\n   *  let osc, playing, freq, amp;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playOscillator);\n   *    osc = new p5.Oscillator('sine');\n   *  }\n   *\n   *  function draw() {\n   *    background(220)\n   *    freq = constrain(map(mouseX, 0, width, 100, 500), 100, 500);\n   *    amp = constrain(map(mouseY, height, 0, 0, 1), 0, 1);\n   *\n   *    text('tap to play', 20, 20);\n   *    text('freq: ' + freq, 20, 40);\n   *    text('amp: ' + amp, 20, 60);\n   *\n   *    if (playing) {\n   *      // smooth the transitions by 0.1 seconds\n   *      osc.freq(freq, 0.1);\n   *      osc.amp(amp, 0.1);\n   *    }\n   *  }\n   *\n   *  function playOscillator() {\n   *    // starting an oscillator on a user gesture will enable audio\n   *    // in browsers that have a strict autoplay policy.\n   *    // See also: userStartAudio();\n   *    osc.start();\n   *    playing = true;\n   *  }\n   *\n   *  function mouseReleased() {\n   *    // ramp amplitude to 0 over 0.5 seconds\n   *    osc.amp(0, 0.5);\n   *    playing = false;\n   *  }\n   *  </code> </div>\n   */\n\n\n  var oscillator_Oscillator = function () {\n    function Oscillator(freq, type) {\n      oscillator_classCallCheck(this, Oscillator);\n\n      if (typeof freq === 'string') {\n        var f = type;\n        type = freq;\n        freq = f;\n      }\n\n      if (typeof type === 'number') {\n        var _f = type;\n        type = freq;\n        freq = _f;\n      }\n\n      this.started = false;\n      this.phaseAmount = undefined;\n      this.oscillator = main.audiocontext.createOscillator();\n      this.f = freq || 440.0;\n      this.oscillator.type = type || 'sine';\n      this.oscillator.frequency.setValueAtTime(this.f, main.audiocontext.currentTime);\n      this.output = main.audiocontext.createGain();\n      this._freqMods = [];\n      this.output.gain.value = 0.5;\n      this.output.gain.setValueAtTime(0.5, main.audiocontext.currentTime);\n      this.oscillator.connect(this.output);\n      this.panPosition = 0.0;\n      this.connection = main.input;\n      this.panner = new panner_0(this.output, this.connection, 1);\n      this.mathOps = [this.output];\n      main.soundArray.push(this);\n      this.fade = this.amp;\n    }\n    /**\n     *  Start an oscillator.\n     *\n     *  Starting an oscillator on a user gesture will enable audio in browsers\n     *  that have a strict autoplay policy, including Chrome and most mobile\n     *  devices. See also: `userStartAudio()`.\n     *\n     *  @method  start\n     *  @for p5.Oscillator\n     *  @param  {Number} [time] startTime in seconds from now.\n     *  @param  {Number} [frequency] frequency in Hz.\n     */\n\n\n    oscillator_createClass(Oscillator, [{\n      key: \"start\",\n      value: function start(time, f) {\n        if (this.started) {\n          var now = main.audiocontext.currentTime;\n          this.stop(now);\n        }\n\n        if (!this.started) {\n          var freq = f || this.f;\n          var type = this.oscillator.type;\n\n          if (this.oscillator) {\n            this.oscillator.disconnect();\n            delete this.oscillator;\n          }\n\n          this.oscillator = main.audiocontext.createOscillator();\n          this.oscillator.frequency.value = Math.abs(freq);\n          this.oscillator.type = type;\n          this.oscillator.connect(this.output);\n          time = time || 0;\n          this.oscillator.start(time + main.audiocontext.currentTime);\n          this.freqNode = this.oscillator.frequency;\n\n          for (var i in this._freqMods) {\n            if (typeof this._freqMods[i].connect !== 'undefined') {\n              this._freqMods[i].connect(this.oscillator.frequency);\n            }\n          }\n\n          this.started = true;\n        }\n      }\n      /**\n       *  Stop an oscillator. Accepts an optional parameter\n       *  to determine how long (in seconds from now) until the\n       *  oscillator stops.\n       *\n       *  @method  stop\n       *  @for p5.Oscillator\n       *  @param  {Number} secondsFromNow Time, in seconds from now.\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop(time) {\n        if (this.started) {\n          var t = time || 0;\n          var now = main.audiocontext.currentTime;\n          this.oscillator.stop(t + now);\n          this.started = false;\n        }\n      }\n      /**\n       *  Set the amplitude between 0 and 1.0. Or, pass in an object\n       *  such as an oscillator to modulate amplitude with an audio signal.\n       *\n       *  @method  amp\n       *  @for p5.Oscillator\n       *  @param  {Number|Object} vol between 0 and 1.0\n       *                              or a modulating signal/oscillator\n       *  @param {Number} [rampTime] create a fade that lasts rampTime\n       *  @param {Number} [timeFromNow] schedule this event to happen\n       *                                seconds from now\n       *  @return  {AudioParam} gain  If no value is provided,\n       *                              returns the Web Audio API\n       *                              AudioParam that controls\n       *                              this oscillator's\n       *                              gain/amplitude/volume)\n       */\n\n    }, {\n      key: \"amp\",\n      value: function amp(vol) {\n        var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n        if (typeof vol === 'number') {\n          var now = main.audiocontext.currentTime;\n          this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n        } else if (vol) {\n          vol.connect(this.output.gain);\n        } else {\n          return this.output.gain;\n        }\n      }\n      /**\n       * Returns the value of output gain\n       *\n       *  @method  getAmp\n       *  @for p5.Oscillator\n       *\n       * @returns {number} Amplitude value between 0.0 and 1.0\n       */\n\n    }, {\n      key: \"getAmp\",\n      value: function getAmp() {\n        return this.output.gain.value;\n      }\n      /**\n       *  Set frequency of an oscillator to a value. Or, pass in an object\n       *  such as an oscillator to modulate the frequency with an audio signal.\n       *\n       *  @method  freq\n       *  @for p5.Oscillator\n       *  @param  {Number|Object} Frequency Frequency in Hz\n       *                                        or modulating signal/oscillator\n       *  @param  {Number} [rampTime] Ramp time (in seconds)\n       *  @param  {Number} [timeFromNow] Schedule this event to happen\n       *                                   at x seconds from now\n       *  @return  {AudioParam} Frequency If no value is provided,\n       *                                  returns the Web Audio API\n       *                                  AudioParam that controls\n       *                                  this oscillator's frequency\n       *  @example\n       *  <div><code>\n       *  let osc;\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(playOscillator);\n       *    osc = new p5.Oscillator(300);\n       *    background(220);\n       *    text('tap to play', 20, 20);\n       *  }\n       *\n       *  function playOscillator() {\n       *    osc.start();\n       *    osc.amp(0.5);\n       *    // start at 700Hz\n       *    osc.freq(700);\n       *    // ramp to 60Hz over 0.7 seconds\n       *    osc.freq(60, 0.7);\n       *    osc.amp(0, 0.1, 0.7);\n       *  }\n       *  </code></div>\n       */\n\n    }, {\n      key: \"freq\",\n      value: function freq(val) {\n        var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n        if (typeof val === 'number' && !isNaN(val)) {\n          this.f = val;\n          var now = main.audiocontext.currentTime;\n\n          if (rampTime === 0) {\n            this.oscillator.frequency.setValueAtTime(val, tFromNow + now);\n          } else {\n            if (val > 0) {\n              this.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n            } else {\n              this.oscillator.frequency.linearRampToValueAtTime(val, tFromNow + rampTime + now);\n            }\n          }\n\n          if (this.phaseAmount) {\n            this.phase(this.phaseAmount);\n          }\n        } else if (val) {\n          if (val.output) {\n            val = val.output;\n          }\n\n          val.connect(this.oscillator.frequency);\n\n          this._freqMods.push(val);\n        } else {\n          return this.oscillator.frequency;\n        }\n      }\n      /**\n       * Returns the value of frequency of oscillator\n       *\n       *  @method  getFreq\n       *  @for p5.Oscillator\n       *  @returns {number} Frequency of oscillator in Hertz\n       */\n\n    }, {\n      key: \"getFreq\",\n      value: function getFreq() {\n        return this.oscillator.frequency.value;\n      }\n      /**\n       *  Set type to 'sine', 'triangle', 'sawtooth' or 'square'.\n       *\n       *  @method  setType\n       *  @for p5.Oscillator\n       *  @param {String} type 'sine', 'triangle', 'sawtooth' or 'square'.\n       */\n\n    }, {\n      key: \"setType\",\n      value: function setType(type) {\n        this.oscillator.type = type;\n      }\n      /**\n       *  Returns  current type of oscillator eg. 'sine', 'triangle', 'sawtooth' or 'square'.\n       *\n       *  @method  getType\n       *  @for p5.Oscillator\n       *  @returns {String} type of oscillator  eg . 'sine', 'triangle', 'sawtooth' or 'square'.\n       */\n\n    }, {\n      key: \"getType\",\n      value: function getType() {\n        return this.oscillator.type;\n      }\n      /**\n       *  Connect to a p5.sound / Web Audio object.\n       *\n       *  @method  connect\n       *  @for p5.Oscillator\n       *  @param  {Object} unit A p5.sound or Web Audio object\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect(unit) {\n        if (!unit) {\n          this.panner.connect(main.input);\n        } else if (unit.hasOwnProperty('input')) {\n          this.panner.connect(unit.input);\n          this.connection = unit.input;\n        } else {\n          this.panner.connect(unit);\n          this.connection = unit;\n        }\n      }\n      /**\n       *  Disconnect all outputs\n       *\n       *  @method  disconnect\n       *  @for p5.Oscillator\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.output) {\n          this.output.disconnect();\n        }\n\n        if (this.panner) {\n          this.panner.disconnect();\n\n          if (this.output) {\n            this.output.connect(this.panner);\n          }\n        }\n\n        this.oscMods = [];\n      }\n      /**\n       *  Pan between Left (-1) and Right (1)\n       *\n       *  @method  pan\n       *  @for p5.Oscillator\n       *  @param  {Number} panning Number between -1 and 1\n       *  @param  {Number} timeFromNow schedule this event to happen\n       *                                seconds from now\n       */\n\n    }, {\n      key: \"pan\",\n      value: function pan(pval, tFromNow) {\n        this.panPosition = pval;\n        this.panner.pan(pval, tFromNow);\n      }\n      /**\n       *  Returns the current value of panPosition , between Left (-1) and Right (1)\n       *\n       *  @method  getPan\n       *  @for p5.Oscillator\n       *\n       *  @returns {number} panPosition of oscillator , between Left (-1) and Right (1)\n       */\n\n    }, {\n      key: \"getPan\",\n      value: function getPan() {\n        return this.panPosition;\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        var index = main.soundArray.indexOf(this);\n        main.soundArray.splice(index, 1);\n\n        if (this.oscillator) {\n          var now = main.audiocontext.currentTime;\n          this.stop(now);\n          this.disconnect();\n          this.panner = null;\n          this.oscillator = null;\n        }\n\n        if (this.osc2) {\n          this.osc2.dispose();\n        }\n      }\n      /**\n       *  Set the phase of an oscillator between 0.0 and 1.0.\n       *  In this implementation, phase is a delay time\n       *  based on the oscillator's current frequency.\n       *\n       *  @method  phase\n       *  @for p5.Oscillator\n       *  @param  {Number} phase float between 0.0 and 1.0\n       */\n\n    }, {\n      key: \"phase\",\n      value: function phase(p) {\n        var delayAmt = p5.prototype.map(p, 0, 1.0, 0, 1 / this.f);\n        var now = main.audiocontext.currentTime;\n        this.phaseAmount = p;\n\n        if (!this.dNode) {\n          this.dNode = main.audiocontext.createDelay();\n          this.oscillator.disconnect();\n          this.oscillator.connect(this.dNode);\n          this.dNode.connect(this.output);\n        }\n\n        this.dNode.delayTime.setValueAtTime(delayAmt, now);\n      }\n      /**\n       *  Add a value to the p5.Oscillator's output amplitude,\n       *  and return the oscillator. Calling this method again\n       *  will override the initial add() with a new value.\n       *\n       *  @method  add\n       *  @for p5.Oscillator\n       *  @param {Number} number Constant number to add\n       *  @return {p5.Oscillator} Oscillator Returns this oscillator\n       *                                     with scaled output\n       *\n       */\n\n    }, {\n      key: \"add\",\n      value: function add(num) {\n        var add = new Add_default.a(num);\n        var thisChain = this.mathOps.length - 1;\n        var nextChain = this.output;\n        return sigChain(this, add, thisChain, nextChain, Add_default.a);\n      }\n      /**\n       *  Multiply the p5.Oscillator's output amplitude\n       *  by a fixed value (i.e. turn it up!). Calling this method\n       *  again will override the initial mult() with a new value.\n       *\n       *  @method  mult\n       *  @for p5.Oscillator\n       *  @param {Number} number Constant number to multiply\n       *  @return {p5.Oscillator} Oscillator Returns this oscillator\n       *                                     with multiplied output\n       */\n\n    }, {\n      key: \"mult\",\n      value: function mult(num) {\n        var mult = new Multiply_default.a(num);\n        var thisChain = this.mathOps.length - 1;\n        var nextChain = this.output;\n        return sigChain(this, mult, thisChain, nextChain, Multiply_default.a);\n      }\n      /**\n       *  Scale this oscillator's amplitude values to a given\n       *  range, and return the oscillator. Calling this method\n       *  again will override the initial scale() with new values.\n       *\n       *  @method  scale\n       *  @for p5.Oscillator\n       *  @param  {Number} inMin  input range minumum\n       *  @param  {Number} inMax  input range maximum\n       *  @param  {Number} outMin input range minumum\n       *  @param  {Number} outMax input range maximum\n       *  @return {p5.Oscillator} Oscillator Returns this oscillator\n       *                                     with scaled output\n       */\n\n    }, {\n      key: \"scale\",\n      value: function scale(inMin, inMax, outMin, outMax) {\n        var mapOutMin, mapOutMax;\n\n        if (arguments.length === 4) {\n          mapOutMin = p5.prototype.map(outMin, inMin, inMax, 0, 1) - 0.5;\n          mapOutMax = p5.prototype.map(outMax, inMin, inMax, 0, 1) - 0.5;\n        } else {\n          mapOutMin = arguments[0];\n          mapOutMax = arguments[1];\n        }\n\n        var scale = new Scale_default.a(mapOutMin, mapOutMax);\n        var thisChain = this.mathOps.length - 1;\n        var nextChain = this.output;\n        return sigChain(this, scale, thisChain, nextChain, Scale_default.a);\n      }\n    }]);\n    return Oscillator;\n  }();\n  /**\n   *  Constructor: <code>new p5.SinOsc()</code>.\n   *  This creates a Sine Wave Oscillator and is\n   *  equivalent to <code> new p5.Oscillator('sine')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('sine')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @class  p5.SinOsc\n   *  @constructor\n   *  @extends p5.Oscillator\n   *  @param {Number} [freq] Set the frequency\n   */\n\n\n  var SinOsc = function (_Oscillator) {\n    _inherits(SinOsc, _Oscillator);\n\n    function SinOsc(freq) {\n      oscillator_classCallCheck(this, SinOsc);\n      return _possibleConstructorReturn(this, _getPrototypeOf(SinOsc).call(this, freq, 'sine'));\n    }\n\n    return SinOsc;\n  }(oscillator_Oscillator);\n  /**\n   *  Constructor: <code>new p5.TriOsc()</code>.\n   *  This creates a Triangle Wave Oscillator and is\n   *  equivalent to <code>new p5.Oscillator('triangle')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('triangle')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @class  p5.TriOsc\n   *  @constructor\n   *  @extends p5.Oscillator\n   *  @param {Number} [freq] Set the frequency\n   */\n\n\n  var TriOsc = function (_Oscillator2) {\n    _inherits(TriOsc, _Oscillator2);\n\n    function TriOsc(freq) {\n      oscillator_classCallCheck(this, TriOsc);\n      return _possibleConstructorReturn(this, _getPrototypeOf(TriOsc).call(this, freq, 'triangle'));\n    }\n\n    return TriOsc;\n  }(oscillator_Oscillator);\n  /**\n   *  Constructor: <code>new p5.SawOsc()</code>.\n   *  This creates a SawTooth Wave Oscillator and is\n   *  equivalent to <code> new p5.Oscillator('sawtooth')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('sawtooth')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @class  p5.SawOsc\n   *  @constructor\n   *  @extends p5.Oscillator\n   *  @param {Number} [freq] Set the frequency\n   */\n\n\n  var SawOsc = function (_Oscillator3) {\n    _inherits(SawOsc, _Oscillator3);\n\n    function SawOsc(freq) {\n      oscillator_classCallCheck(this, SawOsc);\n      return _possibleConstructorReturn(this, _getPrototypeOf(SawOsc).call(this, freq, 'sawtooth'));\n    }\n\n    return SawOsc;\n  }(oscillator_Oscillator);\n  /**\n   *  Constructor: <code>new p5.SqrOsc()</code>.\n   *  This creates a Square Wave Oscillator and is\n   *  equivalent to <code> new p5.Oscillator('square')\n   *  </code> or creating a p5.Oscillator and then calling\n   *  its method <code>setType('square')</code>.\n   *  See p5.Oscillator for methods.\n   *\n   *  @class  p5.SqrOsc\n   *  @constructor\n   *  @extends p5.Oscillator\n   *  @param {Number} [freq] Set the frequency\n   */\n\n\n  var SqrOsc = function (_Oscillator4) {\n    _inherits(SqrOsc, _Oscillator4);\n\n    function SqrOsc(freq) {\n      oscillator_classCallCheck(this, SqrOsc);\n      return _possibleConstructorReturn(this, _getPrototypeOf(SqrOsc).call(this, freq, 'square'));\n    }\n\n    return SqrOsc;\n  }(oscillator_Oscillator);\n\n  var oscillator = oscillator_Oscillator;\n\n  var TimelineSignal = __webpack_require__(7);\n\n  var TimelineSignal_default = __webpack_require__.n(TimelineSignal);\n  /**\n   *  <p>Envelopes are pre-defined amplitude distribution over time.\n   *  Typically, envelopes are used to control the output volume\n   *  of an object, a series of fades referred to as Attack, Decay,\n   *  Sustain and Release (\n   *  <a href=\"https://upload.wikimedia.org/wikipedia/commons/e/ea/ADSR_parameter.svg\">ADSR</a>\n   *  ). Envelopes can also control other Web Audio Parameters—for example, a p5.Envelope can\n   *  control an Oscillator's frequency like this: <code>osc.freq(env)</code>.</p>\n   *  <p>Use <code><a href=\"#/p5.Envelope/setRange\">setRange</a></code> to change the attack/release level.\n   *  Use <code><a href=\"#/p5.Envelope/setADSR\">setADSR</a></code> to change attackTime, decayTime, sustainPercent and releaseTime.</p>\n   *  <p>Use the <code><a href=\"#/p5.Envelope/play\">play</a></code> method to play the entire envelope,\n   *  the <code><a href=\"#/p5.Envelope/ramp\">ramp</a></code> method for a pingable trigger,\n   *  or <code><a href=\"#/p5.Envelope/triggerAttack\">triggerAttack</a></code>/\n   *  <code><a href=\"#/p5.Envelope/triggerRelease\">triggerRelease</a></code> to trigger noteOn/noteOff.</p>\n   *\n   *  @class p5.Envelope\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  let t1 = 0.1; // attack time in seconds\n   *  let l1 = 0.7; // attack level 0.0 to 1.0\n   *  let t2 = 0.3; // decay time in seconds\n   *  let l2 = 0.1; // decay level  0.0 to 1.0\n   *\n   *  let env;\n   *  let triOsc;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    background(220);\n   *    text('tap to play', 20, 20);\n   *    cnv.mousePressed(playSound);\n   *\n   *    env = new p5.Envelope(t1, l1, t2, l2);\n   *    triOsc = new p5.Oscillator('triangle');\n   *  }\n   *\n   *  function playSound() {\n   *    // starting the oscillator ensures that audio is enabled.\n   *    triOsc.start();\n   *    env.play(triOsc);\n   *  }\n   *  </code></div>\n   */\n\n\n  p5.Envelope = function (t1, l1, t2, l2, t3, l3) {\n    /**\n     * Time until envelope reaches attackLevel\n     * @property attackTime\n     */\n    this.aTime = t1 || 0.1;\n    /**\n     * Level once attack is complete.\n     * @property attackLevel\n     */\n\n    this.aLevel = l1 || 1;\n    /**\n     * Time until envelope reaches decayLevel.\n     * @property decayTime\n     */\n\n    this.dTime = t2 || 0.5;\n    /**\n     * Level after decay. The envelope will sustain here until it is released.\n     * @property decayLevel\n     */\n\n    this.dLevel = l2 || 0;\n    /**\n     * Duration of the release portion of the envelope.\n     * @property releaseTime\n     */\n\n    this.rTime = t3 || 0;\n    /**\n     * Level at the end of the release.\n     * @property releaseLevel\n     */\n\n    this.rLevel = l3 || 0;\n    this._rampHighPercentage = 0.98;\n    this._rampLowPercentage = 0.02;\n    this.output = main.audiocontext.createGain();\n    this.control = new TimelineSignal_default.a();\n\n    this._init();\n\n    this.control.connect(this.output);\n    this.connection = null;\n    this.mathOps = [this.control];\n    this.isExponential = false;\n    this.sourceToClear = null;\n    this.wasTriggered = false;\n    main.soundArray.push(this);\n  };\n\n  p5.Envelope.prototype._init = function () {\n    var now = main.audiocontext.currentTime;\n    var t = now;\n    this.control.setTargetAtTime(0.00001, t, 0.001);\n\n    this._setRampAD(this.aTime, this.dTime);\n  };\n  /**\n   *  Reset the envelope with a series of time/value pairs.\n   *\n   *  @method  set\n   *  @for p5.Envelope\n   *  @param {Number} attackTime     Time (in seconds) before level\n   *                                 reaches attackLevel\n   *  @param {Number} attackLevel    Typically an amplitude between\n   *                                 0.0 and 1.0\n   *  @param {Number} decayTime      Time\n   *  @param {Number} decayLevel   Amplitude (In a standard ADSR envelope,\n   *                                 decayLevel = sustainLevel)\n   *  @param {Number} releaseTime   Release Time (in seconds)\n   *  @param {Number} releaseLevel  Amplitude\n   *  @example\n   *  <div><code>\n   *  let attackTime;\n   *  let l1 = 0.7; // attack level 0.0 to 1.0\n   *  let t2 = 0.3; // decay time in seconds\n   *  let l2 = 0.1; // decay level  0.0 to 1.0\n   *  let l3 = 0.2; // release time in seconds\n   *\n   *  let env, triOsc;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playSound);\n   *\n   *    env = new p5.Envelope();\n   *    triOsc = new p5.Oscillator('triangle');\n   *  }\n   *\n   *  function draw() {\n   *    background(220);\n   *    text('tap here to play', 5, 20);\n   *\n   *    attackTime = map(mouseX, 0, width, 0.0, 1.0);\n   *    text('attack time: ' + attackTime, 5, height - 20);\n   *  }\n   *\n   *  // mouseClick triggers envelope if over canvas\n   *  function playSound() {\n   *    env.set(attackTime, l1, t2, l2, l3);\n   *\n   *    triOsc.start();\n   *    env.play(triOsc);\n   *  }\n   *  </code></div>\n   *\n   */\n\n\n  p5.Envelope.prototype.set = function (t1, l1, t2, l2, t3, l3) {\n    this.aTime = t1;\n    this.aLevel = l1;\n    this.dTime = t2 || 0;\n    this.dLevel = l2 || 0;\n    this.rTime = t3 || 0;\n    this.rLevel = l3 || 0;\n\n    this._setRampAD(t1, t2);\n  };\n  /**\n   *  Set values like a traditional\n   *  <a href=\"https://en.wikipedia.org/wiki/Synthesizer#/media/File:ADSR_parameter.svg\">\n   *  ADSR envelope\n   *  </a>.\n   *\n   *  @method  setADSR\n   *  @for p5.Envelope\n   *  @param {Number} attackTime    Time (in seconds before envelope\n   *                                reaches Attack Level\n   *  @param {Number} [decayTime]    Time (in seconds) before envelope\n   *                                reaches Decay/Sustain Level\n   *  @param {Number} [susRatio]    Ratio between attackLevel and releaseLevel, on a scale from 0 to 1,\n   *                                where 1.0 = attackLevel, 0.0 = releaseLevel.\n   *                                The susRatio determines the decayLevel and the level at which the\n   *                                sustain portion of the envelope will sustain.\n   *                                For example, if attackLevel is 0.4, releaseLevel is 0,\n   *                                and susAmt is 0.5, the decayLevel would be 0.2. If attackLevel is\n   *                                increased to 1.0 (using <code>setRange</code>),\n   *                                then decayLevel would increase proportionally, to become 0.5.\n   *  @param {Number} [releaseTime]   Time in seconds from now (defaults to 0)\n   *  @example\n   *  <div><code>\n   *  let attackLevel = 1.0;\n   *  let releaseLevel = 0;\n   *\n   *  let attackTime = 0.001;\n   *  let decayTime = 0.2;\n   *  let susPercent = 0.2;\n   *  let releaseTime = 0.5;\n   *\n   *  let env, triOsc;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playEnv);\n   *\n   *    env = new p5.Envelope();\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.freq(220);\n   *  }\n   *\n   *  function draw() {\n   *    background(220);\n   *    text('tap here to play', 5, 20);\n   *    attackTime = map(mouseX, 0, width, 0, 1.0);\n   *    text('attack time: ' + attackTime, 5, height - 40);\n   *  }\n   *\n   *  function playEnv() {\n   *    triOsc.start();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.play();\n   *  }\n   *  </code></div>\n   */\n\n\n  p5.Envelope.prototype.setADSR = function (aTime, dTime, sPercent, rTime) {\n    this.aTime = aTime;\n    this.dTime = dTime || 0;\n    this.sPercent = sPercent || 0;\n    this.dLevel = typeof sPercent !== 'undefined' ? sPercent * (this.aLevel - this.rLevel) + this.rLevel : 0;\n    this.rTime = rTime || 0;\n\n    this._setRampAD(aTime, dTime);\n  };\n  /**\n   *  Set max (attackLevel) and min (releaseLevel) of envelope.\n   *\n   *  @method  setRange\n   *  @for p5.Envelope\n   *  @param {Number} aLevel attack level (defaults to 1)\n   *  @param {Number} rLevel release level (defaults to 0)\n   *  @example\n   *  <div><code>\n   *  let attackLevel = 1.0;\n   *  let releaseLevel = 0;\n   *\n   *  let attackTime = 0.001;\n   *  let decayTime = 0.2;\n   *  let susPercent = 0.2;\n   *  let releaseTime = 0.5;\n   *\n   *  let env, triOsc;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playEnv);\n   *\n   *    env = new p5.Envelope();\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.freq(220);\n   *  }\n   *\n   *  function draw() {\n   *    background(220);\n   *    text('tap here to play', 5, 20);\n   *    attackLevel = map(mouseY, height, 0, 0, 1.0);\n   *    text('attack level: ' + attackLevel, 5, height - 20);\n   *  }\n   *\n   *  function playEnv() {\n   *    triOsc.start();\n   *    env.setRange(attackLevel, releaseLevel);\n   *    env.play();\n   *  }\n   *  </code></div>\n   */\n\n\n  p5.Envelope.prototype.setRange = function (aLevel, rLevel) {\n    this.aLevel = aLevel || 1;\n    this.rLevel = rLevel || 0;\n  };\n\n  p5.Envelope.prototype._setRampAD = function (t1, t2) {\n    this._rampAttackTime = this.checkExpInput(t1);\n    this._rampDecayTime = this.checkExpInput(t2);\n    var TCDenominator = 1.0;\n    TCDenominator = Math.log(1.0 / this.checkExpInput(1.0 - this._rampHighPercentage));\n    this._rampAttackTC = t1 / this.checkExpInput(TCDenominator);\n    TCDenominator = Math.log(1.0 / this._rampLowPercentage);\n    this._rampDecayTC = t2 / this.checkExpInput(TCDenominator);\n  };\n\n  p5.Envelope.prototype.setRampPercentages = function (p1, p2) {\n    this._rampHighPercentage = this.checkExpInput(p1);\n    this._rampLowPercentage = this.checkExpInput(p2);\n    var TCDenominator = 1.0;\n    TCDenominator = Math.log(1.0 / this.checkExpInput(1.0 - this._rampHighPercentage));\n    this._rampAttackTC = this._rampAttackTime / this.checkExpInput(TCDenominator);\n    TCDenominator = Math.log(1.0 / this._rampLowPercentage);\n    this._rampDecayTC = this._rampDecayTime / this.checkExpInput(TCDenominator);\n  };\n  /**\n   *  Assign a parameter to be controlled by this envelope.\n   *  If a p5.Sound object is given, then the p5.Envelope will control its\n   *  output gain. If multiple inputs are provided, the env will\n   *  control all of them.\n   *\n   *  @method  setInput\n   *  @for p5.Envelope\n   *  @param  {Object} [...inputs]         A p5.sound object or\n   *                                Web Audio Param.\n   */\n\n\n  p5.Envelope.prototype.setInput = function () {\n    for (var i = 0; i < arguments.length; i++) {\n      this.connect(arguments[i]);\n    }\n  };\n  /**\n   *  Set whether the envelope ramp is linear (default) or exponential.\n   *  Exponential ramps can be useful because we perceive amplitude\n   *  and frequency logarithmically.\n   *\n   *  @method  setExp\n   *  @for p5.Envelope\n   *  @param {Boolean} isExp true is exponential, false is linear\n   */\n\n\n  p5.Envelope.prototype.setExp = function (isExp) {\n    this.isExponential = isExp;\n  };\n\n  p5.Envelope.prototype.checkExpInput = function (value) {\n    if (value <= 0) {\n      value = 0.00000001;\n    }\n\n    return value;\n  };\n  /**\n   *  <p>Play tells the envelope to start acting on a given input.\n   *  If the input is a p5.sound object (i.e. AudioIn, Oscillator,\n   *  SoundFile), then Envelope will control its output volume.\n   *  Envelopes can also be used to control any <a href=\"\n   *  http://docs.webplatform.org/wiki/apis/webaudio/AudioParam\">\n   *  Web Audio Audio Param.</a></p>\n   *\n   *  @method  play\n   *  @for p5.Envelope\n   *  @param  {Object} unit         A p5.sound object or\n   *                                Web Audio Param.\n   *  @param  {Number} [startTime]  time from now (in seconds) at which to play\n   *  @param  {Number} [sustainTime] time to sustain before releasing the envelope\n   *  @example\n   *  <div><code>\n   *  let attackLevel = 1.0;\n   *  let releaseLevel = 0;\n   *\n   *  let attackTime = 0.001;\n   *  let decayTime = 0.2;\n   *  let susPercent = 0.2;\n   *  let releaseTime = 0.5;\n   *\n   *  let env, triOsc;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playEnv);\n   *\n   *    env = new p5.Envelope();\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.amp(env);\n   *    triOsc.freq(220);\n   *    triOsc.start();\n   *  }\n   *\n   *  function draw() {\n   *    background(220);\n   *    text('tap here to play', 5, 20);\n   *    attackTime = map(mouseX, 0, width, 0, 1.0);\n   *    attackLevel = map(mouseY, height, 0, 0, 1.0);\n   *    text('attack time: ' + attackTime, 5, height - 40);\n   *    text('attack level: ' + attackLevel, 5, height - 20);\n   *  }\n   *\n   *  function playEnv() {\n   *    // ensure that audio is enabled\n   *    userStartAudio();\n   *\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(attackLevel, releaseLevel);\n   *    env.play();\n   *  }\n   *  </code></div>\n   */\n\n\n  p5.Envelope.prototype.play = function (unit, secondsFromNow, susTime) {\n    var tFromNow = secondsFromNow || 0;\n\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n\n    this.triggerAttack(unit, tFromNow);\n    this.triggerRelease(unit, tFromNow + this.aTime + this.dTime + ~~susTime);\n  };\n  /**\n   *  Trigger the Attack, and Decay portion of the Envelope.\n   *  Similar to holding down a key on a piano, but it will\n   *  hold the sustain level until you let go. Input can be\n   *  any p5.sound object, or a <a href=\"\n   *  http://docs.webplatform.org/wiki/apis/webaudio/AudioParam\">\n   *  Web Audio Param</a>.\n   *\n   *  @method  triggerAttack\n   *  @for p5.Envelope\n   *  @param  {Object} unit p5.sound Object or Web Audio Param\n   *  @param  {Number} secondsFromNow time from now (in seconds)\n   *  @example\n   *  <div><code>\n   *  let attackTime = 0.001;\n   *  let decayTime = 0.2;\n   *  let susPercent = 0.3;\n   *  let releaseTime = 0.4;\n   *  let env, triOsc;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    background(220);\n   *    textAlign(CENTER);\n   *    textSize(10);\n   *    text('tap to triggerAttack', width/2, height/2);\n   *\n   *    env = new p5.Envelope();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(1.0, 0.0);\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.freq(220);\n   *\n   *    cnv.mousePressed(envAttack);\n   *  }\n   *\n   *  function envAttack()  {\n   *    background(0, 255, 255);\n   *    text('release to release', width/2, height/2);\n   *\n   *    // ensures audio is enabled. See also: `userStartAudio`\n   *    triOsc.start();\n   *\n   *    env.triggerAttack(triOsc);\n   *  }\n   *\n   *  function mouseReleased() {\n   *    background(220);\n   *    text('tap to triggerAttack', width/2, height/2);\n   *\n   *    env.triggerRelease(triOsc);\n   *  }\n   *  </code></div>\n   */\n\n\n  p5.Envelope.prototype.triggerAttack = function (unit, secondsFromNow) {\n    var now = main.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var t = now + tFromNow;\n    this.lastAttack = t;\n    this.wasTriggered = true;\n\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n\n    var valToSet = this.control.getValueAtTime(t);\n\n    if (this.isExponential === true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(valToSet), t);\n    } else {\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n\n    t += this.aTime;\n\n    if (this.isExponential === true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(this.aLevel), t);\n      valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n      this.control.cancelScheduledValues(t);\n      this.control.exponentialRampToValueAtTime(valToSet, t);\n    } else {\n      this.control.linearRampToValueAtTime(this.aLevel, t);\n      valToSet = this.control.getValueAtTime(t);\n      this.control.cancelScheduledValues(t);\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n\n    t += this.dTime;\n\n    if (this.isExponential === true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(this.dLevel), t);\n      valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n      this.control.cancelScheduledValues(t);\n      this.control.exponentialRampToValueAtTime(valToSet, t);\n    } else {\n      this.control.linearRampToValueAtTime(this.dLevel, t);\n      valToSet = this.control.getValueAtTime(t);\n      this.control.cancelScheduledValues(t);\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n  };\n  /**\n   *  Trigger the Release of the Envelope. This is similar to releasing\n   *  the key on a piano and letting the sound fade according to the\n   *  release level and release time.\n   *\n   *  @method  triggerRelease\n   *  @for p5.Envelope\n   *  @param  {Object} unit p5.sound Object or Web Audio Param\n   *  @param  {Number} secondsFromNow time to trigger the release\n   *  @example\n   *  <div><code>\n   *  let attackTime = 0.001;\n   *  let decayTime = 0.2;\n   *  let susPercent = 0.3;\n   *  let releaseTime = 0.4;\n   *  let env, triOsc;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    background(220);\n   *    textAlign(CENTER);\n   *    textSize(10);\n   *    text('tap to triggerAttack', width/2, height/2);\n   *\n   *    env = new p5.Envelope();\n   *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n   *    env.setRange(1.0, 0.0);\n   *    triOsc = new p5.Oscillator('triangle');\n   *    triOsc.freq(220);\n   *\n   *    cnv.mousePressed(envAttack);\n   *  }\n   *\n   *  function envAttack()  {\n   *    background(0, 255, 255);\n   *    text('release to release', width/2, height/2);\n   *\n   *    // ensures audio is enabled. See also: `userStartAudio`\n   *    triOsc.start();\n   *\n   *    env.triggerAttack(triOsc);\n   *  }\n   *\n   *  function mouseReleased() {\n   *    background(220);\n   *    text('tap to triggerAttack', width/2, height/2);\n   *\n   *    env.triggerRelease(triOsc);\n   *  }\n   *  </code></div>\n   */\n\n\n  p5.Envelope.prototype.triggerRelease = function (unit, secondsFromNow) {\n    if (!this.wasTriggered) {\n      return;\n    }\n\n    var now = main.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var t = now + tFromNow;\n\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n\n    var valToSet = this.control.getValueAtTime(t);\n\n    if (this.isExponential === true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(valToSet), t);\n    } else {\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n\n    t += this.rTime;\n\n    if (this.isExponential === true) {\n      this.control.exponentialRampToValueAtTime(this.checkExpInput(this.rLevel), t);\n      valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n      this.control.cancelScheduledValues(t);\n      this.control.exponentialRampToValueAtTime(valToSet, t);\n    } else {\n      this.control.linearRampToValueAtTime(this.rLevel, t);\n      valToSet = this.control.getValueAtTime(t);\n      this.control.cancelScheduledValues(t);\n      this.control.linearRampToValueAtTime(valToSet, t);\n    }\n\n    this.wasTriggered = false;\n  };\n  /**\n   *  Exponentially ramp to a value using the first two\n   *  values from <code><a href=\"#/p5.Envelope/setADSR\">setADSR(attackTime, decayTime)</a></code>\n   *  as <a href=\"https://en.wikipedia.org/wiki/RC_time_constant\">\n   *  time constants</a> for simple exponential ramps.\n   *  If the value is higher than current value, it uses attackTime,\n   *  while a decrease uses decayTime.\n   *\n   *  @method  ramp\n   *  @for p5.Envelope\n   *  @param  {Object} unit           p5.sound Object or Web Audio Param\n   *  @param  {Number} secondsFromNow When to trigger the ramp\n   *  @param  {Number} v              Target value\n   *  @param  {Number} [v2]           Second target value\n   *  @example\n   *  <div><code>\n   *  let env, osc, amp;\n   *\n   *  let attackTime = 0.001;\n   *  let decayTime = 0.2;\n   *  let attackLevel = 1;\n   *  let decayLevel = 0;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    fill(0,255,0);\n   *    noStroke();\n   *\n   *    env = new p5.Envelope();\n   *    env.setADSR(attackTime, decayTime);\n   *    osc = new p5.Oscillator();\n   *    osc.amp(env);\n   *    amp = new p5.Amplitude();\n   *\n   *    cnv.mousePressed(triggerRamp);\n   *  }\n   *\n   *  function triggerRamp() {\n   *    // ensures audio is enabled. See also: `userStartAudio`\n   *    osc.start();\n   *\n   *    env.ramp(osc, 0, attackLevel, decayLevel);\n   *  }\n   *\n   *  function draw() {\n   *    background(20);\n   *    text('tap to play', 10, 20);\n   *    let h = map(amp.getLevel(), 0, 0.4, 0, height);;\n   *    rect(0, height, width, -h);\n   *  }\n   *  </code></div>\n   */\n\n\n  p5.Envelope.prototype.ramp = function (unit, secondsFromNow, v1, v2) {\n    var now = main.audiocontext.currentTime;\n    var tFromNow = secondsFromNow || 0;\n    var t = now + tFromNow;\n    var destination1 = this.checkExpInput(v1);\n    var destination2 = typeof v2 !== 'undefined' ? this.checkExpInput(v2) : undefined;\n\n    if (unit) {\n      if (this.connection !== unit) {\n        this.connect(unit);\n      }\n    }\n\n    var currentVal = this.checkExpInput(this.control.getValueAtTime(t));\n\n    if (destination1 > currentVal) {\n      this.control.setTargetAtTime(destination1, t, this._rampAttackTC);\n      t += this._rampAttackTime;\n    } else if (destination1 < currentVal) {\n      this.control.setTargetAtTime(destination1, t, this._rampDecayTC);\n      t += this._rampDecayTime;\n    }\n\n    if (destination2 === undefined) return;\n\n    if (destination2 > destination1) {\n      this.control.setTargetAtTime(destination2, t, this._rampAttackTC);\n    } else if (destination2 < destination1) {\n      this.control.setTargetAtTime(destination2, t, this._rampDecayTC);\n    }\n  };\n\n  p5.Envelope.prototype.connect = function (unit) {\n    this.connection = unit;\n\n    if (unit instanceof p5.Oscillator || unit instanceof p5.SoundFile || unit instanceof p5.AudioIn || unit instanceof p5.Reverb || unit instanceof p5.Noise || unit instanceof p5.Filter || unit instanceof p5.Delay) {\n      unit = unit.output.gain;\n    }\n\n    if (unit instanceof AudioParam) {\n      unit.setValueAtTime(0, main.audiocontext.currentTime);\n    }\n\n    this.output.connect(unit);\n  };\n\n  p5.Envelope.prototype.disconnect = function () {\n    if (this.output) {\n      this.output.disconnect();\n    }\n  };\n  /**\n   *  Add a value to the p5.Oscillator's output amplitude,\n   *  and return the oscillator. Calling this method\n   *  again will override the initial add() with new values.\n   *\n   *  @method  add\n   *  @for p5.Envelope\n   *  @param {Number} number Constant number to add\n   *  @return {p5.Envelope} Envelope Returns this envelope\n   *                                     with scaled output\n   */\n\n\n  p5.Envelope.prototype.add = function (num) {\n    var add = new Add_default.a(num);\n    var thisChain = this.mathOps.length;\n    var nextChain = this.output;\n    return p5.prototype._mathChain(this, add, thisChain, nextChain, Add_default.a);\n  };\n  /**\n   *  Multiply the p5.Envelope's output amplitude\n   *  by a fixed value. Calling this method\n   *  again will override the initial mult() with new values.\n   *\n   *  @method  mult\n   *  @for p5.Envelope\n   *  @param {Number} number Constant number to multiply\n   *  @return {p5.Envelope} Envelope Returns this envelope\n   *                                     with scaled output\n   */\n\n\n  p5.Envelope.prototype.mult = function (num) {\n    var mult = new Multiply_default.a(num);\n    var thisChain = this.mathOps.length;\n    var nextChain = this.output;\n    return p5.prototype._mathChain(this, mult, thisChain, nextChain, Multiply_default.a);\n  };\n  /**\n   *  Scale this envelope's amplitude values to a given\n   *  range, and return the envelope. Calling this method\n   *  again will override the initial scale() with new values.\n   *\n   *  @method  scale\n   *  @for p5.Envelope\n   *  @param  {Number} inMin  input range minumum\n   *  @param  {Number} inMax  input range maximum\n   *  @param  {Number} outMin input range minumum\n   *  @param  {Number} outMax input range maximum\n   *  @return {p5.Envelope} Envelope Returns this envelope\n   *                                     with scaled output\n   */\n\n\n  p5.Envelope.prototype.scale = function (inMin, inMax, outMin, outMax) {\n    var scale = new Scale_default.a(inMin, inMax, outMin, outMax);\n    var thisChain = this.mathOps.length;\n    var nextChain = this.output;\n    return p5.prototype._mathChain(this, scale, thisChain, nextChain, Scale_default.a);\n  };\n\n  p5.Envelope.prototype.dispose = function () {\n    var index = main.soundArray.indexOf(this);\n    main.soundArray.splice(index, 1);\n    this.disconnect();\n\n    if (this.control) {\n      this.control.dispose();\n      this.control = null;\n    }\n\n    for (var i = 1; i < this.mathOps.length; i++) {\n      this.mathOps[i].dispose();\n    }\n  };\n\n  p5.Env = function (t1, l1, t2, l2, t3, l3) {\n    console.warn('WARNING: p5.Env is now deprecated and may be removed in future versions. ' + 'Please use the new p5.Envelope instead.');\n    p5.Envelope.call(this, t1, l1, t2, l2, t3, l3);\n  };\n\n  p5.Env.prototype = Object.create(p5.Envelope.prototype);\n  var Envelope = p5.Envelope;\n  var envelope = Envelope;\n\n  function noise_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      noise_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      noise_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return noise_typeof(obj);\n  }\n\n  function noise_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function noise_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function noise_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) noise_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) noise_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function noise_possibleConstructorReturn(self, call) {\n    if (call && (noise_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return noise_assertThisInitialized(self);\n  }\n\n  function noise_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function noise_getPrototypeOf(o) {\n    noise_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return noise_getPrototypeOf(o);\n  }\n\n  function noise_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) noise_setPrototypeOf(subClass, superClass);\n  }\n\n  function noise_setPrototypeOf(o, p) {\n    noise_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return noise_setPrototypeOf(o, p);\n  }\n\n  var _whiteNoiseBuffer = function () {\n    var bufferSize = 2 * main.audiocontext.sampleRate;\n    var whiteBuffer = main.audiocontext.createBuffer(1, bufferSize, main.audiocontext.sampleRate);\n    var noiseData = whiteBuffer.getChannelData(0);\n\n    for (var i = 0; i < bufferSize; i++) {\n      noiseData[i] = Math.random() * 2 - 1;\n    }\n\n    whiteBuffer.type = 'white';\n    return whiteBuffer;\n  }();\n\n  var _pinkNoiseBuffer = function () {\n    var bufferSize = 2 * main.audiocontext.sampleRate;\n    var pinkBuffer = main.audiocontext.createBuffer(1, bufferSize, main.audiocontext.sampleRate);\n    var noiseData = pinkBuffer.getChannelData(0);\n    var b0, b1, b2, b3, b4, b5, b6;\n    b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0.0;\n\n    for (var i = 0; i < bufferSize; i++) {\n      var white = Math.random() * 2 - 1;\n      b0 = 0.99886 * b0 + white * 0.0555179;\n      b1 = 0.99332 * b1 + white * 0.0750759;\n      b2 = 0.969 * b2 + white * 0.153852;\n      b3 = 0.8665 * b3 + white * 0.3104856;\n      b4 = 0.55 * b4 + white * 0.5329522;\n      b5 = -0.7616 * b5 - white * 0.016898;\n      noiseData[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;\n      noiseData[i] *= 0.11;\n      b6 = white * 0.115926;\n    }\n\n    pinkBuffer.type = 'pink';\n    return pinkBuffer;\n  }();\n\n  var _brownNoiseBuffer = function () {\n    var bufferSize = 2 * main.audiocontext.sampleRate;\n    var brownBuffer = main.audiocontext.createBuffer(1, bufferSize, main.audiocontext.sampleRate);\n    var noiseData = brownBuffer.getChannelData(0);\n    var lastOut = 0.0;\n\n    for (var i = 0; i < bufferSize; i++) {\n      var white = Math.random() * 2 - 1;\n      noiseData[i] = (lastOut + 0.02 * white) / 1.02;\n      lastOut = noiseData[i];\n      noiseData[i] *= 3.5;\n    }\n\n    brownBuffer.type = 'brown';\n    return brownBuffer;\n  }();\n  /**\n   *  Noise is a type of oscillator that generates a buffer with random values.\n   *\n   *  @class p5.Noise\n   *  @extends p5.Oscillator\n   *  @constructor\n   *  @param {String} type Type of noise can be 'white' (default),\n   *                       'brown' or 'pink'.\n   */\n\n\n  var noise_Noise = function (_Oscillator) {\n    noise_inherits(Noise, _Oscillator);\n\n    function Noise(type) {\n      var _this;\n\n      noise_classCallCheck(this, Noise);\n      _this = noise_possibleConstructorReturn(this, noise_getPrototypeOf(Noise).call(this));\n      var assignType;\n      delete _this.f;\n      delete _this.freq;\n      delete _this.oscillator;\n\n      if (type === 'brown') {\n        assignType = _brownNoiseBuffer;\n      } else if (type === 'pink') {\n        assignType = _pinkNoiseBuffer;\n      } else {\n        assignType = _whiteNoiseBuffer;\n      }\n\n      _this.buffer = assignType;\n      return _this;\n    }\n    /**\n     *  Set type of noise to 'white', 'pink' or 'brown'.\n     *  White is the default.\n     *\n     *  @method setType\n     *  @param {String} [type] 'white', 'pink' or 'brown'\n     */\n\n\n    noise_createClass(Noise, [{\n      key: \"setType\",\n      value: function setType(type) {\n        switch (type) {\n          case 'white':\n            this.buffer = _whiteNoiseBuffer;\n            break;\n\n          case 'pink':\n            this.buffer = _pinkNoiseBuffer;\n            break;\n\n          case 'brown':\n            this.buffer = _brownNoiseBuffer;\n            break;\n\n          default:\n            this.buffer = _whiteNoiseBuffer;\n        }\n\n        if (this.started) {\n          var now = main.audiocontext.currentTime;\n          this.stop(now);\n          this.start(now + 0.01);\n        }\n      }\n    }, {\n      key: \"getType\",\n      value: function getType() {\n        return this.buffer.type;\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        if (this.started) {\n          this.stop();\n        }\n\n        this.noise = main.audiocontext.createBufferSource();\n        this.noise.buffer = this.buffer;\n        this.noise.loop = true;\n        this.noise.connect(this.output);\n        var now = main.audiocontext.currentTime;\n        this.noise.start(now);\n        this.started = true;\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var now = main.audiocontext.currentTime;\n\n        if (this.noise) {\n          this.noise.stop(now);\n          this.started = false;\n        }\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        var now = main.audiocontext.currentTime;\n        var index = main.soundArray.indexOf(this);\n        main.soundArray.splice(index, 1);\n\n        if (this.noise) {\n          this.noise.disconnect();\n          this.stop(now);\n        }\n\n        if (this.output) {\n          this.output.disconnect();\n        }\n\n        if (this.panner) {\n          this.panner.disconnect();\n        }\n\n        this.output = null;\n        this.panner = null;\n        this.buffer = null;\n        this.noise = null;\n      }\n    }]);\n    return Noise;\n  }(oscillator);\n\n  var noise = noise_Noise;\n\n  var Signal = __webpack_require__(2);\n\n  var Signal_default = __webpack_require__.n(Signal);\n\n  function pulse_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      pulse_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      pulse_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return pulse_typeof(obj);\n  }\n\n  function pulse_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function pulse_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function pulse_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) pulse_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) pulse_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function pulse_possibleConstructorReturn(self, call) {\n    if (call && (pulse_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return pulse_assertThisInitialized(self);\n  }\n\n  function pulse_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function pulse_getPrototypeOf(o) {\n    pulse_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return pulse_getPrototypeOf(o);\n  }\n\n  function pulse_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) pulse_setPrototypeOf(subClass, superClass);\n  }\n\n  function pulse_setPrototypeOf(o, p) {\n    pulse_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return pulse_setPrototypeOf(o, p);\n  }\n  /**\n   *  Creates a Pulse object, an oscillator that implements\n   *  Pulse Width Modulation.\n   *  The pulse is created with two oscillators.\n   *  Accepts a parameter for frequency, and to set the\n   *  width between the pulses. See <a href=\"\n   *  http://p5js.org/reference/#/p5.Oscillator\">\n   *  <code>p5.Oscillator</code> for a full list of methods.\n   *\n   *  @class p5.Pulse\n   *  @extends p5.Oscillator\n   *  @constructor\n   *  @param {Number} [freq] Frequency in oscillations per second (Hz)\n   *  @param {Number} [w]    Width between the pulses (0 to 1.0,\n   *                         defaults to 0)\n   *  @example\n   *  <div><code>\n   *  let pulse;\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(startPulse);\n   *    background(220);\n   *\n   *    pulse = new p5.Pulse();\n   *    pulse.amp(0.5);\n   *    pulse.freq(220);\n   *  }\n   *  function startPulse() {\n   *    pulse.start();\n   *    pulse.amp(0.5, 0.02);\n   *  }\n   *  function mouseReleased() {\n   *    pulse.amp(0, 0.2);\n   *  }\n   *  function draw() {\n   *    background(220);\n   *    text('tap to play', 5, 20, width - 20);\n   *    let w = map(mouseX, 0, width, 0, 1);\n   *    w = constrain(w, 0, 1);\n   *    pulse.width(w);\n   *    text('pulse width: ' + w, 5, height - 20);\n   *  }\n   *  </code></div>\n   */\n\n\n  var pulse_Pulse = function (_Oscillator) {\n    pulse_inherits(Pulse, _Oscillator);\n\n    function Pulse(freq, w) {\n      var _this;\n\n      pulse_classCallCheck(this, Pulse);\n      _this = pulse_possibleConstructorReturn(this, pulse_getPrototypeOf(Pulse).call(this, freq, 'sawtooth'));\n      _this.w = w || 0;\n      _this.osc2 = new SawOsc(freq);\n      _this.dNode = main.audiocontext.createDelay();\n      _this.dcOffset = createDCOffset();\n      _this.dcGain = main.audiocontext.createGain();\n\n      _this.dcOffset.connect(_this.dcGain);\n\n      _this.dcGain.connect(_this.output);\n\n      _this.f = freq || 440;\n      var mW = _this.w / _this.oscillator.frequency.value;\n      _this.dNode.delayTime.value = mW;\n      _this.dcGain.gain.value = 1.7 * (0.5 - _this.w);\n\n      _this.osc2.disconnect();\n\n      _this.osc2.panner.disconnect();\n\n      _this.osc2.amp(-1);\n\n      _this.osc2.output.connect(_this.dNode);\n\n      _this.dNode.connect(_this.output);\n\n      _this.output.gain.value = 1;\n\n      _this.output.connect(_this.panner);\n\n      return _this;\n    }\n    /**\n     *  Set the width of a Pulse object (an oscillator that implements\n     *  Pulse Width Modulation).\n     *\n     *  @method  width\n     *  @param {Number} [width]    Width between the pulses (0 to 1.0,\n     *                         defaults to 0)\n     */\n\n\n    pulse_createClass(Pulse, [{\n      key: \"width\",\n      value: function width(w) {\n        if (typeof w === 'number') {\n          if (w <= 1.0 && w >= 0.0) {\n            this.w = w;\n            var mW = this.w / this.oscillator.frequency.value;\n            this.dNode.delayTime.value = mW;\n          }\n\n          this.dcGain.gain.value = 1.7 * (0.5 - this.w);\n        } else {\n          w.connect(this.dNode.delayTime);\n          var sig = new Signal_default.a(-0.5);\n          w.connect(sig);\n          var mult1 = new Multiply_default.a(-1);\n          var mult2 = new Multiply_default.a(1.7);\n          sig = sig.connect(mult1).connect(mult2);\n          sig.connect(this.dcGain.gain);\n        }\n      }\n    }, {\n      key: \"start\",\n      value: function start(f, time) {\n        var now = main.audiocontext.currentTime;\n        var t = time || 0;\n\n        if (!this.started) {\n          var freq = f || this.f;\n          var type = this.oscillator.type;\n          this.oscillator = main.audiocontext.createOscillator();\n          this.oscillator.frequency.setValueAtTime(freq, now);\n          this.oscillator.type = type;\n          this.oscillator.connect(this.output);\n          this.oscillator.start(t + now);\n          this.osc2.oscillator = main.audiocontext.createOscillator();\n          this.osc2.oscillator.frequency.setValueAtTime(freq, t + now);\n          this.osc2.oscillator.type = type;\n          this.osc2.oscillator.connect(this.osc2.output);\n          this.osc2.start(t + now);\n          this.freqNode = [this.oscillator.frequency, this.osc2.oscillator.frequency];\n          this.dcOffset = createDCOffset();\n          this.dcOffset.connect(this.dcGain);\n          this.dcOffset.start(t + now);\n\n          if (this.mods !== undefined && this.mods.frequency !== undefined) {\n            this.mods.frequency.connect(this.freqNode[0]);\n            this.mods.frequency.connect(this.freqNode[1]);\n          }\n\n          this.started = true;\n          this.osc2.started = true;\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop(time) {\n        if (this.started) {\n          var t = time || 0;\n          var now = main.audiocontext.currentTime;\n          this.oscillator.stop(t + now);\n\n          if (this.osc2.oscillator) {\n            this.osc2.oscillator.stop(t + now);\n          }\n\n          this.dcOffset.stop(t + now);\n          this.started = false;\n          this.osc2.started = false;\n        }\n      }\n    }, {\n      key: \"freq\",\n      value: function freq(val) {\n        var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n        if (typeof val === 'number') {\n          this.f = val;\n          var now = main.audiocontext.currentTime;\n          var currentFreq = this.oscillator.frequency.value;\n          this.oscillator.frequency.cancelScheduledValues(now);\n          this.oscillator.frequency.setValueAtTime(currentFreq, now + tFromNow);\n          this.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n          this.osc2.oscillator.frequency.cancelScheduledValues(now);\n          this.osc2.oscillator.frequency.setValueAtTime(currentFreq, now + tFromNow);\n          this.osc2.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n\n          if (this.freqMod) {\n            this.freqMod.output.disconnect();\n            this.freqMod = null;\n          }\n        } else if (val.output) {\n          val.output.disconnect();\n          val.output.connect(this.oscillator.frequency);\n          val.output.connect(this.osc2.oscillator.frequency);\n          this.freqMod = val;\n        }\n      }\n    }]);\n    return Pulse;\n  }(oscillator);\n\n  function createDCOffset() {\n    var ac = main.audiocontext;\n    var buffer = ac.createBuffer(1, 2048, ac.sampleRate);\n    var data = buffer.getChannelData(0);\n\n    for (var i = 0; i < 2048; i++) {\n      data[i] = 1.0;\n    }\n\n    var bufferSource = ac.createBufferSource();\n    bufferSource.buffer = buffer;\n    bufferSource.loop = true;\n    return bufferSource;\n  }\n\n  var pulse = pulse_Pulse;\n\n  function audioin_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function audioin_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function audioin_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) audioin_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) audioin_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  main.inputSources = [];\n  /**\n   *  <p>Get audio from an input, i.e. your computer's microphone.</p>\n   *\n   *  <p>Turn the mic on/off with the start() and stop() methods. When the mic\n   *  is on, its volume can be measured with getLevel or by connecting an\n   *  FFT object.</p>\n   *\n   *  <p>If you want to hear the AudioIn, use the .connect() method.\n   *  AudioIn does not connect to p5.sound output by default to prevent\n   *  feedback.</p>\n   *\n   *  <p><em>Note: This uses the <a href=\"http://caniuse.com/stream\">getUserMedia/\n   *  Stream</a> API, which is not supported by certain browsers. Access in Chrome browser\n   *  is limited to localhost and https, but access over http may be limited.</em></p>\n   *\n   *  @class p5.AudioIn\n   *  @constructor\n   *  @param {Function} [errorCallback] A function to call if there is an error\n   *                                    accessing the AudioIn. For example,\n   *                                    Safari and iOS devices do not\n   *                                    currently allow microphone access.\n   *  @example\n   *  <div><code>\n   *  let mic;\n   *\n   *   function setup(){\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(userStartAudio);\n   *    textAlign(CENTER);\n   *    mic = new p5.AudioIn();\n   *    mic.start();\n   *  }\n   *\n   *  function draw(){\n   *    background(0);\n   *    fill(255);\n   *    text('tap to start', width/2, 20);\n   *\n   *    micLevel = mic.getLevel();\n   *    let y = height - micLevel * height;\n   *    ellipse(width/2, y, 10, 10);\n   *  }\n   *  </code></div>\n   */\n\n  var audioin_AudioIn = function () {\n    function AudioIn(errorCallback) {\n      audioin_classCallCheck(this, AudioIn);\n      /**\n       * @property {GainNode} input\n       */\n\n      this.input = main.audiocontext.createGain();\n      /**\n       * @property {GainNode} output\n       */\n\n      this.output = main.audiocontext.createGain();\n      /**\n       * @property {MediaStream|null} stream\n       */\n\n      this.stream = null;\n      /**\n       * @property {MediaStreamAudioSourceNode|null} mediaStream\n       */\n\n      this.mediaStream = null;\n      /**\n       * @property {Number|null} currentSource\n       */\n\n      this.currentSource = null;\n      /**\n       *  Client must allow browser to access their microphone / audioin source.\n       *  Default: false. Will become true when the client enables access.\n       *\n       *  @property {Boolean} enabled\n       */\n\n      this.enabled = false;\n      /**\n       * Input amplitude, connect to it by default but not to master out\n       *\n       *  @property {p5.Amplitude} amplitude\n       */\n\n      this.amplitude = new amplitude();\n      this.output.connect(this.amplitude.input);\n\n      if (!window.MediaStreamTrack || !window.navigator.mediaDevices || !window.navigator.mediaDevices.getUserMedia) {\n        errorCallback ? errorCallback() : window.alert('This browser does not support MediaStreamTrack and mediaDevices');\n      }\n\n      main.soundArray.push(this);\n    }\n    /**\n     *  Start processing audio input. This enables the use of other\n     *  AudioIn methods like getLevel(). Note that by default, AudioIn\n     *  is not connected to p5.sound's output. So you won't hear\n     *  anything unless you use the connect() method.<br/>\n     *\n     *  Certain browsers limit access to the user's microphone. For example,\n     *  Chrome only allows access from localhost and over https. For this reason,\n     *  you may want to include an errorCallback—a function that is called in case\n     *  the browser won't provide mic access.\n     *\n     *  @method start\n     *  @for p5.AudioIn\n     *  @param {Function} [successCallback] Name of a function to call on\n     *                                    success.\n     *  @param {Function} [errorCallback] Name of a function to call if\n     *                                    there was an error. For example,\n     *                                    some browsers do not support\n     *                                    getUserMedia.\n     */\n\n\n    audioin_createClass(AudioIn, [{\n      key: \"start\",\n      value: function start(successCallback, errorCallback) {\n        var self = this;\n\n        if (this.stream) {\n          this.stop();\n        }\n\n        var audioSource = main.inputSources[self.currentSource];\n        var constraints = {\n          audio: {\n            sampleRate: main.audiocontext.sampleRate,\n            echoCancellation: false\n          }\n        };\n\n        if (main.inputSources[this.currentSource]) {\n          constraints.audio.deviceId = audioSource.deviceId;\n        }\n\n        window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n          self.stream = stream;\n          self.enabled = true;\n          self.mediaStream = main.audiocontext.createMediaStreamSource(stream);\n          self.mediaStream.connect(self.output);\n          self.amplitude.setInput(self.output);\n          if (successCallback) successCallback();\n        })[\"catch\"](function (err) {\n          if (errorCallback) errorCallback(err);else console.error(err);\n        });\n      }\n      /**\n       *  Turn the AudioIn off. If the AudioIn is stopped, it cannot getLevel().\n       *  If re-starting, the user may be prompted for permission access.\n       *\n       *  @method stop\n       *  @for p5.AudioIn\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        if (this.stream) {\n          this.stream.getTracks().forEach(function (track) {\n            track.stop();\n          });\n          this.mediaStream.disconnect();\n          delete this.mediaStream;\n          delete this.stream;\n        }\n      }\n      /**\n       *  Connect to an audio unit. If no parameter is provided, will\n       *  connect to the main output (i.e. your speakers).<br/>\n       *\n       *  @method  connect\n       *  @for p5.AudioIn\n       *  @param  {Object} [unit] An object that accepts audio input,\n       *                          such as an FFT\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect(unit) {\n        if (unit) {\n          if (unit.hasOwnProperty('input')) {\n            this.output.connect(unit.input);\n          } else if (unit.hasOwnProperty('analyser')) {\n            this.output.connect(unit.analyser);\n          } else {\n            this.output.connect(unit);\n          }\n        } else {\n          this.output.connect(main.input);\n        }\n      }\n      /**\n       *  Disconnect the AudioIn from all audio units. For example, if\n       *  connect() had been called, disconnect() will stop sending\n       *  signal to your speakers.<br/>\n       *\n       *  @method  disconnect\n       *  @for p5.AudioIn\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.output) {\n          this.output.disconnect();\n          this.output.connect(this.amplitude.input);\n        }\n      }\n      /**\n       *  Read the Amplitude (volume level) of an AudioIn. The AudioIn\n       *  class contains its own instance of the Amplitude class to help\n       *  make it easy to get a microphone's volume level. Accepts an\n       *  optional smoothing value (0.0 < 1.0). <em>NOTE: AudioIn must\n       *  .start() before using .getLevel().</em><br/>\n       *\n       *  @method  getLevel\n       *  @for p5.AudioIn\n       *  @param  {Number} [smoothing] Smoothing is 0.0 by default.\n       *                               Smooths values based on previous values.\n       *  @return {Number}           Volume level (between 0.0 and 1.0)\n       */\n\n    }, {\n      key: \"getLevel\",\n      value: function getLevel(smoothing) {\n        if (smoothing) {\n          this.amplitude.smoothing = smoothing;\n        }\n\n        return this.amplitude.getLevel();\n      }\n      /**\n       *  Set amplitude (volume) of a mic input between 0 and 1.0. <br/>\n       *\n       *  @method  amp\n       *  @for p5.AudioIn\n       *  @param  {Number} vol between 0 and 1.0\n       *  @param {Number} [time] ramp time (optional)\n       */\n\n    }, {\n      key: \"amp\",\n      value: function amp(vol, t) {\n        if (t) {\n          var rampTime = t || 0;\n          var currentVol = this.output.gain.value;\n          this.output.gain.cancelScheduledValues(main.audiocontext.currentTime);\n          this.output.gain.setValueAtTime(currentVol, main.audiocontext.currentTime);\n          this.output.gain.linearRampToValueAtTime(vol, rampTime + main.audiocontext.currentTime);\n        } else {\n          this.output.gain.cancelScheduledValues(main.audiocontext.currentTime);\n          this.output.gain.setValueAtTime(vol, main.audiocontext.currentTime);\n        }\n      }\n      /**\n       * Returns a list of available input sources. This is a wrapper\n       * for <a href=\"https://developer.mozilla.org/\n       * en-US/docs/Web/API/MediaDevices/enumerateDevices\" target=\"_blank\">\n       * MediaDevices.enumerateDevices() - Web APIs | MDN</a>\n       * and it returns a Promise.\n       * @method  getSources\n       * @for p5.AudioIn\n       * @param  {Function} [successCallback] This callback function handles the sources when they\n       *                                      have been enumerated. The callback function\n       *                                      receives the deviceList array as its only argument\n       * @param  {Function} [errorCallback] This optional callback receives the error\n       *                                    message as its argument.\n       * @returns {Promise} Returns a Promise that can be used in place of the callbacks, similar\n       *                            to the enumerateDevices() method\n       * @example\n       *  <div><code>\n       *  let audioIn;\n       *\n       *  function setup(){\n       *    text('getting sources...', 0, 20);\n       *    audioIn = new p5.AudioIn();\n       *    audioIn.getSources(gotSources);\n       *  }\n       *\n       *  function gotSources(deviceList) {\n       *    if (deviceList.length > 0) {\n       *      //set the source to the first item in the deviceList array\n       *      audioIn.setSource(0);\n       *      let currentSource = deviceList[audioIn.currentSource];\n       *      text('set source to: ' + currentSource.deviceId, 5, 20, width);\n       *    }\n       *  }\n       *  </code></div>\n       */\n\n    }, {\n      key: \"getSources\",\n      value: function getSources(onSuccess, onError) {\n        return new Promise(function (resolve, reject) {\n          window.navigator.mediaDevices.enumerateDevices().then(function (devices) {\n            main.inputSources = devices.filter(function (device) {\n              return device.kind === 'audioinput';\n            });\n            resolve(main.inputSources);\n\n            if (onSuccess) {\n              onSuccess(main.inputSources);\n            }\n          })[\"catch\"](function (error) {\n            reject(error);\n\n            if (onError) {\n              onError(error);\n            } else {\n              console.error('This browser does not support MediaStreamTrack.getSources()');\n            }\n          });\n        });\n      }\n      /**\n       *  Set the input source. Accepts a number representing a\n       *  position in the array returned by getSources().\n       *  This is only available in browsers that support\n       * <a href=\"https://developer.mozilla.org/\n       * en-US/docs/Web/API/MediaDevices/enumerateDevices\" target=\"_blank\">\n       * navigator.mediaDevices.enumerateDevices()</a>\n       *\n       *  @method setSource\n       *  @for p5.AudioIn\n       *  @param {number} num position of input source in the array\n       *  @example\n       *  <div><code>\n       *  let audioIn;\n       *\n       *  function setup(){\n       *    text('getting sources...', 0, 20);\n       *    audioIn = new p5.AudioIn();\n       *    audioIn.getSources(gotSources);\n       *  }\n       *\n       *  function gotSources(deviceList) {\n       *    if (deviceList.length > 0) {\n       *      //set the source to the first item in the deviceList array\n       *      audioIn.setSource(0);\n       *      let currentSource = deviceList[audioIn.currentSource];\n       *      text('set source to: ' + currentSource.deviceId, 5, 20, width);\n       *    }\n       *  }\n       *  </code></div>\n       */\n\n    }, {\n      key: \"setSource\",\n      value: function setSource(num) {\n        if (main.inputSources.length > 0 && num < main.inputSources.length) {\n          this.currentSource = num;\n          console.log('set source to ', main.inputSources[this.currentSource]);\n        } else {\n          console.log('unable to set input source');\n        }\n\n        if (this.stream && this.stream.active) {\n          this.start();\n        }\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        var index = main.soundArray.indexOf(this);\n        main.soundArray.splice(index, 1);\n        this.stop();\n\n        if (this.output) {\n          this.output.disconnect();\n        }\n\n        if (this.amplitude) {\n          this.amplitude.disconnect();\n        }\n\n        delete this.amplitude;\n        delete this.output;\n      }\n    }]);\n    return AudioIn;\n  }();\n\n  var audioin = audioin_AudioIn;\n\n  var CrossFade = __webpack_require__(23);\n\n  var CrossFade_default = __webpack_require__.n(CrossFade);\n\n  function effect_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function effect_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function effect_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) effect_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) effect_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  /**\n   * Effect is a base class for audio effects in p5. <br>\n   * This module handles the nodes and methods that are\n   * common and useful for current and future effects.\n   *\n   *\n   * This class is extended by <a href=\"/reference/#/p5.Distortion\">p5.Distortion</a>,\n   * <a href=\"/reference/#/p5.Compressor\">p5.Compressor</a>,\n   * <a href=\"/reference/#/p5.Delay\">p5.Delay</a>,\n   * <a href=\"/reference/#/p5.Filter\">p5.Filter</a>,\n   * <a href=\"/reference/#/p5.Reverb\">p5.Reverb</a>.\n   *\n   * @class  p5.Effect\n   * @constructor\n   *\n   * @param {Object} [ac]   Reference to the audio context of the p5 object\n   * @param {AudioNode} [input]  Gain Node effect wrapper\n   * @param {AudioNode} [output] Gain Node effect wrapper\n   * @param {Object} [_drywet]   Tone.JS CrossFade node (defaults to value: 1)\n   * @param {AudioNode} [wet]  Effects that extend this class should connect\n   *                              to the wet signal to this gain node, so that dry and wet\n   *                              signals are mixed properly.\n   */\n\n\n  var effect_Effect = function () {\n    function Effect() {\n      effect_classCallCheck(this, Effect);\n      this.ac = main.audiocontext;\n      this.input = this.ac.createGain();\n      this.output = this.ac.createGain();\n      /**\n       *\tThe p5.Effect class is built\n       * \tusing Tone.js CrossFade\n       * \t@private\n       */\n\n      this._drywet = new CrossFade_default.a(1);\n      /**\n       *\tIn classes that extend\n       *\tp5.Effect, connect effect nodes\n       *\tto the wet parameter\n       */\n\n      this.wet = this.ac.createGain();\n      this.input.connect(this._drywet.a);\n      this.wet.connect(this._drywet.b);\n\n      this._drywet.connect(this.output);\n\n      this.connect();\n      main.soundArray.push(this);\n    }\n    /**\n     *  Set the output volume of the filter.\n     *\n     *  @method  amp\n     *  @for p5.Effect\n     *  @param {Number} [vol] amplitude between 0 and 1.0\n     *  @param {Number} [rampTime] create a fade that lasts until rampTime\n     *  @param {Number} [tFromNow] schedule this event to happen in tFromNow seconds\n     */\n\n\n    effect_createClass(Effect, [{\n      key: \"amp\",\n      value: function amp(vol) {\n        var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var now = main.audiocontext.currentTime;\n        var startTime = now + tFromNow;\n        var endTime = startTime + rampTime + 0.001;\n        var currentVol = this.output.gain.value;\n        this.output.gain.cancelScheduledValues(now);\n        this.output.gain.linearRampToValueAtTime(currentVol, startTime + 0.001);\n        this.output.gain.linearRampToValueAtTime(vol, endTime);\n      }\n      /**\n       *  Link effects together in a chain\n       *  Example usage: filter.chain(reverb, delay, panner);\n       *  May be used with an open-ended number of arguments\n       *\n       *  @method chain\n       *  @for p5.Effect\n       *  @param {Object} [arguments]  Chain together multiple sound objects\n       */\n\n    }, {\n      key: \"chain\",\n      value: function chain() {\n        if (arguments.length > 0) {\n          this.connect(arguments[0]);\n\n          for (var i = 1; i < arguments.length; i += 1) {\n            arguments[i - 1].connect(arguments[i]);\n          }\n        }\n\n        return this;\n      }\n      /**\n       *  Adjust the dry/wet value.\n       *\n       *  @method drywet\n       *  @for p5.Effect\n       *  @param {Number} [fade] The desired drywet value (0 - 1.0)\n       */\n\n    }, {\n      key: \"drywet\",\n      value: function drywet(fade) {\n        if (typeof fade !== 'undefined') {\n          this._drywet.fade.value = fade;\n        }\n\n        return this._drywet.fade.value;\n      }\n      /**\n       *  Send output to a p5.js-sound, Web Audio Node, or use signal to\n       *  control an AudioParam\n       *\n       *  @method connect\n       *  @for p5.Effect\n       *  @param {Object} unit\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect(unit) {\n        var u = unit || p5.soundOut.input;\n        this.output.connect(u.input ? u.input : u);\n      }\n      /**\n       * Disconnect all output.\n       * @method disconnect\n       * @for p5.Effect\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.output) {\n          this.output.disconnect();\n        }\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        var index = main.soundArray.indexOf(this);\n        main.soundArray.splice(index, 1);\n\n        if (this.input) {\n          this.input.disconnect();\n          delete this.input;\n        }\n\n        if (this.output) {\n          this.output.disconnect();\n          delete this.output;\n        }\n\n        if (this._drywet) {\n          this._drywet.disconnect();\n\n          delete this._drywet;\n        }\n\n        if (this.wet) {\n          this.wet.disconnect();\n          delete this.wet;\n        }\n\n        this.ac = undefined;\n      }\n    }]);\n    return Effect;\n  }();\n\n  var effect = effect_Effect;\n\n  function filter_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      filter_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      filter_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return filter_typeof(obj);\n  }\n\n  function filter_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function filter_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function filter_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) filter_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) filter_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function filter_possibleConstructorReturn(self, call) {\n    if (call && (filter_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return filter_assertThisInitialized(self);\n  }\n\n  function filter_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function _get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      _get = Reflect.get;\n    } else {\n      _get = function _get(target, property, receiver) {\n        var base = _superPropBase(target, property);\n\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return _get(target, property, receiver || target);\n  }\n\n  function _superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = filter_getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function filter_getPrototypeOf(o) {\n    filter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return filter_getPrototypeOf(o);\n  }\n\n  function filter_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) filter_setPrototypeOf(subClass, superClass);\n  }\n\n  function filter_setPrototypeOf(o, p) {\n    filter_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return filter_setPrototypeOf(o, p);\n  }\n  /**\n   *  <p>A p5.Filter uses a Web Audio Biquad Filter to filter\n   *  the frequency response of an input source. Subclasses\n   *  include:</p>\n   *  <a href=\"/reference/#/p5.LowPass\"><code>p5.LowPass</code></a>:\n   *  Allows frequencies below the cutoff frequency to pass through,\n   *  and attenuates frequencies above the cutoff.<br/>\n   *  <a href=\"/reference/#/p5.HighPass\"><code>p5.HighPass</code></a>:\n   *  The opposite of a lowpass filter. <br/>\n   *  <a href=\"/reference/#/p5.BandPass\"><code>p5.BandPass</code></a>:\n   *  Allows a range of frequencies to pass through and attenuates\n   *  the frequencies below and above this frequency range.<br/>\n   *\n   *  The <code>.res()</code> method controls either width of the\n   *  bandpass, or resonance of the low/highpass cutoff frequency.\n   *\n   *  This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n   *  Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n   *  <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n   *  <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n   *\n   *  @class p5.Filter\n   *  @extends p5.Effect\n   *  @constructor\n   *  @param {String} [type] 'lowpass' (default), 'highpass', 'bandpass'\n   *  @example\n   *  <div><code>\n   *  let fft, noise, filter;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100,100);\n   *    cnv.mousePressed(makeNoise);\n   *    fill(255, 0, 255);\n   *\n   *    filter = new p5.BandPass();\n   *    noise = new p5.Noise();\n   *    noise.disconnect();\n   *    noise.connect(filter);\n   *\n   *    fft = new p5.FFT();\n   *  }\n   *\n   *  function draw() {\n   *    background(220);\n   *\n   *    // set the BandPass frequency based on mouseX\n   *    let freq = map(mouseX, 0, width, 20, 10000);\n   *    freq = constrain(freq, 0, 22050);\n   *    filter.freq(freq);\n   *    // give the filter a narrow band (lower res = wider bandpass)\n   *    filter.res(50);\n   *\n   *    // draw filtered spectrum\n   *    let spectrum = fft.analyze();\n   *    noStroke();\n   *    for (let i = 0; i < spectrum.length; i++) {\n   *      let x = map(i, 0, spectrum.length, 0, width);\n   *      let h = -height + map(spectrum[i], 0, 255, height, 0);\n   *      rect(x, height, width/spectrum.length, h);\n   *    }\n   *    if (!noise.started) {\n   *      text('tap here and drag to change frequency', 10, 20, width - 20);\n   *    } else {\n   *      text('Frequency: ' + round(freq)+'Hz', 20, 20, width - 20);\n   *    }\n   *  }\n   *\n   *  function makeNoise() {\n   *    // see also: `userStartAudio()`\n   *    noise.start();\n   *    noise.amp(0.5, 0.2);\n   *  }\n   *\n   *  function mouseReleased() {\n   *    noise.amp(0, 0.2);\n   *  }\n   *\n   *  </code></div>\n   */\n\n\n  var Filter = function (_Effect) {\n    filter_inherits(Filter, _Effect);\n\n    function Filter(type) {\n      var _this;\n\n      filter_classCallCheck(this, Filter);\n      _this = filter_possibleConstructorReturn(this, filter_getPrototypeOf(Filter).call(this));\n      /**\n       *  The p5.Filter is built with a\n       *  <a href=\"http://www.w3.org/TR/webaudio/#BiquadFilterNode\">\n       *  Web Audio BiquadFilter Node</a>.\n       *\n       *  @property {DelayNode} biquadFilter\n       */\n\n      _this.biquad = _this.ac.createBiquadFilter();\n\n      _this.input.connect(_this.biquad);\n\n      _this.biquad.connect(_this.wet);\n\n      if (type) {\n        _this.setType(type);\n      }\n\n      _this._on = true;\n      _this._untoggledType = _this.biquad.type;\n      return _this;\n    }\n    /**\n     *  Filter an audio signal according to a set\n     *  of filter parameters.\n     *\n     *  @method  process\n     *  @param  {Object} Signal  An object that outputs audio\n     *  @param {Number} [freq] Frequency in Hz, from 10 to 22050\n     *  @param {Number} [res] Resonance/Width of the filter frequency\n     *                        from 0.001 to 1000\n     */\n\n\n    filter_createClass(Filter, [{\n      key: \"process\",\n      value: function process(src, freq, res, time) {\n        src.connect(this.input);\n        this.set(freq, res, time);\n      }\n      /**\n       *  Set the frequency and the resonance of the filter.\n       *\n       *  @method  set\n       *  @param {Number} [freq] Frequency in Hz, from 10 to 22050\n       *  @param {Number} [res]  Resonance (Q) from 0.001 to 1000\n       *  @param {Number} [timeFromNow] schedule this event to happen\n       *                                seconds from now\n       */\n\n    }, {\n      key: \"set\",\n      value: function set(freq, res, time) {\n        if (freq) {\n          this.freq(freq, time);\n        }\n\n        if (res) {\n          this.res(res, time);\n        }\n      }\n      /**\n       *  Set the filter frequency, in Hz, from 10 to 22050 (the range of\n       *  human hearing, although in reality most people hear in a narrower\n       *  range).\n       *\n       *  @method  freq\n       *  @param  {Number} freq Filter Frequency\n       *  @param {Number} [timeFromNow] schedule this event to happen\n       *                                seconds from now\n       *  @return {Number} value  Returns the current frequency value\n       */\n\n    }, {\n      key: \"freq\",\n      value: function freq(_freq, time) {\n        var t = time || 0;\n\n        if (_freq <= 0) {\n          _freq = 1;\n        }\n\n        if (typeof _freq === 'number') {\n          this.biquad.frequency.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.biquad.frequency.exponentialRampToValueAtTime(_freq, this.ac.currentTime + 0.02 + t);\n        } else if (_freq) {\n          _freq.connect(this.biquad.frequency);\n        }\n\n        return this.biquad.frequency.value;\n      }\n      /**\n       *  Controls either width of a bandpass frequency,\n       *  or the resonance of a low/highpass cutoff frequency.\n       *\n       *  @method  res\n       *  @param {Number} res  Resonance/Width of filter freq\n       *                       from 0.001 to 1000\n       *  @param {Number} [timeFromNow] schedule this event to happen\n       *                                seconds from now\n       *  @return {Number} value Returns the current res value\n       */\n\n    }, {\n      key: \"res\",\n      value: function res(_res, time) {\n        var t = time || 0;\n\n        if (typeof _res === 'number') {\n          this.biquad.Q.value = _res;\n          this.biquad.Q.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.biquad.Q.linearRampToValueAtTime(_res, this.ac.currentTime + 0.02 + t);\n        } else if (_res) {\n          _res.connect(this.biquad.Q);\n        }\n\n        return this.biquad.Q.value;\n      }\n      /**\n       * Controls the gain attribute of a Biquad Filter.\n       * This is distinctly different from .amp() which is inherited from p5.Effect\n       * .amp() controls the volume via the output gain node\n       * p5.Filter.gain() controls the gain parameter of a Biquad Filter node.\n       *\n       * @method gain\n       * @param  {Number} gain\n       * @return {Number} Returns the current or updated gain value\n       */\n\n    }, {\n      key: \"gain\",\n      value: function gain(_gain, time) {\n        var t = time || 0;\n\n        if (typeof _gain === 'number') {\n          this.biquad.gain.value = _gain;\n          this.biquad.gain.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.biquad.gain.linearRampToValueAtTime(_gain, this.ac.currentTime + 0.02 + t);\n        } else if (_gain) {\n          _gain.connect(this.biquad.gain);\n        }\n\n        return this.biquad.gain.value;\n      }\n      /**\n       * Toggle function. Switches between the specified type and allpass\n       *\n       * @method toggle\n       * @return {boolean} [Toggle value]\n       */\n\n    }, {\n      key: \"toggle\",\n      value: function toggle() {\n        this._on = !this._on;\n\n        if (this._on === true) {\n          this.biquad.type = this._untoggledType;\n        } else if (this._on === false) {\n          this.biquad.type = 'allpass';\n        }\n\n        return this._on;\n      }\n      /**\n       *  Set the type of a p5.Filter. Possible types include:\n       *  \"lowpass\" (default), \"highpass\", \"bandpass\",\n       *  \"lowshelf\", \"highshelf\", \"peaking\", \"notch\",\n       *  \"allpass\".\n       *\n       *  @method  setType\n       *  @param {String} t\n       */\n\n    }, {\n      key: \"setType\",\n      value: function setType(t) {\n        this.biquad.type = t;\n        this._untoggledType = this.biquad.type;\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        _get(filter_getPrototypeOf(Filter.prototype), \"dispose\", this).call(this);\n\n        if (this.biquad) {\n          this.biquad.disconnect();\n          delete this.biquad;\n        }\n      }\n    }]);\n    return Filter;\n  }(effect);\n  /**\n   *  Constructor: <code>new p5.LowPass()</code> Filter.\n   *  This is the same as creating a p5.Filter and then calling\n   *  its method <code>setType('lowpass')</code>.\n   *  See p5.Filter for methods.\n   *\n   *  @class p5.LowPass\n   *  @constructor\n   *  @extends p5.Filter\n   */\n\n\n  var LowPass = function (_Filter) {\n    filter_inherits(LowPass, _Filter);\n\n    function LowPass() {\n      filter_classCallCheck(this, LowPass);\n      return filter_possibleConstructorReturn(this, filter_getPrototypeOf(LowPass).call(this, 'lowpass'));\n    }\n\n    return LowPass;\n  }(Filter);\n  /**\n   *  Constructor: <code>new p5.HighPass()</code> Filter.\n   *  This is the same as creating a p5.Filter and then calling\n   *  its method <code>setType('highpass')</code>.\n   *  See p5.Filter for methods.\n   *\n   *  @class p5.HighPass\n   *  @constructor\n   *  @extends p5.Filter\n   */\n\n\n  var HighPass = function (_Filter2) {\n    filter_inherits(HighPass, _Filter2);\n\n    function HighPass() {\n      filter_classCallCheck(this, HighPass);\n      return filter_possibleConstructorReturn(this, filter_getPrototypeOf(HighPass).call(this, 'highpass'));\n    }\n\n    return HighPass;\n  }(Filter);\n  /**\n   *  Constructor: <code>new p5.BandPass()</code> Filter.\n   *  This is the same as creating a p5.Filter and then calling\n   *  its method <code>setType('bandpass')</code>.\n   *  See p5.Filter for methods.\n   *\n   *  @class p5.BandPass\n   *  @constructor\n   *  @extends p5.Filter\n   */\n\n\n  var BandPass = function (_Filter3) {\n    filter_inherits(BandPass, _Filter3);\n\n    function BandPass() {\n      filter_classCallCheck(this, BandPass);\n      return filter_possibleConstructorReturn(this, filter_getPrototypeOf(BandPass).call(this, 'bandpass'));\n    }\n\n    return BandPass;\n  }(Filter);\n\n  var filter = Filter;\n\n  function eqFilter_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      eqFilter_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      eqFilter_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return eqFilter_typeof(obj);\n  }\n\n  function eqFilter_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function eqFilter_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function eqFilter_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) eqFilter_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) eqFilter_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function eqFilter_possibleConstructorReturn(self, call) {\n    if (call && (eqFilter_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return eqFilter_assertThisInitialized(self);\n  }\n\n  function eqFilter_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function eqFilter_getPrototypeOf(o) {\n    eqFilter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return eqFilter_getPrototypeOf(o);\n  }\n\n  function eqFilter_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) eqFilter_setPrototypeOf(subClass, superClass);\n  }\n\n  function eqFilter_setPrototypeOf(o, p) {\n    eqFilter_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return eqFilter_setPrototypeOf(o, p);\n  }\n  /**\n   *  EQFilter extends p5.Filter with constraints\n   *  necessary for the p5.EQ\n   *\n   *  @private\n   */\n\n\n  var eqFilter_EQFilter = function (_Filter) {\n    eqFilter_inherits(EQFilter, _Filter);\n\n    function EQFilter(freq, res) {\n      var _this;\n\n      eqFilter_classCallCheck(this, EQFilter);\n      _this = eqFilter_possibleConstructorReturn(this, eqFilter_getPrototypeOf(EQFilter).call(this, 'peaking'));\n\n      _this.disconnect();\n\n      _this.set(freq, res);\n\n      _this.biquad.gain.value = 0;\n      delete _this.input;\n      delete _this.output;\n      delete _this._drywet;\n      delete _this.wet;\n      return _this;\n    }\n\n    eqFilter_createClass(EQFilter, [{\n      key: \"amp\",\n      value: function amp() {\n        console.warn('`amp()` is not available for p5.EQ bands. Use `.gain()`');\n      }\n    }, {\n      key: \"drywet\",\n      value: function drywet() {\n        console.warn('`drywet()` is not available for p5.EQ bands.');\n      }\n    }, {\n      key: \"connect\",\n      value: function connect(unit) {\n        var u = unit || p5.soundOut.input;\n\n        if (this.biquad) {\n          this.biquad.connect(u.input ? u.input : u);\n        } else {\n          this.output.connect(u.input ? u.input : u);\n        }\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.biquad) {\n          this.biquad.disconnect();\n        }\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        var index = main.soundArray.indexOf(this);\n        main.soundArray.splice(index, 1);\n        this.disconnect();\n        delete this.biquad;\n      }\n    }]);\n    return EQFilter;\n  }(filter);\n\n  var eqFilter = eqFilter_EQFilter;\n\n  function eq_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      eq_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      eq_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return eq_typeof(obj);\n  }\n\n  function eq_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function eq_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function eq_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) eq_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) eq_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function eq_possibleConstructorReturn(self, call) {\n    if (call && (eq_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return eq_assertThisInitialized(self);\n  }\n\n  function eq_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function eq_get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      eq_get = Reflect.get;\n    } else {\n      eq_get = function _get(target, property, receiver) {\n        var base = eq_superPropBase(target, property);\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return eq_get(target, property, receiver || target);\n  }\n\n  function eq_superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = eq_getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function eq_getPrototypeOf(o) {\n    eq_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return eq_getPrototypeOf(o);\n  }\n\n  function eq_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) eq_setPrototypeOf(subClass, superClass);\n  }\n\n  function eq_setPrototypeOf(o, p) {\n    eq_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return eq_setPrototypeOf(o, p);\n  }\n  /**\n   * p5.EQ is an audio effect that performs the function of a multiband\n   * audio equalizer. Equalization is used to adjust the balance of\n   * frequency compoenents of an audio signal. This process is commonly used\n   * in sound production and recording to change the waveform before it reaches\n   * a sound output device. EQ can also be used as an audio effect to create\n   * interesting distortions by filtering out parts of the spectrum. p5.EQ is\n   * built using a chain of Web Audio Biquad Filter Nodes and can be\n   * instantiated with 3 or 8 bands. Bands can be added or removed from\n   * the EQ by directly modifying p5.EQ.bands (the array that stores filters).\n   *\n   * This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n   * Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n   * <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n   * <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n   *\n   * @class p5.EQ\n   * @constructor\n   * @extends p5.Effect\n   * @param {Number} [_eqsize] Constructor will accept 3 or 8, defaults to 3\n   * @return {Object} p5.EQ object\n   *\n   * @example\n   * <div><code>\n   * let eq, soundFile\n   * let eqBandIndex = 0;\n   * let eqBandNames = ['lows', 'mids', 'highs'];\n   *\n   * function preload() {\n   *   soundFormats('mp3', 'ogg');\n   *   soundFile = loadSound('assets/beat');\n   * }\n   *\n   * function setup() {\n   *   let cnv = createCanvas(100, 100);\n   *   cnv.mousePressed(toggleSound);\n   *\n   *   eq = new p5.EQ(eqBandNames.length);\n   *   soundFile.disconnect();\n   *   eq.process(soundFile);\n   * }\n   *\n   * function draw() {\n   *   background(30);\n   *   noStroke();\n   *   fill(255);\n   *   textAlign(CENTER);\n   *   text('filtering ', 50, 25);\n   *\n   *   fill(255, 40, 255);\n   *   textSize(26);\n   *   text(eqBandNames[eqBandIndex], 50, 55);\n   *\n   *   fill(255);\n   *   textSize(9);\n   *\n   *   if (!soundFile.isPlaying()) {\n   *     text('tap to play', 50, 80);\n   *   } else {\n   *     text('tap to filter next band', 50, 80)\n   *   }\n   * }\n   *\n   * function toggleSound() {\n   *   if (!soundFile.isPlaying()) {\n   *     soundFile.play();\n   *   } else {\n   *     eqBandIndex = (eqBandIndex + 1) % eq.bands.length;\n   *   }\n   *\n   *   for (let i = 0; i < eq.bands.length; i++) {\n   *     eq.bands[i].gain(0);\n   *   }\n   *   // filter the band we want to filter\n   *   eq.bands[eqBandIndex].gain(-40);\n   * }\n   * </code></div>\n   */\n\n\n  var eq_EQ = function (_Effect) {\n    eq_inherits(EQ, _Effect);\n\n    function EQ(_eqsize) {\n      var _this;\n\n      eq_classCallCheck(this, EQ);\n      _this = eq_possibleConstructorReturn(this, eq_getPrototypeOf(EQ).call(this));\n      _eqsize = _eqsize === 3 || _eqsize === 8 ? _eqsize : 3;\n      var factor;\n      _eqsize === 3 ? factor = Math.pow(2, 3) : factor = 2;\n      /**\n       *  The p5.EQ is built with abstracted p5.Filter objects.\n       *  To modify any bands, use methods of the <a\n       *  href=\"/reference/#/p5.Filter\" title=\"p5.Filter reference\">\n       *  p5.Filter</a> API, especially `gain` and `freq`.\n       *  Bands are stored in an array, with indices 0 - 3, or 0 - 7\n       *  @property {Array}  bands\n       *\n       */\n\n      _this.bands = [];\n      var freq, res;\n\n      for (var i = 0; i < _eqsize; i++) {\n        if (i === _eqsize - 1) {\n          freq = 21000;\n          res = 0.01;\n        } else if (i === 0) {\n          freq = 100;\n          res = 0.1;\n        } else if (i === 1) {\n          freq = _eqsize === 3 ? 360 * factor : 360;\n          res = 1;\n        } else {\n          freq = _this.bands[i - 1].freq() * factor;\n          res = 1;\n        }\n\n        _this.bands[i] = _this._newBand(freq, res);\n\n        if (i > 0) {\n          _this.bands[i - 1].connect(_this.bands[i].biquad);\n        } else {\n          _this.input.connect(_this.bands[i].biquad);\n        }\n      }\n\n      _this.bands[_eqsize - 1].connect(_this.output);\n\n      return _this;\n    }\n    /**\n     * Process an input by connecting it to the EQ\n     * @method  process\n     * @param  {Object} src Audio source\n     */\n\n\n    eq_createClass(EQ, [{\n      key: \"process\",\n      value: function process(src) {\n        src.connect(this.input);\n      } //   * Set the frequency and gain of each band in the EQ. This method should be\n      //   * called with 3 or 8 frequency and gain pairs, depending on the size of the EQ.\n      //   * ex. eq.set(freq0, gain0, freq1, gain1, freq2, gain2);\n      //   *\n      //   * @method  set\n      //   * @for p5.EQ\n      //   * @param {Number} [freq0] Frequency value for band with index 0\n      //   * @param {Number} [gain0] Gain value for band with index 0\n      //   * @param {Number} [freq1] Frequency value for band with index 1\n      //   * @param {Number} [gain1] Gain value for band with index 1\n      //   * @param {Number} [freq2] Frequency value for band with index 2\n      //   * @param {Number} [gain2] Gain value for band with index 2\n      //   * @param {Number} [freq3] Frequency value for band with index 3\n      //   * @param {Number} [gain3] Gain value for band with index 3\n      //   * @param {Number} [freq4] Frequency value for band with index 4\n      //   * @param {Number} [gain4] Gain value for band with index 4\n      //   * @param {Number} [freq5] Frequency value for band with index 5\n      //   * @param {Number} [gain5] Gain value for band with index 5\n      //   * @param {Number} [freq6] Frequency value for band with index 6\n      //   * @param {Number} [gain6] Gain value for band with index 6\n      //   * @param {Number} [freq7] Frequency value for band with index 7\n      //   * @param {Number} [gain7] Gain value for band with index 7\n      //   */\n\n    }, {\n      key: \"set\",\n      value: function set() {\n        if (arguments.length === this.bands.length * 2) {\n          for (var i = 0; i < arguments.length; i += 2) {\n            this.bands[i / 2].freq(arguments[i]);\n            this.bands[i / 2].gain(arguments[i + 1]);\n          }\n        } else {\n          console.error('Argument mismatch. .set() should be called with ' + this.bands.length * 2 + ' arguments. (one frequency and gain value pair for each band of the eq)');\n        }\n      }\n      /**\n       * Add a new band. Creates a p5.Filter and strips away everything but\n       * the raw biquad filter. This method returns an abstracted p5.Filter,\n       * which can be added to p5.EQ.bands, in order to create new EQ bands.\n       * @private\n       * @for p5.EQ\n       * @method  _newBand\n       * @param  {Number} freq\n       * @param  {Number} res\n       * @return {Object}      Abstracted Filter\n       */\n\n    }, {\n      key: \"_newBand\",\n      value: function _newBand(freq, res) {\n        return new eqFilter(freq, res);\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        eq_get(eq_getPrototypeOf(EQ.prototype), \"dispose\", this).call(this);\n\n        if (this.bands) {\n          while (this.bands.length > 0) {\n            delete this.bands.pop().dispose();\n          }\n\n          delete this.bands;\n        }\n      }\n    }]);\n    return EQ;\n  }(effect);\n\n  var eq = eq_EQ;\n\n  function listener3d_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function listener3d_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function listener3d_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) listener3d_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) listener3d_defineProperties(Constructor, staticProps);\n    return Constructor;\n  } //   * listener is a class that can construct both a Spatial Panner\n  //   * and a Spatial Listener. The panner is based on the\n  //   * Web Audio Spatial Panner Node\n  //   * https://www.w3.org/TR/webaudio/#the-listenernode-interface\n  //   * This panner is a spatial processing node that allows audio to be positioned\n  //   * and oriented in 3D space.\n  //   *\n  //   * The Listener modifies the properties of the Audio Context Listener.\n  //   * Both objects types use the same methods. The default is a spatial panner.\n  //   *\n  //   * <code>p5.Panner3D</code> - Constructs a Spatial Panner<br/>\n  //   * <code>p5.Listener3D</code> - Constructs a Spatial Listener<br/>\n  //   *\n  //   * @class listener\n  //   * @constructor\n  //   * @return {Object} p5.Listener3D Object\n  //   *\n  //   * @param {Web Audio Node} listener Web Audio Spatial Panning Node\n  //   * @param {AudioParam} listener.panningModel \"equal power\" or \"HRTF\"\n  //   * @param {AudioParam} listener.distanceModel \"linear\", \"inverse\", or \"exponential\"\n  //   * @param {String} [type] [Specify construction of a spatial panner or listener]\n  //   */\n\n\n  var listener3d_Listener3D = function () {\n    function Listener3D(type) {\n      listener3d_classCallCheck(this, Listener3D);\n      this.ac = main.audiocontext;\n      this.listener = this.ac.listener;\n    } //   * Connect an audio sorce\n    //   * @param  {Object} src Input source\n    //   */\n\n\n    listener3d_createClass(Listener3D, [{\n      key: \"process\",\n      value: function process(src) {\n        src.connect(this.input);\n      } //   * Set the X,Y,Z position of the Panner\n      //   * @param  {[Number]} xVal\n      //   * @param  {[Number]} yVal\n      //   * @param  {[Number]} zVal\n      //   * @param  {[Number]} time\n      //   * @return {[Array]}      [Updated x, y, z values as an array]\n      //   */\n\n    }, {\n      key: \"position\",\n      value: function position(xVal, yVal, zVal, time) {\n        this.positionX(xVal, time);\n        this.positionY(yVal, time);\n        this.positionZ(zVal, time);\n        return [this.listener.positionX.value, this.listener.positionY.value, this.listener.positionZ.value];\n      } //   * Getter and setter methods for position coordinates\n      //   * @return {Number}      [updated coordinate value]\n      //   */\n\n    }, {\n      key: \"positionX\",\n      value: function positionX(xVal, time) {\n        var t = time || 0;\n\n        if (typeof xVal === 'number') {\n          this.listener.positionX.value = xVal;\n          this.listener.positionX.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.listener.positionX.linearRampToValueAtTime(xVal, this.ac.currentTime + 0.02 + t);\n        } else if (xVal) {\n          xVal.connect(this.listener.positionX);\n        }\n\n        return this.listener.positionX.value;\n      }\n    }, {\n      key: \"positionY\",\n      value: function positionY(yVal, time) {\n        var t = time || 0;\n\n        if (typeof yVal === 'number') {\n          this.listener.positionY.value = yVal;\n          this.listener.positionY.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.listener.positionY.linearRampToValueAtTime(yVal, this.ac.currentTime + 0.02 + t);\n        } else if (yVal) {\n          yVal.connect(this.listener.positionY);\n        }\n\n        return this.listener.positionY.value;\n      }\n    }, {\n      key: \"positionZ\",\n      value: function positionZ(zVal, time) {\n        var t = time || 0;\n\n        if (typeof zVal === 'number') {\n          this.listener.positionZ.value = zVal;\n          this.listener.positionZ.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.listener.positionZ.linearRampToValueAtTime(zVal, this.ac.currentTime + 0.02 + t);\n        } else if (zVal) {\n          zVal.connect(this.listener.positionZ);\n        }\n\n        return this.listener.positionZ.value;\n      } //   * Overrides the listener orient() method because Listener has slightly\n      //   * different params. In human terms, Forward vectors are the direction the\n      //   * nose is pointing. Up vectors are the direction of the top of the head.\n      //   *\n      //   * @method orient\n      //   * @param  {Number} xValF  Forward vector X direction\n      //   * @param  {Number} yValF  Forward vector Y direction\n      //   * @param  {Number} zValF  Forward vector Z direction\n      //   * @param  {Number} xValU  Up vector X direction\n      //   * @param  {Number} yValU  Up vector Y direction\n      //   * @param  {Number} zValU  Up vector Z direction\n      //   * @param  {Number} time\n      //   * @return {Array}       All orienation params\n      //   */\n\n    }, {\n      key: \"orient\",\n      value: function orient(xValF, yValF, zValF, xValU, yValU, zValU, time) {\n        if (arguments.length === 3 || arguments.length === 4) {\n          time = arguments[3];\n          this.orientForward(xValF, yValF, zValF, time);\n        } else if (arguments.length === 6 || arguments === 7) {\n          this.orientForward(xValF, yValF, zValF);\n          this.orientUp(xValU, yValU, zValU, time);\n        }\n\n        return [this.listener.forwardX.value, this.listener.forwardY.value, this.listener.forwardZ.value, this.listener.upX.value, this.listener.upY.value, this.listener.upZ.value];\n      }\n    }, {\n      key: \"orientForward\",\n      value: function orientForward(xValF, yValF, zValF, time) {\n        this.forwardX(xValF, time);\n        this.forwardY(yValF, time);\n        this.forwardZ(zValF, time);\n        return [this.listener.forwardX, this.listener.forwardY, this.listener.forwardZ];\n      }\n    }, {\n      key: \"orientUp\",\n      value: function orientUp(xValU, yValU, zValU, time) {\n        this.upX(xValU, time);\n        this.upY(yValU, time);\n        this.upZ(zValU, time);\n        return [this.listener.upX, this.listener.upY, this.listener.upZ];\n      } //   * Getter and setter methods for orient coordinates\n      //   * @return {Number}      [updated coordinate value]\n      //   */\n\n    }, {\n      key: \"forwardX\",\n      value: function forwardX(xVal, time) {\n        var t = time || 0;\n\n        if (typeof xVal === 'number') {\n          this.listener.forwardX.value = xVal;\n          this.listener.forwardX.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.listener.forwardX.linearRampToValueAtTime(xVal, this.ac.currentTime + 0.02 + t);\n        } else if (xVal) {\n          xVal.connect(this.listener.forwardX);\n        }\n\n        return this.listener.forwardX.value;\n      }\n    }, {\n      key: \"forwardY\",\n      value: function forwardY(yVal, time) {\n        var t = time || 0;\n\n        if (typeof yVal === 'number') {\n          this.listener.forwardY.value = yVal;\n          this.listener.forwardY.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.listener.forwardY.linearRampToValueAtTime(yVal, this.ac.currentTime + 0.02 + t);\n        } else if (yVal) {\n          yVal.connect(this.listener.forwardY);\n        }\n\n        return this.listener.forwardY.value;\n      }\n    }, {\n      key: \"forwardZ\",\n      value: function forwardZ(zVal, time) {\n        var t = time || 0;\n\n        if (typeof zVal === 'number') {\n          this.listener.forwardZ.value = zVal;\n          this.listener.forwardZ.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.listener.forwardZ.linearRampToValueAtTime(zVal, this.ac.currentTime + 0.02 + t);\n        } else if (zVal) {\n          zVal.connect(this.listener.forwardZ);\n        }\n\n        return this.listener.forwardZ.value;\n      }\n    }, {\n      key: \"upX\",\n      value: function upX(xVal, time) {\n        var t = time || 0;\n\n        if (typeof xVal === 'number') {\n          this.listener.upX.value = xVal;\n          this.listener.upX.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.listener.upX.linearRampToValueAtTime(xVal, this.ac.currentTime + 0.02 + t);\n        } else if (xVal) {\n          xVal.connect(this.listener.upX);\n        }\n\n        return this.listener.upX.value;\n      }\n    }, {\n      key: \"upY\",\n      value: function upY(yVal, time) {\n        var t = time || 0;\n\n        if (typeof yVal === 'number') {\n          this.listener.upY.value = yVal;\n          this.listener.upY.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.listener.upY.linearRampToValueAtTime(yVal, this.ac.currentTime + 0.02 + t);\n        } else if (yVal) {\n          yVal.connect(this.listener.upY);\n        }\n\n        return this.listener.upY.value;\n      }\n    }, {\n      key: \"upZ\",\n      value: function upZ(zVal, time) {\n        var t = time || 0;\n\n        if (typeof zVal === 'number') {\n          this.listener.upZ.value = zVal;\n          this.listener.upZ.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.listener.upZ.linearRampToValueAtTime(zVal, this.ac.currentTime + 0.02 + t);\n        } else if (zVal) {\n          zVal.connect(this.listener.upZ);\n        }\n\n        return this.listener.upZ.value;\n      }\n    }]);\n    return Listener3D;\n  }();\n\n  var listener3d = listener3d_Listener3D;\n\n  function panner3d_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      panner3d_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      panner3d_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return panner3d_typeof(obj);\n  }\n\n  function panner3d_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function panner3d_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function panner3d_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) panner3d_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) panner3d_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function panner3d_possibleConstructorReturn(self, call) {\n    if (call && (panner3d_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return panner3d_assertThisInitialized(self);\n  }\n\n  function panner3d_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function panner3d_get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      panner3d_get = Reflect.get;\n    } else {\n      panner3d_get = function _get(target, property, receiver) {\n        var base = panner3d_superPropBase(target, property);\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return panner3d_get(target, property, receiver || target);\n  }\n\n  function panner3d_superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = panner3d_getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function panner3d_getPrototypeOf(o) {\n    panner3d_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return panner3d_getPrototypeOf(o);\n  }\n\n  function panner3d_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) panner3d_setPrototypeOf(subClass, superClass);\n  }\n\n  function panner3d_setPrototypeOf(o, p) {\n    panner3d_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return panner3d_setPrototypeOf(o, p);\n  }\n  /**\n   * Panner3D is based on the <a title=\"Web Audio Panner docs\"  href=\n   * \"https://developer.mozilla.org/en-US/docs/Web/API/PannerNode\">\n   * Web Audio Spatial Panner Node</a>.\n   * This panner is a spatial processing node that allows audio to be positioned\n   * and oriented in 3D space.\n   *\n   * The position is relative to an <a title=\"Web Audio Listener docs\" href=\n   * \"https://developer.mozilla.org/en-US/docs/Web/API/AudioListener\">\n   * Audio Context Listener</a>, which can be accessed\n   * by <code>p5.soundOut.audiocontext.listener</code>\n   *\n   *\n   * @class p5.Panner3D\n   * @constructor\n   */\n\n\n  var Panner3D = function (_Effect) {\n    panner3d_inherits(Panner3D, _Effect);\n\n    function Panner3D() {\n      var _this;\n\n      panner3d_classCallCheck(this, Panner3D);\n      _this = panner3d_possibleConstructorReturn(this, panner3d_getPrototypeOf(Panner3D).call(this));\n      /**\n       *  <a title=\"Web Audio Panner docs\"  href=\n       *  \"https://developer.mozilla.org/en-US/docs/Web/API/PannerNode\">\n       *  Web Audio Spatial Panner Node</a>\n       *\n       *  Properties include<br>\n       * [Panning Model](https://www.w3.org/TR/webaudio/#idl-def-PanningModelType)\n       * : \"equal power\" or \"HRTF\"<br>\n       * [DistanceModel](https://www.w3.org/TR/webaudio/#idl-def-DistanceModelType)\n       *  : \"linear\", \"inverse\", or \"exponential\"\n       *\n       *  @property {AudioNode} panner\n       *\n       */\n\n      _this.panner = _this.ac.createPanner();\n      _this.panner.panningModel = 'HRTF';\n      _this.panner.distanceModel = 'linear';\n\n      _this.panner.connect(_this.output);\n\n      _this.input.connect(_this.panner);\n\n      return _this;\n    }\n    /**\n     * Connect an audio sorce\n     *\n     * @method  process\n     * @for p5.Panner3D\n     * @param  {Object} src Input source\n     */\n\n\n    panner3d_createClass(Panner3D, [{\n      key: \"process\",\n      value: function process(src) {\n        src.connect(this.input);\n      }\n      /**\n       * Set the X,Y,Z position of the Panner\n       * @method set\n       * @for p5.Panner3D\n       * @param  {Number} xVal\n       * @param  {Number} yVal\n       * @param  {Number} zVal\n       * @param  {Number} time\n       * @return {Array}      Updated x, y, z values as an array\n       */\n\n    }, {\n      key: \"set\",\n      value: function set(xVal, yVal, zVal, time) {\n        this.positionX(xVal, time);\n        this.positionY(yVal, time);\n        this.positionZ(zVal, time);\n        return [this.panner.positionX.value, this.panner.positionY.value, this.panner.positionZ.value];\n      }\n      /**\n       * Getter and setter methods for position coordinates\n       * @method positionX\n       * @for p5.Panner3D\n       * @return {Number}      updated coordinate value\n       */\n\n      /**\n       * Getter and setter methods for position coordinates\n       * @method positionY\n       * @for p5.Panner3D\n       * @return {Number}      updated coordinate value\n       */\n\n      /**\n       * Getter and setter methods for position coordinates\n       * @method positionZ\n       * @for p5.Panner3D\n       * @return {Number}      updated coordinate value\n       */\n\n    }, {\n      key: \"positionX\",\n      value: function positionX(xVal, time) {\n        var t = time || 0;\n\n        if (typeof xVal === 'number') {\n          this.panner.positionX.value = xVal;\n          this.panner.positionX.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.panner.positionX.linearRampToValueAtTime(xVal, this.ac.currentTime + 0.02 + t);\n        } else if (xVal) {\n          xVal.connect(this.panner.positionX);\n        }\n\n        return this.panner.positionX.value;\n      }\n    }, {\n      key: \"positionY\",\n      value: function positionY(yVal, time) {\n        var t = time || 0;\n\n        if (typeof yVal === 'number') {\n          this.panner.positionY.value = yVal;\n          this.panner.positionY.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.panner.positionY.linearRampToValueAtTime(yVal, this.ac.currentTime + 0.02 + t);\n        } else if (yVal) {\n          yVal.connect(this.panner.positionY);\n        }\n\n        return this.panner.positionY.value;\n      }\n    }, {\n      key: \"positionZ\",\n      value: function positionZ(zVal, time) {\n        var t = time || 0;\n\n        if (typeof zVal === 'number') {\n          this.panner.positionZ.value = zVal;\n          this.panner.positionZ.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.panner.positionZ.linearRampToValueAtTime(zVal, this.ac.currentTime + 0.02 + t);\n        } else if (zVal) {\n          zVal.connect(this.panner.positionZ);\n        }\n\n        return this.panner.positionZ.value;\n      }\n      /**\n       * Set the X,Y,Z position of the Panner\n       * @method  orient\n       * @for p5.Panner3D\n       * @param  {Number} xVal\n       * @param  {Number} yVal\n       * @param  {Number} zVal\n       * @param  {Number} time\n       * @return {Array}      Updated x, y, z values as an array\n       */\n\n    }, {\n      key: \"orient\",\n      value: function orient(xVal, yVal, zVal, time) {\n        this.orientX(xVal, time);\n        this.orientY(yVal, time);\n        this.orientZ(zVal, time);\n        return [this.panner.orientationX.value, this.panner.orientationY.value, this.panner.orientationZ.value];\n      }\n      /**\n       * Getter and setter methods for orient coordinates\n       * @method orientX\n       * @for p5.Panner3D\n       * @return {Number}      updated coordinate value\n       */\n\n      /**\n       * Getter and setter methods for orient coordinates\n       * @method orientY\n       * @for p5.Panner3D\n       * @return {Number}      updated coordinate value\n       */\n\n      /**\n       * Getter and setter methods for orient coordinates\n       * @method orientZ\n       * @for p5.Panner3D\n       * @return {Number}      updated coordinate value\n       */\n\n    }, {\n      key: \"orientX\",\n      value: function orientX(xVal, time) {\n        var t = time || 0;\n\n        if (typeof xVal === 'number') {\n          this.panner.orientationX.value = xVal;\n          this.panner.orientationX.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.panner.orientationX.linearRampToValueAtTime(xVal, this.ac.currentTime + 0.02 + t);\n        } else if (xVal) {\n          xVal.connect(this.panner.orientationX);\n        }\n\n        return this.panner.orientationX.value;\n      }\n    }, {\n      key: \"orientY\",\n      value: function orientY(yVal, time) {\n        var t = time || 0;\n\n        if (typeof yVal === 'number') {\n          this.panner.orientationY.value = yVal;\n          this.panner.orientationY.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.panner.orientationY.linearRampToValueAtTime(yVal, this.ac.currentTime + 0.02 + t);\n        } else if (yVal) {\n          yVal.connect(this.panner.orientationY);\n        }\n\n        return this.panner.orientationY.value;\n      }\n    }, {\n      key: \"orientZ\",\n      value: function orientZ(zVal, time) {\n        var t = time || 0;\n\n        if (typeof zVal === 'number') {\n          this.panner.orientationZ.value = zVal;\n          this.panner.orientationZ.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.panner.orientationZ.linearRampToValueAtTime(zVal, this.ac.currentTime + 0.02 + t);\n        } else if (zVal) {\n          zVal.connect(this.panner.orientationZ);\n        }\n\n        return this.panner.orientationZ.value;\n      }\n      /**\n       * Set the rolloff factor and max distance\n       * @method  setFalloff\n       * @for p5.Panner3D\n       * @param {Number} [maxDistance]\n       * @param {Number} [rolloffFactor]\n       */\n\n    }, {\n      key: \"setFalloff\",\n      value: function setFalloff(maxDistance, rolloffFactor) {\n        this.maxDist(maxDistance);\n        this.rolloff(rolloffFactor);\n      }\n      /**\n       * Maxium distance between the source and the listener\n       * @method  maxDist\n       * @for p5.Panner3D\n       * @param  {Number} maxDistance\n       * @return {Number} updated value\n       */\n\n    }, {\n      key: \"maxDist\",\n      value: function maxDist(maxDistance) {\n        if (typeof maxDistance === 'number') {\n          this.panner.maxDistance = maxDistance;\n        }\n\n        return this.panner.maxDistance;\n      }\n      /**\n       * How quickly the volume is reduced as the source moves away from the listener\n       * @method  rollof\n       * @for p5.Panner3D\n       * @param  {Number} rolloffFactor\n       * @return {Number} updated value\n       */\n\n    }, {\n      key: \"rolloff\",\n      value: function rolloff(rolloffFactor) {\n        if (typeof rolloffFactor === 'number') {\n          this.panner.rolloffFactor = rolloffFactor;\n        }\n\n        return this.panner.rolloffFactor;\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        panner3d_get(panner3d_getPrototypeOf(Panner3D.prototype), \"dispose\", this).call(this);\n\n        if (this.panner) {\n          this.panner.disconnect();\n          delete this.panner;\n        }\n      }\n    }]);\n    return Panner3D;\n  }(effect);\n\n  var panner3d = Panner3D;\n\n  function delay_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      delay_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      delay_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return delay_typeof(obj);\n  }\n\n  function delay_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function delay_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function delay_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) delay_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) delay_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function delay_possibleConstructorReturn(self, call) {\n    if (call && (delay_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return delay_assertThisInitialized(self);\n  }\n\n  function delay_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function delay_get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      delay_get = Reflect.get;\n    } else {\n      delay_get = function _get(target, property, receiver) {\n        var base = delay_superPropBase(target, property);\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return delay_get(target, property, receiver || target);\n  }\n\n  function delay_superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = delay_getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function delay_getPrototypeOf(o) {\n    delay_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return delay_getPrototypeOf(o);\n  }\n\n  function delay_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) delay_setPrototypeOf(subClass, superClass);\n  }\n\n  function delay_setPrototypeOf(o, p) {\n    delay_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return delay_setPrototypeOf(o, p);\n  }\n  /**\n   *  Delay is an echo effect. It processes an existing sound source,\n   *  and outputs a delayed version of that sound. The p5.Delay can\n   *  produce different effects depending on the delayTime, feedback,\n   *  filter, and type. In the example below, a feedback of 0.5 (the\n   *  default value) will produce a looping delay that decreases in\n   *  volume by 50% each repeat. A filter will cut out the high\n   *  frequencies so that the delay does not sound as piercing as the\n   *  original source.\n   *\n   *\n   *  This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n   *  Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n   *  <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n   *  <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n   *  @class p5.Delay\n   *  @extends p5.Effect\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  let osc;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    background(220);\n   *    textAlign(CENTER);\n   *    text('tap to play', width/2, height/2);\n   *\n   *    osc = new p5.Oscillator('square');\n   *    osc.amp(0.5);\n   *    delay = new p5.Delay();\n   *\n   *    // delay.process() accepts 4 parameters:\n   *    // source, delayTime (in seconds), feedback, filter frequency\n   *    delay.process(osc, 0.12, .7, 2300);\n   *\n   *    cnv.mousePressed(oscStart);\n   *  }\n   *\n   *  function oscStart() {\n   *    osc.start();\n   *  }\n   *\n   *  function mouseReleased() {\n   *    osc.stop();\n   *  }\n   *  </code></div>\n   */\n\n\n  var delay_Delay = function (_Effect) {\n    delay_inherits(Delay, _Effect);\n\n    function Delay() {\n      var _this;\n\n      delay_classCallCheck(this, Delay);\n      _this = delay_possibleConstructorReturn(this, delay_getPrototypeOf(Delay).call(this));\n      _this._split = _this.ac.createChannelSplitter(2);\n      _this._merge = _this.ac.createChannelMerger(2);\n      _this._leftGain = _this.ac.createGain();\n      _this._rightGain = _this.ac.createGain();\n      /**\n       *  The p5.Delay is built with two\n       *  <a href=\"http://www.w3.org/TR/webaudio/#DelayNode\">\n       *  Web Audio Delay Nodes</a>, one for each stereo channel.\n       *\n       *  @for p5.Delay\n       *  @property {DelayNode} leftDelay\n       */\n\n      _this.leftDelay = _this.ac.createDelay();\n      /**\n       *  The p5.Delay is built with two\n       *  <a href=\"http://www.w3.org/TR/webaudio/#DelayNode\">\n       *  Web Audio Delay Nodes</a>, one for each stereo channel.\n       *  @for p5.Delay\n       *  @property {DelayNode} rightDelay\n       */\n\n      _this.rightDelay = _this.ac.createDelay();\n      _this._leftFilter = new filter();\n      _this._rightFilter = new filter();\n\n      _this._leftFilter.disconnect();\n\n      _this._rightFilter.disconnect();\n\n      _this._leftFilter.biquad.frequency.setValueAtTime(1200, _this.ac.currentTime);\n\n      _this._rightFilter.biquad.frequency.setValueAtTime(1200, _this.ac.currentTime);\n\n      _this._leftFilter.biquad.Q.setValueAtTime(0.3, _this.ac.currentTime);\n\n      _this._rightFilter.biquad.Q.setValueAtTime(0.3, _this.ac.currentTime);\n\n      _this.input.connect(_this._split);\n\n      _this.leftDelay.connect(_this._leftGain);\n\n      _this.rightDelay.connect(_this._rightGain);\n\n      _this._leftGain.connect(_this._leftFilter.input);\n\n      _this._rightGain.connect(_this._rightFilter.input);\n\n      _this._merge.connect(_this.wet);\n\n      _this._leftFilter.biquad.gain.setValueAtTime(1, _this.ac.currentTime);\n\n      _this._rightFilter.biquad.gain.setValueAtTime(1, _this.ac.currentTime);\n\n      _this.setType(0);\n\n      _this._maxDelay = _this.leftDelay.delayTime.maxValue;\n\n      _this.feedback(0.5);\n\n      return _this;\n    }\n    /**\n     *  Add delay to an audio signal according to a set\n     *  of delay parameters.\n     *\n     *  @method  process\n     *  @for p5.Delay\n     *  @param  {Object} Signal  An object that outputs audio\n     *  @param  {Number} [delayTime] Time (in seconds) of the delay/echo.\n     *                               Some browsers limit delayTime to\n     *                               1 second.\n     *  @param  {Number} [feedback]  sends the delay back through itself\n     *                               in a loop that decreases in volume\n     *                               each time.\n     *  @param  {Number} [lowPass]   Cutoff frequency. Only frequencies\n     *                               below the lowPass will be part of the\n     *                               delay.\n     */\n\n\n    delay_createClass(Delay, [{\n      key: \"process\",\n      value: function process(src, _delayTime, _feedback, _filter) {\n        var feedback = _feedback || 0;\n        var delayTime = _delayTime || 0;\n\n        if (feedback >= 1.0) {\n          throw new Error('Feedback value will force a positive feedback loop.');\n        }\n\n        if (delayTime >= this._maxDelay) {\n          throw new Error('Delay Time exceeds maximum delay time of ' + this._maxDelay + ' second.');\n        }\n\n        src.connect(this.input);\n        this.leftDelay.delayTime.setValueAtTime(delayTime, this.ac.currentTime);\n        this.rightDelay.delayTime.setValueAtTime(delayTime, this.ac.currentTime);\n        this._leftGain.gain.value = feedback;\n        this._rightGain.gain.value = feedback;\n\n        if (_filter) {\n          this._leftFilter.freq(_filter);\n\n          this._rightFilter.freq(_filter);\n        }\n      }\n      /**\n       *  Set the delay (echo) time, in seconds. Usually this value will be\n       *  a floating point number between 0.0 and 1.0.\n       *\n       *  @method  delayTime\n       *  @for p5.Delay\n       *  @param {Number} delayTime Time (in seconds) of the delay\n       */\n\n    }, {\n      key: \"delayTime\",\n      value: function delayTime(t) {\n        if (typeof t !== 'number') {\n          t.connect(this.leftDelay.delayTime);\n          t.connect(this.rightDelay.delayTime);\n        } else {\n          this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime);\n          this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime);\n          this.leftDelay.delayTime.linearRampToValueAtTime(t, this.ac.currentTime);\n          this.rightDelay.delayTime.linearRampToValueAtTime(t, this.ac.currentTime);\n        }\n      }\n      /**\n       *  Feedback occurs when Delay sends its signal back through its input\n       *  in a loop. The feedback amount determines how much signal to send each\n       *  time through the loop. A feedback greater than 1.0 is not desirable because\n       *  it will increase the overall output each time through the loop,\n       *  creating an infinite feedback loop. The default value is 0.5\n       *\n       *  @method  feedback\n       *  @for p5.Delay\n       *  @param {Number|Object} feedback 0.0 to 1.0, or an object such as an\n       *                                  Oscillator that can be used to\n       *                                  modulate this param\n       *  @returns {Number} Feedback value\n       *\n       */\n\n    }, {\n      key: \"feedback\",\n      value: function feedback(f) {\n        if (f && typeof f !== 'number') {\n          f.connect(this._leftGain.gain);\n          f.connect(this._rightGain.gain);\n        } else if (f >= 1.0) {\n          throw new Error('Feedback value will force a positive feedback loop.');\n        } else if (typeof f === 'number') {\n          this._leftGain.gain.value = f;\n          this._rightGain.gain.value = f;\n        }\n\n        return this._leftGain.gain.value;\n      }\n      /**\n       *  Set a lowpass filter frequency for the delay. A lowpass filter\n       *  will cut off any frequencies higher than the filter frequency.\n       *\n       *  @method  filter\n       *  @for p5.Delay\n       *  @param {Number|Object} cutoffFreq  A lowpass filter will cut off any\n       *                              frequencies higher than the filter frequency.\n       *  @param {Number|Object} res  Resonance of the filter frequency\n       *                              cutoff, or an object (i.e. a p5.Oscillator)\n       *                              that can be used to modulate this parameter.\n       *                              High numbers (i.e. 15) will produce a resonance,\n       *                              low numbers (i.e. .2) will produce a slope.\n       */\n\n    }, {\n      key: \"filter\",\n      value: function filter(freq, q) {\n        this._leftFilter.set(freq, q);\n\n        this._rightFilter.set(freq, q);\n      }\n      /**\n       *  Choose a preset type of delay. 'pingPong' bounces the signal\n       *  from the left to the right channel to produce a stereo effect.\n       *  Any other parameter will revert to the default delay setting.\n       *\n       *  @method  setType\n       *  @for p5.Delay\n       *  @param {String|Number} type 'pingPong' (1) or 'default' (0)\n       */\n\n    }, {\n      key: \"setType\",\n      value: function setType(t) {\n        if (t === 1) {\n          t = 'pingPong';\n        }\n\n        this._split.disconnect();\n\n        this._leftFilter.disconnect();\n\n        this._rightFilter.disconnect();\n\n        this._split.connect(this.leftDelay, 0);\n\n        this._split.connect(this.rightDelay, 1);\n\n        switch (t) {\n          case 'pingPong':\n            this._rightFilter.setType(this._leftFilter.biquad.type);\n\n            this._leftFilter.output.connect(this._merge, 0, 0);\n\n            this._rightFilter.output.connect(this._merge, 0, 1);\n\n            this._leftFilter.output.connect(this.rightDelay);\n\n            this._rightFilter.output.connect(this.leftDelay);\n\n            break;\n\n          default:\n            this._leftFilter.output.connect(this._merge, 0, 0);\n\n            this._rightFilter.output.connect(this._merge, 0, 1);\n\n            this._leftFilter.output.connect(this.leftDelay);\n\n            this._rightFilter.output.connect(this.rightDelay);\n\n        }\n      }\n      /**\n       *  Set the output level of the delay effect.\n       *\n       *  @method  amp\n       *  @for p5.Delay\n       *  @param  {Number} volume amplitude between 0 and 1.0\n       *  @param {Number} [rampTime] create a fade that lasts rampTime\n       *  @param {Number} [timeFromNow] schedule this event to happen\n       *                                seconds from now\n       */\n\n      /**\n       *  Send output to a p5.sound or web audio object\n       *\n       *  @method  connect\n       *  @for p5.Delay\n       *  @param  {Object} unit\n       */\n\n      /**\n       *  Disconnect all output.\n       *\n       *  @method disconnect\n       *  @for p5.Delay\n       */\n\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        delay_get(delay_getPrototypeOf(Delay.prototype), \"dispose\", this).call(this);\n\n        this._split.disconnect();\n\n        this._leftFilter.dispose();\n\n        this._rightFilter.dispose();\n\n        this._merge.disconnect();\n\n        this._leftGain.disconnect();\n\n        this._rightGain.disconnect();\n\n        this.leftDelay.disconnect();\n        this.rightDelay.disconnect();\n        this._split = undefined;\n        this._leftFilter = undefined;\n        this._rightFilter = undefined;\n        this._merge = undefined;\n        this._leftGain = undefined;\n        this._rightGain = undefined;\n        this.leftDelay = undefined;\n        this.rightDelay = undefined;\n      }\n    }]);\n    return Delay;\n  }(effect);\n\n  var delay = delay_Delay;\n\n  function reverb_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      reverb_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      reverb_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return reverb_typeof(obj);\n  }\n\n  function reverb_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function reverb_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function reverb_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) reverb_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) reverb_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function reverb_possibleConstructorReturn(self, call) {\n    if (call && (reverb_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return reverb_assertThisInitialized(self);\n  }\n\n  function reverb_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function reverb_get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      reverb_get = Reflect.get;\n    } else {\n      reverb_get = function _get(target, property, receiver) {\n        var base = reverb_superPropBase(target, property);\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return reverb_get(target, property, receiver || target);\n  }\n\n  function reverb_superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = reverb_getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function reverb_getPrototypeOf(o) {\n    reverb_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return reverb_getPrototypeOf(o);\n  }\n\n  function reverb_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) reverb_setPrototypeOf(subClass, superClass);\n  }\n\n  function reverb_setPrototypeOf(o, p) {\n    reverb_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return reverb_setPrototypeOf(o, p);\n  }\n  /**\n   *  Reverb adds depth to a sound through a large number of decaying\n   *  echoes. It creates the perception that sound is occurring in a\n   *  physical space. The p5.Reverb has paramters for Time (how long does the\n   *  reverb last) and decayRate (how much the sound decays with each echo)\n   *  that can be set with the .set() or .process() methods. The p5.Convolver\n   *  extends p5.Reverb allowing you to recreate the sound of actual physical\n   *  spaces through convolution.\n   *\n   *  This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n   *  Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n   *  <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n   *  <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n   *\n   *  @class p5.Reverb\n   *  @extends p5.Effect\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  let soundFile, reverb;\n   *  function preload() {\n   *    soundFile = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playSound);\n   *\n   *    reverb = new p5.Reverb();\n   *    soundFile.disconnect(); // so we'll only hear reverb...\n   *\n   *    // connect soundFile to reverb, process w/\n   *    // 3 second reverbTime, decayRate of 2%\n   *    reverb.process(soundFile, 3, 2);\n   *  }\n   *\n   *  function draw() {\n   *    let dryWet = constrain(map(mouseX, 0, width, 0, 1), 0, 1);\n   *    // 1 = all reverb, 0 = no reverb\n   *    reverb.drywet(dryWet);\n   *\n   *    background(220);\n   *    text('tap to play', 10, 20);\n   *    text('dry/wet: ' + round(dryWet * 100) + '%', 10, height - 20);\n   *  }\n   *\n   *  function playSound() {\n   *    soundFile.play();\n   *  }\n   *  </code></div>\n   */\n\n\n  var Reverb = function (_Effect) {\n    reverb_inherits(Reverb, _Effect);\n\n    function Reverb() {\n      var _this;\n\n      reverb_classCallCheck(this, Reverb);\n      _this = reverb_possibleConstructorReturn(this, reverb_getPrototypeOf(Reverb).call(this));\n\n      _this._initConvolverNode();\n\n      _this.input.gain.value = 0.5;\n      _this._seconds = 3;\n      _this._decay = 2;\n      _this._reverse = false;\n\n      _this._buildImpulse();\n\n      return _this;\n    }\n\n    reverb_createClass(Reverb, [{\n      key: \"_initConvolverNode\",\n      value: function _initConvolverNode() {\n        this.convolverNode = this.ac.createConvolver();\n        this.input.connect(this.convolverNode);\n        this.convolverNode.connect(this.wet);\n      }\n    }, {\n      key: \"_teardownConvolverNode\",\n      value: function _teardownConvolverNode() {\n        if (this.convolverNode) {\n          this.convolverNode.disconnect();\n          delete this.convolverNode;\n        }\n      }\n    }, {\n      key: \"_setBuffer\",\n      value: function _setBuffer(audioBuffer) {\n        this._teardownConvolverNode();\n\n        this._initConvolverNode();\n\n        this.convolverNode.buffer = audioBuffer;\n      }\n      /**\n       *  Connect a source to the reverb, and assign reverb parameters.\n       *\n       *  @method  process\n       *  @for p5.Reverb\n       *  @param  {Object} src     p5.sound / Web Audio object with a sound\n       *                           output.\n       *  @param  {Number} [seconds] Duration of the reverb, in seconds.\n       *                           Min: 0, Max: 10. Defaults to 3.\n       *  @param  {Number} [decayRate] Percentage of decay with each echo.\n       *                            Min: 0, Max: 100. Defaults to 2.\n       *  @param  {Boolean} [reverse] Play the reverb backwards or forwards.\n       */\n\n    }, {\n      key: \"process\",\n      value: function process(src, seconds, decayRate, reverse) {\n        src.connect(this.input);\n        var rebuild = false;\n\n        if (seconds) {\n          this._seconds = seconds;\n          rebuild = true;\n        }\n\n        if (decayRate) {\n          this._decay = decayRate;\n        }\n\n        if (reverse) {\n          this._reverse = reverse;\n        }\n\n        if (rebuild) {\n          this._buildImpulse();\n        }\n      }\n      /**\n       *  Set the reverb settings. Similar to .process(), but without\n       *  assigning a new input.\n       *\n       *  @method  set\n       *  @for p5.Reverb\n       *  @param  {Number} [seconds] Duration of the reverb, in seconds.\n       *                           Min: 0, Max: 10. Defaults to 3.\n       *  @param  {Number} [decayRate] Percentage of decay with each echo.\n       *                            Min: 0, Max: 100. Defaults to 2.\n       *  @param  {Boolean} [reverse] Play the reverb backwards or forwards.\n       */\n\n    }, {\n      key: \"set\",\n      value: function set(seconds, decayRate, reverse) {\n        var rebuild = false;\n\n        if (seconds) {\n          this._seconds = seconds;\n          rebuild = true;\n        }\n\n        if (decayRate) {\n          this._decay = decayRate;\n        }\n\n        if (reverse) {\n          this._reverse = reverse;\n        }\n\n        if (rebuild) {\n          this._buildImpulse();\n        }\n      }\n      /**\n       *  Set the output level of the reverb effect.\n       *\n       *  @method  amp\n       *  @for p5.Reverb\n       *  @param  {Number} volume amplitude between 0 and 1.0\n       *  @param  {Number} [rampTime] create a fade that lasts rampTime\n       *  @param  {Number} [timeFromNow] schedule this event to happen\n       *                                seconds from now\n       */\n\n      /**\n       *  Send output to a p5.sound or web audio object\n       *\n       *  @method  connect\n       *  @for p5.Reverb\n       *  @param  {Object} unit\n       */\n\n      /**\n       *  Disconnect all output.\n       *\n       *  @method disconnect\n       *  @for p5.Reverb\n       */\n\n      /**\n       *  Inspired by Simple Reverb by Jordan Santell\n       *  https://github.com/web-audio-components/simple-reverb/blob/master/index.js\n       *\n       *  Utility function for building an impulse response\n       *  based on the module parameters.\n       *\n       *  @private\n       */\n\n    }, {\n      key: \"_buildImpulse\",\n      value: function _buildImpulse() {\n        var rate = this.ac.sampleRate;\n        var length = rate * this._seconds;\n        var decay = this._decay;\n        var impulse = this.ac.createBuffer(2, length, rate);\n        var impulseL = impulse.getChannelData(0);\n        var impulseR = impulse.getChannelData(1);\n        var n, i;\n\n        for (i = 0; i < length; i++) {\n          n = this._reverse ? length - i : i;\n          impulseL[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);\n          impulseR[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);\n        }\n\n        this._setBuffer(impulse);\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        reverb_get(reverb_getPrototypeOf(Reverb.prototype), \"dispose\", this).call(this);\n\n        this._teardownConvolverNode();\n      }\n    }]);\n    return Reverb;\n  }(effect);\n  /**\n   *  <p>p5.Convolver extends p5.Reverb. It can emulate the sound of real\n   *  physical spaces through a process called <a href=\"\n   *  https://en.wikipedia.org/wiki/Convolution_reverb#Real_space_simulation\">\n   *  convolution</a>.</p>\n   *\n   *  <p>Convolution multiplies any audio input by an \"impulse response\"\n   *  to simulate the dispersion of sound over time. The impulse response is\n   *  generated from an audio file that you provide. One way to\n   *  generate an impulse response is to pop a balloon in a reverberant space\n   *  and record the echo. Convolution can also be used to experiment with\n   *  sound.</p>\n   *\n   *  <p>Use the method <code>createConvolution(path)</code> to instantiate a\n   *  p5.Convolver with a path to your impulse response audio file.</p>\n   *\n   *  @class p5.Convolver\n   *  @extends p5.Effect\n   *  @constructor\n   *  @param  {String}   path     path to a sound file\n   *  @param  {Function} [callback] function to call when loading succeeds\n   *  @param  {Function} [errorCallback] function to call if loading fails.\n   *                                     This function will receive an error or\n   *                                     XMLHttpRequest object with information\n   *                                     about what went wrong.\n   *  @example\n   *  <div><code>\n   *  let cVerb, sound;\n   *  function preload() {\n   *    // We have both MP3 and OGG versions of all sound assets\n   *    soundFormats('ogg', 'mp3');\n   *\n   *    // Try replacing 'bx-spring' with other soundfiles like\n   *    // 'concrete-tunnel' 'small-plate' 'drum' 'beatbox'\n   *    cVerb = createConvolver('assets/bx-spring.mp3');\n   *\n   *    // Try replacing 'Damscray_DancingTiger' with\n   *    // 'beat', 'doorbell', lucky_dragons_-_power_melody'\n   *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playSound);\n   *    background(220);\n   *    text('tap to play', 20, 20);\n   *\n   *    // disconnect from main output...\n   *    sound.disconnect();\n   *\n   *    // ...and process with cVerb\n   *    // so that we only hear the convolution\n   *    cVerb.process(sound);\n   *  }\n   *\n   *  function playSound() {\n   *    sound.play();\n   *  }\n   *  </code></div>\n   */\n\n\n  var reverb_Convolver = function (_Reverb) {\n    reverb_inherits(Convolver, _Reverb);\n\n    function Convolver(path, callback, errorCallback) {\n      var _this2;\n\n      reverb_classCallCheck(this, Convolver);\n      _this2 = reverb_possibleConstructorReturn(this, reverb_getPrototypeOf(Convolver).call(this));\n      /**\n       *  Internally, the p5.Convolver uses the a\n       *  <a href=\"http://www.w3.org/TR/webaudio/#ConvolverNode\">\n       *  Web Audio Convolver Node</a>.\n       *\n       *  @property {ConvolverNode} convolverNode\n       */\n\n      _this2._initConvolverNode();\n\n      _this2.input.gain.value = 0.5;\n\n      if (path) {\n        _this2.impulses = [];\n\n        _this2._loadBuffer(path, callback, errorCallback);\n      } else {\n        _this2._seconds = 3;\n        _this2._decay = 2;\n        _this2._reverse = false;\n\n        _this2._buildImpulse();\n      }\n      /**\n       *  If you load multiple impulse files using the .addImpulse method,\n       *  they will be stored as Objects in this Array. Toggle between them\n       *  with the <code>toggleImpulse(id)</code> method.\n       *\n       *  @property {Array} impulses\n       *  @for p5.Convolver\n       */\n\n\n      _this2.impulses = [];\n      _this2.set = null;\n      return _this2;\n    }\n    /**\n     *  Private method to load a buffer as an Impulse Response,\n     *  assign it to the convolverNode, and add to the Array of .impulses.\n     *\n     *  @param   {String}   path\n     *  @param   {Function} callback\n     *  @param   {Function} errorCallback\n     *  @private\n     */\n\n\n    reverb_createClass(Convolver, [{\n      key: \"_loadBuffer\",\n      value: function _loadBuffer(_path, callback, errorCallback) {\n        var path = p5.prototype._checkFileFormats(_path);\n\n        var self = this;\n        var errorTrace = new Error().stack;\n        var ac = Object(audiocontext[\"b\"])();\n        var request = new XMLHttpRequest();\n        request.open('GET', path, true);\n        request.responseType = 'arraybuffer';\n\n        request.onload = function () {\n          if (request.status === 200) {\n            ac.decodeAudioData(request.response, function (buff) {\n              var buffer = {};\n              var chunks = path.split('/');\n              buffer.name = chunks[chunks.length - 1];\n              buffer.audioBuffer = buff;\n              self.impulses.push(buffer);\n\n              self._setBuffer(buffer.audioBuffer);\n\n              if (callback) {\n                callback(buffer);\n              }\n            }, function () {\n              var err = new errorHandler('decodeAudioData', errorTrace, self.url);\n              var msg = 'AudioContext error at decodeAudioData for ' + self.url;\n\n              if (errorCallback) {\n                err.msg = msg;\n                errorCallback(err);\n              } else {\n                console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n              }\n            });\n          } else {\n            var err = new errorHandler('loadConvolver', errorTrace, self.url);\n            var msg = 'Unable to load ' + self.url + '. The request status was: ' + request.status + ' (' + request.statusText + ')';\n\n            if (errorCallback) {\n              err.message = msg;\n              errorCallback(err);\n            } else {\n              console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n            }\n          }\n        };\n\n        request.onerror = function () {\n          var err = new errorHandler('loadConvolver', errorTrace, self.url);\n          var msg = 'There was no response from the server at ' + self.url + '. Check the url and internet connectivity.';\n\n          if (errorCallback) {\n            err.message = msg;\n            errorCallback(err);\n          } else {\n            console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n          }\n        };\n\n        request.send();\n      }\n      /**\n       *  Connect a source to the convolver.\n       *\n       *  @method  process\n       *  @for p5.Convolver\n       *  @param  {Object} src     p5.sound / Web Audio object with a sound\n       *                           output.\n       *  @example\n       *  <div><code>\n       *  let cVerb, sound;\n       *  function preload() {\n       *    // We have both MP3 and OGG versions of all sound assets\n       *    soundFormats('ogg', 'mp3');\n       *\n       *    // Try replacing 'bx-spring' with other soundfiles like\n       *    // 'concrete-tunnel' 'small-plate' 'drum' 'beatbox'\n       *    cVerb = createConvolver('assets/bx-spring.mp3');\n       *\n       *    // Try replacing 'Damscray_DancingTiger' with\n       *    // 'beat', 'doorbell', lucky_dragons_-_power_melody'\n       *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n       *  }\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(playSound);\n       *    background(220);\n       *    text('tap to play', 20, 20);\n       *\n       *    // disconnect from main output...\n       *    sound.disconnect();\n       *\n       *    // ...and process with cVerb\n       *    // so that we only hear the convolution\n       *    cVerb.process(sound);\n       *  }\n       *\n       *  function playSound() {\n       *    sound.play();\n       *  }\n       *\n       *  </code></div>\n       */\n\n    }, {\n      key: \"process\",\n      value: function process(src) {\n        src.connect(this.input);\n      }\n      /**\n       *  Load and assign a new Impulse Response to the p5.Convolver.\n       *  The impulse is added to the <code>.impulses</code> array. Previous\n       *  impulses can be accessed with the <code>.toggleImpulse(id)</code>\n       *  method.\n       *\n       *  @method  addImpulse\n       *  @for p5.Convolver\n       *  @param  {String}   path     path to a sound file\n       *  @param  {Function} callback function (optional)\n       *  @param  {Function} errorCallback function (optional)\n       */\n\n    }, {\n      key: \"addImpulse\",\n      value: function addImpulse(path, callback, errorCallback) {\n        if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n          alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n        }\n\n        this._loadBuffer(path, callback, errorCallback);\n      }\n      /**\n       *  Similar to .addImpulse, except that the <code>.impulses</code>\n       *  Array is reset to save memory. A new <code>.impulses</code>\n       *  array is created with this impulse as the only item.\n       *\n       *  @method  resetImpulse\n       *  @for p5.Convolver\n       *  @param  {String}   path     path to a sound file\n       *  @param  {Function} callback function (optional)\n       *  @param  {Function} errorCallback function (optional)\n       */\n\n    }, {\n      key: \"resetImpulse\",\n      value: function resetImpulse(path, callback, errorCallback) {\n        if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n          alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n        }\n\n        this.impulses = [];\n\n        this._loadBuffer(path, callback, errorCallback);\n      }\n      /**\n       *  If you have used <code>.addImpulse()</code> to add multiple impulses\n       *  to a p5.Convolver, then you can use this method to toggle between\n       *  the items in the <code>.impulses</code> Array. Accepts a parameter\n       *  to identify which impulse you wish to use, identified either by its\n       *  original filename (String) or by its position in the <code>.impulses\n       *  </code> Array (Number).<br/>\n       *  You can access the objects in the .impulses Array directly. Each\n       *  Object has two attributes: an <code>.audioBuffer</code> (type:\n       *  Web Audio <a href=\"\n       *  http://webaudio.github.io/web-audio-api/#the-audiobuffer-interface\">\n       *  AudioBuffer)</a> and a <code>.name</code>, a String that corresponds\n       *  with the original filename.\n       *\n       *  @method toggleImpulse\n       *  @for p5.Convolver\n       *  @param {String|Number} id Identify the impulse by its original filename\n       *                            (String), or by its position in the\n       *                            <code>.impulses</code> Array (Number).\n       */\n\n    }, {\n      key: \"toggleImpulse\",\n      value: function toggleImpulse(id) {\n        if (typeof id === 'number' && id < this.impulses.length) {\n          this._setBuffer(this.impulses[id].audioBuffer);\n        }\n\n        if (typeof id === 'string') {\n          for (var i = 0; i < this.impulses.length; i++) {\n            if (this.impulses[i].name === id) {\n              this._setBuffer(this.impulses[i].audioBuffer);\n\n              break;\n            }\n          }\n        }\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        reverb_get(reverb_getPrototypeOf(Convolver.prototype), \"dispose\", this).call(this);\n\n        for (var i in this.impulses) {\n          if (this.impulses[i]) {\n            this.impulses[i] = null;\n          }\n        }\n      }\n    }]);\n    return Convolver;\n  }(Reverb);\n  /**\n   *  Create a p5.Convolver. Accepts a path to a soundfile\n   *  that will be used to generate an impulse response.\n   *\n   *  @method  createConvolver\n   *  @for p5\n   *  @param  {String}   path     path to a sound file\n   *  @param  {Function} [callback] function to call if loading is successful.\n   *                                The object will be passed in as the argument\n   *                                to the callback function.\n   *  @param  {Function} [errorCallback] function to call if loading is not successful.\n   *                                A custom error will be passed in as the argument\n   *                                to the callback function.\n   *  @return {p5.Convolver}\n   *  @example\n   *  <div><code>\n   *  let cVerb, sound;\n   *  function preload() {\n   *    // We have both MP3 and OGG versions of all sound assets\n   *    soundFormats('ogg', 'mp3');\n   *\n   *    // Try replacing 'bx-spring' with other soundfiles like\n   *    // 'concrete-tunnel' 'small-plate' 'drum' 'beatbox'\n   *    cVerb = createConvolver('assets/bx-spring.mp3');\n   *\n   *    // Try replacing 'Damscray_DancingTiger' with\n   *    // 'beat', 'doorbell', lucky_dragons_-_power_melody'\n   *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playSound);\n   *    background(220);\n   *    text('tap to play', 20, 20);\n   *\n   *    // disconnect from main output...\n   *    sound.disconnect();\n   *\n   *    // ...and process with cVerb\n   *    // so that we only hear the convolution\n   *    cVerb.process(sound);\n   *  }\n   *\n   *  function playSound() {\n   *    sound.play();\n   *  }\n   *  </code></div>\n   */\n\n\n  function createConvolver(path, callback, errorCallback) {\n    if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n      alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n    }\n\n    var self = this;\n    var cReverb = new reverb_Convolver(path, function (buffer) {\n      if (typeof callback === 'function') {\n        callback(buffer);\n      }\n\n      if (typeof self._decrementPreload === 'function') {\n        self._decrementPreload();\n      }\n    }, errorCallback);\n    cReverb.impulses = [];\n    return cReverb;\n  }\n\n  var Clock = __webpack_require__(11);\n\n  var Clock_default = __webpack_require__.n(Clock);\n\n  function metro_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function metro_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function metro_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) metro_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) metro_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  var metro_Metro = function () {\n    function Metro() {\n      metro_classCallCheck(this, Metro);\n      this.clock = new Clock_default.a({\n        callback: this.ontick.bind(this)\n      });\n      this.syncedParts = [];\n      this.bpm = 120;\n\n      this._init();\n\n      this.prevTick = 0;\n      this.tatumTime = 0;\n\n      this.tickCallback = function () {};\n    }\n\n    metro_createClass(Metro, [{\n      key: \"ontick\",\n      value: function ontick(tickTime) {\n        var elapsedTime = tickTime - this.prevTick;\n        var secondsFromNow = tickTime - main.audiocontext.currentTime;\n\n        if (elapsedTime - this.tatumTime <= -0.02) {\n          return;\n        } else {\n          this.prevTick = tickTime;\n          var self = this;\n          this.syncedParts.forEach(function (thisPart) {\n            if (!thisPart.isPlaying) return;\n            thisPart.incrementStep(secondsFromNow);\n            thisPart.phrases.forEach(function (thisPhrase) {\n              var phraseArray = thisPhrase.sequence;\n              var bNum = self.metroTicks % phraseArray.length;\n\n              if (phraseArray[bNum] !== 0 && (self.metroTicks < phraseArray.length || !thisPhrase.looping)) {\n                thisPhrase.callback(secondsFromNow, phraseArray[bNum]);\n              }\n            });\n          });\n          this.metroTicks += 1;\n          this.tickCallback(secondsFromNow);\n        }\n      }\n    }, {\n      key: \"setBPM\",\n      value: function setBPM(bpm) {\n        var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var beatTime = 60 / (bpm * this.tatums);\n        var now = main.audiocontext.currentTime;\n        this.tatumTime = beatTime;\n        this.clock.frequency.setValueAtTime(this.clock.frequency.value, now);\n        this.clock.frequency.linearRampToValueAtTime(bpm, now + rampTime);\n        this.bpm = bpm;\n      }\n    }, {\n      key: \"getBPM\",\n      value: function getBPM() {\n        return this.clock.getRate() / this.tatums * 60;\n      }\n    }, {\n      key: \"_init\",\n      value: function _init() {\n        this.metroTicks = 0;\n      }\n    }, {\n      key: \"resetSync\",\n      value: function resetSync(part) {\n        this.syncedParts = [part];\n      }\n    }, {\n      key: \"pushSync\",\n      value: function pushSync(part) {\n        this.syncedParts.push(part);\n      }\n    }, {\n      key: \"start\",\n      value: function start(timeFromNow) {\n        var t = timeFromNow || 0;\n        var now = main.audiocontext.currentTime;\n        this.clock.start(now + t);\n        this.setBPM(this.bpm);\n      }\n    }, {\n      key: \"stop\",\n      value: function stop(timeFromNow) {\n        var t = timeFromNow || 0;\n        var now = main.audiocontext.currentTime;\n        this.clock.stop(now + t);\n      }\n    }, {\n      key: \"beatLength\",\n      value: function beatLength(tatums) {\n        this.tatums = 1 / tatums / 4;\n      }\n    }]);\n    return Metro;\n  }();\n\n  var metro = metro_Metro;\n\n  function looper_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function looper_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) looper_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) looper_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function looper_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var BPM = 120;\n  /**\n   *  Set the global tempo, in beats per minute, for all\n   *  p5.Parts. This method will impact all active p5.Parts.\n   *\n   *  @method setBPM\n   *  @for p5\n   *  @param {Number} BPM      Beats Per Minute\n   *  @param {Number} rampTime Seconds from now\n   */\n\n  p5.prototype.setBPM = function (bpm, rampTime) {\n    BPM = bpm;\n\n    for (var i in main.parts) {\n      if (main.parts[i]) {\n        main.parts[i].setBPM(bpm, rampTime);\n      }\n    }\n  };\n  /**\n   *  <p>A phrase is a pattern of musical events over time, i.e.\n   *  a series of notes and rests.</p>\n   *\n   *  <p>Phrases must be added to a p5.Part for playback, and\n   *  each part can play multiple phrases at the same time.\n   *  For example, one Phrase might be a kick drum, another\n   *  could be a snare, and another could be the bassline.</p>\n   *\n   *  <p>The first parameter is a name so that the phrase can be\n   *  modified or deleted later. The callback is a a function that\n   *  this phrase will call at every step—for example it might be\n   *  called <code>playNote(value){}</code>. The array determines\n   *  which value is passed into the callback at each step of the\n   *  phrase. It can be numbers, an object with multiple numbers,\n   *  or a zero (0) indicates a rest so the callback won't be called).</p>\n   *\n   *  @class p5.Phrase\n   *  @constructor\n   *  @param {String}   name     Name so that you can access the Phrase.\n   *  @param {Function} callback The name of a function that this phrase\n   *                             will call. Typically it will play a sound,\n   *                             and accept two parameters: a time at which\n   *                             to play the sound (in seconds from now),\n   *                             and a value from the sequence array. The\n   *                             time should be passed into the play() or\n   *                             start() method to ensure precision.\n   *  @param {Array}   sequence    Array of values to pass into the callback\n   *                            at each step of the phrase.\n   *  @example\n   *  <div><code>\n   *  let mySound, myPhrase, myPart;\n   *  let pattern = [1,0,0,2,0,2,0,0];\n   *\n   *  function preload() {\n   *    mySound = loadSound('assets/beatbox.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playMyPart);\n   *    background(220);\n   *    text('tap to play', width/2, height/2);\n   *    textAlign(CENTER, CENTER);\n   *\n   *    myPhrase = new p5.Phrase('bbox', onEachStep, pattern);\n   *    myPart = new p5.Part();\n   *    myPart.addPhrase(myPhrase);\n   *    myPart.setBPM(60);\n   *  }\n   *\n   *  function onEachStep(time, playbackRate) {\n   *    mySound.rate(playbackRate);\n   *    mySound.play(time);\n   *  }\n   *\n   *  function playMyPart() {\n   *    userStartAudio();\n   *    myPart.start();\n   *  }\n   *  </code></div>\n   */\n\n\n  var Phrase = function Phrase(name, callback, sequence) {\n    looper_classCallCheck(this, Phrase);\n    this.phraseStep = 0;\n    this.name = name;\n    this.callback = callback;\n    /**\n     * Array of values to pass into the callback\n     * at each step of the phrase. Depending on the callback\n     * function's requirements, these values may be numbers,\n     * strings, or an object with multiple parameters.\n     * Zero (0) indicates a rest.\n     *\n     * @property {Array} sequence\n     */\n\n    this.sequence = sequence;\n  };\n  /**\n   *  <p>A p5.Part plays back one or more p5.Phrases. Instantiate a part\n   *  with steps and tatums. By default, each step represents a 1/16th note.</p>\n   *\n   *  <p>See p5.Phrase for more about musical timing.</p>\n   *\n   *  @class p5.Part\n   *  @constructor\n   *  @param {Number} [steps]   Steps in the part\n   *  @param {Number} [tatums] Divisions of a beat, e.g. use 1/4, or 0.25 for a quater note (default is 1/16, a sixteenth note)\n   *  @example\n   *  <div><code>\n   *  let box, drum, myPart;\n   *  let boxPat = [1,0,0,2,0,2,0,0];\n   *  let drumPat = [0,1,1,0,2,0,1,0];\n   *\n   *  function preload() {\n   *    box = loadSound('assets/beatbox.mp3');\n   *    drum = loadSound('assets/drum.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playMyPart);\n   *    background(220);\n   *    textAlign(CENTER, CENTER);\n   *    text('tap to play', width/2, height/2);\n   *\n   *    let boxPhrase = new p5.Phrase('box', playBox, boxPat);\n   *    let drumPhrase = new p5.Phrase('drum', playDrum, drumPat);\n   *    myPart = new p5.Part();\n   *    myPart.addPhrase(boxPhrase);\n   *    myPart.addPhrase(drumPhrase);\n   *    myPart.setBPM(60);\n   *  }\n   *\n   *  function playBox(time, playbackRate) {\n   *    box.rate(playbackRate);\n   *    box.play(time);\n   *  }\n   *\n   *  function playDrum(time, playbackRate) {\n   *    drum.rate(playbackRate);\n   *    drum.play(time);\n   *  }\n   *\n   *  function playMyPart() {\n   *    userStartAudio();\n   *\n   *    myPart.start();\n   *  }\n   *  </code></div>\n   */\n\n\n  var looper_Part = function () {\n    function Part(steps, bLength) {\n      looper_classCallCheck(this, Part);\n      this.length = steps || 0;\n      this.partStep = 0;\n      this.phrases = [];\n      this.isPlaying = false;\n      this.noLoop();\n      this.tatums = bLength || 0.0625;\n      this.metro = new metro();\n\n      this.metro._init();\n\n      this.metro.beatLength(this.tatums);\n      this.metro.setBPM(BPM);\n      main.parts.push(this);\n\n      this.callback = function () {};\n    }\n    /**\n     *  Set the tempo of this part, in Beats Per Minute.\n     *\n     *  @method  setBPM\n     *  @for p5.Part\n     *  @param {Number} BPM      Beats Per Minute\n     *  @param {Number} [rampTime] Seconds from now\n     */\n\n\n    looper_createClass(Part, [{\n      key: \"setBPM\",\n      value: function setBPM(tempo, rampTime) {\n        this.metro.setBPM(tempo, rampTime);\n      }\n      /**\n       *  Returns the tempo, in Beats Per Minute, of this part.\n       *\n       *  @method getBPM\n       *  @for p5.Part\n       *  @return {Number}\n       */\n\n    }, {\n      key: \"getBPM\",\n      value: function getBPM() {\n        return this.metro.getBPM();\n      }\n      /**\n       *  Start playback of this part. It will play\n       *  through all of its phrases at a speed\n       *  determined by setBPM.\n       *\n       *  @method  start\n       *  @for p5.Part\n       *  @param  {Number} [time] seconds from now\n       */\n\n    }, {\n      key: \"start\",\n      value: function start(time) {\n        if (!this.isPlaying) {\n          this.isPlaying = true;\n          this.metro.resetSync(this);\n          var t = time || 0;\n          this.metro.start(t);\n        }\n      }\n      /**\n       *  Loop playback of this part. It will begin\n       *  looping through all of its phrases at a speed\n       *  determined by setBPM.\n       *\n       *  @method  loop\n       *  @for p5.Part\n       *  @param  {Number} [time] seconds from now\n       */\n\n    }, {\n      key: \"loop\",\n      value: function loop(time) {\n        this.looping = true;\n\n        this.onended = function () {\n          this.partStep = 0;\n        };\n\n        var t = time || 0;\n        this.start(t);\n      }\n      /**\n       *  Tell the part to stop looping.\n       *\n       *  @method  noLoop\n       *  @for p5.Part\n       */\n\n    }, {\n      key: \"noLoop\",\n      value: function noLoop() {\n        this.looping = false;\n\n        this.onended = function () {\n          this.stop();\n        };\n      }\n      /**\n       *  Stop the part and cue it to step 0. Playback will resume from the begining of the Part when it is played again.\n       *\n       *  @method  stop\n       *  @for p5.Part\n       *  @param  {Number} [time] seconds from now\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop(time) {\n        this.partStep = 0;\n        this.pause(time);\n      }\n      /**\n       *  Pause the part. Playback will resume\n       *  from the current step.\n       *\n       *  @method  pause\n       *  @for p5.Part\n       *  @param  {Number} time seconds from now\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause(time) {\n        this.isPlaying = false;\n        var t = time || 0;\n        this.metro.stop(t);\n      }\n      /**\n       *  Add a p5.Phrase to this Part.\n       *\n       *  @method  addPhrase\n       *  @for p5.Part\n       *  @param {p5.Phrase}   phrase   reference to a p5.Phrase\n       */\n\n    }, {\n      key: \"addPhrase\",\n      value: function addPhrase(name, callback, array) {\n        var p;\n\n        if (arguments.length === 3) {\n          p = new Phrase(name, callback, array);\n        } else if (arguments[0] instanceof Phrase) {\n          p = arguments[0];\n        } else {\n          throw 'invalid input. addPhrase accepts name, callback, array or a p5.Phrase';\n        }\n\n        this.phrases.push(p);\n\n        if (p.sequence.length > this.length) {\n          this.length = p.sequence.length;\n        }\n      }\n      /**\n       *  Remove a phrase from this part, based on the name it was\n       *  given when it was created.\n       *\n       *  @method  removePhrase\n       *  @for p5.Part\n       *  @param  {String} phraseName\n       */\n\n    }, {\n      key: \"removePhrase\",\n      value: function removePhrase(name) {\n        for (var i in this.phrases) {\n          if (this.phrases[i].name === name) {\n            this.phrases.splice(i, 1);\n          }\n        }\n      }\n      /**\n       *  Get a phrase from this part, based on the name it was\n       *  given when it was created. Now you can modify its array.\n       *\n       *  @method  getPhrase\n       *  @for p5.Part\n       *  @param  {String} phraseName\n       */\n\n    }, {\n      key: \"getPhrase\",\n      value: function getPhrase(name) {\n        for (var i in this.phrases) {\n          if (this.phrases[i].name === name) {\n            return this.phrases[i];\n          }\n        }\n      }\n      /**\n       *  Find all sequences with the specified name, and replace their patterns with the specified array.\n       *\n       *  @method  replaceSequence\n       *  @for p5.Part\n       *  @param  {String} phraseName\n       *  @param  {Array} sequence  Array of values to pass into the callback\n       *                            at each step of the phrase.\n       */\n\n    }, {\n      key: \"replaceSequence\",\n      value: function replaceSequence(name, array) {\n        for (var i in this.phrases) {\n          if (this.phrases[i].name === name) {\n            this.phrases[i].sequence = array;\n          }\n        }\n      }\n    }, {\n      key: \"incrementStep\",\n      value: function incrementStep(time) {\n        if (this.partStep < this.length - 1) {\n          this.callback(time);\n          this.partStep += 1;\n        } else {\n          if (!this.looping && this.partStep === this.length - 1) {\n            this.onended();\n          }\n        }\n      }\n      /**\n       *  Set the function that will be called at every step. This will clear the previous function.\n       *\n       *  @method onStep\n       *  @for p5.Part\n       *  @param  {Function} callback The name of the callback\n       *                              you want to fire\n       *                              on every beat/tatum.\n       */\n\n    }, {\n      key: \"onStep\",\n      value: function onStep(callback) {\n        this.callback = callback;\n      }\n    }]);\n    return Part;\n  }();\n  /**\n   *  A Score consists of a series of Parts. The parts will\n   *  be played back in order. For example, you could have an\n   *  A part, a B part, and a C part, and play them back in this order\n   *  <code>new p5.Score(a, a, b, a, c)</code>\n   *\n   *  @class p5.Score\n   *  @constructor\n   *  @param {p5.Part} [...parts] One or multiple parts, to be played in sequence.\n   */\n\n\n  var Score = function () {\n    function Score() {\n      looper_classCallCheck(this, Score);\n      this.parts = [];\n      this.currentPart = new Array(arguments.length);\n      ;\n      var thisScore = this;\n\n      for (var i in arguments) {\n        this.parts[i] = arguments[i];\n        this.parts[i].nextPart = this.parts[i + 1];\n\n        this.parts[i].onended = function () {\n          thisScore.resetPart(i);\n          playNextPart(thisScore);\n        };\n      }\n\n      this.looping = false;\n    }\n\n    looper_createClass(Score, [{\n      key: \"onended\",\n      value: function onended() {\n        if (this.looping) {\n          this.parts[0].start();\n        } else {\n          this.parts[this.parts.length - 1].onended = function () {\n            this.stop();\n            this.resetParts();\n          };\n        }\n\n        this.currentPart = 0;\n      }\n      /**\n       *  Start playback of the score.\n       *\n       *  @method  start\n       *  @for p5.Score\n       */\n\n    }, {\n      key: \"start\",\n      value: function start() {\n        this.parts[this.currentPart].start();\n        this.scoreStep = 0;\n      }\n      /**\n       *  Stop playback of the score.\n       *\n       *  @method  stop\n       *  @for p5.Score\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        this.parts[this.currentPart].stop();\n        this.currentPart = 0;\n        this.scoreStep = 0;\n      }\n      /**\n       *  Pause playback of the score.\n       *\n       *  @method  pause\n       *  @for p5.Score\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause() {\n        this.parts[this.currentPart].stop();\n      }\n      /**\n       *  Loop playback of the score.\n       *\n       *  @method  loop\n       *  @for p5.Score\n       */\n\n    }, {\n      key: \"loop\",\n      value: function loop() {\n        this.looping = true;\n        this.start();\n      }\n      /**\n       *  Stop looping playback of the score. If it\n       *  is currently playing, this will go into effect\n       *  after the current round of playback completes.\n       *\n       *  @method  noLoop\n       *  @for p5.Score\n       */\n\n    }, {\n      key: \"noLoop\",\n      value: function noLoop() {\n        this.looping = false;\n      }\n    }, {\n      key: \"resetParts\",\n      value: function resetParts() {\n        var self = this;\n        this.parts.forEach(function (part) {\n          self.resetParts[part];\n        });\n      }\n    }, {\n      key: \"resetPart\",\n      value: function resetPart(i) {\n        this.parts[i].stop();\n        this.parts[i].partStep = 0;\n\n        for (var p in this.parts[i].phrases) {\n          if (this.parts[i]) {\n            this.parts[i].phrases[p].phraseStep = 0;\n          }\n        }\n      }\n      /**\n       *  Set the tempo for all parts in the score\n       *\n       *  @method setBPM\n       *  @for p5.Score\n       *  @param {Number} BPM      Beats Per Minute\n       *  @param {Number} rampTime Seconds from now\n       */\n\n    }, {\n      key: \"setBPM\",\n      value: function setBPM(bpm, rampTime) {\n        for (var i in this.parts) {\n          if (this.parts[i]) {\n            this.parts[i].setBPM(bpm, rampTime);\n          }\n        }\n      }\n    }]);\n    return Score;\n  }();\n\n  function playNextPart(aScore) {\n    aScore.currentPart++;\n\n    if (aScore.currentPart >= aScore.parts.length) {\n      aScore.scoreStep = 0;\n      aScore.onended();\n    } else {\n      aScore.scoreStep = 0;\n      aScore.parts[aScore.currentPart - 1].stop();\n      aScore.parts[aScore.currentPart].start();\n    }\n  }\n\n  function soundLoop_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function soundLoop_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function soundLoop_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) soundLoop_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) soundLoop_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  /**\n   * SoundLoop\n   *\n   * @class p5.SoundLoop\n   * @constructor\n   *\n   * @param {Function} callback this function will be called on each iteration of theloop\n   * @param {Number|String} [interval] amount of time (if a number) or beats (if a string, following <a href = \"https://github.com/Tonejs/Tone.js/wiki/Time\">Tone.Time</a> convention) for each iteration of the loop. Defaults to 1 second.\n   *\n   * @example\n   * <div><code>\n   *  let synth, soundLoop;\n   *  let notePattern = [60, 62, 64, 67, 69, 72];\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(canvasPressed);\n   *    colorMode(HSB);\n   *    background(0, 0, 86);\n   *    text('tap to start/stop', 10, 20);\n   *\n   *    //the looper's callback is passed the timeFromNow\n   *    //this value should be used as a reference point from\n   *    //which to schedule sounds\n   *    let intervalInSeconds = 0.2;\n   *    soundLoop = new p5.SoundLoop(onSoundLoop, intervalInSeconds);\n   *\n   *    synth = new p5.MonoSynth();\n   * }\n   *\n   * function canvasPressed() {\n   *   // ensure audio is enabled\n   *   userStartAudio();\n   *\n   *   if (soundLoop.isPlaying) {\n   *     soundLoop.stop();\n   *   } else {\n   *     // start the loop\n   *     soundLoop.start();\n   *   }\n   * }\n   *\n   * function onSoundLoop(timeFromNow) {\n   *   let noteIndex = (soundLoop.iterations - 1) % notePattern.length;\n   *   let note = midiToFreq(notePattern[noteIndex]);\n   *   synth.play(note, 0.5, timeFromNow);\n   *   background(noteIndex * 360 / notePattern.length, 50, 100);\n   * }\n   * </code></div>\n   */\n\n\n  var soundLoop_SoundLoop = function () {\n    function SoundLoop(callback, interval) {\n      soundLoop_classCallCheck(this, SoundLoop);\n      /**\n       * Getters and Setters, setting any paramter will result in a change in the clock's\n       * frequency, that will be reflected after the next callback\n       * beats per minute (defaults to 60)\n       * @property {Number} bpm\n       * @for p5.SoundLoop\n       */\n\n      Object.defineProperty(this, 'bpm', {\n        get: function get() {\n          return this._bpm;\n        },\n        set: function set(bpm) {\n          if (!this.musicalTimeMode) {\n            console.warn('Changing the BPM in \"seconds\" mode has no effect. ' + 'BPM is only relevant in musicalTimeMode ' + 'when the interval is specified as a string ' + '(\"2n\", \"4n\", \"1m\"...etc)');\n          }\n\n          this._bpm = bpm;\n\n          this._update();\n        }\n      });\n      /**\n       * number of quarter notes in a measure (defaults to 4)\n       * @property {Number} timeSignature\n       * @for p5.SoundLoop\n       */\n\n      Object.defineProperty(this, 'timeSignature', {\n        get: function get() {\n          return this._timeSignature;\n        },\n        set: function set(timeSig) {\n          if (!this.musicalTimeMode) {\n            console.warn('Changing the timeSignature in \"seconds\" mode has no effect. ' + 'BPM is only relevant in musicalTimeMode ' + 'when the interval is specified as a string ' + '(\"2n\", \"4n\", \"1m\"...etc)');\n          }\n\n          this._timeSignature = timeSig;\n\n          this._update();\n        }\n      });\n      /**\n       * length of the loops interval\n       * @property {Number|String} interval\n       * @for p5.SoundLoop\n       */\n\n      Object.defineProperty(this, 'interval', {\n        get: function get() {\n          return this._interval;\n        },\n        set: function set(interval) {\n          this.musicalTimeMode = typeof interval === 'number' ? false : true;\n          this._interval = interval;\n\n          this._update();\n        }\n      });\n      /**\n       * how many times the callback has been called so far\n       * @property {Number} iterations\n       * @for p5.SoundLoop\n       * @readonly\n       */\n\n      Object.defineProperty(this, 'iterations', {\n        get: function get() {\n          return this.clock.ticks;\n        }\n      });\n      this.callback = callback;\n      /**\n       * musicalTimeMode uses <a href = \"https://github.com/Tonejs/Tone.js/wiki/Time\">Tone.Time</a> convention\n       * true if string, false if number\n       * @property {Boolean} musicalTimeMode\n       */\n\n      this.musicalTimeMode = typeof this._interval === 'number' ? false : true;\n      this._interval = interval || 1;\n      /**\n       * musicalTimeMode variables\n       * modify these only when the interval is specified in musicalTime format as a string\n       */\n\n      this._timeSignature = 4;\n      this._bpm = 60;\n      this.isPlaying = false;\n      /**\n       * Set a limit to the number of loops to play. defaults to Infinity\n       * @property {Number} maxIterations\n       */\n\n      this.maxIterations = Infinity;\n      var self = this;\n      this.clock = new Clock_default.a({\n        callback: function callback(time) {\n          var timeFromNow = time - main.audiocontext.currentTime;\n          /**\n           * Do not initiate the callback if timeFromNow is < 0\n           * This ususually occurs for a few milliseconds when the page\n           * is not fully loaded\n           *\n           * The callback should only be called until maxIterations is reached\n           */\n\n          if (timeFromNow > 0 && self.iterations <= self.maxIterations) {\n            self.callback(timeFromNow);\n          }\n        },\n        frequency: this._calcFreq()\n      });\n    }\n    /**\n     * Start the loop\n     * @method  start\n     * @for p5.SoundLoop\n     * @param  {Number} [timeFromNow] schedule a starting time\n     */\n\n\n    soundLoop_createClass(SoundLoop, [{\n      key: \"start\",\n      value: function start(timeFromNow) {\n        var t = timeFromNow || 0;\n        var now = main.audiocontext.currentTime;\n\n        if (!this.isPlaying) {\n          this.clock.start(now + t);\n          this.isPlaying = true;\n        }\n      }\n      /**\n       * Stop the loop\n       * @method  stop\n       * @for p5.SoundLoop\n       * @param  {Number} [timeFromNow] schedule a stopping time\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop(timeFromNow) {\n        var t = timeFromNow || 0;\n        var now = main.audiocontext.currentTime;\n\n        if (this.isPlaying) {\n          this.clock.stop(now + t);\n          this.isPlaying = false;\n        }\n      }\n      /**\n       * Pause the loop\n       * @method pause\n       * @for p5.SoundLoop\n       * @param  {Number} [timeFromNow] schedule a pausing time\n       */\n\n    }, {\n      key: \"pause\",\n      value: function pause(timeFromNow) {\n        var t = timeFromNow || 0;\n        var now = main.audiocontext.currentTime;\n\n        if (this.isPlaying) {\n          this.clock.pause(now + t);\n          this.isPlaying = false;\n        }\n      }\n      /**\n       * Synchronize loops. Use this method to start two or more loops in synchronization\n       * or to start a loop in synchronization with a loop that is already playing\n       * This method will schedule the implicit loop in sync with the explicit master loop\n       * i.e. loopToStart.syncedStart(loopToSyncWith)\n       *\n       * @method  syncedStart\n       * @for p5.SoundLoop\n       * @param  {Object} otherLoop   a p5.SoundLoop to sync with\n       * @param  {Number} [timeFromNow] Start the loops in sync after timeFromNow seconds\n       */\n\n    }, {\n      key: \"syncedStart\",\n      value: function syncedStart(otherLoop, timeFromNow) {\n        var t = timeFromNow || 0;\n        var now = main.audiocontext.currentTime;\n\n        if (!otherLoop.isPlaying) {\n          otherLoop.clock.start(now + t);\n          otherLoop.isPlaying = true;\n          this.clock.start(now + t);\n          this.isPlaying = true;\n        } else if (otherLoop.isPlaying) {\n          var time = otherLoop.clock._nextTick - main.audiocontext.currentTime;\n          this.clock.start(now + time);\n          this.isPlaying = true;\n        }\n      }\n      /**\n       * Updates frequency value, reflected in next callback\n       * @private\n       * @for p5.SoundLoop\n       * @method  _update\n       */\n\n    }, {\n      key: \"_update\",\n      value: function _update() {\n        this.clock.frequency.value = this._calcFreq();\n      }\n      /**\n       * Calculate the frequency of the clock's callback based on bpm, interval, and timesignature\n       * @private\n       * @for p5.SoundLoop\n       * @method  _calcFreq\n       * @return {Number} new clock frequency value\n       */\n\n    }, {\n      key: \"_calcFreq\",\n      value: function _calcFreq() {\n        if (typeof this._interval === 'number') {\n          this.musicalTimeMode = false;\n          return 1 / this._interval;\n        } else if (typeof this._interval === 'string') {\n          this.musicalTimeMode = true;\n          return this._bpm / 60 / this._convertNotation(this._interval) * (this._timeSignature / 4);\n        }\n      }\n      /**\n       * Convert notation from musical time format to seconds\n       * Uses <a href = \"https://github.com/Tonejs/Tone.js/wiki/Time\">Tone.Time</a> convention\n       * @private\n       * @for p5.SoundLoop\n       * @method _convertNotation\n       * @param  {String} value value to be converted\n       * @return {Number}       converted value in seconds\n       */\n\n    }, {\n      key: \"_convertNotation\",\n      value: function _convertNotation(value) {\n        var type = value.slice(-1);\n        value = Number(value.slice(0, -1));\n\n        switch (type) {\n          case 'm':\n            return this._measure(value);\n\n          case 'n':\n            return this._note(value);\n\n          default:\n            console.warn('Specified interval is not formatted correctly. See Tone.js ' + 'timing reference for more info: https://github.com/Tonejs/Tone.js/wiki/Time');\n        }\n      }\n      /**\n       * Helper conversion methods of measure and note\n       * @private\n       * @for p5.SoundLoop\n       * @method  _measure\n       */\n\n    }, {\n      key: \"_measure\",\n      value: function _measure(value) {\n        return value * this._timeSignature;\n      }\n      /**\n       * @private\n       * @method  _note\n       * @for p5.SoundLoop\n       */\n\n    }, {\n      key: \"_note\",\n      value: function _note(value) {\n        return this._timeSignature / value;\n      }\n    }]);\n    return SoundLoop;\n  }();\n\n  var soundLoop = soundLoop_SoundLoop;\n\n  function compressor_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      compressor_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      compressor_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return compressor_typeof(obj);\n  }\n\n  function compressor_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function compressor_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function compressor_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) compressor_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) compressor_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function compressor_possibleConstructorReturn(self, call) {\n    if (call && (compressor_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return compressor_assertThisInitialized(self);\n  }\n\n  function compressor_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function compressor_get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      compressor_get = Reflect.get;\n    } else {\n      compressor_get = function _get(target, property, receiver) {\n        var base = compressor_superPropBase(target, property);\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return compressor_get(target, property, receiver || target);\n  }\n\n  function compressor_superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = compressor_getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function compressor_getPrototypeOf(o) {\n    compressor_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return compressor_getPrototypeOf(o);\n  }\n\n  function compressor_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) compressor_setPrototypeOf(subClass, superClass);\n  }\n\n  function compressor_setPrototypeOf(o, p) {\n    compressor_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return compressor_setPrototypeOf(o, p);\n  }\n  /**\n   * Compressor is an audio effect class that performs dynamics compression\n   * on an audio input source. This is a very commonly used technique in music\n   * and sound production. Compression creates an overall louder, richer,\n   * and fuller sound by lowering the volume of louds and raising that of softs.\n   * Compression can be used to avoid clipping (sound distortion due to\n   * peaks in volume) and is especially useful when many sounds are played\n   * at once. Compression can be used on indivudal sound sources in addition\n   * to the main output.\n   *\n   * This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n   * Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n   * <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n   * <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n   *\n   * @class p5.Compressor\n   * @constructor\n   * @extends p5.Effect\n   *\n   *\n   */\n\n\n  var Compressor = function (_Effect) {\n    compressor_inherits(Compressor, _Effect);\n\n    function Compressor() {\n      var _this;\n\n      compressor_classCallCheck(this, Compressor);\n      _this = compressor_possibleConstructorReturn(this, compressor_getPrototypeOf(Compressor).call(this));\n      /**\n       *\n       * The p5.Compressor is built with a <a href=\"https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface\"\n       *   target=\"_blank\" title=\"W3 spec for Dynamics Compressor Node\">Web Audio Dynamics Compressor Node\n       *   </a>\n       * @property {AudioNode} compressor\n       */\n\n      _this.compressor = _this.ac.createDynamicsCompressor();\n\n      _this.input.connect(_this.compressor);\n\n      _this.compressor.connect(_this.wet);\n\n      return _this;\n    }\n    /**\n     * Performs the same function as .connect, but also accepts\n     * optional parameters to set compressor's audioParams\n     * @method process\n     * @for p5.Compressor\n     *\n     * @param {Object} src         Sound source to be connected\n     *\n     * @param {Number} [attack]     The amount of time (in seconds) to reduce the gain by 10dB,\n     *                            default = .003, range 0 - 1\n     * @param {Number} [knee]       A decibel value representing the range above the\n     *                            threshold where the curve smoothly transitions to the \"ratio\" portion.\n     *                            default = 30, range 0 - 40\n     * @param {Number} [ratio]      The amount of dB change in input for a 1 dB change in output\n     *                            default = 12, range 1 - 20\n     * @param {Number} [threshold]  The decibel value above which the compression will start taking effect\n     *                            default = -24, range -100 - 0\n     * @param {Number} [release]    The amount of time (in seconds) to increase the gain by 10dB\n     *                            default = .25, range 0 - 1\n     */\n\n\n    compressor_createClass(Compressor, [{\n      key: \"process\",\n      value: function process(src, attack, knee, ratio, threshold, release) {\n        src.connect(this.input);\n        this.set(attack, knee, ratio, threshold, release);\n      }\n      /**\n       * Set the paramters of a compressor.\n       * @method  set\n       * @for p5.Compressor\n       * @param {Number} attack     The amount of time (in seconds) to reduce the gain by 10dB,\n       *                            default = .003, range 0 - 1\n       * @param {Number} knee       A decibel value representing the range above the\n       *                            threshold where the curve smoothly transitions to the \"ratio\" portion.\n       *                            default = 30, range 0 - 40\n       * @param {Number} ratio      The amount of dB change in input for a 1 dB change in output\n       *                            default = 12, range 1 - 20\n       * @param {Number} threshold  The decibel value above which the compression will start taking effect\n       *                            default = -24, range -100 - 0\n       * @param {Number} release    The amount of time (in seconds) to increase the gain by 10dB\n       *                            default = .25, range 0 - 1\n       */\n\n    }, {\n      key: \"set\",\n      value: function set(attack, knee, ratio, threshold, release) {\n        if (typeof attack !== 'undefined') {\n          this.attack(attack);\n        }\n\n        if (typeof knee !== 'undefined') {\n          this.knee(knee);\n        }\n\n        if (typeof ratio !== 'undefined') {\n          this.ratio(ratio);\n        }\n\n        if (typeof threshold !== 'undefined') {\n          this.threshold(threshold);\n        }\n\n        if (typeof release !== 'undefined') {\n          this.release(release);\n        }\n      }\n      /**\n       * Get current attack or set value w/ time ramp\n       *\n       *\n       * @method attack\n       * @for p5.Compressor\n       * @param {Number} [attack] Attack is the amount of time (in seconds) to reduce the gain by 10dB,\n       *                          default = .003, range 0 - 1\n       * @param {Number} [time]  Assign time value to schedule the change in value\n       */\n\n    }, {\n      key: \"attack\",\n      value: function attack(_attack, time) {\n        var t = time || 0;\n\n        if (typeof _attack === 'number') {\n          this.compressor.attack.value = _attack;\n          this.compressor.attack.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.compressor.attack.linearRampToValueAtTime(_attack, this.ac.currentTime + 0.02 + t);\n        } else if (typeof _attack !== 'undefined') {\n          _attack.connect(this.compressor.attack);\n        }\n\n        return this.compressor.attack.value;\n      }\n      /**\n       * Get current knee or set value w/ time ramp\n       *\n       * @method knee\n       * @for p5.Compressor\n       * @param {Number} [knee] A decibel value representing the range above the\n       *                        threshold where the curve smoothly transitions to the \"ratio\" portion.\n       *                        default = 30, range 0 - 40\n       * @param {Number} [time]  Assign time value to schedule the change in value\n       */\n\n    }, {\n      key: \"knee\",\n      value: function knee(_knee, time) {\n        var t = time || 0;\n\n        if (typeof _knee === 'number') {\n          this.compressor.knee.value = _knee;\n          this.compressor.knee.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.compressor.knee.linearRampToValueAtTime(_knee, this.ac.currentTime + 0.02 + t);\n        } else if (typeof _knee !== 'undefined') {\n          _knee.connect(this.compressor.knee);\n        }\n\n        return this.compressor.knee.value;\n      }\n      /**\n       * Get current ratio or set value w/ time ramp\n       * @method ratio\n       * @for p5.Compressor\n       * @param {Number} [ratio]      The amount of dB change in input for a 1 dB change in output\n       *                            default = 12, range 1 - 20\n       * @param {Number} [time]  Assign time value to schedule the change in value\n       */\n\n    }, {\n      key: \"ratio\",\n      value: function ratio(_ratio, time) {\n        var t = time || 0;\n\n        if (typeof _ratio === 'number') {\n          this.compressor.ratio.value = _ratio;\n          this.compressor.ratio.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.compressor.ratio.linearRampToValueAtTime(_ratio, this.ac.currentTime + 0.02 + t);\n        } else if (typeof _ratio !== 'undefined') {\n          _ratio.connect(this.compressor.ratio);\n        }\n\n        return this.compressor.ratio.value;\n      }\n      /**\n       * Get current threshold or set value w/ time ramp\n       * @method threshold\n       * @for p5.Compressor\n       * @param {Number} threshold  The decibel value above which the compression will start taking effect\n       *                            default = -24, range -100 - 0\n       * @param {Number} [time]  Assign time value to schedule the change in value\n       */\n\n    }, {\n      key: \"threshold\",\n      value: function threshold(_threshold, time) {\n        var t = time || 0;\n\n        if (typeof _threshold === 'number') {\n          this.compressor.threshold.value = _threshold;\n          this.compressor.threshold.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.compressor.threshold.linearRampToValueAtTime(_threshold, this.ac.currentTime + 0.02 + t);\n        } else if (typeof _threshold !== 'undefined') {\n          _threshold.connect(this.compressor.threshold);\n        }\n\n        return this.compressor.threshold.value;\n      }\n      /**\n       * Get current release or set value w/ time ramp\n       * @method release\n       * @for p5.Compressor\n       * @param {Number} release    The amount of time (in seconds) to increase the gain by 10dB\n       *                            default = .25, range 0 - 1\n       *\n       * @param {Number} [time]  Assign time value to schedule the change in value\n       */\n\n    }, {\n      key: \"release\",\n      value: function release(_release, time) {\n        var t = time || 0;\n\n        if (typeof _release === 'number') {\n          this.compressor.release.value = _release;\n          this.compressor.release.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n          this.compressor.release.linearRampToValueAtTime(_release, this.ac.currentTime + 0.02 + t);\n        } else if (typeof number !== 'undefined') {\n          _release.connect(this.compressor.release);\n        }\n\n        return this.compressor.release.value;\n      }\n      /**\n       * Return the current reduction value\n       *\n       * @method reduction\n       * @for p5.Compressor\n       * @return {Number} Value of the amount of gain reduction that is applied to the signal\n       */\n\n    }, {\n      key: \"reduction\",\n      value: function reduction() {\n        return this.compressor.reduction.value;\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        compressor_get(compressor_getPrototypeOf(Compressor.prototype), \"dispose\", this).call(this);\n\n        if (this.compressor) {\n          this.compressor.disconnect();\n          delete this.compressor;\n        }\n      }\n    }]);\n    return Compressor;\n  }(effect);\n\n  var compressor = Compressor;\n\n  function peakDetect_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function peakDetect_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function peakDetect_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) peakDetect_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) peakDetect_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  /**\n   *  <p>PeakDetect works in conjunction with p5.FFT to\n   *  look for onsets in some or all of the frequency spectrum.\n   *  </p>\n   *  <p>\n   *  To use p5.PeakDetect, call <code>update</code> in the draw loop\n   *  and pass in a p5.FFT object.\n   *  </p>\n   *  <p>\n   *  You can listen for a specific part of the frequency spectrum by\n   *  setting the range between <code>freq1</code> and <code>freq2</code>.\n   *  </p>\n   *\n   *  <p><code>threshold</code> is the threshold for detecting a peak,\n   *  scaled between 0 and 1. It is logarithmic, so 0.1 is half as loud\n   *  as 1.0.</p>\n   *\n   *  <p>\n   *  The update method is meant to be run in the draw loop, and\n   *  <b>frames</b> determines how many loops must pass before\n   *  another peak can be detected.\n   *  For example, if the frameRate() = 60, you could detect the beat of a\n   *  120 beat-per-minute song with this equation:\n   *  <code> framesPerPeak = 60 / (estimatedBPM / 60 );</code>\n   *  </p>\n   *\n   *  <p>\n   *  Based on example contribtued by @b2renger, and a simple beat detection\n   *  explanation by <a\n   *  href=\"http://www.airtightinteractive.com/2013/10/making-audio-reactive-visuals/\"\n   *  target=\"_blank\">Felix Turner</a>.\n   *  </p>\n   *\n   *  @class  p5.PeakDetect\n   *  @constructor\n   *  @param {Number} [freq1]     lowFrequency - defaults to 20Hz\n   *  @param {Number} [freq2]     highFrequency - defaults to 20000 Hz\n   *  @param {Number} [threshold] Threshold for detecting a beat between 0 and 1\n   *                            scaled logarithmically where 0.1 is 1/2 the loudness\n   *                            of 1.0. Defaults to 0.35.\n   *  @param {Number} [framesPerPeak]     Defaults to 20.\n   *  @example\n   *  <div><code>\n   *\n   *  var cnv, soundFile, fft, peakDetect;\n   *  var ellipseWidth = 10;\n   *\n   *  function preload() {\n   *    soundFile = loadSound('assets/beat.mp3');\n   *  }\n   *\n   *  function setup() {\n   *    background(0);\n   *    noStroke();\n   *    fill(255);\n   *    textAlign(CENTER);\n   *\n   *    // p5.PeakDetect requires a p5.FFT\n   *    fft = new p5.FFT();\n   *    peakDetect = new p5.PeakDetect();\n   *  }\n   *\n   *  function draw() {\n   *    background(0);\n   *    text('click to play/pause', width/2, height/2);\n   *\n   *    // peakDetect accepts an fft post-analysis\n   *    fft.analyze();\n   *    peakDetect.update(fft);\n   *\n   *    if ( peakDetect.isDetected ) {\n   *      ellipseWidth = 50;\n   *    } else {\n   *      ellipseWidth *= 0.95;\n   *    }\n   *\n   *    ellipse(width/2, height/2, ellipseWidth, ellipseWidth);\n   *  }\n   *\n   *  // toggle play/stop when canvas is clicked\n   *  function mouseClicked() {\n   *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n   *      if (soundFile.isPlaying() ) {\n   *        soundFile.stop();\n   *      } else {\n   *        soundFile.play();\n   *      }\n   *    }\n   *  }\n   *  </code></div>\n   */\n\n\n  var PeakDetect = function () {\n    function PeakDetect(freq1, freq2, threshold, _framesPerPeak) {\n      peakDetect_classCallCheck(this, PeakDetect);\n      this.framesPerPeak = _framesPerPeak || 20;\n      this.framesSinceLastPeak = 0;\n      this.decayRate = 0.95;\n      this.threshold = threshold || 0.35;\n      this.cutoff = 0;\n      this.cutoffMult = 1.5;\n      this.energy = 0;\n      this.penergy = 0;\n      this.currentValue = 0;\n      /**\n       *  isDetected is set to true when a peak is detected.\n       *\n       *  @attribute isDetected {Boolean}\n       *  @default  false\n       */\n\n      this.isDetected = false;\n      this.f1 = freq1 || 40;\n      this.f2 = freq2 || 20000;\n\n      this._onPeak = function () {};\n    }\n    /**\n     *  The update method is run in the draw loop.\n     *\n     *  Accepts an FFT object. You must call .analyze()\n     *  on the FFT object prior to updating the peakDetect\n     *  because it relies on a completed FFT analysis.\n     *\n     *  @method  update\n     *  @param  {p5.FFT} fftObject A p5.FFT object\n     */\n\n\n    peakDetect_createClass(PeakDetect, [{\n      key: \"update\",\n      value: function update(fftObject) {\n        var nrg = this.energy = fftObject.getEnergy(this.f1, this.f2) / 255;\n\n        if (nrg > this.cutoff && nrg > this.threshold && nrg - this.penergy > 0) {\n          this._onPeak();\n\n          this.isDetected = true;\n          this.cutoff = nrg * this.cutoffMult;\n          this.framesSinceLastPeak = 0;\n        } else {\n          this.isDetected = false;\n\n          if (this.framesSinceLastPeak <= this.framesPerPeak) {\n            this.framesSinceLastPeak++;\n          } else {\n            this.cutoff *= this.decayRate;\n            this.cutoff = Math.max(this.cutoff, this.threshold);\n          }\n        }\n\n        this.currentValue = nrg;\n        this.penergy = nrg;\n      }\n      /**\n       *  onPeak accepts two arguments: a function to call when\n       *  a peak is detected. The value of the peak,\n       *  between 0.0 and 1.0, is passed to the callback.\n       *\n       *  @method  onPeak\n       *  @param  {Function} callback Name of a function that will\n       *                              be called when a peak is\n       *                              detected.\n       *  @param  {Object}   [val]    Optional value to pass\n       *                              into the function when\n       *                              a peak is detected.\n       *  @example\n       *  <div><code>\n       *  var cnv, soundFile, fft, peakDetect;\n       *  var ellipseWidth = 0;\n       *\n       *  function preload() {\n       *    soundFile = loadSound('assets/beat.mp3');\n       *  }\n       *\n       *  function setup() {\n       *    cnv = createCanvas(100,100);\n       *    textAlign(CENTER);\n       *\n       *    fft = new p5.FFT();\n       *    peakDetect = new p5.PeakDetect();\n       *\n       *    setupSound();\n       *\n       *    // when a beat is detected, call triggerBeat()\n       *    peakDetect.onPeak(triggerBeat);\n       *  }\n       *\n       *  function draw() {\n       *    background(0);\n       *    fill(255);\n       *    text('click to play', width/2, height/2);\n       *\n       *    fft.analyze();\n       *    peakDetect.update(fft);\n       *\n       *    ellipseWidth *= 0.95;\n       *    ellipse(width/2, height/2, ellipseWidth, ellipseWidth);\n       *  }\n       *\n       *  // this function is called by peakDetect.onPeak\n       *  function triggerBeat() {\n       *    ellipseWidth = 50;\n       *  }\n       *\n       *  // mouseclick starts/stops sound\n       *  function setupSound() {\n       *    cnv.mouseClicked( function() {\n       *      if (soundFile.isPlaying() ) {\n       *        soundFile.stop();\n       *      } else {\n       *        soundFile.play();\n       *      }\n       *    });\n       *  }\n       *  </code></div>\n       */\n\n    }, {\n      key: \"onPeak\",\n      value: function onPeak(callback, val) {\n        var self = this;\n\n        self._onPeak = function () {\n          callback(self.energy, val);\n        };\n      }\n    }]);\n    return PeakDetect;\n  }();\n\n  var peakDetect = PeakDetect;\n\n  function soundRecorder_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function soundRecorder_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function soundRecorder_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) soundRecorder_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) soundRecorder_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  var soundRecorder_ac = main.audiocontext;\n  /**\n   *  <p>Record sounds for playback and/or to save as a .wav file.\n   *  The p5.SoundRecorder records all sound output from your sketch,\n   *  or can be assigned a specific source with setInput().</p>\n   *  <p>The record() method accepts a p5.SoundFile as a parameter.\n   *  When playback is stopped (either after the given amount of time,\n   *  or with the stop() method), the p5.SoundRecorder will send its\n   *  recording to that p5.SoundFile for playback.</p>\n   *\n   *  @class p5.SoundRecorder\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  let mic, recorder, soundFile;\n   *  let state = 0;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(canvasPressed);\n   *    background(220);\n   *    textAlign(CENTER, CENTER);\n   *\n   *    // create an audio in\n   *    mic = new p5.AudioIn();\n   *\n   *    // prompts user to enable their browser mic\n   *    mic.start();\n   *\n   *    // create a sound recorder\n   *    recorder = new p5.SoundRecorder();\n   *\n   *    // connect the mic to the recorder\n   *    recorder.setInput(mic);\n   *\n   *    // this sound file will be used to\n   *    // playback & save the recording\n   *    soundFile = new p5.SoundFile();\n   *\n   *    text('tap to record', width/2, height/2);\n   *  }\n   *\n   *  function canvasPressed() {\n   *    // ensure audio is enabled\n   *    userStartAudio();\n   *\n   *    // make sure user enabled the mic\n   *    if (state === 0 && mic.enabled) {\n   *\n   *      // record to our p5.SoundFile\n   *      recorder.record(soundFile);\n   *\n   *      background(255,0,0);\n   *      text('Recording!', width/2, height/2);\n   *      state++;\n   *    }\n   *    else if (state === 1) {\n   *      background(0,255,0);\n   *\n   *      // stop recorder and\n   *      // send result to soundFile\n   *      recorder.stop();\n   *\n   *      text('Done! Tap to play and download', width/2, height/2, width - 20);\n   *      state++;\n   *    }\n   *\n   *    else if (state === 2) {\n   *      soundFile.play(); // play the result!\n   *      save(soundFile, 'mySound.wav');\n   *      state++;\n   *    }\n   *  }\n   *  </div></code>\n   */\n\n  var soundRecorder_SoundRecorder = function () {\n    function SoundRecorder() {\n      soundRecorder_classCallCheck(this, SoundRecorder);\n      this.input = soundRecorder_ac.createGain();\n      this.output = soundRecorder_ac.createGain();\n      this._inputChannels = 2;\n      this._outputChannels = 2;\n      var workletBufferSize = safeBufferSize(1024);\n      this._workletNode = new AudioWorkletNode(soundRecorder_ac, processorNames_default.a.recorderProcessor, {\n        outputChannelCount: [this._outputChannels],\n        processorOptions: {\n          numInputChannels: this._inputChannels,\n          bufferSize: workletBufferSize\n        }\n      });\n\n      this._workletNode.port.onmessage = function (event) {\n        if (event.data.name === 'buffers') {\n          var buffers = [new Float32Array(event.data.leftBuffer), new Float32Array(event.data.rightBuffer)];\n\n          this._callback(buffers);\n        }\n      }.bind(this);\n      /**\n       *  callback invoked when the recording is over\n       *  @private\n       *  @type Function(Float32Array)\n       */\n\n\n      this._callback = function () {};\n\n      this._workletNode.connect(p5.soundOut._silentNode);\n\n      this.setInput();\n      main.soundArray.push(this);\n    }\n    /**\n     *  Connect a specific device to the p5.SoundRecorder.\n     *  If no parameter is given, p5.SoundRecorer will record\n     *  all audible p5.sound from your sketch.\n     *\n     *  @method  setInput\n     *  @for p5.SoundRecorder\n     *  @param {Object} [unit] p5.sound object or a web audio unit\n     *                         that outputs sound\n     */\n\n\n    soundRecorder_createClass(SoundRecorder, [{\n      key: \"setInput\",\n      value: function setInput(unit) {\n        this.input.disconnect();\n        this.input = null;\n        this.input = soundRecorder_ac.createGain();\n        this.input.connect(this._workletNode);\n        this.input.connect(this.output);\n\n        if (unit) {\n          unit.connect(this.input);\n        } else {\n          p5.soundOut.output.connect(this.input);\n        }\n      }\n      /**\n       *  Start recording. To access the recording, provide\n       *  a p5.SoundFile as the first parameter. The p5.SoundRecorder\n       *  will send its recording to that p5.SoundFile for playback once\n       *  recording is complete. Optional parameters include duration\n       *  (in seconds) of the recording, and a callback function that\n       *  will be called once the complete recording has been\n       *  transfered to the p5.SoundFile.\n       *\n       *  @method  record\n       *  @for p5.SoundRecorder\n       *  @param  {p5.SoundFile}   soundFile    p5.SoundFile\n       *  @param  {Number}   [duration] Time (in seconds)\n       *  @param  {Function} [callback] The name of a function that will be\n       *                                called once the recording completes\n       */\n\n    }, {\n      key: \"record\",\n      value: function record(sFile, duration, callback) {\n        this._workletNode.port.postMessage({\n          name: 'start',\n          duration: duration\n        });\n\n        if (sFile && callback) {\n          this._callback = function (buffer) {\n            sFile.setBuffer(buffer);\n            callback();\n          };\n        } else if (sFile) {\n          this._callback = function (buffer) {\n            sFile.setBuffer(buffer);\n          };\n        }\n      }\n      /**\n       *  Stop the recording. Once the recording is stopped,\n       *  the results will be sent to the p5.SoundFile that\n       *  was given on .record(), and if a callback function\n       *  was provided on record, that function will be called.\n       *\n       *  @method  stop\n       *  @for p5.SoundRecorder\n       */\n\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        this._workletNode.port.postMessage({\n          name: 'stop'\n        });\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        var index = main.soundArray.indexOf(this);\n        main.soundArray.splice(index, 1);\n\n        this._callback = function () {};\n\n        if (this.input) {\n          this.input.disconnect();\n        }\n\n        this.input = null;\n        this._workletNode = null;\n      }\n    }]);\n    return SoundRecorder;\n  }();\n\n  var soundRecorder = soundRecorder_SoundRecorder;\n\n  function distortion_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      distortion_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      distortion_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return distortion_typeof(obj);\n  }\n\n  function distortion_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function distortion_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function distortion_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) distortion_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) distortion_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function distortion_possibleConstructorReturn(self, call) {\n    if (call && (distortion_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return distortion_assertThisInitialized(self);\n  }\n\n  function distortion_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function distortion_get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      distortion_get = Reflect.get;\n    } else {\n      distortion_get = function _get(target, property, receiver) {\n        var base = distortion_superPropBase(target, property);\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return distortion_get(target, property, receiver || target);\n  }\n\n  function distortion_superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = distortion_getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function distortion_getPrototypeOf(o) {\n    distortion_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return distortion_getPrototypeOf(o);\n  }\n\n  function distortion_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) distortion_setPrototypeOf(subClass, superClass);\n  }\n\n  function distortion_setPrototypeOf(o, p) {\n    distortion_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return distortion_setPrototypeOf(o, p);\n  }\n\n  function makeDistortionCurve(amount) {\n    var k = typeof amount === 'number' ? amount : 50;\n    var numSamples = 44100;\n    var curve = new Float32Array(numSamples);\n    var deg = Math.PI / 180;\n    var i = 0;\n    var x;\n\n    for (; i < numSamples; ++i) {\n      x = i * 2 / numSamples - 1;\n      curve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x));\n    }\n\n    return curve;\n  }\n  /**\n   * A Distortion effect created with a Waveshaper Node,\n   * with an approach adapted from\n   * [Kevin Ennis](http://stackoverflow.com/questions/22312841/waveshaper-node-in-webaudio-how-to-emulate-distortion)\n   *\n   * This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n   * Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n   * <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n   * <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n   *\n   * @class p5.Distortion\n   * @extends p5.Effect\n   * @constructor\n   * @param {Number} [amount=0.25] Unbounded distortion amount.\n   *                                Normal values range from 0-1.\n   * @param {String} [oversample='none'] 'none', '2x', or '4x'.\n   *\n   */\n\n\n  var Distortion = function (_Effect) {\n    distortion_inherits(Distortion, _Effect);\n\n    function Distortion(amount, oversample) {\n      var _this;\n\n      distortion_classCallCheck(this, Distortion);\n      _this = distortion_possibleConstructorReturn(this, distortion_getPrototypeOf(Distortion).call(this));\n\n      if (typeof amount === 'undefined') {\n        amount = 0.25;\n      }\n\n      if (typeof amount !== 'number') {\n        throw new Error('amount must be a number');\n      }\n\n      if (typeof oversample === 'undefined') {\n        oversample = '2x';\n      }\n\n      if (typeof oversample !== 'string') {\n        throw new Error('oversample must be a String');\n      }\n\n      var curveAmount = p5.prototype.map(amount, 0.0, 1.0, 0, 2000);\n      /**\n       *  The p5.Distortion is built with a\n       *  <a href=\"http://www.w3.org/TR/webaudio/#WaveShaperNode\">\n       *  Web Audio WaveShaper Node</a>.\n       *\n       *  @property {AudioNode} WaveShaperNode\n       */\n\n      _this.waveShaperNode = _this.ac.createWaveShaper();\n      _this.amount = curveAmount;\n      _this.waveShaperNode.curve = makeDistortionCurve(curveAmount);\n      _this.waveShaperNode.oversample = oversample;\n\n      _this.input.connect(_this.waveShaperNode);\n\n      _this.waveShaperNode.connect(_this.wet);\n\n      return _this;\n    }\n    /**\n     * Process a sound source, optionally specify amount and oversample values.\n     *\n     * @method process\n     * @for p5.Distortion\n     * @param {Number} [amount=0.25] Unbounded distortion amount.\n     *                                Normal values range from 0-1.\n     * @param {String} [oversample='none'] 'none', '2x', or '4x'.\n     */\n\n\n    distortion_createClass(Distortion, [{\n      key: \"process\",\n      value: function process(src, amount, oversample) {\n        src.connect(this.input);\n        this.set(amount, oversample);\n      }\n      /**\n       * Set the amount and oversample of the waveshaper distortion.\n       *\n       * @method set\n       * @for p5.Distortion\n       * @param {Number} [amount=0.25] Unbounded distortion amount.\n       *                                Normal values range from 0-1.\n       * @param {String} [oversample='none'] 'none', '2x', or '4x'.\n       */\n\n    }, {\n      key: \"set\",\n      value: function set(amount, oversample) {\n        if (amount) {\n          var curveAmount = p5.prototype.map(amount, 0.0, 1.0, 0, 2000);\n          this.amount = curveAmount;\n          this.waveShaperNode.curve = makeDistortionCurve(curveAmount);\n        }\n\n        if (oversample) {\n          this.waveShaperNode.oversample = oversample;\n        }\n      }\n      /**\n       *  Return the distortion amount, typically between 0-1.\n       *\n       *  @method  getAmount\n       *  @for p5.Distortion\n       *  @return {Number} Unbounded distortion amount.\n       *                   Normal values range from 0-1.\n       */\n\n    }, {\n      key: \"getAmount\",\n      value: function getAmount() {\n        return this.amount;\n      }\n      /**\n       *  Return the oversampling.\n       *\n       *  @method getOversample\n       *  @for p5.Distortion\n       *  @return {String} Oversample can either be 'none', '2x', or '4x'.\n       */\n\n    }, {\n      key: \"getOversample\",\n      value: function getOversample() {\n        return this.waveShaperNode.oversample;\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        distortion_get(distortion_getPrototypeOf(Distortion.prototype), \"dispose\", this).call(this);\n\n        if (this.waveShaperNode) {\n          this.waveShaperNode.disconnect();\n          this.waveShaperNode = null;\n        }\n      }\n    }]);\n    return Distortion;\n  }(effect);\n\n  var distortion = Distortion;\n\n  function gain_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function gain_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function gain_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) gain_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) gain_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  /**\n   *  A gain node is usefull to set the relative volume of sound.\n   *  It's typically used to build mixers.\n   *\n   *  @class p5.Gain\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *\n   *  // load two soundfile and crossfade beetween them\n   *  let sound1,sound2;\n   *  let sound1Gain, sound2Gain, mixGain;\n   *  function preload(){\n   *    soundFormats('ogg', 'mp3');\n   *    sound1 = loadSound('assets/Damscray_-_Dancing_Tiger_01');\n   *    sound2 = loadSound('assets/beat');\n   *  }\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(startSound);\n   *    // create a 'mix' gain bus to which we will connect both soundfiles\n   *    mixGain = new p5.Gain();\n   *    mixGain.connect();\n   *    sound1.disconnect(); // diconnect from p5 output\n   *    sound1Gain = new p5.Gain(); // setup a gain node\n   *    sound1Gain.setInput(sound1); // connect the first sound to its input\n   *    sound1Gain.connect(mixGain); // connect its output to the final mix bus\n   *    sound2.disconnect();\n   *    sound2Gain = new p5.Gain();\n   *    sound2Gain.setInput(sound2);\n   *    sound2Gain.connect(mixGain);\n   *  }\n   *  function startSound() {\n   *    sound1.loop();\n   *    sound2.loop();\n   *    loop();\n   *  }\n   *  function mouseReleased() {\n   *    sound1.stop();\n   *    sound2.stop();\n   *  }\n   *  function draw(){\n   *    background(220);\n   *    textAlign(CENTER);\n   *    textSize(11);\n   *    fill(0);\n   *    if (!sound1.isPlaying()) {\n   *      text('tap and drag to play', width/2, height/2);\n   *      return;\n   *    }\n   *    // map the horizontal position of the mouse to values useable for volume    *  control of sound1\n   *    var sound1Volume = constrain(map(mouseX,width,0,0,1), 0, 1);\n   *    var sound2Volume = 1-sound1Volume;\n   *    sound1Gain.amp(sound1Volume);\n   *    sound2Gain.amp(sound2Volume);\n   *    // map the vertical position of the mouse to values useable for 'output    *  volume control'\n   *    var outputVolume = constrain(map(mouseY,height,0,0,1), 0, 1);\n   *    mixGain.amp(outputVolume);\n   *    text('output', width/2, height - outputVolume * height * 0.9)\n   *    fill(255, 0, 255);\n   *    textAlign(LEFT);\n   *    text('sound1', 5, height - sound1Volume * height * 0.9);\n   *    textAlign(RIGHT);\n   *    text('sound2', width - 5, height - sound2Volume * height * 0.9);\n   *  }\n   *</code></div>\n   */\n\n\n  var gain_Gain = function () {\n    function Gain() {\n      gain_classCallCheck(this, Gain);\n      this.ac = main.audiocontext;\n      this.input = this.ac.createGain();\n      this.output = this.ac.createGain();\n      this.input.gain.value = 0.5;\n      this.input.connect(this.output);\n      main.soundArray.push(this);\n    }\n    /**\n     *  Connect a source to the gain node.\n     *\n     *  @method  setInput\n     *  @for p5.Gain\n     *  @param  {Object} src     p5.sound / Web Audio object with a sound\n     *                           output.\n     */\n\n\n    gain_createClass(Gain, [{\n      key: \"setInput\",\n      value: function setInput(src) {\n        src.connect(this.input);\n      }\n      /**\n       *  Send output to a p5.sound or web audio object\n       *\n       *  @method  connect\n       *  @for p5.Gain\n       *  @param  {Object} unit\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect(unit) {\n        var u = unit || p5.soundOut.input;\n        this.output.connect(u.input ? u.input : u);\n      }\n      /**\n       *  Disconnect all output.\n       *\n       *  @method disconnect\n       *  @for p5.Gain\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.output) {\n          this.output.disconnect();\n        }\n      }\n      /**\n       *  Set the output level of the gain node.\n       *\n       *  @method  amp\n       *  @for p5.Gain\n       *  @param  {Number} volume amplitude between 0 and 1.0\n       *  @param  {Number} [rampTime] create a fade that lasts rampTime\n       *  @param  {Number} [timeFromNow] schedule this event to happen\n       *                                seconds from now\n       */\n\n    }, {\n      key: \"amp\",\n      value: function amp(vol) {\n        var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n        var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var now = main.audiocontext.currentTime;\n        var currentVol = this.output.gain.value;\n        this.output.gain.cancelScheduledValues(now);\n        this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n        this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        var index = main.soundArray.indexOf(this);\n        main.soundArray.splice(index, 1);\n\n        if (this.output) {\n          this.output.disconnect();\n          delete this.output;\n        }\n\n        if (this.input) {\n          this.input.disconnect();\n          delete this.input;\n        }\n      }\n    }]);\n    return Gain;\n  }();\n\n  var gain = gain_Gain;\n\n  function audioVoice_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function audioVoice_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function audioVoice_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) audioVoice_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) audioVoice_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  /**\n   * Base class for monophonic synthesizers. Any extensions of this class\n   * should follow the API and implement the methods below in order to\n   * remain compatible with p5.PolySynth();\n   *\n   * @class p5.AudioVoice\n   * @constructor\n   */\n\n\n  var audioVoice_AudioVoice = function () {\n    function AudioVoice() {\n      audioVoice_classCallCheck(this, AudioVoice);\n      this.ac = main.audiocontext;\n      this.output = this.ac.createGain();\n      this.connect();\n      main.soundArray.push(this);\n    }\n\n    audioVoice_createClass(AudioVoice, [{\n      key: \"play\",\n      value: function play(note, velocity, secondsFromNow, sustime) {}\n    }, {\n      key: \"triggerAttack\",\n      value: function triggerAttack(note, velocity, secondsFromNow) {}\n    }, {\n      key: \"triggerRelease\",\n      value: function triggerRelease(secondsFromNow) {}\n    }, {\n      key: \"amp\",\n      value: function amp(vol, rampTime) {}\n      /**\n       * Connect to p5 objects or Web Audio Nodes\n       * @method  connect\n       * @for p5.AudioVoice\n       * @param {Object} unit\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect(unit) {\n        var u = unit || main.input;\n        this.output.connect(u.input ? u.input : u);\n      }\n      /**\n       * Disconnect from soundOut\n       * @method  disconnect\n       * @for p5.AudioVoice\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        this.output.disconnect();\n      }\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        if (this.output) {\n          this.output.disconnect();\n          delete this.output;\n        }\n      }\n    }]);\n    return AudioVoice;\n  }();\n\n  var audioVoice_0 = audioVoice_AudioVoice;\n\n  function monosynth_typeof(obj) {\n    if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n      monosynth_typeof = function _typeof(obj) {\n        return typeof obj;\n      };\n    } else {\n      monosynth_typeof = function _typeof(obj) {\n        return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n      };\n    }\n\n    return monosynth_typeof(obj);\n  }\n\n  function monosynth_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function monosynth_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function monosynth_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) monosynth_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) monosynth_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n\n  function monosynth_possibleConstructorReturn(self, call) {\n    if (call && (monosynth_typeof(call) === \"object\" || typeof call === \"function\")) {\n      return call;\n    }\n\n    return monosynth_assertThisInitialized(self);\n  }\n\n  function monosynth_assertThisInitialized(self) {\n    if (self === void 0) {\n      throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n    }\n\n    return self;\n  }\n\n  function monosynth_get(target, property, receiver) {\n    if (typeof Reflect !== \"undefined\" && Reflect.get) {\n      monosynth_get = Reflect.get;\n    } else {\n      monosynth_get = function _get(target, property, receiver) {\n        var base = monosynth_superPropBase(target, property);\n        if (!base) return;\n        var desc = Object.getOwnPropertyDescriptor(base, property);\n\n        if (desc.get) {\n          return desc.get.call(receiver);\n        }\n\n        return desc.value;\n      };\n    }\n\n    return monosynth_get(target, property, receiver || target);\n  }\n\n  function monosynth_superPropBase(object, property) {\n    while (!Object.prototype.hasOwnProperty.call(object, property)) {\n      object = monosynth_getPrototypeOf(object);\n      if (object === null) break;\n    }\n\n    return object;\n  }\n\n  function monosynth_getPrototypeOf(o) {\n    monosynth_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n      return o.__proto__ || Object.getPrototypeOf(o);\n    };\n    return monosynth_getPrototypeOf(o);\n  }\n\n  function monosynth_inherits(subClass, superClass) {\n    if (typeof superClass !== \"function\" && superClass !== null) {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    subClass.prototype = Object.create(superClass && superClass.prototype, {\n      constructor: {\n        value: subClass,\n        writable: true,\n        configurable: true\n      }\n    });\n    if (superClass) monosynth_setPrototypeOf(subClass, superClass);\n  }\n\n  function monosynth_setPrototypeOf(o, p) {\n    monosynth_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n      o.__proto__ = p;\n      return o;\n    };\n\n    return monosynth_setPrototypeOf(o, p);\n  }\n\n  var DEFAULT_SUSTAIN = 0.15;\n  /**\n   *  A MonoSynth is used as a single voice for sound synthesis.\n   *  This is a class to be used in conjunction with the PolySynth\n   *  class. Custom synthetisers should be built inheriting from\n   *  this class.\n   *\n   *  @class p5.MonoSynth\n   *  @constructor\n   *  @example\n   *  <div><code>\n   *  let monoSynth;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playSynth);\n   *    background(220);\n   *    textAlign(CENTER);\n   *    text('tap to play', width/2, height/2);\n   *\n   *    monoSynth = new p5.MonoSynth();\n   *  }\n   *\n   *  function playSynth() {\n   *    userStartAudio();\n   *\n   *    let note = random(['Fb4', 'G4']);\n   *    // note velocity (volume, from 0 to 1)\n   *    let velocity = random();\n   *    // time from now (in seconds)\n   *    let time = 0;\n   *    // note duration (in seconds)\n   *    let dur = 1/6;\n   *\n   *    monoSynth.play(note, velocity, time, dur);\n   *  }\n   *  </code></div>\n   **/\n\n  var monosynth_MonoSynth = function (_AudioVoice) {\n    monosynth_inherits(MonoSynth, _AudioVoice);\n\n    function MonoSynth() {\n      var _this;\n\n      monosynth_classCallCheck(this, MonoSynth);\n      _this = monosynth_possibleConstructorReturn(this, monosynth_getPrototypeOf(MonoSynth).call(this));\n      _this.oscillator = new oscillator();\n      _this.env = new envelope();\n\n      _this.env.setRange(1, 0);\n\n      _this.env.setExp(true);\n\n      _this.setADSR(0.02, 0.25, 0.05, 0.35);\n\n      _this.oscillator.disconnect();\n\n      _this.oscillator.connect(_this.output);\n\n      _this.env.disconnect();\n\n      _this.env.setInput(_this.output.gain);\n\n      _this.oscillator.output.gain.value = 1.0;\n\n      _this.oscillator.start();\n\n      _this.connect();\n\n      main.soundArray.push(monosynth_assertThisInitialized(_this));\n      /**\n       * Getters and Setters\n       * @property {Number} attack\n       * @for p5.MonoSynth\n       */\n\n      /**\n       * @property {Number} decay\n       * @for p5.MonoSynth\n       */\n\n      /**\n       * @property {Number} sustain\n       * @for p5.MonoSynth\n       */\n\n      /**\n       * @property {Number} release\n       * @for p5.MonoSynth\n       */\n\n      Object.defineProperties(monosynth_assertThisInitialized(_this), {\n        attack: {\n          get: function get() {\n            return this.env.aTime;\n          },\n          set: function set(attack) {\n            this.env.setADSR(attack, this.env.dTime, this.env.sPercent, this.env.rTime);\n          }\n        },\n        decay: {\n          get: function get() {\n            return this.env.dTime;\n          },\n          set: function set(decay) {\n            this.env.setADSR(this.env.aTime, decay, this.env.sPercent, this.env.rTime);\n          }\n        },\n        sustain: {\n          get: function get() {\n            return this.env.sPercent;\n          },\n          set: function set(sustain) {\n            this.env.setADSR(this.env.aTime, this.env.dTime, sustain, this.env.rTime);\n          }\n        },\n        release: {\n          get: function get() {\n            return this.env.rTime;\n          },\n          set: function set(release) {\n            this.env.setADSR(this.env.aTime, this.env.dTime, this.env.sPercent, release);\n          }\n        }\n      });\n      return _this;\n    }\n    /**\n     *  Play tells the MonoSynth to start playing a note. This method schedules\n     *  the calling of .triggerAttack and .triggerRelease.\n     *\n     *  @method play\n     *  @for p5.MonoSynth\n     *  @param {String | Number} note the note you want to play, specified as a\n     *                                 frequency in Hertz (Number) or as a midi\n     *                                 value in Note/Octave format (\"C4\", \"Eb3\"...etc\")\n     *                                 See <a href = \"https://github.com/Tonejs/Tone.js/wiki/Instruments\">\n     *                                 Tone</a>. Defaults to 440 hz.\n     *  @param  {Number} [velocity] velocity of the note to play (ranging from 0 to 1)\n     *  @param  {Number} [secondsFromNow]  time from now (in seconds) at which to play\n     *  @param  {Number} [sustainTime] time to sustain before releasing the envelope. Defaults to 0.15 seconds.\n     *  @example\n     *  <div><code>\n     *  let monoSynth;\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(playSynth);\n     *    background(220);\n     *    textAlign(CENTER);\n     *    text('tap to play', width/2, height/2);\n     *\n     *    monoSynth = new p5.MonoSynth();\n     *  }\n     *\n     *  function playSynth() {\n     *    userStartAudio();\n     *\n     *    let note = random(['Fb4', 'G4']);\n     *    // note velocity (volume, from 0 to 1)\n     *    let velocity = random();\n     *    // time from now (in seconds)\n     *    let time = 0;\n     *    // note duration (in seconds)\n     *    let dur = 1/6;\n     *\n     *    monoSynth.play(note, velocity, time, dur);\n     *  }\n     *  </code></div>\n     *\n     */\n\n\n    monosynth_createClass(MonoSynth, [{\n      key: \"play\",\n      value: function play(note, velocity, secondsFromNow, susTime) {\n        this.triggerAttack(note, velocity, ~~secondsFromNow);\n        this.triggerRelease(~~secondsFromNow + (susTime || DEFAULT_SUSTAIN));\n      }\n      /**\n       *  Trigger the Attack, and Decay portion of the Envelope.\n       *  Similar to holding down a key on a piano, but it will\n       *  hold the sustain level until you let go.\n       *\n       *  @param {String | Number} note the note you want to play, specified as a\n       *                                 frequency in Hertz (Number) or as a midi\n       *                                 value in Note/Octave format (\"C4\", \"Eb3\"...etc\")\n       *                                 See <a href = \"https://github.com/Tonejs/Tone.js/wiki/Instruments\">\n       *                                 Tone</a>. Defaults to 440 hz\n       *  @param  {Number} [velocity] velocity of the note to play (ranging from 0 to 1)\n       *  @param  {Number} [secondsFromNow]  time from now (in seconds) at which to play\n       *  @method  triggerAttack\n       *  @for p5.MonoSynth\n       *  @example\n       *  <div><code>\n       *  let monoSynth;\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(triggerAttack);\n       *    background(220);\n       *    text('tap here for attack, let go to release', 5, 20, width - 20);\n       *    monoSynth = new p5.MonoSynth();\n       *  }\n       *\n       *  function triggerAttack() {\n       *    userStartAudio();\n       *\n       *    monoSynth.triggerAttack(\"E3\");\n       *  }\n       *\n       *  function mouseReleased() {\n       *    monoSynth.triggerRelease();\n       *  }\n       *  </code></div>\n       */\n\n    }, {\n      key: \"triggerAttack\",\n      value: function triggerAttack(note, velocity) {\n        var secondsFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var freq = noteToFreq(note);\n        var vel = velocity || 0.1;\n        this.oscillator.freq(freq, 0, secondsFromNow);\n        this.env.ramp(this.output.gain, secondsFromNow, vel);\n      }\n      /**\n       *  Trigger the release of the Envelope. This is similar to releasing\n       *  the key on a piano and letting the sound fade according to the\n       *  release level and release time.\n       *\n       *  @param  {Number} secondsFromNow time to trigger the release\n       *  @method  triggerRelease\n       *  @for p5.MonoSynth\n       *  @example\n       *  <div><code>\n       *  let monoSynth;\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(triggerAttack);\n       *    background(220);\n       *    text('tap here for attack, let go to release', 5, 20, width - 20);\n       *    monoSynth = new p5.MonoSynth();\n       *  }\n       *\n       *  function triggerAttack() {\n       *    userStartAudio();\n       *\n       *    monoSynth.triggerAttack(\"E3\");\n       *  }\n       *\n       *  function mouseReleased() {\n       *    monoSynth.triggerRelease();\n       *  }\n       *  </code></div>\n       */\n\n    }, {\n      key: \"triggerRelease\",\n      value: function triggerRelease() {\n        var secondsFromNow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n        this.env.ramp(this.output.gain, secondsFromNow, 0);\n      }\n      /**\n       *  Set values like a traditional\n       *  <a href=\"https://en.wikipedia.org/wiki/Synthesizer#/media/File:ADSR_parameter.svg\">\n       *  ADSR envelope\n       *  </a>.\n       *\n       *  @method  setADSR\n       *  @for p5.MonoSynth\n       *  @param {Number} attackTime    Time (in seconds before envelope\n       *                                reaches Attack Level\n       *  @param {Number} [decayTime]    Time (in seconds) before envelope\n       *                                reaches Decay/Sustain Level\n       *  @param {Number} [susRatio]    Ratio between attackLevel and releaseLevel, on a scale from 0 to 1,\n       *                                where 1.0 = attackLevel, 0.0 = releaseLevel.\n       *                                The susRatio determines the decayLevel and the level at which the\n       *                                sustain portion of the envelope will sustain.\n       *                                For example, if attackLevel is 0.4, releaseLevel is 0,\n       *                                and susAmt is 0.5, the decayLevel would be 0.2. If attackLevel is\n       *                                increased to 1.0 (using <code>setRange</code>),\n       *                                then decayLevel would increase proportionally, to become 0.5.\n       *  @param {Number} [releaseTime]   Time in seconds from now (defaults to 0)\n       */\n\n    }, {\n      key: \"setADSR\",\n      value: function setADSR(attack, decay, sustain, release) {\n        this.env.setADSR(attack, decay, sustain, release);\n      }\n      /**\n       * MonoSynth amp\n       * @method  amp\n       * @for p5.MonoSynth\n       * @param  {Number} vol      desired volume\n       * @param  {Number} [rampTime] Time to reach new volume\n       * @return {Number}          new volume value\n       */\n\n    }, {\n      key: \"amp\",\n      value: function amp(vol, rampTime) {\n        var t = rampTime || 0;\n\n        if (typeof vol !== 'undefined') {\n          this.oscillator.amp(vol, t);\n        }\n\n        return this.oscillator.amp().value;\n      }\n      /**\n       *  Connect to a p5.sound / Web Audio object.\n       *\n       *  @method  connect\n       *  @for p5.MonoSynth\n       *  @param  {Object} unit A p5.sound or Web Audio object\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect(unit) {\n        var u = unit || main.input;\n        this.output.connect(u.input ? u.input : u);\n      }\n      /**\n       *  Disconnect all outputs\n       *\n       *  @method  disconnect\n       *  @for p5.MonoSynth\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.output) {\n          this.output.disconnect();\n        }\n      }\n      /**\n       *  Get rid of the MonoSynth and free up its resources / memory.\n       *\n       *  @method  dispose\n       *  @for p5.MonoSynth\n       */\n\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        monosynth_get(monosynth_getPrototypeOf(MonoSynth.prototype), \"dispose\", this).call(this);\n\n        if (this.env) {\n          this.env.dispose();\n        }\n\n        if (this.oscillator) {\n          this.oscillator.dispose();\n        }\n      }\n    }]);\n    return MonoSynth;\n  }(audioVoice_0);\n\n  var monosynth = monosynth_MonoSynth;\n\n  function onsetDetect_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function onsetDetect_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function onsetDetect_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) onsetDetect_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) onsetDetect_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  /**\n   *  Listen for onsets (a sharp increase in volume) within a given\n   *  frequency range.\n   *\n   *  @class p5.OnsetDetect\n   *  @constructor\n   *  @param {Number} freqLow     Low frequency\n   *  @param {Number} freqHigh     High frequency\n   *  @param {Number} threshold   Amplitude threshold between 0 (no energy) and 1 (maximum)\n   *  @param {Function} callback  Function to call when an onset is detected\n   */\n\n\n  var OnsetDetect = function () {\n    function OnsetDetect(freqLow, freqHigh, threshold, callback) {\n      onsetDetect_classCallCheck(this, OnsetDetect);\n      this.isDetected = false;\n      this.freqLow = freqLow;\n      this.freqHigh = freqHigh;\n      this.treshold = threshold;\n      this.energy = 0;\n      this.penergy = 0;\n      this.sensitivity = 500;\n      this.callback = callback;\n    }\n\n    onsetDetect_createClass(OnsetDetect, [{\n      key: \"update\",\n      value: function update(fftObject, callback) {\n        this.energy = fftObject.getEnergy(this.freqLow, this.freqHigh) / 255;\n\n        if (this.isDetected === false) {\n          if (this.energy - this.penergy > this.treshold) {\n            this.isDetected = true;\n\n            if (this.callback) {\n              this.callback(this.energy);\n            } else if (callback) {\n              callback(this.energy);\n            }\n\n            var self = this;\n            setTimeout(function () {\n              self.isDetected = false;\n            }, this.sensitivity);\n          }\n        }\n\n        this.penergy = this.energy;\n      }\n    }]);\n    return OnsetDetect;\n  }();\n\n  var onsetDetect = OnsetDetect;\n\n  function polysynth_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  function polysynth_defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  function polysynth_createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) polysynth_defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) polysynth_defineProperties(Constructor, staticProps);\n    return Constructor;\n  }\n  /**\n   *  An AudioVoice is used as a single voice for sound synthesis.\n   *  The PolySynth class holds an array of AudioVoice, and deals\n   *  with voices allocations, with setting notes to be played, and\n   *  parameters to be set.\n   *\n   *  @class p5.PolySynth\n   *  @constructor\n   *\n   *  @param {Number} [synthVoice]   A monophonic synth voice inheriting\n   *                                 the AudioVoice class. Defaults to p5.MonoSynth\n   *  @param {Number} [maxVoices] Number of voices, defaults to 8;\n   *  @example\n   *  <div><code>\n   *  let polySynth;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playSynth);\n   *    background(220);\n   *    text('click to play', 20, 20);\n   *\n   *    polySynth = new p5.PolySynth();\n   *  }\n   *\n   *  function playSynth() {\n   *    userStartAudio();\n   *\n   *    // note duration (in seconds)\n   *    let dur = 1.5;\n   *\n   *    // time from now (in seconds)\n   *    let time = 0;\n   *\n   *    // velocity (volume, from 0 to 1)\n   *    let vel = 0.1;\n   *\n   *    // notes can overlap with each other\n   *    polySynth.play('G2', vel, 0, dur);\n   *    polySynth.play('C3', vel, time += 1/3, dur);\n   *    polySynth.play('G3', vel, time += 1/3, dur);\n   *  }\n   *  </code></div>\n   **/\n\n\n  var polysynth_PolySynth = function () {\n    function PolySynth(audioVoice, maxVoices) {\n      polysynth_classCallCheck(this, PolySynth);\n      this.audiovoices = [];\n      /**\n       * An object that holds information about which notes have been played and\n       * which notes are currently being played. New notes are added as keys\n       * on the fly. While a note has been attacked, but not released, the value of the\n       * key is the audiovoice which is generating that note. When notes are released,\n       * the value of the key becomes undefined.\n       * @property notes\n       */\n\n      this.notes = {};\n      this._newest = 0;\n      this._oldest = 0;\n      /**\n       * A PolySynth must have at least 1 voice, defaults to 8\n       * @property polyvalue\n       */\n\n      this.maxVoices = maxVoices || 8;\n      /**\n       * Monosynth that generates the sound for each note that is triggered. The\n       * p5.PolySynth defaults to using the p5.MonoSynth as its voice.\n       * @property AudioVoice\n       */\n\n      this.AudioVoice = audioVoice === undefined ? p5.MonoSynth : audioVoice;\n      /**\n       * This value must only change as a note is attacked or released. Due to delay\n       * and sustain times, Tone.TimelineSignal is required to schedule the change in value.\n       * @private\n       * @property {Tone.TimelineSignal} _voicesInUse\n       */\n\n      this._voicesInUse = new TimelineSignal_default.a(0);\n      this.output = main.audiocontext.createGain();\n      this.connect();\n\n      this._allocateVoices();\n\n      main.soundArray.push(this);\n    }\n    /**\n     * Construct the appropriate number of audiovoices\n     * @private\n     * @for p5.PolySynth\n     * @method  _allocateVoices\n     */\n\n\n    polysynth_createClass(PolySynth, [{\n      key: \"_allocateVoices\",\n      value: function _allocateVoices() {\n        for (var i = 0; i < this.maxVoices; i++) {\n          this.audiovoices.push(new this.AudioVoice());\n          this.audiovoices[i].disconnect();\n          this.audiovoices[i].connect(this.output);\n        }\n      }\n      /**\n       *  Play a note by triggering noteAttack and noteRelease with sustain time\n       *\n       *  @method  play\n       *  @for p5.PolySynth\n       *  @param  {Number} [note] midi note to play (ranging from 0 to 127 - 60 being a middle C)\n       *  @param  {Number} [velocity] velocity of the note to play (ranging from 0 to 1)\n       *  @param  {Number} [secondsFromNow]  time from now (in seconds) at which to play\n       *  @param  {Number} [sustainTime] time to sustain before releasing the envelope\n       *  @example\n       *  <div><code>\n       *  let polySynth;\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(playSynth);\n       *    background(220);\n       *    text('click to play', 20, 20);\n       *\n       *    polySynth = new p5.PolySynth();\n       *  }\n       *\n       *  function playSynth() {\n       *    userStartAudio();\n       *\n       *    // note duration (in seconds)\n       *    let dur = 1.5;\n       *\n       *    // time from now (in seconds)\n       *    let time = 0;\n       *\n       *    // velocity (volume, from 0 to 1)\n       *    let vel = 0.1;\n       *\n       *    // notes can overlap with each other\n       *    polySynth.play('G2', vel, 0, dur);\n       *    polySynth.play('C3', vel, time += 1/3, dur);\n       *    polySynth.play('G3', vel, time += 1/3, dur);\n       *  }\n       *  </code></div>\n       */\n\n    }, {\n      key: \"play\",\n      value: function play(note, velocity, secondsFromNow) {\n        var susTime = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n        this.noteAttack(note, velocity, secondsFromNow);\n        this.noteRelease(note, secondsFromNow + susTime);\n      }\n      /**\n       *  noteADSR sets the envelope for a specific note that has just been triggered.\n       *  Using this method modifies the envelope of whichever audiovoice is being used\n       *  to play the desired note. The envelope should be reset before noteRelease is called\n       *  in order to prevent the modified envelope from being used on other notes.\n       *\n       *  @method  noteADSR\n       *  @for p5.PolySynth\n       *  @param {Number} [note]        Midi note on which ADSR should be set.\n       *  @param {Number} [attackTime]  Time (in seconds before envelope\n       *                                reaches Attack Level\n       *  @param {Number} [decayTime]   Time (in seconds) before envelope\n       *                                reaches Decay/Sustain Level\n       *  @param {Number} [susRatio]    Ratio between attackLevel and releaseLevel, on a scale from 0 to 1,\n       *                                where 1.0 = attackLevel, 0.0 = releaseLevel.\n       *                                The susRatio determines the decayLevel and the level at which the\n       *                                sustain portion of the envelope will sustain.\n       *                                For example, if attackLevel is 0.4, releaseLevel is 0,\n       *                                and susAmt is 0.5, the decayLevel would be 0.2. If attackLevel is\n       *                                increased to 1.0 (using <code>setRange</code>),\n       *                                then decayLevel would increase proportionally, to become 0.5.\n       *  @param {Number} [releaseTime]   Time in seconds from now (defaults to 0)\n       **/\n\n    }, {\n      key: \"noteADSR\",\n      value: function noteADSR(note, a, d, s, r) {\n        var timeFromNow = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n        var now = main.audiocontext.currentTime;\n        var t = now + timeFromNow;\n        this.audiovoices[this.notes[note].getValueAtTime(t)].setADSR(a, d, s, r);\n      }\n      /**\n       * Set the PolySynths global envelope. This method modifies the envelopes of each\n       * monosynth so that all notes are played with this envelope.\n       *\n       *  @method  setADSR\n       *  @for p5.PolySynth\n       *  @param {Number} [attackTime]  Time (in seconds before envelope\n       *                                reaches Attack Level\n       *  @param {Number} [decayTime]   Time (in seconds) before envelope\n       *                                reaches Decay/Sustain Level\n       *  @param {Number} [susRatio]    Ratio between attackLevel and releaseLevel, on a scale from 0 to 1,\n       *                                where 1.0 = attackLevel, 0.0 = releaseLevel.\n       *                                The susRatio determines the decayLevel and the level at which the\n       *                                sustain portion of the envelope will sustain.\n       *                                For example, if attackLevel is 0.4, releaseLevel is 0,\n       *                                and susAmt is 0.5, the decayLevel would be 0.2. If attackLevel is\n       *                                increased to 1.0 (using <code>setRange</code>),\n       *                                then decayLevel would increase proportionally, to become 0.5.\n       *  @param {Number} [releaseTime]   Time in seconds from now (defaults to 0)\n       **/\n\n    }, {\n      key: \"setADSR\",\n      value: function setADSR(a, d, s, r) {\n        this.audiovoices.forEach(function (voice) {\n          voice.setADSR(a, d, s, r);\n        });\n      }\n      /**\n       *  Trigger the Attack, and Decay portion of a MonoSynth.\n       *  Similar to holding down a key on a piano, but it will\n       *  hold the sustain level until you let go.\n       *\n       *  @method  noteAttack\n       *  @for p5.PolySynth\n       *  @param  {Number} [note]           midi note on which attack should be triggered.\n       *  @param  {Number} [velocity]       velocity of the note to play (ranging from 0 to 1)/\n       *  @param  {Number} [secondsFromNow] time from now (in seconds)\n       *  @example\n       *  <div><code>\n       *  let polySynth = new p5.PolySynth();\n       *  let pitches = ['G', 'D', 'G', 'C'];\n       *  let octaves = [2, 3, 4];\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(playChord);\n       *    background(220);\n       *    text('tap to play', 20, 20);\n       *  }\n       *\n       *  function playChord() {\n       *    userStartAudio();\n       *\n       *    // play a chord: multiple notes at the same time\n       *    for (let i = 0; i < 4; i++) {\n       *      let note = random(pitches) + random(octaves);\n       *      polySynth.noteAttack(note, 0.1);\n       *    }\n       *  }\n       *\n       *  function mouseReleased() {\n       *    // release all voices\n       *    polySynth.noteRelease();\n       *  }\n       *  </code></div>\n       */\n\n    }, {\n      key: \"noteAttack\",\n      value: function noteAttack(_note, _velocity) {\n        var secondsFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n        var acTime = main.audiocontext.currentTime + secondsFromNow;\n        var note = noteToFreq(_note);\n        var velocity = _velocity || 0.1;\n        var currentVoice;\n\n        if (this.notes[note] && this.notes[note].getValueAtTime(acTime) !== null) {\n          this.noteRelease(note, 0);\n        }\n\n        if (this._voicesInUse.getValueAtTime(acTime) < this.maxVoices) {\n          currentVoice = Math.max(~~this._voicesInUse.getValueAtTime(acTime), 0);\n        } else {\n          currentVoice = this._oldest;\n          oldestNote = freqToMidi(this.audiovoices[this._oldest].oscillator.freq().value);\n          this.noteRelease(oldestNote);\n          this._oldest = (this._oldest + 1) % (this.maxVoices - 1);\n        }\n\n        this.notes[note] = new TimelineSignal_default.a();\n        this.notes[note].setValueAtTime(currentVoice, acTime);\n        var previousVal = this._voicesInUse._searchBefore(acTime) === null ? 0 : this._voicesInUse._searchBefore(acTime).value;\n\n        this._voicesInUse.setValueAtTime(previousVal + 1, acTime);\n\n        this._updateAfter(acTime, 1);\n\n        this._newest = currentVoice;\n\n        if (typeof velocity === 'number') {\n          var maxRange = 1 / this._voicesInUse.getValueAtTime(acTime) * 2;\n          velocity = velocity > maxRange ? maxRange : velocity;\n        }\n\n        this.audiovoices[currentVoice].triggerAttack(note, velocity, secondsFromNow);\n      }\n      /**\n       * Private method to ensure accurate values of this._voicesInUse\n       * Any time a new value is scheduled, it is necessary to increment all subsequent\n       * scheduledValues after attack, and decrement all subsequent\n       * scheduledValues after release\n       *\n       * @private\n       * @for p5.PolySynth\n       * @param  {[type]} time  [description]\n       * @param  {[type]} value [description]\n       * @return {[type]}       [description]\n       */\n\n    }, {\n      key: \"_updateAfter\",\n      value: function _updateAfter(time, value) {\n        if (this._voicesInUse._searchAfter(time) === null) {\n          return;\n        } else {\n          this._voicesInUse._searchAfter(time).value += value;\n\n          var nextTime = this._voicesInUse._searchAfter(time).time;\n\n          this._updateAfter(nextTime, value);\n        }\n      }\n      /**\n       *  Trigger the Release of an AudioVoice note. This is similar to releasing\n       *  the key on a piano and letting the sound fade according to the\n       *  release level and release time.\n       *\n       *  @method  noteRelease\n       *  @for p5.PolySynth\n       *  @param  {Number} [note]           midi note on which attack should be triggered.\n       *                                    If no value is provided, all notes will be released.\n       *  @param  {Number} [secondsFromNow] time to trigger the release\n       *  @example\n       *  <div><code>\n       *  let polySynth = new p5.PolySynth();\n       *  let pitches = ['G', 'D', 'G', 'C'];\n       *  let octaves = [2, 3, 4];\n       *\n       *  function setup() {\n       *    let cnv = createCanvas(100, 100);\n       *    cnv.mousePressed(playChord);\n       *    background(220);\n       *    text('tap to play', 20, 20);\n       *  }\n       *\n       *  function playChord() {\n       *    userStartAudio();\n       *\n       *    // play a chord: multiple notes at the same time\n       *    for (let i = 0; i < 4; i++) {\n       *      let note = random(pitches) + random(octaves);\n       *      polySynth.noteAttack(note, 0.1);\n       *    }\n       *  }\n       *\n       *  function mouseReleased() {\n       *    // release all voices\n       *    polySynth.noteRelease();\n       *  }\n       *  </code></div>\n       *\n       */\n\n    }, {\n      key: \"noteRelease\",\n      value: function noteRelease(_note, secondsFromNow) {\n        var now = main.audiocontext.currentTime;\n        var tFromNow = secondsFromNow || 0;\n        var t = now + tFromNow;\n\n        if (!_note) {\n          this.audiovoices.forEach(function (voice) {\n            voice.triggerRelease(tFromNow);\n          });\n\n          this._voicesInUse.setValueAtTime(0, t);\n\n          for (var n in this.notes) {\n            this.notes[n].dispose();\n            delete this.notes[n];\n          }\n\n          return;\n        }\n\n        var note = noteToFreq(_note);\n\n        if (!this.notes[note] || this.notes[note].getValueAtTime(t) === null) {\n          console.warn('Cannot release a note that is not already playing');\n        } else {\n          var previousVal = Math.max(~~this._voicesInUse.getValueAtTime(t).value, 1);\n\n          this._voicesInUse.setValueAtTime(previousVal - 1, t);\n\n          if (previousVal > 0) {\n            this._updateAfter(t, -1);\n          }\n\n          this.audiovoices[this.notes[note].getValueAtTime(t)].triggerRelease(tFromNow);\n          this.notes[note].dispose();\n          delete this.notes[note];\n          this._newest = this._newest === 0 ? 0 : (this._newest - 1) % (this.maxVoices - 1);\n        }\n      }\n      /**\n       *  Connect to a p5.sound / Web Audio object.\n       *\n       *  @method  connect\n       *  @for p5.PolySynth\n       *  @param  {Object} unit A p5.sound or Web Audio object\n       */\n\n    }, {\n      key: \"connect\",\n      value: function connect(unit) {\n        var u = unit || main.input;\n        this.output.connect(u.input ? u.input : u);\n      }\n      /**\n       *  Disconnect all outputs\n       *\n       *  @method  disconnect\n       *  @for p5.PolySynth\n       */\n\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.output) {\n          this.output.disconnect();\n        }\n      }\n      /**\n       *  Get rid of the MonoSynth and free up its resources / memory.\n       *\n       *  @method  dispose\n       *  @for p5.PolySynth\n       */\n\n    }, {\n      key: \"dispose\",\n      value: function dispose() {\n        this.audiovoices.forEach(function (voice) {\n          voice.dispose();\n        });\n\n        if (this.output) {\n          this.output.disconnect();\n          delete this.output;\n        }\n      }\n    }]);\n    return PolySynth;\n  }();\n\n  var polysynth = polysynth_PolySynth;\n\n  function Signal_classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n\n  var Signal_Signal = function Signal() {\n    Signal_classCallCheck(this, Signal);\n    console.warn('p5.Signal is deprecated , Use Tone.js Signal instead ');\n  };\n\n  var deprecations_Signal = Signal_Signal;\n  p5.prototype.getAudioContext = audiocontext[\"b\"];\n  p5.prototype.userStartAudio = audiocontext[\"c\"];\n  p5.prototype.sampleRate = sampleRate;\n  p5.prototype.freqToMidi = freqToMidi;\n  p5.prototype.midiToFreq = midiToFreq;\n  p5.prototype.noteToFreq = noteToFreq;\n  p5.prototype.soundFormats = soundFormats;\n  p5.prototype.disposeSound = disposeSound;\n  p5.prototype._checkFileFormats = _checkFileFormats;\n  p5.prototype._mathChain = _mathChain;\n  p5.prototype.convertToWav = convertToWav;\n  p5.prototype.interleave = interleave;\n  p5.prototype.writeUTFBytes = writeUTFBytes;\n  p5.prototype.safeBufferSize = safeBufferSize;\n  p5.prototype.saveSound = saveSound;\n  p5.prototype.registerMethod('remove', p5.prototype.disposeSound);\n  p5.Panner = panner_0;\n  p5.SoundFile = soundfile;\n  p5.prototype.loadSound = loadSound;\n  p5.prototype.registerPreloadMethod('loadSound', p5.prototype);\n  p5.Amplitude = amplitude;\n  p5.FFT = fft;\n  p5.Oscillator = oscillator;\n  p5.SinOsc = SinOsc;\n  p5.TriOsc = TriOsc;\n  p5.SawOsc = SawOsc;\n  p5.SqrOsc = SqrOsc;\n  p5.Noise = noise;\n  p5.Pulse = pulse;\n  p5.AudioIn = audioin;\n  p5.Effect = effect;\n  p5.Filter = filter;\n  p5.LowPass = LowPass;\n  p5.HighPass = HighPass;\n  p5.BandPass = BandPass;\n  p5.EQ = eq;\n  p5.listener3D = listener3d;\n  p5.Panner3D = panner3d;\n  p5.Delay = delay;\n  p5.Reverb = Reverb;\n  p5.Convolver = reverb_Convolver;\n  p5.prototype.createConvolver = createConvolver;\n  p5.prototype.registerPreloadMethod('createConvolver', p5.prototype);\n  p5.Metro = metro;\n  p5.Phrase = Phrase;\n  p5.Part = looper_Part;\n  p5.Score = Score;\n  p5.SoundLoop = soundLoop;\n  p5.Compressor = compressor;\n  p5.peakDetect = peakDetect;\n  p5.SoundRecorder = soundRecorder;\n  p5.Distortion = distortion;\n  p5.Gain = gain;\n  p5.AudioVoice = audioVoice_0;\n  p5.MonoSynth = monosynth;\n  p5.OnsetDetect = onsetDetect;\n  p5.PolySynth = polysynth;\n  p5.PeakDetect = peakDetect;\n  p5.Signal = deprecations_Signal;\n}]);","map":{"version":3,"sources":["D:/Users/Documents/GitHub/Angular101/Angular101/node_modules/p5/lib/addons/p5.sound.js"],"names":["modules","installedModules","__webpack_require__","moduleId","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","getDefault","getModuleExports","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_RESULT__","a","e","isUndef","input","context","createGain","Array","output","set","isObject","isString","indexOf","split","u","length","splice","join","Signal","Param","rampTo","AudioParam","_collectDefaults","constructor","isFunction","defaults","keys","_super","push","toString","match","isArray","dispose","AudioNode","disconnect","connect","defaultArg","isNumber","apply","arguments","connectSeries","chain","fan","optionsObject","isBoolean","noOp","_readOnly","writable","_writable","State","Started","Stopped","Paused","equalPowerScale","Math","PI","sin","dbToGain","pow","gainToDb","log","LN10","intervalToFrequencyRatio","now","extend","Context","emit","setContext","sampleRate","window","version","TONE_SILENCE_VERSION_LOGGING","console","undefined","__WEBPACK_AMD_DEFINE_ARRAY__","Multiply","createInsOuts","_mult","Gain","_param","gain","_gain","param","getConstant","units","Type","Default","convert","SignalBase","__webpack_exports__","global","getAudioContext","userStartAudio","startaudiocontext__WEBPACK_IMPORTED_MODULE_0__","startaudiocontext__WEBPACK_IMPORTED_MODULE_0___default","Tone_core_Tone__WEBPACK_IMPORTED_MODULE_1__","Tone_core_Tone__WEBPACK_IMPORTED_MODULE_1___default","Tone_core_Context__WEBPACK_IMPORTED_MODULE_2__","Tone_core_Context__WEBPACK_IMPORTED_MODULE_2___default","audiocontext","AudioContext","elements","callback","elt","p5","Element","map","Add","_sum","recorderProcessor","soundFileProcessor","amplitudeProcessor","WaveShaper","_shaper","createWaveShaper","_curve","curve","isFinite","Float32Array","setMap","oversample","RangeError","TimelineSignal","_events","Timeline","_initial","_fromUnits","Linear","Exponential","Target","Curve","Set","getValueAtTime","_toUnits","cancelScheduledValues","setValueAtTime","toSeconds","add","type","time","linearRampToValueAtTime","exponentialRampToValueAtTime","_searchBefore","_minOutput","max","sampleTime","setTargetAtTime","constant","setValueCurveAtTime","duration","cancel","setRampPoint","_searchAfter","linearRampToValueBetween","exponentialRampToValueBetween","getAfter","getBefore","_exponentialApproach","_curveInterpolate","_linearInterpolate","_exponentialInterpolate","exp","floor","ceil","Scale","_outputMin","_outputMax","_scale","_add","_setRange","Time","Frequency","TransportTime","Ticks","NormalRange","AudioRange","Decibels","Interval","BPM","Positive","Cents","Degrees","MIDI","BarsBeatsSixteenths","Samples","Hertz","Note","Milliseconds","Seconds","Notation","TimeBase","toFrequency","valueOf","toTicks","Transport","ticks","GainNode","createGainNode","_gainNode","Clock","Emitter","_nextTick","_lastState","frequency","_state","TimelineState","_boundLoop","_loop","on","lookAhead","start","state","offset","stop","setStateAtTime","pause","updateInterval","lag","getStateAtTime","off","Error","webkitAudioContext","_context","_defineProperty","_latencyHint","_lookAhead","_updateInterval","_computedUpdateInterval","_worker","_createWorker","_constants","mixin","currentTime","URL","webkitURL","Blob","toFixed","createObjectURL","Worker","addEventListener","_lastUpdate","createBuffer","getChannelData","createBufferSource","channelCount","channelCountMode","buffer","loop","blockTime","postMessage","latencyHint","supported","warn","Subtract","_neg","Negate","slice","overridden","_plusNow","_unaryExpressions","quantize","regexp","method","nextSubdivision","_expr","round","addNow","_defaultExpr","_noOp","copy","toNotation","_toNotationHelper","_notationToUnits","_primaryExpressions","toBarsBeatsSixteenths","_beatsToUnits","_timeSignature","parseFloat","PPQ","toSamples","toMilliseconds","_defaultUnits","_parseExprString","clone","parseInt","_ticksToUnits","hz","_frequencyToUnits","tr","_secondsToUnits","samples","default","_binaryExpressions","precedence","neg","_syntaxGlue","_tokenize","trim","substr","SyntaxError","next","peek","_matchGroup","test","_parseBinary","_parseUnary","_parsePrimary","bpm","timeSignature","_pushExpr","sub","mult","div","_lfo","lfo","LFO","min","exponentialRampToValue","linearRampToValue","_timeline","_toRemove","_iterating","memory","_search","remove","shift","cancelBefore","h","_iterate","forEach","forEachBefore","forEachAfter","forEachFrom","forEachAtTime","_multiply","GreaterThanZero","_thresh","__WEBPACK_AMD_DEFINE_FACTORY__","_dragged","_element","_bindedMove","_moved","_bindedEnd","_ended","destination","resume","removeEventListener","Promise","requestAnimationFrame","NodeList","document","querySelectorAll","jquery","toArray","body","then","CrossFade","b","fade","_equalPowerA","EqualPowerGain","_equalPowerB","_invert","Expr","parameters","bufferSize","fill","processor","realm","exec","inputBuffer","outputBuffer","instance","process","numberOfChannels","f","$$processors","$$context","AudioWorkletNode","self","createScriptProcessor","outputChannelCount","Map","properties","defaultValue","MessageChannel","port2","Processor","port","port1","onaudioprocess","$$audioWorklet","AudioWorklet","addModule","fetch","ok","status","text","AudioWorkletProcessor","registerProcessor","parameterDescriptors","createElement","style","cssText","appendChild","contentWindow","createTextNode","$hook","documentElement","transpile","String","fixSetTarget","setTargetValueAtTime","createDelay","createDelayNode","createJavaScriptNode","createPeriodicWave","createWaveTable","internal_createGain","node","internal_createDelay","maxDelayTime","delayTime","internal_createBufferSource","when","noteGrainOn","noteOn","internal_start","noteOff","internal_stop","playbackRate","internal_createDynamicsCompressor","createDynamicsCompressor","threshold","knee","ratio","reduction","attack","release","internal_createBiquadFilter","createBiquadFilter","detune","Q","createOscillator","internal_createOscillator","setPeriodicWave","setWaveTable","OfflineAudioContext","webkitOfflineAudioContext","navigator","getUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","el","isSupported","canPlayType","isOGGSupported","isMP3Supported","isWAVSupported","isAACSupported","isAIFSupported","isFileSupported","extension","toLowerCase","g","Function","midi","midiToFrequency","note","transpose","harmonize","toMidi","frequencyToMidi","toNote","A4","LN2","cbb","cb","cx","dbb","db","dx","ebb","eb","ex","fbb","fb","fx","gbb","gb","gx","abb","ab","ax","bbb","bb","bx","_secondsToTicks","seconds","_eval","args","_replacements","_parseInputs","_nodes","_parseTree","_disposeNodes","_Expressions","signal","glue","func","abs","Abs","mod","Modulo","Pow","a2g","AudioToGain","binary","unary","NOT","replace","operator","GreaterThan","_gtz","_abs","_subtract","_modSignal","_setWaveShaper","_exp","_expScaler","_expFunc","_norm","_eqPower","audioworklet_polyfill","shims","_classCallCheck","Constructor","TypeError","main_Main","Main","limiter","meter","fftMeter","soundArray","parts","extensions","p5sound","getOutputVolume","outputVolume","vol","rampTime","tFromNow","currentVol","soundOut","_silentNode","main","processorNames","processorNames_default","_typeof","obj","iterator","freqToMidi","mathlog2","midiToFreq","noteToFreq","wholeNotes","A","B","C","D","E","F","G","toUpperCase","octave","soundFormats","disposeSound","_checkFileFormats","paths","path","extTest","pop","pathSplit","pathCore","_i","_extension","_supported","_i2","_i3","_extension2","_supported2","_mathChain","math","thisChain","nextChain","mathOps","convertToWav","audioBuffer","leftChannel","rightChannel","interleaved","interleave","ArrayBuffer","view","DataView","writeUTFBytes","setUint32","setUint16","lng","index","volume","setInt16","result","inputIndex","string","setUint8","charCodeAt","safeBufferSize","idealBufferSize","tempAudioWorkletNode","ScriptProcessorNode","saveSound","soundFile","fileName","dataView","writeFile","CustomError","errorTrace","failedPath","err","tempStack","splitStack","originalStack","stack","filter","ln","errorHandler","moduleSources","audioWorklet_ac","initializedAudioWorklets","loadAudioWorkletModules","all","moduleSrc","blob","objectURL","audioWorklet","registerMethod","preload","_incrementPreload","onWorkletModulesLoad","_decrementPreload","panner_classCallCheck","_defineProperties","target","props","descriptor","configurable","_createClass","protoProps","staticProps","panner_ac","panner","createStereoPanner","Panner","stereoPanner","pan","val","inputChannels","_Panner","numInputChannels","left","right","channelInterpretation","splitter","createChannelSplitter","createChannelMerger","v","rightVal","cos","leftVal","numChannels","panner_0","soundfile_typeof","soundfile_defineProperties","soundfile_createClass","soundfile_classCallCheck","soundfile_ac","_createCounterBuffer","len","audioBuf","arrayBuffer","Cue","id","_clearOnEnd","thisBufferSourceNode","_playing","_onended","bufferSourceNodes","_","reverse","soundfile_SoundFile","SoundFile","onload","onerror","whileLoading","url","File","FileReader","FileList","file","_looping","_paused","_pauseTime","_cues","_cueIDCounter","_lastPos","_counterNode","_workletNode","bufferSourceNode","reversed","startTime","endTime","pauseTime","startMillis","panPosition","load","_whileLoading","amp","setVolume","errorCallback","request","XMLHttpRequest","evt","_updateProgress","open","responseType","decodeAudioData","response","buff","msg","error","statusText","message","send","reader","readAsArrayBuffer","lengthComputable","percentComplete","loaded","total","isLoaded","play","rate","_cueStart","cueStart","cueEnd","isPlaying","_initSourceNode","_initCounterNode","_arrayIndex","loopStart","loopEnd","playMode","str","pTime","setLoop","bool","isLooping","isPaused","timeFromNow","stopAll","_time","getVolume","pval","getPan","reverseBuffer","setPitch","num","newPlaybackRate","getPlaybackRate","_rampTime","_tFromNow","jump","cueTime","cTime","dur","channels","frames","getPeaks","width","sampleSize","sampleStep","peaks","chan","end","j","currentPos","curVol","onended","unit","getLevel","setPath","setBuffer","buf","size","newBuffer","channelNum","channel","_this","cNode","workletBufferSize","processorOptions","onmessage","event","data","position","_onTimeUpdate","processPeaks","_initThreshold","_minThreshold","_minPeaks","addCue","cue","removeCue","cueLength","clearCues","playbackTime","callbackTime","leftLimit","_prevUpdateTime","rightLimit","save","getBlob","loadSound","location","origin","cordova","alert","soundfile","amplitude_classCallCheck","amplitude_defineProperties","amplitude_createClass","amplitude_Amplitude","Amplitude","smoothing","parameterData","normalize","volNorm","stereoVol","stereoVolNorm","setInput","source","toggleNormalize","smooth","amplitude","fft_classCallCheck","fft_defineProperties","fft_createClass","fft_FFT","FFT","bins","analyser","createAnalyser","defineProperties","fftSize","smoothingTimeConstant","freqDomain","Uint8Array","frequencyBinCount","timeDomain","bass","lowMid","mid","highMid","treble","waveform","normalArray","_isSafari","timeToFloat","getFloatTimeDomainData","timeToInt","getByteTimeDomainData","scaled","analyze","freqToFloat","getFloatFrequencyData","freqToInt","getByteFrequencyData","getEnergy","frequency1","frequency2","nyquist","swap","lowIndex","highIndex","numFrequencies","toReturn","getFreq","freq1","freq2","x","getCentroid","cumulative_sum","centroid_normalization","mean_freq_index","spec_centroid_freq","linAverages","_N","N","spectrum","spectrumLength","spectrumStep","linearAverages","groupIndex","specIndex","logAverages","octaveBands","octaveIndex","specIndexFrequency","hi","getOctaveBands","_fCtr0","fCtr0","lastFrequencyBand","lo","ctr","newFrequencyBand","fft","Add_default","Multiply_default","Scale_default","oscillator_typeof","_possibleConstructorReturn","_assertThisInitialized","ReferenceError","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_inherits","subClass","superClass","_setPrototypeOf","oscillator_classCallCheck","oscillator_defineProperties","oscillator_createClass","sigChain","mathObj","chainSource","oscillator","oscillator_Oscillator","Oscillator","freq","_f","started","phaseAmount","_freqMods","connection","freqNode","getAmp","isNaN","phase","setType","getType","oscMods","osc2","delayAmt","dNode","scale","inMin","inMax","outMin","outMax","mapOutMin","mapOutMax","SinOsc","_Oscillator","TriOsc","_Oscillator2","SawOsc","_Oscillator3","SqrOsc","_Oscillator4","TimelineSignal_default","Envelope","t1","l1","t2","l2","t3","l3","aTime","aLevel","dTime","dLevel","rTime","rLevel","_rampHighPercentage","_rampLowPercentage","control","_init","isExponential","sourceToClear","wasTriggered","_setRampAD","setADSR","sPercent","setRange","_rampAttackTime","checkExpInput","_rampDecayTime","TCDenominator","_rampAttackTC","_rampDecayTC","setRampPercentages","p1","p2","setExp","isExp","secondsFromNow","susTime","triggerAttack","triggerRelease","lastAttack","valToSet","ramp","v1","v2","destination1","destination2","currentVal","AudioIn","Reverb","Noise","Filter","Delay","Env","envelope","noise_typeof","noise_classCallCheck","noise_defineProperties","noise_createClass","noise_possibleConstructorReturn","noise_assertThisInitialized","noise_getPrototypeOf","noise_inherits","noise_setPrototypeOf","_whiteNoiseBuffer","whiteBuffer","noiseData","random","_pinkNoiseBuffer","pinkBuffer","b0","b1","b2","b3","b4","b5","b6","white","_brownNoiseBuffer","brownBuffer","lastOut","noise_Noise","assignType","noise","Signal_default","pulse_typeof","pulse_classCallCheck","pulse_defineProperties","pulse_createClass","pulse_possibleConstructorReturn","pulse_assertThisInitialized","pulse_getPrototypeOf","pulse_inherits","pulse_setPrototypeOf","pulse_Pulse","Pulse","w","dcOffset","createDCOffset","dcGain","mW","sig","mult1","mult2","mods","currentFreq","freqMod","ac","bufferSource","pulse","audioin_classCallCheck","audioin_defineProperties","audioin_createClass","inputSources","audioin_AudioIn","stream","mediaStream","currentSource","enabled","MediaStreamTrack","mediaDevices","successCallback","audioSource","constraints","audio","echoCancellation","deviceId","createMediaStreamSource","getTracks","track","getSources","onSuccess","onError","resolve","reject","enumerateDevices","devices","device","kind","setSource","active","audioin","CrossFade_default","effect_classCallCheck","effect_defineProperties","effect_createClass","effect_Effect","Effect","_drywet","wet","drywet","effect","filter_typeof","filter_classCallCheck","filter_defineProperties","filter_createClass","filter_possibleConstructorReturn","filter_assertThisInitialized","_get","receiver","Reflect","base","_superPropBase","desc","getOwnPropertyDescriptor","filter_getPrototypeOf","filter_inherits","filter_setPrototypeOf","_Effect","biquad","_on","_untoggledType","src","res","_freq","_res","toggle","LowPass","_Filter","HighPass","_Filter2","BandPass","_Filter3","eqFilter_typeof","eqFilter_classCallCheck","eqFilter_defineProperties","eqFilter_createClass","eqFilter_possibleConstructorReturn","eqFilter_assertThisInitialized","eqFilter_getPrototypeOf","eqFilter_inherits","eqFilter_setPrototypeOf","eqFilter_EQFilter","EQFilter","eqFilter","eq_typeof","eq_classCallCheck","eq_defineProperties","eq_createClass","eq_possibleConstructorReturn","eq_assertThisInitialized","eq_get","eq_superPropBase","eq_getPrototypeOf","eq_inherits","eq_setPrototypeOf","eq_EQ","EQ","_eqsize","factor","bands","_newBand","eq","listener3d_classCallCheck","listener3d_defineProperties","listener3d_createClass","listener3d_Listener3D","Listener3D","listener","xVal","yVal","zVal","positionX","positionY","positionZ","orient","xValF","yValF","zValF","xValU","yValU","zValU","orientForward","orientUp","forwardX","forwardY","forwardZ","upX","upY","upZ","listener3d","panner3d_typeof","panner3d_classCallCheck","panner3d_defineProperties","panner3d_createClass","panner3d_possibleConstructorReturn","panner3d_assertThisInitialized","panner3d_get","panner3d_superPropBase","panner3d_getPrototypeOf","panner3d_inherits","panner3d_setPrototypeOf","Panner3D","createPanner","panningModel","distanceModel","orientX","orientY","orientZ","orientationX","orientationY","orientationZ","setFalloff","maxDistance","rolloffFactor","maxDist","rolloff","panner3d","delay_typeof","delay_classCallCheck","delay_defineProperties","delay_createClass","delay_possibleConstructorReturn","delay_assertThisInitialized","delay_get","delay_superPropBase","delay_getPrototypeOf","delay_inherits","delay_setPrototypeOf","delay_Delay","_split","_merge","_leftGain","_rightGain","leftDelay","rightDelay","_leftFilter","_rightFilter","_maxDelay","maxValue","feedback","_delayTime","_feedback","_filter","q","delay","reverb_typeof","reverb_classCallCheck","reverb_defineProperties","reverb_createClass","reverb_possibleConstructorReturn","reverb_assertThisInitialized","reverb_get","reverb_superPropBase","reverb_getPrototypeOf","reverb_inherits","reverb_setPrototypeOf","_initConvolverNode","_seconds","_decay","_reverse","_buildImpulse","convolverNode","createConvolver","_teardownConvolverNode","_setBuffer","decayRate","rebuild","decay","impulse","impulseL","impulseR","reverb_Convolver","_Reverb","Convolver","_this2","impulses","_loadBuffer","_path","chunks","addImpulse","resetImpulse","toggleImpulse","cReverb","Clock_default","metro_classCallCheck","metro_defineProperties","metro_createClass","metro_Metro","Metro","clock","ontick","syncedParts","prevTick","tatumTime","tickCallback","tickTime","elapsedTime","thisPart","incrementStep","phrases","thisPhrase","phraseArray","sequence","bNum","metroTicks","looping","setBPM","beatTime","tatums","getBPM","getRate","resetSync","part","pushSync","beatLength","metro","looper_defineProperties","looper_createClass","looper_classCallCheck","Phrase","phraseStep","looper_Part","Part","steps","bLength","partStep","noLoop","tempo","addPhrase","array","removePhrase","getPhrase","replaceSequence","onStep","Score","currentPart","thisScore","nextPart","resetPart","playNextPart","resetParts","scoreStep","aScore","soundLoop_classCallCheck","soundLoop_defineProperties","soundLoop_createClass","soundLoop_SoundLoop","SoundLoop","interval","_bpm","musicalTimeMode","_update","timeSig","_interval","maxIterations","Infinity","iterations","_calcFreq","syncedStart","otherLoop","_convertNotation","Number","_measure","_note","soundLoop","compressor_typeof","compressor_classCallCheck","compressor_defineProperties","compressor_createClass","compressor_possibleConstructorReturn","compressor_assertThisInitialized","compressor_get","compressor_superPropBase","compressor_getPrototypeOf","compressor_inherits","compressor_setPrototypeOf","Compressor","compressor","_attack","_knee","_ratio","_threshold","_release","number","peakDetect_classCallCheck","peakDetect_defineProperties","peakDetect_createClass","PeakDetect","_framesPerPeak","framesPerPeak","framesSinceLastPeak","cutoff","cutoffMult","energy","penergy","currentValue","isDetected","f1","f2","_onPeak","update","fftObject","nrg","onPeak","peakDetect","soundRecorder_classCallCheck","soundRecorder_defineProperties","soundRecorder_createClass","soundRecorder_ac","soundRecorder_SoundRecorder","SoundRecorder","_inputChannels","_outputChannels","buffers","leftBuffer","rightBuffer","_callback","record","sFile","soundRecorder","distortion_typeof","distortion_classCallCheck","distortion_defineProperties","distortion_createClass","distortion_possibleConstructorReturn","distortion_assertThisInitialized","distortion_get","distortion_superPropBase","distortion_getPrototypeOf","distortion_inherits","distortion_setPrototypeOf","makeDistortionCurve","amount","k","numSamples","deg","Distortion","curveAmount","waveShaperNode","getAmount","getOversample","distortion","gain_classCallCheck","gain_defineProperties","gain_createClass","gain_Gain","audioVoice_classCallCheck","audioVoice_defineProperties","audioVoice_createClass","audioVoice_AudioVoice","AudioVoice","velocity","sustime","audioVoice_0","monosynth_typeof","monosynth_classCallCheck","monosynth_defineProperties","monosynth_createClass","monosynth_possibleConstructorReturn","monosynth_assertThisInitialized","monosynth_get","monosynth_superPropBase","monosynth_getPrototypeOf","monosynth_inherits","monosynth_setPrototypeOf","DEFAULT_SUSTAIN","monosynth_MonoSynth","_AudioVoice","MonoSynth","env","sustain","vel","monosynth","onsetDetect_classCallCheck","onsetDetect_defineProperties","onsetDetect_createClass","OnsetDetect","freqLow","freqHigh","treshold","sensitivity","setTimeout","onsetDetect","polysynth_classCallCheck","polysynth_defineProperties","polysynth_createClass","polysynth_PolySynth","PolySynth","audioVoice","maxVoices","audiovoices","notes","_newest","_oldest","_voicesInUse","_allocateVoices","noteAttack","noteRelease","noteADSR","voice","_velocity","acTime","currentVoice","oldestNote","previousVal","_updateAfter","maxRange","nextTime","polysynth","Signal_classCallCheck","Signal_Signal","deprecations_Signal","registerPreloadMethod","listener3D"],"mappings":"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EAA0BoP,QAA1B;AACD;AACF;AACF,GARD;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,MAAImyB,MAAM,GAAG,SAASA,MAAT,CAAgBr2C,IAAhB,EAAsBiI,QAAtB,EAAgCmtC,QAAhC,EAA0C;AACrDgB,IAAAA,qBAAqB,CAAC,IAAD,EAAOC,MAAP,CAArB;AAEA,SAAKC,UAAL,GAAkB,CAAlB;AACA,SAAKt2C,IAAL,GAAYA,IAAZ;AACA,SAAKiI,QAAL,GAAgBA,QAAhB;AACA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEE,SAAKmtC,QAAL,GAAgBA,QAAhB;AACD,GAjBD;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,MAAImB,WAAW,GACf,YAAY;AACV,aAASC,IAAT,CAAcC,KAAd,EAAqBC,OAArB,EAA8B;AAC5BN,MAAAA,qBAAqB,CAAC,IAAD,EAAOI,IAAP,CAArB;AAEA,WAAK9zC,MAAL,GAAc+zC,KAAK,IAAI,CAAvB;AAEA,WAAKE,QAAL,GAAgB,CAAhB;AACA,WAAK1B,OAAL,GAAe,EAAf;AACA,WAAKjkB,SAAL,GAAiB,KAAjB;AACA,WAAK4lB,MAAL;AACA,WAAKlB,MA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","sourcesContent":["/** [p5.sound]  Version: 1.0.1 - 2021-05-25 */ \n /**\n *  <p>p5.sound extends p5 with <a href=\"http://caniuse.com/audio-api\"\n *  target=\"_blank\">Web Audio</a> functionality including audio input,\n *  playback, analysis and synthesis.\n *  </p>\n *  <ul>\n *  <li><a href=\"#/p5.SoundFile\"><b>p5.SoundFile</b></a>: Load and play sound files.</li>\n *  <li><a href=\"#/p5.Amplitude\"><b>p5.Amplitude</b></a>: Get the current volume of a sound.</li>\n *  <li><a href=\"#/p5.AudioIn\"><b>p5.AudioIn</b></a>: Get sound from an input source, typically\n *    a computer microphone.</li>\n *  <li><a href=\"#/p5.FFT\"><b>p5.FFT</b></a>: Analyze the frequency of sound. Returns\n *    results from the frequency spectrum or time domain (waveform).</li>\n *  <li><a href=\"#/p5.Oscillator\"><b>p5.Oscillator</b></a>: Generate Sine,\n *    Triangle, Square and Sawtooth waveforms. Base class of\n *    <li><a href=\"#/p5.Noise\">p5.Noise</a> and <a href=\"#/p5.Pulse\">p5.Pulse</a>.\n *    </li>\n *  <li>\n *    <a href=\"#/p5.MonoSynth\">p5.MonoSynth</a> and <a href=\"#/p5.PolySynth\">p5.PolySynth</a>: Play musical notes\n *  </li>\n *  <li><a href=\"#/p5.Envelope\"><b>p5.Envelope</b></a>: An Envelope is a series\n *    of fades over time. Often used to control an object's\n *    output gain level as an \"ADSR Envelope\" (Attack, Decay,\n *    Sustain, Release). Can also modulate other parameters.</li>\n *  <li><a href=\"#/p5.Delay\"><b>p5.Delay</b></a>: A delay effect with\n *    parameters for feedback, delayTime, and lowpass filter.</li>\n *  <li><a href=\"#/p5.Filter\"><b>p5.Filter</b></a>: Filter the frequency range of a\n *    sound.\n *  </li>\n *  <li><a href=\"#/p5.Reverb\"><b>p5.Reverb</b></a>: Add reverb to a sound by specifying\n *    duration and decay. </li>\n *  <b><li><a href=\"#/p5.Convolver\">p5.Convolver</a>:</b> Extends\n *  <a href=\"#/p5.Reverb\">p5.Reverb</a> to simulate the sound of real\n *    physical spaces through convolution.</li>\n *  <b><li><a href=\"#/p5.SoundRecorder\">p5.SoundRecorder</a></b>: Record sound for playback\n *    / save the .wav file.\n *  <b><li><a href=\"#/p5.SoundLoop\">p5.SoundLoop</a>, <a href=\"#/p5.Phrase\">p5.Phrase</a></b>, <b><a href=\"#/p5.Part\">p5.Part</a></b> and\n *  <b><a href=\"#/p5.Score\">p5.Score</a></b>: Compose musical sequences.\n *  </li>\n *  <li><a href=\"#/p5/userStartAudio\">userStartAudio</a>: Enable audio in a\n *  browser- and user-friendly way.</a>\n *  <p>p5.sound is on <a href=\"https://github.com/processing/p5.js-sound/\">GitHub</a>.\n *  Download the latest version\n *  <a href=\"https://github.com/processing/p5.js-sound/blob/master/lib/p5.sound.js\">here</a>.</p>\n *\n *  @module p5.sound\n *  @submodule p5.sound\n *  @for p5.sound\n *  @main\n */\n\n/**\n *  p5.sound \n *  https://p5js.org/reference/#/libraries/p5.sound\n *\n *  From the Processing Foundation and contributors\n *  https://github.com/processing/p5.js-sound/graphs/contributors\n *\n *  MIT License (MIT)\n *  https://github.com/processing/p5.js-sound/blob/master/LICENSE\n *\n *  Some of the many audio libraries & resources that inspire p5.sound:\n *   - TONE.js (c) Yotam Mann. Licensed under The MIT License (MIT). https://github.com/TONEnoTONE/Tone.js\n *   - buzz.js (c) Jay Salvat. Licensed under The MIT License (MIT). http://buzz.jaysalvat.com/\n *   - Boris Smus Web Audio API book, 2013. Licensed under the Apache License http://www.apache.org/licenses/LICENSE-2.0\n *   - wavesurfer.js https://github.com/katspaugh/wavesurfer.js\n *   - Web Audio Components by Jordan Santell https://github.com/web-audio-components\n *   - Wilm Thoben's Sound library for Processing https://github.com/processing/processing/tree/master/java/libraries/sound\n *\n *   Web Audio API: http://w3.org/TR/webaudio/\n */\n\n (function(modules) { \n \tvar installedModules = {};\n \tfunction __webpack_require__(moduleId) {\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\tmodule.l = true;\n \t\treturn module.exports;\n \t}\n \t__webpack_require__.m = modules;\n \t__webpack_require__.c = installedModules;\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n \t__webpack_require__.p = \"\";\n \treturn __webpack_require__(__webpack_require__.s = 40);\n })\n ([\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = (function(){\"use strict\";function a(t,e){this.isUndef(t)||1===t?this.input=this.context.createGain():1<t&&(this.input=new Array(t)),this.isUndef(e)||1===e?this.output=this.context.createGain():1<e&&(this.output=new Array(t))}var e;return a.prototype.set=function(t,e,n){if(this.isObject(t))n=e;else if(this.isString(t)){var o={};o[t]=e,t=o}t:for(var i in t){e=t[i];var r=this;if(-1!==i.indexOf(\".\")){for(var s=i.split(\".\"),u=0;u<s.length-1;u++)if((r=r[s[u]])instanceof a){s.splice(0,u+1);var p=s.join(\".\");r.set(p,e);continue t}i=s[s.length-1]}var c=r[i];this.isUndef(c)||(a.Signal&&c instanceof a.Signal||a.Param&&c instanceof a.Param?c.value!==e&&(this.isUndef(n)?c.value=e:c.rampTo(e,n)):c instanceof AudioParam?c.value!==e&&(c.value=e):c instanceof a?c.set(e):c!==e&&(r[i]=e))}return this},a.prototype.get=function(t){this.isUndef(t)?t=this._collectDefaults(this.constructor):this.isString(t)&&(t=[t]);for(var e={},n=0;n<t.length;n++){var o=t[n],i=this,r=e;if(-1!==o.indexOf(\".\")){for(var s=o.split(\".\"),u=0;u<s.length-1;u++){var p=s[u];r[p]=r[p]||{},r=r[p],i=i[p]}o=s[s.length-1]}var c=i[o];this.isObject(t[o])?r[o]=c.get():a.Signal&&c instanceof a.Signal?r[o]=c.value:a.Param&&c instanceof a.Param?r[o]=c.value:c instanceof AudioParam?r[o]=c.value:c instanceof a?r[o]=c.get():this.isFunction(c)||this.isUndef(c)||(r[o]=c)}return e},a.prototype._collectDefaults=function(t){var e=[];if(this.isUndef(t.defaults)||(e=Object.keys(t.defaults)),!this.isUndef(t._super))for(var n=this._collectDefaults(t._super),o=0;o<n.length;o++)-1===e.indexOf(n[o])&&e.push(n[o]);return e},a.prototype.toString=function(){for(var t in a){var e=t[0].match(/^[A-Z]$/),n=a[t]===this.constructor;if(this.isFunction(a[t])&&e&&n)return t}return\"Tone\"},Object.defineProperty(a.prototype,\"numberOfInputs\",{get:function(){return this.input?this.isArray(this.input)?this.input.length:1:0}}),Object.defineProperty(a.prototype,\"numberOfOutputs\",{get:function(){return this.output?this.isArray(this.output)?this.output.length:1:0}}),a.prototype.dispose=function(){return this.isUndef(this.input)||(this.input instanceof AudioNode&&this.input.disconnect(),this.input=null),this.isUndef(this.output)||(this.output instanceof AudioNode&&this.output.disconnect(),this.output=null),this},a.prototype.connect=function(t,e,n){return Array.isArray(this.output)?(e=this.defaultArg(e,0),this.output[e].connect(t,0,n)):this.output.connect(t,e,n),this},a.prototype.disconnect=function(t,e,n){this.isArray(this.output)?this.isNumber(t)?this.output[t].disconnect():(e=this.defaultArg(e,0),this.output[e].disconnect(t,0,n)):this.output.disconnect.apply(this.output,arguments)},a.prototype.connectSeries=function(){if(1<arguments.length)for(var t=arguments[0],e=1;e<arguments.length;e++){var n=arguments[e];t.connect(n),t=n}return this},a.prototype.chain=function(){if(0<arguments.length)for(var t=this,e=0;e<arguments.length;e++){var n=arguments[e];t.connect(n),t=n}return this},a.prototype.fan=function(){if(0<arguments.length)for(var t=0;t<arguments.length;t++)this.connect(arguments[t]);return this},AudioNode.prototype.chain=a.prototype.chain,AudioNode.prototype.fan=a.prototype.fan,a.prototype.defaultArg=function(t,e){if(this.isObject(t)&&this.isObject(e)){var n={};for(var o in t)n[o]=this.defaultArg(e[o],t[o]);for(var i in e)n[i]=this.defaultArg(t[i],e[i]);return n}return this.isUndef(t)?e:t},a.prototype.optionsObject=function(t,e,n){var o={};if(1===t.length&&this.isObject(t[0]))o=t[0];else for(var i=0;i<e.length;i++)o[e[i]]=t[i];return this.isUndef(n)?o:this.defaultArg(o,n)},a.prototype.isUndef=function(t){return void 0===t},a.prototype.isFunction=function(t){return\"function\"==typeof t},a.prototype.isNumber=function(t){return\"number\"==typeof t},a.prototype.isObject=function(t){return\"[object Object]\"===Object.prototype.toString.call(t)&&t.constructor===Object},a.prototype.isBoolean=function(t){return\"boolean\"==typeof t},a.prototype.isArray=function(t){return Array.isArray(t)},a.prototype.isString=function(t){return\"string\"==typeof t},a.noOp=function(){},a.prototype._readOnly=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._readOnly(t[e]);else Object.defineProperty(this,t,{writable:!1,enumerable:!0})},a.prototype._writable=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._writable(t[e]);else Object.defineProperty(this,t,{writable:!0})},a.State={Started:\"started\",Stopped:\"stopped\",Paused:\"paused\"},a.prototype.equalPowerScale=function(t){var e=.5*Math.PI;return Math.sin(t*e)},a.prototype.dbToGain=function(t){return Math.pow(2,t/6)},a.prototype.gainToDb=function(t){return Math.log(t)/Math.LN10*20},a.prototype.intervalToFrequencyRatio=function(t){return Math.pow(2,t/12)},a.prototype.now=function(){return a.context.now()},a.now=function(){return a.context.now()},a.extend=function(t,e){function n(){}a.prototype.isUndef(e)&&(e=a),n.prototype=e.prototype,t.prototype=new n,(t.prototype.constructor=t)._super=e},Object.defineProperty(a,\"context\",{get:function(){return e},set:function(t){e=a.Context&&t instanceof a.Context?t:new a.Context(t),a.Context&&a.Context.emit(\"init\",e)}}),Object.defineProperty(a.prototype,\"context\",{get:function(){return a.context}}),a.setContext=function(t){a.context=t},Object.defineProperty(a.prototype,\"blockTime\",{get:function(){return 128/this.context.sampleRate}}),Object.defineProperty(a.prototype,\"sampleTime\",{get:function(){return 1/this.context.sampleRate}}),Object.defineProperty(a,\"supported\",{get:function(){var t=window.hasOwnProperty(\"AudioContext\")||window.hasOwnProperty(\"webkitAudioContext\"),e=window.hasOwnProperty(\"Promise\"),n=window.hasOwnProperty(\"Worker\");return t&&e&&n}}),a.version=\"r10\",window.TONE_SILENCE_VERSION_LOGGING||console.log(\"%c * Tone.js \"+a.version+\" * \",\"background: #000; color: #fff\"),a}).call(exports, __webpack_require__, exports, module),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(2),__webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(i){\"use strict\";return i.Multiply=function(t){this.createInsOuts(2,0),this._mult=this.input[0]=this.output=new i.Gain,this._param=this.input[1]=this.output.gain,this._param.value=this.defaultArg(t,0)},i.extend(i.Multiply,i.Signal),i.Multiply.prototype.dispose=function(){return i.prototype.dispose.call(this),this._mult.dispose(),this._mult=null,this._param=null,this},i.Multiply}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(6),__webpack_require__(9),__webpack_require__(18),__webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(n){\"use strict\";return n.Signal=function(){var t=this.optionsObject(arguments,[\"value\",\"units\"],n.Signal.defaults);this.output=this._gain=this.context.createGain(),t.param=this._gain.gain,n.Param.call(this,t),this.input=this._param=this._gain.gain,this.context.getConstant(1).chain(this._gain)},n.extend(n.Signal,n.Param),n.Signal.defaults={value:0,units:n.Type.Default,convert:!0},n.Signal.prototype.connect=n.SignalBase.prototype.connect,n.Signal.prototype.dispose=function(){return n.Param.prototype.dispose.call(this),this._param=null,this._gain.disconnect(),this._gain=null,this},n.Signal}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n(function(global) { __webpack_require__.d(__webpack_exports__, \"b\", function() { return getAudioContext; });\n __webpack_require__.d(__webpack_exports__, \"c\", function() { return userStartAudio; });\n var startaudiocontext__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(22);\n var startaudiocontext__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(startaudiocontext__WEBPACK_IMPORTED_MODULE_0__);\n var Tone_core_Tone__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n var Tone_core_Tone__WEBPACK_IMPORTED_MODULE_1___default = __webpack_require__.n(Tone_core_Tone__WEBPACK_IMPORTED_MODULE_1__);\n var Tone_core_Context__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12);\n var Tone_core_Context__WEBPACK_IMPORTED_MODULE_2___default = __webpack_require__.n(Tone_core_Context__WEBPACK_IMPORTED_MODULE_2__);\nglobal.TONE_SILENCE_VERSION_LOGGING = true;\n\n\n\nvar audiocontext = new window.AudioContext(); \n\nTone_core_Tone__WEBPACK_IMPORTED_MODULE_1___default.a.setContext(audiocontext);\n/**\n * <p>Returns the Audio Context for this sketch. Useful for users\n * who would like to dig deeper into the <a target='_blank' href=\n * 'http://webaudio.github.io/web-audio-api/'>Web Audio API\n * </a>.</p>\n *\n * <p>Some browsers require users to startAudioContext\n * with a user gesture, such as touchStarted in the example below.</p>\n *\n * @for p5\n * @method getAudioContext\n * @return {Object}    AudioContext for this sketch\n * @example\n * <div><code>\n *  function draw() {\n *    background(255);\n *    textAlign(CENTER);\n *\n *    if (getAudioContext().state !== 'running') {\n *      text('click to start audio', width/2, height/2);\n *    } else {\n *      text('audio is enabled', width/2, height/2);\n *    }\n *  }\n *\n *  function touchStarted() {\n *    if (getAudioContext().state !== 'running') {\n *      getAudioContext().resume();\n *    }\n *    var synth = new p5.MonoSynth();\n *    synth.play('A4', 0.5, 0, 0.2);\n *  }\n *\n * </div></code>\n */\n\nfunction getAudioContext() {\n  return audiocontext;\n}\n/**\n *  <p>It is not only a good practice to give users control over starting\n *  audio. This policy is enforced by many web browsers, including iOS and\n *  <a href=\"https://goo.gl/7K7WLu\" title=\"Google Chrome's autoplay\n *  policy\">Google Chrome</a>, which create the Web Audio API's\n *  <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/AudioContext\"\n *  title=\"Audio Context @ MDN\">Audio Context</a>\n *  in a suspended state.</p>\n *\n *  <p>In these browser-specific policies, sound will not play until a user\n *  interaction event (i.e. <code>mousePressed()</code>) explicitly resumes\n *  the AudioContext, or starts an audio node. This can be accomplished by\n *  calling <code>start()</code> on a <code>p5.Oscillator</code>,\n *  <code> play()</code> on a <code>p5.SoundFile</code>, or simply\n *  <code>userStartAudio()</code>.</p>\n *\n *  <p><code>userStartAudio()</code> starts the AudioContext on a user\n *  gesture. The default behavior will enable audio on any\n *  mouseUp or touchEnd event. It can also be placed in a specific\n *  interaction function, such as <code>mousePressed()</code> as in the\n *  example below. This method utilizes\n *  <a href=\"https://github.com/tambien/StartAudioContext\">StartAudioContext\n *  </a>, a library by Yotam Mann (MIT Licence, 2016).</p>\n *  @param  {Element|Array}   [element(s)] This argument can be an Element,\n *                                Selector String, NodeList, p5.Element,\n *                                jQuery Element, or an Array of any of those.\n *  @param  {Function} [callback] Callback to invoke when the AudioContext\n *                                has started\n *  @return {Promise}            Returns a Promise that resolves when\n *                                       the AudioContext state is 'running'\n *  @method userStartAudio\n *  @for p5\n *  @example\n *  <div><code>\n *  function setup() {\n *    // mimics the autoplay policy\n *    getAudioContext().suspend();\n *\n *    let mySynth = new p5.MonoSynth();\n *\n *    // This won't play until the context has resumed\n *    mySynth.play('A6');\n *  }\n *  function draw() {\n *    background(220);\n *    textAlign(CENTER, CENTER);\n *    text(getAudioContext().state, width/2, height/2);\n *  }\n *  function mousePressed() {\n *    userStartAudio();\n *  }\n *  </code></div>\n */\n\nfunction userStartAudio(elements, callback) {\n  var elt = elements;\n\n  if (elements instanceof p5.Element) {\n    elt = elements.elt;\n  } else if (elements instanceof Array && elements[0] instanceof p5.Element) {\n    elt = elements.map(function (e) {\n      return e.elt;\n    });\n  }\n\n  return startaudiocontext__WEBPACK_IMPORTED_MODULE_0___default()(audiocontext, elt, callback);\n}\n __webpack_exports__[\"a\"] = (audiocontext);\n}.call(this, __webpack_require__(26)))\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(2),__webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(i){\"use strict\";return i.Add=function(t){this.createInsOuts(2,0),this._sum=this.input[0]=this.input[1]=this.output=new i.Gain,this._param=this.input[1]=new i.Signal(t),this._param.connect(this._sum)},i.extend(i.Add,i.Signal),i.Add.prototype.dispose=function(){return i.prototype.dispose.call(this),this._sum.dispose(),this._sum=null,this._param.dispose(),this._param=null,this},i.Add}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports) {\n\nmodule.exports = {\n  recorderProcessor: 'recorder-processor',\n  soundFileProcessor: 'sound-file-processor',\n  amplitudeProcessor: 'amplitude-processor'\n};\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e){\"use strict\";return e.WaveShaper=function(e,t){this._shaper=this.input=this.output=this.context.createWaveShaper(),this._curve=null,Array.isArray(e)?this.curve=e:isFinite(e)||this.isUndef(e)?this._curve=new Float32Array(this.defaultArg(e,1024)):this.isFunction(e)&&(this._curve=new Float32Array(this.defaultArg(t,1024)),this.setMap(e))},e.extend(e.WaveShaper,e.SignalBase),e.WaveShaper.prototype.setMap=function(e){for(var t=0,r=this._curve.length;t<r;t++){var s=t/(r-1)*2-1;this._curve[t]=e(s,t)}return this._shaper.curve=this._curve,this},Object.defineProperty(e.WaveShaper.prototype,\"curve\",{get:function(){return this._shaper.curve},set:function(e){this._curve=new Float32Array(e),this._shaper.curve=this._curve}}),Object.defineProperty(e.WaveShaper.prototype,\"oversample\",{get:function(){return this._shaper.oversample},set:function(e){if(-1===[\"none\",\"2x\",\"4x\"].indexOf(e))throw new RangeError(\"Tone.WaveShaper: oversampling must be either 'none', '2x', or '4x'\");this._shaper.oversample=e}}),e.WaveShaper.prototype.dispose=function(){return e.prototype.dispose.call(this),this._shaper.disconnect(),this._shaper=null,this._curve=null,this},e.WaveShaper}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(2),__webpack_require__(19)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(o){\"use strict\";return o.TimelineSignal=function(){var e=this.optionsObject(arguments,[\"value\",\"units\"],o.Signal.defaults);this._events=new o.Timeline(10),o.Signal.apply(this,e),e.param=this._param,o.Param.call(this,e),this._initial=this._fromUnits(this._param.value)},o.extend(o.TimelineSignal,o.Param),o.TimelineSignal.Type={Linear:\"linear\",Exponential:\"exponential\",Target:\"target\",Curve:\"curve\",Set:\"set\"},Object.defineProperty(o.TimelineSignal.prototype,\"value\",{get:function(){var e=this.now(),t=this.getValueAtTime(e);return this._toUnits(t)},set:function(e){var t=this._fromUnits(e);this._initial=t,this.cancelScheduledValues(),this._param.value=t}}),o.TimelineSignal.prototype.setValueAtTime=function(e,t){return e=this._fromUnits(e),t=this.toSeconds(t),this._events.add({type:o.TimelineSignal.Type.Set,value:e,time:t}),this._param.setValueAtTime(e,t),this},o.TimelineSignal.prototype.linearRampToValueAtTime=function(e,t){return e=this._fromUnits(e),t=this.toSeconds(t),this._events.add({type:o.TimelineSignal.Type.Linear,value:e,time:t}),this._param.linearRampToValueAtTime(e,t),this},o.TimelineSignal.prototype.exponentialRampToValueAtTime=function(e,t){t=this.toSeconds(t);var i=this._searchBefore(t);i&&0===i.value&&this.setValueAtTime(this._minOutput,i.time),e=this._fromUnits(e);var n=Math.max(e,this._minOutput);return this._events.add({type:o.TimelineSignal.Type.Exponential,value:n,time:t}),e<this._minOutput?(this._param.exponentialRampToValueAtTime(this._minOutput,t-this.sampleTime),this.setValueAtTime(0,t)):this._param.exponentialRampToValueAtTime(e,t),this},o.TimelineSignal.prototype.setTargetAtTime=function(e,t,i){return e=this._fromUnits(e),e=Math.max(this._minOutput,e),i=Math.max(this._minOutput,i),t=this.toSeconds(t),this._events.add({type:o.TimelineSignal.Type.Target,value:e,time:t,constant:i}),this._param.setTargetAtTime(e,t,i),this},o.TimelineSignal.prototype.setValueCurveAtTime=function(e,t,i,n){n=this.defaultArg(n,1);for(var a=new Array(e.length),l=0;l<a.length;l++)a[l]=this._fromUnits(e[l])*n;t=this.toSeconds(t),i=this.toSeconds(i),this._events.add({type:o.TimelineSignal.Type.Curve,value:a,time:t,duration:i}),this._param.setValueAtTime(a[0],t);for(var s=1;s<a.length;s++){var r=t+s/(a.length-1)*i;this._param.linearRampToValueAtTime(a[s],r)}return this},o.TimelineSignal.prototype.cancelScheduledValues=function(e){return e=this.toSeconds(e),this._events.cancel(e),this._param.cancelScheduledValues(e),this},o.TimelineSignal.prototype.setRampPoint=function(e){e=this.toSeconds(e);var t=this._toUnits(this.getValueAtTime(e)),i=this._searchBefore(e);if(i&&i.time===e)this.cancelScheduledValues(e+this.sampleTime);else if(i&&i.type===o.TimelineSignal.Type.Curve&&i.time+i.duration>e)this.cancelScheduledValues(e),this.linearRampToValueAtTime(t,e);else{var n=this._searchAfter(e);n&&(this.cancelScheduledValues(e),n.type===o.TimelineSignal.Type.Linear?this.linearRampToValueAtTime(t,e):n.type===o.TimelineSignal.Type.Exponential&&this.exponentialRampToValueAtTime(t,e)),this.setValueAtTime(t,e)}return this},o.TimelineSignal.prototype.linearRampToValueBetween=function(e,t,i){return this.setRampPoint(t),this.linearRampToValueAtTime(e,i),this},o.TimelineSignal.prototype.exponentialRampToValueBetween=function(e,t,i){return this.setRampPoint(t),this.exponentialRampToValueAtTime(e,i),this},o.TimelineSignal.prototype._searchBefore=function(e){return this._events.get(e)},o.TimelineSignal.prototype._searchAfter=function(e){return this._events.getAfter(e)},o.TimelineSignal.prototype.getValueAtTime=function(e){e=this.toSeconds(e);var t=this._searchAfter(e),i=this._searchBefore(e),n=this._initial;if(null===i)n=this._initial;else if(i.type===o.TimelineSignal.Type.Target){var a,l=this._events.getBefore(i.time);a=null===l?this._initial:l.value,n=this._exponentialApproach(i.time,a,i.value,i.constant,e)}else n=i.type===o.TimelineSignal.Type.Curve?this._curveInterpolate(i.time,i.value,i.duration,e):null===t?i.value:t.type===o.TimelineSignal.Type.Linear?this._linearInterpolate(i.time,i.value,t.time,t.value,e):t.type===o.TimelineSignal.Type.Exponential?this._exponentialInterpolate(i.time,i.value,t.time,t.value,e):i.value;return n},o.TimelineSignal.prototype.connect=o.SignalBase.prototype.connect,o.TimelineSignal.prototype._exponentialApproach=function(e,t,i,n,a){return i+(t-i)*Math.exp(-(a-e)/n)},o.TimelineSignal.prototype._linearInterpolate=function(e,t,i,n,a){return t+(a-e)/(i-e)*(n-t)},o.TimelineSignal.prototype._exponentialInterpolate=function(e,t,i,n,a){return(t=Math.max(this._minOutput,t))*Math.pow(n/t,(a-e)/(i-e))},o.TimelineSignal.prototype._curveInterpolate=function(e,t,i,n){var a=t.length;if(e+i<=n)return t[a-1];if(n<=e)return t[0];var l=(n-e)/i,s=Math.floor((a-1)*l),r=Math.ceil((a-1)*l),o=t[s],p=t[r];return r===s?o:this._linearInterpolate(s,o,r,p,l*(a-1))},o.TimelineSignal.prototype.dispose=function(){o.Signal.prototype.dispose.call(this),o.Param.prototype.dispose.call(this),this._events.dispose(),this._events=null},o.TimelineSignal}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(4),__webpack_require__(1),__webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(i){\"use strict\";return i.Scale=function(t,e){this._outputMin=this.defaultArg(t,0),this._outputMax=this.defaultArg(e,1),this._scale=this.input=new i.Multiply(1),this._add=this.output=new i.Add(0),this._scale.connect(this._add),this._setRange()},i.extend(i.Scale,i.SignalBase),Object.defineProperty(i.Scale.prototype,\"min\",{get:function(){return this._outputMin},set:function(t){this._outputMin=t,this._setRange()}}),Object.defineProperty(i.Scale.prototype,\"max\",{get:function(){return this._outputMax},set:function(t){this._outputMax=t,this._setRange()}}),i.Scale.prototype._setRange=function(){this._add.value=this._outputMin,this._scale.value=this._outputMax-this._outputMin},i.Scale.prototype.dispose=function(){return i.prototype.dispose.call(this),this._add.dispose(),this._add=null,this._scale.dispose(),this._scale=null,this},i.Scale}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(16),__webpack_require__(30),__webpack_require__(31),__webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t){return t.Type={Default:\"number\",Time:\"time\",Frequency:\"frequency\",TransportTime:\"transportTime\",Ticks:\"ticks\",NormalRange:\"normalRange\",AudioRange:\"audioRange\",Decibels:\"db\",Interval:\"interval\",BPM:\"bpm\",Positive:\"positive\",Cents:\"cents\",Degrees:\"degrees\",MIDI:\"midi\",BarsBeatsSixteenths:\"barsBeatsSixteenths\",Samples:\"samples\",Hertz:\"hertz\",Note:\"note\",Milliseconds:\"milliseconds\",Seconds:\"seconds\",Notation:\"notation\"},t.prototype.toSeconds=function(e){return this.isNumber(e)?e:this.isUndef(e)?this.now():this.isString(e)?new t.Time(e).toSeconds():e instanceof t.TimeBase?e.toSeconds():void 0},t.prototype.toFrequency=function(e){return this.isNumber(e)?e:this.isString(e)||this.isUndef(e)?new t.Frequency(e).valueOf():e instanceof t.TimeBase?e.toFrequency():void 0},t.prototype.toTicks=function(e){return this.isNumber(e)||this.isString(e)?new t.TransportTime(e).toTicks():this.isUndef(e)?t.Transport.ticks:e instanceof t.TimeBase?e.toTicks():void 0},t}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(18),__webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(i){\"use strict\";return window.GainNode&&!AudioContext.prototype.createGain&&(AudioContext.prototype.createGain=AudioContext.prototype.createGainNode),i.Gain=function(){var t=this.optionsObject(arguments,[\"gain\",\"units\"],i.Gain.defaults);this.input=this.output=this._gainNode=this.context.createGain(),this.gain=new i.Param({param:this._gainNode.gain,units:t.units,value:t.gain,convert:t.convert}),this._readOnly(\"gain\")},i.extend(i.Gain),i.Gain.defaults={gain:1,convert:!0},i.Gain.prototype.dispose=function(){i.Param.prototype.dispose.call(this),this._gainNode.disconnect(),this._gainNode=null,this._writable(\"gain\"),this.gain.dispose(),this.gain=null},i.prototype.createInsOuts=function(t,n){1===t?this.input=new i.Gain:1<t&&(this.input=new Array(t)),1===n?this.output=new i.Gain:1<n&&(this.output=new Array(t))},i.Gain}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(7),__webpack_require__(39),__webpack_require__(14),__webpack_require__(12)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(o){\"use strict\";return o.Clock=function(){o.Emitter.call(this);var t=this.optionsObject(arguments,[\"callback\",\"frequency\"],o.Clock.defaults);this.callback=t.callback,this._nextTick=0,this._lastState=o.State.Stopped,this.frequency=new o.TimelineSignal(t.frequency,o.Type.Frequency),this._readOnly(\"frequency\"),this.ticks=0,this._state=new o.TimelineState(o.State.Stopped),this._boundLoop=this._loop.bind(this),this.context.on(\"tick\",this._boundLoop)},o.extend(o.Clock,o.Emitter),o.Clock.defaults={callback:o.noOp,frequency:1,lookAhead:\"auto\"},Object.defineProperty(o.Clock.prototype,\"state\",{get:function(){return this._state.getValueAtTime(this.now())}}),o.Clock.prototype.start=function(t,e){return t=this.toSeconds(t),this._state.getValueAtTime(t)!==o.State.Started&&this._state.add({state:o.State.Started,time:t,offset:e}),this},o.Clock.prototype.stop=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._state.setStateAtTime(o.State.Stopped,t),this},o.Clock.prototype.pause=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)===o.State.Started&&this._state.setStateAtTime(o.State.Paused,t),this},o.Clock.prototype._loop=function(){for(var t=this.now()+this.context.lookAhead+this.context.updateInterval+2*this.context.lag;t>this._nextTick&&this._state;){var e=this._state.getValueAtTime(this._nextTick);if(e!==this._lastState){this._lastState=e;var i=this._state.get(this._nextTick);e===o.State.Started?(this._nextTick=i.time,this.isUndef(i.offset)||(this.ticks=i.offset),this.emit(\"start\",i.time,this.ticks)):e===o.State.Stopped?(this.ticks=0,this.emit(\"stop\",i.time)):e===o.State.Paused&&this.emit(\"pause\",i.time)}var s=this._nextTick;this.frequency&&(this._nextTick+=1/this.frequency.getValueAtTime(this._nextTick),e===o.State.Started&&(this.callback(s),this.ticks++))}},o.Clock.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},o.Clock.prototype.dispose=function(){o.Emitter.prototype.dispose.call(this),this.context.off(\"tick\",this._boundLoop),this._writable(\"frequency\"),this.frequency.dispose(),this.frequency=null,this._boundLoop=null,this._nextTick=1/0,this.callback=null,this._state.dispose(),this._state=null},o.Clock}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(14)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(o){function t(e,t,n){if(e.input)Array.isArray(e.input)?(o.prototype.isUndef(n)&&(n=0),this.connect(e.input[n])):this.connect(e.input,t,n);else try{e instanceof AudioNode?i.call(this,e,t,n):i.call(this,e,t)}catch(t){throw new Error(\"error connecting to node: \"+e+\"\\n\"+t)}}var i,r;return!window.hasOwnProperty(\"AudioContext\")&&window.hasOwnProperty(\"webkitAudioContext\")&&(window.AudioContext=window.webkitAudioContext),o.Context=function(t){for(var e in o.Emitter.call(this),t=t||new window.AudioContext,this._context=t,this._context)this._defineProperty(this._context,e);this._latencyHint=\"interactive\",this._lookAhead=.1,this._updateInterval=this._lookAhead/3,this._computedUpdateInterval=0,this._worker=this._createWorker(),this._constants={}},o.extend(o.Context,o.Emitter),o.Emitter.mixin(o.Context),o.Context.prototype._defineProperty=function(e,n){this.isUndef(this[n])&&Object.defineProperty(this,n,{get:function(){return\"function\"==typeof e[n]?e[n].bind(e):e[n]},set:function(t){e[n]=t}})},o.Context.prototype.now=function(){return this._context.currentTime},o.Context.prototype._createWorker=function(){window.URL=window.URL||window.webkitURL;var t=new Blob([\"var timeoutTime = \"+(1e3*this._updateInterval).toFixed(1)+\";self.onmessage = function(msg){\\ttimeoutTime = parseInt(msg.data);};function tick(){\\tsetTimeout(tick, timeoutTime);\\tself.postMessage('tick');}tick();\"]),e=URL.createObjectURL(t),n=new Worker(e);return n.addEventListener(\"message\",function(){this.emit(\"tick\")}.bind(this)),n.addEventListener(\"message\",function(){var t=this.now();if(this.isNumber(this._lastUpdate)){var e=t-this._lastUpdate;this._computedUpdateInterval=Math.max(e,.97*this._computedUpdateInterval)}this._lastUpdate=t}.bind(this)),n},o.Context.prototype.getConstant=function(t){if(this._constants[t])return this._constants[t];for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),o=0;o<n.length;o++)n[o]=t;var i=this._context.createBufferSource();return i.channelCount=1,i.channelCountMode=\"explicit\",i.buffer=e,i.loop=!0,i.start(0),this._constants[t]=i},Object.defineProperty(o.Context.prototype,\"lag\",{get:function(){var t=this._computedUpdateInterval-this._updateInterval;return t=Math.max(t,0)}}),Object.defineProperty(o.Context.prototype,\"lookAhead\",{get:function(){return this._lookAhead},set:function(t){this._lookAhead=t}}),Object.defineProperty(o.Context.prototype,\"updateInterval\",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,o.prototype.blockTime),this._worker.postMessage(Math.max(1e3*t,1))}}),Object.defineProperty(o.Context.prototype,\"latencyHint\",{get:function(){return this._latencyHint},set:function(t){var e=t;if(this._latencyHint=t,this.isString(t))switch(t){case\"interactive\":e=.1,this._context.latencyHint=t;break;case\"playback\":e=.8,this._context.latencyHint=t;break;case\"balanced\":e=.25,this._context.latencyHint=t;break;case\"fastest\":e=.01}this.lookAhead=e,this.updateInterval=e/3}}),o.supported?(i=AudioNode.prototype.connect,r=AudioNode.prototype.disconnect,AudioNode.prototype.connect!==t&&(AudioNode.prototype.connect=t,AudioNode.prototype.disconnect=function(e,t,n){if(e&&e.input&&Array.isArray(e.input))o.prototype.isUndef(n)&&(n=0),this.disconnect(e.input[n],t,n);else if(e&&e.input)this.disconnect(e.input,t,n);else try{r.apply(this,arguments)}catch(t){throw new Error(\"error disconnecting node: \"+e+\"\\n\"+t)}}),o.context=new o.Context):console.warn(\"This browser does not support Tone.js\"),o.Context}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(4),__webpack_require__(20),__webpack_require__(2),__webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(n){\"use strict\";return n.Subtract=function(t){this.createInsOuts(2,0),this._sum=this.input[0]=this.output=new n.Gain,this._neg=new n.Negate,this._param=this.input[1]=new n.Signal(t),this._param.chain(this._neg,this._sum)},n.extend(n.Subtract,n.Signal),n.Subtract.prototype.dispose=function(){return n.prototype.dispose.call(this),this._neg.dispose(),this._neg=null,this._sum.disconnect(),this._sum=null,this._param.dispose(),this._param=null,this},n.Subtract}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(o){\"use strict\";return o.Emitter=function(){this._events={}},o.extend(o.Emitter),o.Emitter.prototype.on=function(t,e){for(var i=t.split(/\\W+/),r=0;r<i.length;r++){var n=i[r];this._events.hasOwnProperty(n)||(this._events[n]=[]),this._events[n].push(e)}return this},o.Emitter.prototype.off=function(t,e){for(var i=t.split(/\\W+/),r=0;r<i.length;r++)if(t=i[r],this._events.hasOwnProperty(t))if(o.prototype.isUndef(e))this._events[t]=[];else for(var n=this._events[t],s=0;s<n.length;s++)n[s]===e&&n.splice(s,1);return this},o.Emitter.prototype.emit=function(t){if(this._events){var e=Array.apply(null,arguments).slice(1);if(this._events.hasOwnProperty(t))for(var i=this._events[t],r=0,n=i.length;r<n;r++)i[r].apply(this,e)}return this},o.Emitter.mixin=function(t){var e=[\"on\",\"off\",\"emit\"];t._events={};for(var i=0;i<e.length;i++){var r=e[i],n=o.Emitter.prototype[r];t[r]=n}},o.Emitter.prototype.dispose=function(){return o.prototype.dispose.call(this),this._events=null,this},o.Emitter}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(c){\"use strict\";return c.SignalBase=function(){},c.extend(c.SignalBase),c.SignalBase.prototype.connect=function(e,n,a){return c.Signal&&c.Signal===e.constructor||c.Param&&c.Param===e.constructor||c.TimelineSignal&&c.TimelineSignal===e.constructor?(e._param.cancelScheduledValues(0),e._param.value=0,e.overridden=!0):e instanceof AudioParam&&(e.cancelScheduledValues(0),e.value=0),c.prototype.connect.call(this,e,n,a),this},c.SignalBase}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(17)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(o){return o.Time=function(t,e){if(!(this instanceof o.Time))return new o.Time(t,e);this._plusNow=!1,o.TimeBase.call(this,t,e)},o.extend(o.Time,o.TimeBase),o.Time.prototype._unaryExpressions=Object.create(o.TimeBase.prototype._unaryExpressions),o.Time.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(t){return o.Transport.nextSubdivision(t())}},o.Time.prototype._unaryExpressions.now={regexp:/^\\+/,method:function(t){return this._plusNow=!0,t()}},o.Time.prototype.quantize=function(t,e){return e=this.defaultArg(e,1),this._expr=function(t,e,o){return t=t(),e=e.toSeconds(),t+(Math.round(t/e)*e-t)*o}.bind(this,this._expr,new this.constructor(t),e),this},o.Time.prototype.addNow=function(){return this._plusNow=!0,this},o.Time.prototype._defaultExpr=function(){return this._plusNow=!0,this._noOp},o.Time.prototype.copy=function(t){return o.TimeBase.prototype.copy.call(this,t),this._plusNow=t._plusNow,this},o.Time.prototype.toNotation=function(){var t=this.toSeconds(),e=this._toNotationHelper(t,[\"1m\",\"2n\",\"4n\",\"8n\",\"16n\",\"32n\",\"64n\",\"128n\"]),o=this._toNotationHelper(t,[\"1m\",\"2n\",\"2t\",\"4n\",\"4t\",\"8n\",\"8t\",\"16n\",\"16t\",\"32n\",\"32t\",\"64n\",\"64t\",\"128n\"]);return o.split(\"+\").length<e.split(\"+\").length?o:e},o.Time.prototype._toNotationHelper=function(t,e){for(var o=this._notationToUnits(e[e.length-1]),n=\"\",i=0;i<e.length;i++){var r=this._notationToUnits(e[i]),s=t/r;if(1-s%1<1e-6&&(s+=1e-6),0<(s=Math.floor(s))){if(n+=1===s?e[i]:s.toString()+\"*\"+e[i],(t-=s*r)<o)break;n+=\" + \"}}return\"\"===n&&(n=\"0\"),n},o.Time.prototype._notationToUnits=function(t){for(var e=this._primaryExpressions,o=[e.n,e.t,e.m],n=0;n<o.length;n++){var i=o[n],r=t.match(i.regexp);if(r)return i.method.call(this,r[1])}},o.Time.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.toSeconds()/t,o=Math.floor(e/this._timeSignature()),n=e%1*4;return e=Math.floor(e)%this._timeSignature(),3<(n=n.toString()).length&&(n=parseFloat(n).toFixed(3)),[o,e,n].join(\":\")},o.Time.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*o.Transport.PPQ)},o.Time.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},o.Time.prototype.toFrequency=function(){return 1/this.toSeconds()},o.Time.prototype.toSeconds=function(){return this.valueOf()},o.Time.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},o.Time.prototype.valueOf=function(){return this._expr()+(this._plusNow?this.now():0)},o.Time}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(n){return n.TimeBase=function(e,t){if(!(this instanceof n.TimeBase))return new n.TimeBase(e,t);if(this._expr=this._noOp,e instanceof n.TimeBase)this.copy(e);else if(!this.isUndef(t)||this.isNumber(e)){t=this.defaultArg(t,this._defaultUnits);var r=this._primaryExpressions[t].method;this._expr=r.bind(this,e)}else this.isString(e)?this.set(e):this.isUndef(e)&&(this._expr=this._defaultExpr())},n.extend(n.TimeBase),n.TimeBase.prototype.set=function(e){return this._expr=this._parseExprString(e),this},n.TimeBase.prototype.clone=function(){var e=new this.constructor;return e.copy(this),e},n.TimeBase.prototype.copy=function(e){var t=e._expr();return this.set(t)},n.TimeBase.prototype._primaryExpressions={n:{regexp:/^(\\d+)n/i,method:function(e){return 1===(e=parseInt(e))?this._beatsToUnits(this._timeSignature()):this._beatsToUnits(4/e)}},t:{regexp:/^(\\d+)t/i,method:function(e){return e=parseInt(e),this._beatsToUnits(8/(3*parseInt(e)))}},m:{regexp:/^(\\d+)m/i,method:function(e){return this._beatsToUnits(parseInt(e)*this._timeSignature())}},i:{regexp:/^(\\d+)i/i,method:function(e){return this._ticksToUnits(parseInt(e))}},hz:{regexp:/^(\\d+(?:\\.\\d+)?)hz/i,method:function(e){return this._frequencyToUnits(parseFloat(e))}},tr:{regexp:/^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?/,method:function(e,t,r){var n=0;return e&&\"0\"!==e&&(n+=this._beatsToUnits(this._timeSignature()*parseFloat(e))),t&&\"0\"!==t&&(n+=this._beatsToUnits(parseFloat(t))),r&&\"0\"!==r&&(n+=this._beatsToUnits(parseFloat(r)/4)),n}},s:{regexp:/^(\\d+(?:\\.\\d+)?s)/,method:function(e){return this._secondsToUnits(parseFloat(e))}},samples:{regexp:/^(\\d+)samples/,method:function(e){return parseInt(e)/this.context.sampleRate}},default:{regexp:/^(\\d+(?:\\.\\d+)?)/,method:function(e){return this._primaryExpressions[this._defaultUnits].method.call(this,e)}}},n.TimeBase.prototype._binaryExpressions={\"+\":{regexp:/^\\+/,precedence:2,method:function(e,t){return e()+t()}},\"-\":{regexp:/^\\-/,precedence:2,method:function(e,t){return e()-t()}},\"*\":{regexp:/^\\*/,precedence:1,method:function(e,t){return e()*t()}},\"/\":{regexp:/^\\//,precedence:1,method:function(e,t){return e()/t()}}},n.TimeBase.prototype._unaryExpressions={neg:{regexp:/^\\-/,method:function(e){return-e()}}},n.TimeBase.prototype._syntaxGlue={\"(\":{regexp:/^\\(/},\")\":{regexp:/^\\)/}},n.TimeBase.prototype._tokenize=function(e){for(var t=-1,r=[];0<e.length;){var n=i(e=e.trim(),this);r.push(n),e=e.substr(n.value.length)}function i(e,t){for(var r=[\"_binaryExpressions\",\"_unaryExpressions\",\"_primaryExpressions\",\"_syntaxGlue\"],n=0;n<r.length;n++){var i=t[r[n]];for(var s in i){var o=i[s],p=o.regexp,a=e.match(p);if(null!==a)return{method:o.method,precedence:o.precedence,regexp:o.regexp,value:a[0]}}}throw new SyntaxError(\"Tone.TimeBase: Unexpected token \"+e)}return{next:function(){return r[++t]},peek:function(){return r[t+1]}}},n.TimeBase.prototype._matchGroup=function(e,t,r){if(!this.isUndef(e))for(var n in t){var i=t[n];if(i.regexp.test(e.value)){if(this.isUndef(r))return i;if(i.precedence===r)return i}}return!1},n.TimeBase.prototype._parseBinary=function(e,t){var r;this.isUndef(t)&&(t=2),r=t<0?this._parseUnary(e):this._parseBinary(e,t-1);for(var n=e.peek();n&&this._matchGroup(n,this._binaryExpressions,t);)r=(n=e.next()).method.bind(this,r,this._parseBinary(e,t-1)),n=e.peek();return r},n.TimeBase.prototype._parseUnary=function(e){var t,r;t=e.peek();var n=this._matchGroup(t,this._unaryExpressions);return n?(t=e.next(),r=this._parseUnary(e),n.method.bind(this,r)):this._parsePrimary(e)},n.TimeBase.prototype._parsePrimary=function(e){var t,r;if(t=e.peek(),this.isUndef(t))throw new SyntaxError(\"Tone.TimeBase: Unexpected end of expression\");if(this._matchGroup(t,this._primaryExpressions)){var n=(t=e.next()).value.match(t.regexp);return t.method.bind(this,n[1],n[2],n[3])}if(t&&\"(\"===t.value){if(e.next(),r=this._parseBinary(e),!(t=e.next())||\")\"!==t.value)throw new SyntaxError(\"Expected )\");return r}throw new SyntaxError(\"Tone.TimeBase: Cannot process token \"+t.value)},n.TimeBase.prototype._parseExprString=function(e){this.isString(e)||(e=e.toString());var t=this._tokenize(e);return this._parseBinary(t)},n.TimeBase.prototype._noOp=function(){return 0},n.TimeBase.prototype._defaultExpr=function(){return this._noOp},n.TimeBase.prototype._defaultUnits=\"s\",n.TimeBase.prototype._frequencyToUnits=function(e){return 1/e},n.TimeBase.prototype._beatsToUnits=function(e){return 60/n.Transport.bpm.value*e},n.TimeBase.prototype._secondsToUnits=function(e){return e},n.TimeBase.prototype._ticksToUnits=function(e){return e*(this._beatsToUnits(1)/n.Transport.PPQ)},n.TimeBase.prototype._timeSignature=function(){return n.Transport.timeSignature},n.TimeBase.prototype._pushExpr=function(e,t,r){return e instanceof n.TimeBase||(e=new this.constructor(e,r)),this._expr=this._binaryExpressions[t].method.bind(this,this._expr,e._expr),this},n.TimeBase.prototype.add=function(e,t){return this._pushExpr(e,\"+\",t)},n.TimeBase.prototype.sub=function(e,t){return this._pushExpr(e,\"-\",t)},n.TimeBase.prototype.mult=function(e,t){return this._pushExpr(e,\"*\",t)},n.TimeBase.prototype.div=function(e,t){return this._pushExpr(e,\"/\",t)},n.TimeBase.prototype.valueOf=function(){return this._expr()},n.TimeBase.prototype.dispose=function(){this._expr=null},n.TimeBase}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(a){\"use strict\";return a.Param=function(){var t=this.optionsObject(arguments,[\"param\",\"units\",\"convert\"],a.Param.defaults);this._param=this.input=t.param,this.units=t.units,this.convert=t.convert,this.overridden=!1,this._lfo=null,this.isObject(t.lfo)?this.value=t.lfo:this.isUndef(t.value)||(this.value=t.value)},a.extend(a.Param),a.Param.defaults={units:a.Type.Default,convert:!0,param:void 0},Object.defineProperty(a.Param.prototype,\"value\",{get:function(){return this._toUnits(this._param.value)},set:function(t){if(this.isObject(t)){if(this.isUndef(a.LFO))throw new Error(\"Include 'Tone.LFO' to use an LFO as a Param value.\");this._lfo&&this._lfo.dispose(),this._lfo=new a.LFO(t).start(),this._lfo.connect(this.input)}else{var e=this._fromUnits(t);this._param.cancelScheduledValues(0),this._param.value=e}}}),a.Param.prototype._fromUnits=function(t){if(!this.convert&&!this.isUndef(this.convert))return t;switch(this.units){case a.Type.Time:return this.toSeconds(t);case a.Type.Frequency:return this.toFrequency(t);case a.Type.Decibels:return this.dbToGain(t);case a.Type.NormalRange:return Math.min(Math.max(t,0),1);case a.Type.AudioRange:return Math.min(Math.max(t,-1),1);case a.Type.Positive:return Math.max(t,0);default:return t}},a.Param.prototype._toUnits=function(t){if(!this.convert&&!this.isUndef(this.convert))return t;switch(this.units){case a.Type.Decibels:return this.gainToDb(t);default:return t}},a.Param.prototype._minOutput=1e-5,a.Param.prototype.setValueAtTime=function(t,e){return t=this._fromUnits(t),(e=this.toSeconds(e))<=this.now()+this.blockTime?this._param.value=t:this._param.setValueAtTime(t,e),this},a.Param.prototype.setRampPoint=function(t){t=this.defaultArg(t,this.now());var e=this._param.value;return 0===e&&(e=this._minOutput),this._param.setValueAtTime(e,t),this},a.Param.prototype.linearRampToValueAtTime=function(t,e){return t=this._fromUnits(t),this._param.linearRampToValueAtTime(t,this.toSeconds(e)),this},a.Param.prototype.exponentialRampToValueAtTime=function(t,e){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),this._param.exponentialRampToValueAtTime(t,this.toSeconds(e)),this},a.Param.prototype.exponentialRampToValue=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},a.Param.prototype.linearRampToValue=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},a.Param.prototype.setTargetAtTime=function(t,e,i){return t=this._fromUnits(t),t=Math.max(this._minOutput,t),i=Math.max(this._minOutput,i),this._param.setTargetAtTime(t,this.toSeconds(e),i),this},a.Param.prototype.setValueCurveAtTime=function(t,e,i){for(var a=0;a<t.length;a++)t[a]=this._fromUnits(t[a]);return this._param.setValueCurveAtTime(t,this.toSeconds(e),this.toSeconds(i)),this},a.Param.prototype.cancelScheduledValues=function(t){return this._param.cancelScheduledValues(this.toSeconds(t)),this},a.Param.prototype.rampTo=function(t,e,i){return e=this.defaultArg(e,0),this.units===a.Type.Frequency||this.units===a.Type.BPM||this.units===a.Type.Decibels?this.exponentialRampToValue(t,e,i):this.linearRampToValue(t,e,i),this},Object.defineProperty(a.Param.prototype,\"lfo\",{get:function(){return this._lfo}}),a.Param.prototype.dispose=function(){return a.prototype.dispose.call(this),this._param=null,this._lfo&&(this._lfo.dispose(),this._lfo=null),this},a.Param}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(i){\"use strict\";return i.Timeline=function(){var e=this.optionsObject(arguments,[\"memory\"],i.Timeline.defaults);this._timeline=[],this._toRemove=[],this._iterating=!1,this.memory=e.memory},i.extend(i.Timeline),i.Timeline.defaults={memory:1/0},Object.defineProperty(i.Timeline.prototype,\"length\",{get:function(){return this._timeline.length}}),i.Timeline.prototype.add=function(e){if(this.isUndef(e.time))throw new Error(\"Tone.Timeline: events must have a time attribute\");if(this._timeline.length){var i=this._search(e.time);this._timeline.splice(i+1,0,e)}else this._timeline.push(e);if(this.length>this.memory){var t=this.length-this.memory;this._timeline.splice(0,t)}return this},i.Timeline.prototype.remove=function(e){if(this._iterating)this._toRemove.push(e);else{var i=this._timeline.indexOf(e);-1!==i&&this._timeline.splice(i,1)}return this},i.Timeline.prototype.get=function(e){var i=this._search(e);return-1!==i?this._timeline[i]:null},i.Timeline.prototype.peek=function(){return this._timeline[0]},i.Timeline.prototype.shift=function(){return this._timeline.shift()},i.Timeline.prototype.getAfter=function(e){var i=this._search(e);return i+1<this._timeline.length?this._timeline[i+1]:null},i.Timeline.prototype.getBefore=function(e){var i=this._timeline.length;if(0<i&&this._timeline[i-1].time<e)return this._timeline[i-1];var t=this._search(e);return 0<=t-1?this._timeline[t-1]:null},i.Timeline.prototype.cancel=function(e){if(1<this._timeline.length){var i=this._search(e);if(0<=i)if(this._timeline[i].time===e){for(var t=i;0<=t&&this._timeline[t].time===e;t--)i=t;this._timeline=this._timeline.slice(0,i)}else this._timeline=this._timeline.slice(0,i+1);else this._timeline=[]}else 1===this._timeline.length&&this._timeline[0].time>=e&&(this._timeline=[]);return this},i.Timeline.prototype.cancelBefore=function(e){if(this._timeline.length){var i=this._search(e);0<=i&&(this._timeline=this._timeline.slice(i+1))}return this},i.Timeline.prototype._search=function(e){var i=0,t=this._timeline.length,n=t;if(0<t&&this._timeline[t-1].time<=e)return t-1;for(;i<n;){var r=Math.floor(i+(n-i)/2),s=this._timeline[r],h=this._timeline[r+1];if(s.time===e){for(var l=r;l<this._timeline.length;l++){this._timeline[l].time===e&&(r=l)}return r}if(s.time<e&&h.time>e)return r;s.time>e?n=r:s.time<e&&(i=r+1)}return-1},i.Timeline.prototype._iterate=function(e,i,t){this._iterating=!0,i=this.defaultArg(i,0),t=this.defaultArg(t,this._timeline.length-1);for(var n=i;n<=t;n++)e(this._timeline[n]);if(this._iterating=!1,0<this._toRemove.length){for(var r=0;r<this._toRemove.length;r++){var s=this._timeline.indexOf(this._toRemove[r]);-1!==s&&this._timeline.splice(s,1)}this._toRemove=[]}},i.Timeline.prototype.forEach=function(e){return this._iterate(e),this},i.Timeline.prototype.forEachBefore=function(e,i){var t=this._search(e);return-1!==t&&this._iterate(i,0,t),this},i.Timeline.prototype.forEachAfter=function(e,i){var t=this._search(e);return this._iterate(i,t+1),this},i.Timeline.prototype.forEachFrom=function(e,i){for(var t=this._search(e);0<=t&&this._timeline[t].time>=e;)t--;return this._iterate(i,t+1),this},i.Timeline.prototype.forEachAtTime=function(i,t){var e=this._search(i);return-1!==e&&this._iterate(function(e){e.time===i&&t(e)},0,e),this},i.Timeline.prototype.dispose=function(){i.prototype.dispose.call(this),this._timeline=null,this._toRemove=null},i.Timeline}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(1),__webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t){\"use strict\";return t.Negate=function(){this._multiply=this.input=this.output=new t.Multiply(-1)},t.extend(t.Negate,t.SignalBase),t.Negate.prototype.dispose=function(){return t.prototype.dispose.call(this),this._multiply.dispose(),this._multiply=null,this},t.Negate}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(2),__webpack_require__(1),__webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e){\"use strict\";return e.GreaterThanZero=function(){this._thresh=this.output=new e.WaveShaper(function(e){return e<=0?0:1},127),this._scale=this.input=new e.Multiply(1e4),this._scale.connect(this._thresh)},e.extend(e.GreaterThanZero,e.SignalBase),e.GreaterThanZero.prototype.dispose=function(){return e.prototype.dispose.call(this),this._scale.dispose(),this._scale=null,this._thresh.dispose(),this._thresh=null,this},e.GreaterThanZero}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!function(e,t){ true?!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (t),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?\n\t\t\t\t(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__)):undefined}(this,function(){var r=function(e,t){this._dragged=!1,this._element=e,this._bindedMove=this._moved.bind(this),this._bindedEnd=this._ended.bind(this,t),e.addEventListener(\"touchstart\",this._bindedEnd),e.addEventListener(\"touchmove\",this._bindedMove),e.addEventListener(\"touchend\",this._bindedEnd),e.addEventListener(\"mouseup\",this._bindedEnd)};function o(e){return\"running\"===e.state}return r.prototype._moved=function(e){this._dragged=!0},r.prototype._ended=function(e){this._dragged||function(e){var t=e.createBuffer(1,1,e.sampleRate),n=e.createBufferSource();n.buffer=t,n.connect(e.destination),n.start(0),e.resume&&e.resume()}(e),this._dragged=!1},r.prototype.dispose=function(){this._element.removeEventListener(\"touchstart\",this._bindedEnd),this._element.removeEventListener(\"touchmove\",this._bindedMove),this._element.removeEventListener(\"touchend\",this._bindedEnd),this._element.removeEventListener(\"mouseup\",this._bindedEnd),this._bindedMove=null,this._bindedEnd=null,this._element=null},function(t,e,n){var i=new Promise(function(e){!function(t,n){o(t)?n():function e(){o(t)?n():(requestAnimationFrame(e),t.resume&&t.resume())}()}(t,e)}),d=[];return function e(t,n,i){if(Array.isArray(t)||NodeList&&t instanceof NodeList)for(var d=0;d<t.length;d++)e(t[d],n,i);else if(\"string\"==typeof t)e(document.querySelectorAll(t),n,i);else if(t.jquery&&\"function\"==typeof t.toArray)e(t.toArray(),n,i);else if(Element&&t instanceof Element){var o=new r(t,i);n.push(o)}}(e=e||document.body,d,t),i.then(function(){for(var e=0;e<d.length;e++)d[e].dispose();d=null,n&&n()}),i}});\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(2),__webpack_require__(32),__webpack_require__(38),__webpack_require__(10)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(i){\"use strict\";return i.CrossFade=function(e){this.createInsOuts(2,1),this.a=this.input[0]=new i.Gain,this.b=this.input[1]=new i.Gain,this.fade=new i.Signal(this.defaultArg(e,.5),i.Type.NormalRange),this._equalPowerA=new i.EqualPowerGain,this._equalPowerB=new i.EqualPowerGain,this._invert=new i.Expr(\"1 - $0\"),this.a.connect(this.output),this.b.connect(this.output),this.fade.chain(this._equalPowerB,this.b.gain),this.fade.chain(this._invert,this._equalPowerA,this.a.gain),this._readOnly(\"fade\")},i.extend(i.CrossFade),i.CrossFade.prototype.dispose=function(){return i.prototype.dispose.call(this),this._writable(\"fade\"),this._equalPowerA.dispose(),this._equalPowerA=null,this._equalPowerB.dispose(),this._equalPowerB=null,this.fade.dispose(),this.fade=null,this._invert.dispose(),this._invert=null,this.a.dispose(),this.a=null,this.b.dispose(),this.b=null,this},i.CrossFade}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports) {\n\n!function(){var l,s=[];function p(e){var o=this,n={},i=-1;this.parameters.forEach(function(e,t){var r=s[++i]||(s[i]=new Float32Array(o.bufferSize));r.fill(e.value),n[t]=r}),this.processor.realm.exec(\"self.sampleRate=sampleRate=\"+this.context.sampleRate+\";self.currentTime=currentTime=\"+this.context.currentTime);var t=a(e.inputBuffer),r=a(e.outputBuffer);this.instance.process([t],[r],n)}function a(e){for(var t=[],r=0;r<e.numberOfChannels;r++)t[r]=e.getChannelData(r);return t}function f(e){return e.$$processors||(e.$$processors={})}function e(e){this.$$context=e}\"function\"!=typeof AudioWorkletNode&&(self.AudioWorkletNode=function(e,t,r){var o=f(e)[t],n=e.createScriptProcessor(void 0,2,r&&r.outputChannelCount?r.outputChannelCount[0]:2);if(n.parameters=new Map,o.properties)for(var i=0;i<o.properties.length;i++){var s=o.properties[i],a=e.createGain().gain;a.value=s.defaultValue,n.parameters.set(s.name,a)}var u=new MessageChannel;l=u.port2;var c=new o.Processor(r||{});return l=null,n.port=u.port1,n.processor=o,n.instance=c,n.onaudioprocess=p,n},Object.defineProperty((self.AudioContext||self.webkitAudioContext).prototype,\"audioWorklet\",{get:function(){return this.$$audioWorklet||(this.$$audioWorklet=new self.AudioWorklet(this))}}),self.AudioWorklet=(e.prototype.addModule=function(e,t){var n=this;return fetch(e).then(function(e){if(!e.ok)throw Error(e.status);return e.text()}).then(function(e){var r={sampleRate:0,currentTime:0,AudioWorkletProcessor:function(){this.port=l},registerProcessor:function(e,t){f(n.$$context)[e]={realm:o,context:r,Processor:t,properties:t.parameterDescriptors||[]}}},o=new function(e,t){var r=document.createElement(\"iframe\");r.style.cssText=\"position:absolute;left:0;top:-999px;width:1px;height:1px;\",t.appendChild(r);var o=r.contentWindow,n=o.document,i=\"var window,$hook\";for(var s in o)s in e||\"eval\"===s||(i+=\",\",i+=s);for(var a in e)i+=\",\",i+=a,i+=\"=self.\",i+=a;var u=n.createElement(\"script\");u.appendChild(n.createTextNode('function $hook(self,console) {\"use strict\";\\n        '+i+\";return function() {return eval(arguments[0])}}\")),n.body.appendChild(u),this.exec=o.$hook(e,console)}(r.self=r,document.documentElement);return o.exec((t&&t.transpile||String)(e)),null})},e))}();\n\n }),\n (function(module, exports) {\n\n/**\n * This module has shims\n */\n\n(function () {\n  function fixSetTarget(param) {\n    if (!param) \n      return;\n    if (!param.setTargetAtTime) param.setTargetAtTime = param.setTargetValueAtTime;\n  }\n\n  if (window.hasOwnProperty('webkitAudioContext') && !window.hasOwnProperty('AudioContext')) {\n    window.AudioContext = window.webkitAudioContext;\n    if (typeof AudioContext.prototype.createGain !== 'function') AudioContext.prototype.createGain = AudioContext.prototype.createGainNode;\n    if (typeof AudioContext.prototype.createDelay !== 'function') AudioContext.prototype.createDelay = AudioContext.prototype.createDelayNode;\n    if (typeof AudioContext.prototype.createScriptProcessor !== 'function') AudioContext.prototype.createScriptProcessor = AudioContext.prototype.createJavaScriptNode;\n    if (typeof AudioContext.prototype.createPeriodicWave !== 'function') AudioContext.prototype.createPeriodicWave = AudioContext.prototype.createWaveTable;\n    AudioContext.prototype.internal_createGain = AudioContext.prototype.createGain;\n\n    AudioContext.prototype.createGain = function () {\n      var node = this.internal_createGain();\n      fixSetTarget(node.gain);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createDelay = AudioContext.prototype.createDelay;\n\n    AudioContext.prototype.createDelay = function (maxDelayTime) {\n      var node = maxDelayTime ? this.internal_createDelay(maxDelayTime) : this.internal_createDelay();\n      fixSetTarget(node.delayTime);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createBufferSource = AudioContext.prototype.createBufferSource;\n\n    AudioContext.prototype.createBufferSource = function () {\n      var node = this.internal_createBufferSource();\n\n      if (!node.start) {\n        node.start = function (when, offset, duration) {\n          if (offset || duration) this.noteGrainOn(when || 0, offset, duration);else this.noteOn(when || 0);\n        };\n      } else {\n        node.internal_start = node.start;\n\n        node.start = function (when, offset, duration) {\n          if (typeof duration !== 'undefined') node.internal_start(when || 0, offset, duration);else node.internal_start(when || 0, offset || 0);\n        };\n      }\n\n      if (!node.stop) {\n        node.stop = function (when) {\n          this.noteOff(when || 0);\n        };\n      } else {\n        node.internal_stop = node.stop;\n\n        node.stop = function (when) {\n          node.internal_stop(when || 0);\n        };\n      }\n\n      fixSetTarget(node.playbackRate);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createDynamicsCompressor = AudioContext.prototype.createDynamicsCompressor;\n\n    AudioContext.prototype.createDynamicsCompressor = function () {\n      var node = this.internal_createDynamicsCompressor();\n      fixSetTarget(node.threshold);\n      fixSetTarget(node.knee);\n      fixSetTarget(node.ratio);\n      fixSetTarget(node.reduction);\n      fixSetTarget(node.attack);\n      fixSetTarget(node.release);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createBiquadFilter = AudioContext.prototype.createBiquadFilter;\n\n    AudioContext.prototype.createBiquadFilter = function () {\n      var node = this.internal_createBiquadFilter();\n      fixSetTarget(node.frequency);\n      fixSetTarget(node.detune);\n      fixSetTarget(node.Q);\n      fixSetTarget(node.gain);\n      return node;\n    };\n\n    if (typeof AudioContext.prototype.createOscillator !== 'function') {\n      AudioContext.prototype.internal_createOscillator = AudioContext.prototype.createOscillator;\n\n      AudioContext.prototype.createOscillator = function () {\n        var node = this.internal_createOscillator();\n\n        if (!node.start) {\n          node.start = function (when) {\n            this.noteOn(when || 0);\n          };\n        } else {\n          node.internal_start = node.start;\n\n          node.start = function (when) {\n            node.internal_start(when || 0);\n          };\n        }\n\n        if (!node.stop) {\n          node.stop = function (when) {\n            this.noteOff(when || 0);\n          };\n        } else {\n          node.internal_stop = node.stop;\n\n          node.stop = function (when) {\n            node.internal_stop(when || 0);\n          };\n        }\n\n        if (!node.setPeriodicWave) node.setPeriodicWave = node.setWaveTable;\n        fixSetTarget(node.frequency);\n        fixSetTarget(node.detune);\n        return node;\n      };\n    }\n  }\n\n  if (window.hasOwnProperty('webkitOfflineAudioContext') && !window.hasOwnProperty('OfflineAudioContext')) {\n    window.OfflineAudioContext = window.webkitOfflineAudioContext;\n  }\n})(window); \n\n\nnavigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n/**\n * Determine which filetypes are supported (inspired by buzz.js)\n * The audio element (el) will only be used to test browser support for various audio formats\n */\n\nvar el = document.createElement('audio');\n\np5.prototype.isSupported = function () {\n  return !!el.canPlayType;\n};\n\nvar isOGGSupported = function isOGGSupported() {\n  return !!el.canPlayType && el.canPlayType('audio/ogg; codecs=\"vorbis\"');\n};\n\nvar isMP3Supported = function isMP3Supported() {\n  return !!el.canPlayType && el.canPlayType('audio/mpeg;');\n};\n\nvar isWAVSupported = function isWAVSupported() {\n  return !!el.canPlayType && el.canPlayType('audio/wav; codecs=\"1\"');\n};\n\nvar isAACSupported = function isAACSupported() {\n  return !!el.canPlayType && (el.canPlayType('audio/x-m4a;') || el.canPlayType('audio/aac;'));\n};\n\nvar isAIFSupported = function isAIFSupported() {\n  return !!el.canPlayType && el.canPlayType('audio/x-aiff;');\n};\n\np5.prototype.isFileSupported = function (extension) {\n  switch (extension.toLowerCase()) {\n    case 'mp3':\n      return isMP3Supported();\n\n    case 'wav':\n      return isWAVSupported();\n\n    case 'ogg':\n      return isOGGSupported();\n\n    case 'aac':\n    case 'm4a':\n    case 'mp4':\n      return isAACSupported();\n\n    case 'aif':\n    case 'aiff':\n      return isAIFSupported();\n\n    default:\n      return false;\n  }\n};\n\n }),\n (function(module, exports) {\n\nvar g;g=function(){return this}();try{g=g||new Function(\"return this\")()}catch(t){\"object\"==typeof window&&(g=window)}module.exports=g;\n\n }),\n (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n __webpack_exports__[\"default\"] = (\"function _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \\\"function\\\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \\\"function\\\") { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } if (typeof _cache !== \\\"undefined\\\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\\n\\nfunction isNativeReflectConstruct() { if (typeof Reflect === \\\"undefined\\\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \\\"function\\\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\\n\\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\\n\\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\\\"[native code]\\\") !== -1; }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\n// import dependencies via preval.require so that they're available as values at compile time\\nvar processorNames = {\\n  \\\"recorderProcessor\\\": \\\"recorder-processor\\\",\\n  \\\"soundFileProcessor\\\": \\\"sound-file-processor\\\",\\n  \\\"amplitudeProcessor\\\": \\\"amplitude-processor\\\"\\n};\\nvar RingBuffer = {\\n  \\\"default\\\":\\n  /*#__PURE__*/\\n  function () {\\n    /**\\n     * @constructor\\n     * @param  {number} length Buffer length in frames.\\n     * @param  {number} channelCount Buffer channel count.\\n     */\\n    function RingBuffer(length, channelCount) {\\n      _classCallCheck(this, RingBuffer);\\n\\n      this._readIndex = 0;\\n      this._writeIndex = 0;\\n      this._framesAvailable = 0;\\n      this._channelCount = channelCount;\\n      this._length = length;\\n      this._channelData = [];\\n\\n      for (var i = 0; i < this._channelCount; ++i) {\\n        this._channelData[i] = new Float32Array(length);\\n      }\\n    }\\n    /**\\n     * Getter for Available frames in buffer.\\n     *\\n     * @return {number} Available frames in buffer.\\n     */\\n\\n\\n    _createClass(RingBuffer, [{\\n      key: \\\"push\\\",\\n\\n      /**\\n       * Push a sequence of Float32Arrays to buffer.\\n       *\\n       * @param  {array} arraySequence A sequence of Float32Arrays.\\n       */\\n      value: function push(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // Transfer data from the |arraySequence| storage to the internal buffer.\\n        var sourceLength = arraySequence[0] ? arraySequence[0].length : 0;\\n\\n        for (var i = 0; i < sourceLength; ++i) {\\n          var writeIndex = (this._writeIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            this._channelData[channel][writeIndex] = arraySequence[channel][i];\\n          }\\n        }\\n\\n        this._writeIndex += sourceLength;\\n\\n        if (this._writeIndex >= this._length) {\\n          this._writeIndex = 0;\\n        } // For excessive frames, the buffer will be overwritten.\\n\\n\\n        this._framesAvailable += sourceLength;\\n\\n        if (this._framesAvailable > this._length) {\\n          this._framesAvailable = this._length;\\n        }\\n      }\\n      /**\\n       * Pull data out of buffer and fill a given sequence of Float32Arrays.\\n       *\\n       * @param  {array} arraySequence An array of Float32Arrays.\\n       */\\n\\n    }, {\\n      key: \\\"pull\\\",\\n      value: function pull(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // If the FIFO is completely empty, do nothing.\\n        if (this._framesAvailable === 0) {\\n          return;\\n        }\\n\\n        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.\\n\\n        for (var i = 0; i < destinationLength; ++i) {\\n          var readIndex = (this._readIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            arraySequence[channel][i] = this._channelData[channel][readIndex];\\n          }\\n        }\\n\\n        this._readIndex += destinationLength;\\n\\n        if (this._readIndex >= this._length) {\\n          this._readIndex = 0;\\n        }\\n\\n        this._framesAvailable -= destinationLength;\\n\\n        if (this._framesAvailable < 0) {\\n          this._framesAvailable = 0;\\n        }\\n      }\\n    }, {\\n      key: \\\"framesAvailable\\\",\\n      get: function get() {\\n        return this._framesAvailable;\\n      }\\n    }]);\\n\\n    return RingBuffer;\\n  }()\\n}[\\\"default\\\"];\\n\\nvar RecorderProcessor =\\n/*#__PURE__*/\\nfunction (_AudioWorkletProcesso) {\\n  _inherits(RecorderProcessor, _AudioWorkletProcesso);\\n\\n  function RecorderProcessor(options) {\\n    var _this;\\n\\n    _classCallCheck(this, RecorderProcessor);\\n\\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(RecorderProcessor).call(this));\\n    var processorOptions = options.processorOptions || {};\\n    _this.numOutputChannels = options.outputChannelCount || 2;\\n    _this.numInputChannels = processorOptions.numInputChannels || 2;\\n    _this.bufferSize = processorOptions.bufferSize || 1024;\\n    _this.recording = false;\\n\\n    _this.clear();\\n\\n    _this.port.onmessage = function (event) {\\n      var data = event.data;\\n\\n      if (data.name === 'start') {\\n        _this.record(data.duration);\\n      } else if (data.name === 'stop') {\\n        _this.stop();\\n      }\\n    };\\n\\n    return _this;\\n  }\\n\\n  _createClass(RecorderProcessor, [{\\n    key: \\\"process\\\",\\n    value: function process(inputs) {\\n      if (!this.recording) {\\n        return true;\\n      } else if (this.sampleLimit && this.recordedSamples >= this.sampleLimit) {\\n        this.stop();\\n        return true;\\n      }\\n\\n      var input = inputs[0];\\n      this.inputRingBuffer.push(input);\\n\\n      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {\\n        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);\\n\\n        for (var channel = 0; channel < this.numOutputChannels; ++channel) {\\n          var inputChannelCopy = this.inputRingBufferArraySequence[channel].slice();\\n\\n          if (channel === 0) {\\n            this.leftBuffers.push(inputChannelCopy);\\n\\n            if (this.numInputChannels === 1) {\\n              this.rightBuffers.push(inputChannelCopy);\\n            }\\n          } else if (channel === 1 && this.numInputChannels > 1) {\\n            this.rightBuffers.push(inputChannelCopy);\\n          }\\n        }\\n\\n        this.recordedSamples += this.bufferSize;\\n      }\\n\\n      return true;\\n    }\\n  }, {\\n    key: \\\"record\\\",\\n    value: function record(duration) {\\n      if (duration) {\\n        this.sampleLimit = Math.round(duration * sampleRate);\\n      }\\n\\n      this.recording = true;\\n    }\\n  }, {\\n    key: \\\"stop\\\",\\n    value: function stop() {\\n      this.recording = false;\\n      var buffers = this.getBuffers();\\n      var leftBuffer = buffers[0].buffer;\\n      var rightBuffer = buffers[1].buffer;\\n      this.port.postMessage({\\n        name: 'buffers',\\n        leftBuffer: leftBuffer,\\n        rightBuffer: rightBuffer\\n      }, [leftBuffer, rightBuffer]);\\n      this.clear();\\n    }\\n  }, {\\n    key: \\\"getBuffers\\\",\\n    value: function getBuffers() {\\n      var buffers = [];\\n      buffers.push(this.mergeBuffers(this.leftBuffers));\\n      buffers.push(this.mergeBuffers(this.rightBuffers));\\n      return buffers;\\n    }\\n  }, {\\n    key: \\\"mergeBuffers\\\",\\n    value: function mergeBuffers(channelBuffer) {\\n      var result = new Float32Array(this.recordedSamples);\\n      var offset = 0;\\n      var lng = channelBuffer.length;\\n\\n      for (var i = 0; i < lng; i++) {\\n        var buffer = channelBuffer[i];\\n        result.set(buffer, offset);\\n        offset += buffer.length;\\n      }\\n\\n      return result;\\n    }\\n  }, {\\n    key: \\\"clear\\\",\\n    value: function clear() {\\n      var _this2 = this;\\n\\n      this.leftBuffers = [];\\n      this.rightBuffers = [];\\n      this.inputRingBuffer = new RingBuffer(this.bufferSize, this.numInputChannels);\\n      this.inputRingBufferArraySequence = new Array(this.numInputChannels).fill(null).map(function () {\\n        return new Float32Array(_this2.bufferSize);\\n      });\\n      this.recordedSamples = 0;\\n      this.sampleLimit = null;\\n    }\\n  }]);\\n\\n  return RecorderProcessor;\\n}(_wrapNativeSuper(AudioWorkletProcessor));\\n\\nregisterProcessor(processorNames.recorderProcessor, RecorderProcessor);\");\n\n }),\n (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n __webpack_exports__[\"default\"] = (\"function _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \\\"function\\\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \\\"function\\\") { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } if (typeof _cache !== \\\"undefined\\\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\\n\\nfunction isNativeReflectConstruct() { if (typeof Reflect === \\\"undefined\\\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \\\"function\\\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\\n\\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\\n\\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\\\"[native code]\\\") !== -1; }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\n// import dependencies via preval.require so that they're available as values at compile time\\nvar processorNames = {\\n  \\\"recorderProcessor\\\": \\\"recorder-processor\\\",\\n  \\\"soundFileProcessor\\\": \\\"sound-file-processor\\\",\\n  \\\"amplitudeProcessor\\\": \\\"amplitude-processor\\\"\\n};\\nvar RingBuffer = {\\n  \\\"default\\\":\\n  /*#__PURE__*/\\n  function () {\\n    /**\\n     * @constructor\\n     * @param  {number} length Buffer length in frames.\\n     * @param  {number} channelCount Buffer channel count.\\n     */\\n    function RingBuffer(length, channelCount) {\\n      _classCallCheck(this, RingBuffer);\\n\\n      this._readIndex = 0;\\n      this._writeIndex = 0;\\n      this._framesAvailable = 0;\\n      this._channelCount = channelCount;\\n      this._length = length;\\n      this._channelData = [];\\n\\n      for (var i = 0; i < this._channelCount; ++i) {\\n        this._channelData[i] = new Float32Array(length);\\n      }\\n    }\\n    /**\\n     * Getter for Available frames in buffer.\\n     *\\n     * @return {number} Available frames in buffer.\\n     */\\n\\n\\n    _createClass(RingBuffer, [{\\n      key: \\\"push\\\",\\n\\n      /**\\n       * Push a sequence of Float32Arrays to buffer.\\n       *\\n       * @param  {array} arraySequence A sequence of Float32Arrays.\\n       */\\n      value: function push(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // Transfer data from the |arraySequence| storage to the internal buffer.\\n        var sourceLength = arraySequence[0] ? arraySequence[0].length : 0;\\n\\n        for (var i = 0; i < sourceLength; ++i) {\\n          var writeIndex = (this._writeIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            this._channelData[channel][writeIndex] = arraySequence[channel][i];\\n          }\\n        }\\n\\n        this._writeIndex += sourceLength;\\n\\n        if (this._writeIndex >= this._length) {\\n          this._writeIndex = 0;\\n        } // For excessive frames, the buffer will be overwritten.\\n\\n\\n        this._framesAvailable += sourceLength;\\n\\n        if (this._framesAvailable > this._length) {\\n          this._framesAvailable = this._length;\\n        }\\n      }\\n      /**\\n       * Pull data out of buffer and fill a given sequence of Float32Arrays.\\n       *\\n       * @param  {array} arraySequence An array of Float32Arrays.\\n       */\\n\\n    }, {\\n      key: \\\"pull\\\",\\n      value: function pull(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // If the FIFO is completely empty, do nothing.\\n        if (this._framesAvailable === 0) {\\n          return;\\n        }\\n\\n        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.\\n\\n        for (var i = 0; i < destinationLength; ++i) {\\n          var readIndex = (this._readIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            arraySequence[channel][i] = this._channelData[channel][readIndex];\\n          }\\n        }\\n\\n        this._readIndex += destinationLength;\\n\\n        if (this._readIndex >= this._length) {\\n          this._readIndex = 0;\\n        }\\n\\n        this._framesAvailable -= destinationLength;\\n\\n        if (this._framesAvailable < 0) {\\n          this._framesAvailable = 0;\\n        }\\n      }\\n    }, {\\n      key: \\\"framesAvailable\\\",\\n      get: function get() {\\n        return this._framesAvailable;\\n      }\\n    }]);\\n\\n    return RingBuffer;\\n  }()\\n}[\\\"default\\\"];\\n\\nvar SoundFileProcessor =\\n/*#__PURE__*/\\nfunction (_AudioWorkletProcesso) {\\n  _inherits(SoundFileProcessor, _AudioWorkletProcesso);\\n\\n  function SoundFileProcessor(options) {\\n    var _this;\\n\\n    _classCallCheck(this, SoundFileProcessor);\\n\\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SoundFileProcessor).call(this));\\n    var processorOptions = options.processorOptions || {};\\n    _this.bufferSize = processorOptions.bufferSize || 256;\\n    _this.inputRingBuffer = new RingBuffer(_this.bufferSize, 1);\\n    _this.inputRingBufferArraySequence = [new Float32Array(_this.bufferSize)];\\n    return _this;\\n  }\\n\\n  _createClass(SoundFileProcessor, [{\\n    key: \\\"process\\\",\\n    value: function process(inputs) {\\n      var input = inputs[0]; // we only care about the first input channel, because that contains the position data\\n\\n      this.inputRingBuffer.push([input[0]]);\\n\\n      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {\\n        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);\\n        var inputChannel = this.inputRingBufferArraySequence[0];\\n        var position = inputChannel[inputChannel.length - 1] || 0;\\n        this.port.postMessage({\\n          name: 'position',\\n          position: position\\n        });\\n      }\\n\\n      return true;\\n    }\\n  }]);\\n\\n  return SoundFileProcessor;\\n}(_wrapNativeSuper(AudioWorkletProcessor));\\n\\nregisterProcessor(processorNames.soundFileProcessor, SoundFileProcessor);\");\n\n }),\n (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n __webpack_exports__[\"default\"] = (\"function _typeof(obj) { if (typeof Symbol === \\\"function\\\" && typeof Symbol.iterator === \\\"symbol\\\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \\\"function\\\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \\\"symbol\\\" : typeof obj; }; } return _typeof(obj); }\\n\\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \\\"object\\\" || typeof call === \\\"function\\\")) { return call; } return _assertThisInitialized(self); }\\n\\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\\\"this hasn't been initialised - super() hasn't been called\\\"); } return self; }\\n\\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \\\"function\\\" && superClass !== null) { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\\n\\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \\\"function\\\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \\\"function\\\") { throw new TypeError(\\\"Super expression must either be null or a function\\\"); } if (typeof _cache !== \\\"undefined\\\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\\n\\nfunction isNativeReflectConstruct() { if (typeof Reflect === \\\"undefined\\\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \\\"function\\\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\\n\\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\\n\\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\\\"[native code]\\\") !== -1; }\\n\\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\\n\\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\\n\\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\\\"Cannot call a class as a function\\\"); } }\\n\\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\\\"value\\\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\\n\\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\\n\\n// import dependencies via preval.require so that they're available as values at compile time\\nvar processorNames = {\\n  \\\"recorderProcessor\\\": \\\"recorder-processor\\\",\\n  \\\"soundFileProcessor\\\": \\\"sound-file-processor\\\",\\n  \\\"amplitudeProcessor\\\": \\\"amplitude-processor\\\"\\n};\\nvar RingBuffer = {\\n  \\\"default\\\":\\n  /*#__PURE__*/\\n  function () {\\n    /**\\n     * @constructor\\n     * @param  {number} length Buffer length in frames.\\n     * @param  {number} channelCount Buffer channel count.\\n     */\\n    function RingBuffer(length, channelCount) {\\n      _classCallCheck(this, RingBuffer);\\n\\n      this._readIndex = 0;\\n      this._writeIndex = 0;\\n      this._framesAvailable = 0;\\n      this._channelCount = channelCount;\\n      this._length = length;\\n      this._channelData = [];\\n\\n      for (var i = 0; i < this._channelCount; ++i) {\\n        this._channelData[i] = new Float32Array(length);\\n      }\\n    }\\n    /**\\n     * Getter for Available frames in buffer.\\n     *\\n     * @return {number} Available frames in buffer.\\n     */\\n\\n\\n    _createClass(RingBuffer, [{\\n      key: \\\"push\\\",\\n\\n      /**\\n       * Push a sequence of Float32Arrays to buffer.\\n       *\\n       * @param  {array} arraySequence A sequence of Float32Arrays.\\n       */\\n      value: function push(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // Transfer data from the |arraySequence| storage to the internal buffer.\\n        var sourceLength = arraySequence[0] ? arraySequence[0].length : 0;\\n\\n        for (var i = 0; i < sourceLength; ++i) {\\n          var writeIndex = (this._writeIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            this._channelData[channel][writeIndex] = arraySequence[channel][i];\\n          }\\n        }\\n\\n        this._writeIndex += sourceLength;\\n\\n        if (this._writeIndex >= this._length) {\\n          this._writeIndex = 0;\\n        } // For excessive frames, the buffer will be overwritten.\\n\\n\\n        this._framesAvailable += sourceLength;\\n\\n        if (this._framesAvailable > this._length) {\\n          this._framesAvailable = this._length;\\n        }\\n      }\\n      /**\\n       * Pull data out of buffer and fill a given sequence of Float32Arrays.\\n       *\\n       * @param  {array} arraySequence An array of Float32Arrays.\\n       */\\n\\n    }, {\\n      key: \\\"pull\\\",\\n      value: function pull(arraySequence) {\\n        // The channel count of arraySequence and the length of each channel must\\n        // match with this buffer obejct.\\n        // If the FIFO is completely empty, do nothing.\\n        if (this._framesAvailable === 0) {\\n          return;\\n        }\\n\\n        var destinationLength = arraySequence[0].length; // Transfer data from the internal buffer to the |arraySequence| storage.\\n\\n        for (var i = 0; i < destinationLength; ++i) {\\n          var readIndex = (this._readIndex + i) % this._length;\\n\\n          for (var channel = 0; channel < this._channelCount; ++channel) {\\n            arraySequence[channel][i] = this._channelData[channel][readIndex];\\n          }\\n        }\\n\\n        this._readIndex += destinationLength;\\n\\n        if (this._readIndex >= this._length) {\\n          this._readIndex = 0;\\n        }\\n\\n        this._framesAvailable -= destinationLength;\\n\\n        if (this._framesAvailable < 0) {\\n          this._framesAvailable = 0;\\n        }\\n      }\\n    }, {\\n      key: \\\"framesAvailable\\\",\\n      get: function get() {\\n        return this._framesAvailable;\\n      }\\n    }]);\\n\\n    return RingBuffer;\\n  }()\\n}[\\\"default\\\"];\\n\\nvar AmplitudeProcessor =\\n/*#__PURE__*/\\nfunction (_AudioWorkletProcesso) {\\n  _inherits(AmplitudeProcessor, _AudioWorkletProcesso);\\n\\n  function AmplitudeProcessor(options) {\\n    var _this;\\n\\n    _classCallCheck(this, AmplitudeProcessor);\\n\\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AmplitudeProcessor).call(this));\\n    var processorOptions = options.processorOptions || {};\\n    _this.numOutputChannels = options.outputChannelCount || 1;\\n    _this.numInputChannels = processorOptions.numInputChannels || 2;\\n    _this.normalize = processorOptions.normalize || false;\\n    _this.smoothing = processorOptions.smoothing || 0;\\n    _this.bufferSize = processorOptions.bufferSize || 2048;\\n    _this.inputRingBuffer = new RingBuffer(_this.bufferSize, _this.numInputChannels);\\n    _this.outputRingBuffer = new RingBuffer(_this.bufferSize, _this.numOutputChannels);\\n    _this.inputRingBufferArraySequence = new Array(_this.numInputChannels).fill(null).map(function () {\\n      return new Float32Array(_this.bufferSize);\\n    });\\n    _this.stereoVol = [0, 0];\\n    _this.stereoVolNorm = [0, 0];\\n    _this.volMax = 0.001;\\n\\n    _this.port.onmessage = function (event) {\\n      var data = event.data;\\n\\n      if (data.name === 'toggleNormalize') {\\n        _this.normalize = data.normalize;\\n      } else if (data.name === 'smoothing') {\\n        _this.smoothing = Math.max(0, Math.min(1, data.smoothing));\\n      }\\n    };\\n\\n    return _this;\\n  } // TO DO make this stereo / dependent on # of audio channels\\n\\n\\n  _createClass(AmplitudeProcessor, [{\\n    key: \\\"process\\\",\\n    value: function process(inputs, outputs) {\\n      var input = inputs[0];\\n      var output = outputs[0];\\n      var smoothing = this.smoothing;\\n      this.inputRingBuffer.push(input);\\n\\n      if (this.inputRingBuffer.framesAvailable >= this.bufferSize) {\\n        this.inputRingBuffer.pull(this.inputRingBufferArraySequence);\\n\\n        for (var channel = 0; channel < this.numInputChannels; ++channel) {\\n          var inputBuffer = this.inputRingBufferArraySequence[channel];\\n          var bufLength = inputBuffer.length;\\n          var sum = 0;\\n\\n          for (var i = 0; i < bufLength; i++) {\\n            var x = inputBuffer[i];\\n\\n            if (this.normalize) {\\n              sum += Math.max(Math.min(x / this.volMax, 1), -1) * Math.max(Math.min(x / this.volMax, 1), -1);\\n            } else {\\n              sum += x * x;\\n            }\\n          } // ... then take the square root of the sum.\\n\\n\\n          var rms = Math.sqrt(sum / bufLength);\\n          this.stereoVol[channel] = Math.max(rms, this.stereoVol[channel] * smoothing);\\n          this.volMax = Math.max(this.stereoVol[channel], this.volMax);\\n        } // calculate stero normalized volume and add volume from all channels together\\n\\n\\n        var volSum = 0;\\n\\n        for (var index = 0; index < this.stereoVol.length; index++) {\\n          this.stereoVolNorm[index] = Math.max(Math.min(this.stereoVol[index] / this.volMax, 1), 0);\\n          volSum += this.stereoVol[index];\\n        } // volume is average of channels\\n\\n\\n        var volume = volSum / this.stereoVol.length; // normalized value\\n\\n        var volNorm = Math.max(Math.min(volume / this.volMax, 1), 0);\\n        this.port.postMessage({\\n          name: 'amplitude',\\n          volume: volume,\\n          volNorm: volNorm,\\n          stereoVol: this.stereoVol,\\n          stereoVolNorm: this.stereoVolNorm\\n        }); // pass input through to output\\n\\n        this.outputRingBuffer.push(this.inputRingBufferArraySequence);\\n      } // pull 128 frames out of the ring buffer\\n      // if the ring buffer does not have enough frames, the output will be silent\\n\\n\\n      this.outputRingBuffer.pull(output);\\n      return true;\\n    }\\n  }]);\\n\\n  return AmplitudeProcessor;\\n}(_wrapNativeSuper(AudioWorkletProcessor));\\n\\nregisterProcessor(processorNames.amplitudeProcessor, AmplitudeProcessor);\");\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(17)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(o){o.Frequency=function(e,t){if(!(this instanceof o.Frequency))return new o.Frequency(e,t);o.TimeBase.call(this,e,t)},o.extend(o.Frequency,o.TimeBase),o.Frequency.prototype._primaryExpressions=Object.create(o.TimeBase.prototype._primaryExpressions),o.Frequency.prototype._primaryExpressions.midi={regexp:/^(\\d+(?:\\.\\d+)?midi)/,method:function(e){return this.midiToFrequency(e)}},o.Frequency.prototype._primaryExpressions.note={regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(e,t){var r=n[e.toLowerCase()]+12*(parseInt(t)+1);return this.midiToFrequency(r)}},o.Frequency.prototype._primaryExpressions.tr={regexp:/^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?/,method:function(e,t,r){var n=1;return e&&\"0\"!==e&&(n*=this._beatsToUnits(this._timeSignature()*parseFloat(e))),t&&\"0\"!==t&&(n*=this._beatsToUnits(parseFloat(t))),r&&\"0\"!==r&&(n*=this._beatsToUnits(parseFloat(r)/4)),n}},o.Frequency.prototype.transpose=function(e){return this._expr=function(e,t){return e()*this.intervalToFrequencyRatio(t)}.bind(this,this._expr,e),this},o.Frequency.prototype.harmonize=function(e){return this._expr=function(e,t){for(var r=e(),n=[],o=0;o<t.length;o++)n[o]=r*this.intervalToFrequencyRatio(t[o]);return n}.bind(this,this._expr,e),this},o.Frequency.prototype.toMidi=function(){return this.frequencyToMidi(this.valueOf())},o.Frequency.prototype.toNote=function(){var e=this.valueOf(),t=Math.log(e/o.Frequency.A4)/Math.LN2,r=Math.round(12*t)+57,n=Math.floor(r/12);return n<0&&(r+=-12*n),i[r%12]+n.toString()},o.Frequency.prototype.toSeconds=function(){return 1/this.valueOf()},o.Frequency.prototype.toFrequency=function(){return this.valueOf()},o.Frequency.prototype.toTicks=function(){var e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*o.Transport.PPQ)},o.Frequency.prototype._frequencyToUnits=function(e){return e},o.Frequency.prototype._ticksToUnits=function(e){return 1/(60*e/(o.Transport.bpm.value*o.Transport.PPQ))},o.Frequency.prototype._beatsToUnits=function(e){return 1/o.TimeBase.prototype._beatsToUnits.call(this,e)},o.Frequency.prototype._secondsToUnits=function(e){return 1/e},o.Frequency.prototype._defaultUnits=\"hz\";var n={cbb:-2,cb:-1,c:0,\"c#\":1,cx:2,dbb:0,db:1,d:2,\"d#\":3,dx:4,ebb:2,eb:3,e:4,\"e#\":5,ex:6,fbb:3,fb:4,f:5,\"f#\":6,fx:7,gbb:5,gb:6,g:7,\"g#\":8,gx:9,abb:7,ab:8,a:9,\"a#\":10,ax:11,bbb:9,bb:10,b:11,\"b#\":12,bx:13},i=[\"C\",\"C#\",\"D\",\"D#\",\"E\",\"F\",\"F#\",\"G\",\"G#\",\"A\",\"A#\",\"B\"];return o.Frequency.A4=440,o.Frequency.prototype.midiToFrequency=function(e){return o.Frequency.A4*Math.pow(2,(e-69)/12)},o.Frequency.prototype.frequencyToMidi=function(e){return 69+12*Math.log(e/o.Frequency.A4)/Math.LN2},o.Frequency}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(16)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(o){return o.TransportTime=function(t,r){if(!(this instanceof o.TransportTime))return new o.TransportTime(t,r);o.Time.call(this,t,r)},o.extend(o.TransportTime,o.Time),o.TransportTime.prototype._unaryExpressions=Object.create(o.Time.prototype._unaryExpressions),o.TransportTime.prototype._unaryExpressions.quantize={regexp:/^@/,method:function(t){var r=this._secondsToTicks(t()),e=Math.ceil(o.Transport.ticks/r);return this._ticksToUnits(e*r)}},o.TransportTime.prototype._secondsToTicks=function(t){var r=t/this._beatsToUnits(1);return Math.round(r*o.Transport.PPQ)},o.TransportTime.prototype.valueOf=function(){return this._secondsToTicks(this._expr())+(this._plusNow?o.Transport.ticks:0)},o.TransportTime.prototype.toTicks=function(){return this.valueOf()},o.TransportTime.prototype.toSeconds=function(){return this._expr()+(this._plusNow?o.Transport.seconds:0)},o.TransportTime.prototype.toFrequency=function(){return 1/this.toSeconds()},o.TransportTime}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(4),__webpack_require__(13),__webpack_require__(1),__webpack_require__(33),__webpack_require__(21),__webpack_require__(34),__webpack_require__(20),__webpack_require__(35),__webpack_require__(36),__webpack_require__(37)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(p){\"use strict\";function r(e,n,r){var t=new e;return r._eval(n[0]).connect(t,0,0),r._eval(n[1]).connect(t,0,1),t}function t(e,n,r){var t=new e;return r._eval(n[0]).connect(t,0,0),t}function o(e){return e?parseFloat(e):void 0}function i(e){return e&&e.args?parseFloat(e.args):void 0}return p.Expr=function(){var n=this._replacements(Array.prototype.slice.call(arguments)),e=this._parseInputs(n);this._nodes=[],this.input=new Array(e);for(var r=0;r<e;r++)this.input[r]=this.context.createGain();var t,o=this._parseTree(n);try{t=this._eval(o)}catch(e){throw this._disposeNodes(),new Error(\"Tone.Expr: Could evaluate expression: \"+n)}this.output=t},p.extend(p.Expr,p.SignalBase),p.Expr._Expressions={value:{signal:{regexp:/^\\d+\\.\\d+|^\\d+/,method:function(e){return new p.Signal(o(e))}},input:{regexp:/^\\$\\d/,method:function(e,n){return n.input[o(e.substr(1))]}}},glue:{\"(\":{regexp:/^\\(/},\")\":{regexp:/^\\)/},\",\":{regexp:/^,/}},func:{abs:{regexp:/^abs/,method:t.bind(this,p.Abs)},mod:{regexp:/^mod/,method:function(e,n){var r=i(e[1]),t=new p.Modulo(r);return n._eval(e[0]).connect(t),t}},pow:{regexp:/^pow/,method:function(e,n){var r=i(e[1]),t=new p.Pow(r);return n._eval(e[0]).connect(t),t}},a2g:{regexp:/^a2g/,method:function(e,n){var r=new p.AudioToGain;return n._eval(e[0]).connect(r),r}}},binary:{\"+\":{regexp:/^\\+/,precedence:1,method:r.bind(this,p.Add)},\"-\":{regexp:/^\\-/,precedence:1,method:function(e,n){return 1===e.length?t(p.Negate,e,n):r(p.Subtract,e,n)}},\"*\":{regexp:/^\\*/,precedence:0,method:r.bind(this,p.Multiply)}},unary:{\"-\":{regexp:/^\\-/,method:t.bind(this,p.Negate)},\"!\":{regexp:/^\\!/,method:t.bind(this,p.NOT)}}},p.Expr.prototype._parseInputs=function(e){var n=e.match(/\\$\\d/g),r=0;if(null!==n)for(var t=0;t<n.length;t++){var o=parseInt(n[t].substr(1))+1;r=Math.max(r,o)}return r},p.Expr.prototype._replacements=function(e){for(var n=e.shift(),r=0;r<e.length;r++)n=n.replace(/\\%/i,e[r]);return n},p.Expr.prototype._tokenize=function(e){for(var n=-1,r=[];0<e.length;){var t=o(e=e.trim());r.push(t),e=e.substr(t.value.length)}function o(e){for(var n in p.Expr._Expressions){var r=p.Expr._Expressions[n];for(var t in r){var o=r[t],i=o.regexp,a=e.match(i);if(null!==a)return{type:n,value:a[0],method:o.method}}}throw new SyntaxError(\"Tone.Expr: Unexpected token \"+e)}return{next:function(){return r[++n]},peek:function(){return r[n+1]}}},p.Expr.prototype._parseTree=function(e){var t=this._tokenize(e),a=this.isUndef.bind(this);function r(e,n){return!a(e)&&\"glue\"===e.type&&e.value===n}function o(e,n,r){var t=p.Expr._Expressions[n];if(!a(e))for(var o in t){var i=t[o];if(i.regexp.test(e.value)){if(a(r))return!0;if(i.precedence===r)return!0}}return!1}function i(e){var n;a(e)&&(e=5),n=e<0?function e(){var n,r;n=t.peek();if(o(n,\"unary\"))return n=t.next(),r=e(),{operator:n.value,method:n.method,args:[r]};return s()}():i(e-1);for(var r=t.peek();o(r,\"binary\",e);)n={operator:(r=t.next()).value,method:r.method,args:[n,i(e-1)]},r=t.peek();return n}function s(){var e,n;if(e=t.peek(),a(e))throw new SyntaxError(\"Tone.Expr: Unexpected termination of expression\");if(\"func\"===e.type)return function(e){var n=[];if(!r(t.next(),\"(\"))throw new SyntaxError('Tone.Expr: Expected ( in a function call \"'+e.value+'\"');r(t.peek(),\")\")||(n=function(){var e,n=[];for(;e=i(),!a(e)&&(n.push(e),r(t.peek(),\",\"));)t.next();return n}());if(r(t.next(),\")\"))return{method:e.method,args:n,name:name};throw new SyntaxError('Tone.Expr: Expected ) in a function call \"'+e.value+'\"')}(e=t.next());if(\"value\"===e.type)return{method:(e=t.next()).method,args:e.value};if(r(e,\"(\")){if(t.next(),n=i(),!r(e=t.next(),\")\"))throw new SyntaxError(\"Expected )\");return n}throw new SyntaxError(\"Tone.Expr: Parse error, cannot process token \"+e.value)}return i()},p.Expr.prototype._eval=function(e){if(!this.isUndef(e)){var n=e.method(e.args,this);return this._nodes.push(n),n}},p.Expr.prototype._disposeNodes=function(){for(var e=0;e<this._nodes.length;e++){var n=this._nodes[e];this.isFunction(n.dispose)?n.dispose():this.isFunction(n.disconnect)&&n.disconnect(),n=null,this._nodes[e]=null}this._nodes=null},p.Expr.prototype.dispose=function(){p.prototype.dispose.call(this),this._disposeNodes()},p.Expr}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(21),__webpack_require__(13),__webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e){\"use strict\";return e.GreaterThan=function(t){this.createInsOuts(2,0),this._param=this.input[0]=new e.Subtract(t),this.input[1]=this._param.input[1],this._gtz=this.output=new e.GreaterThanZero,this._param.connect(this._gtz)},e.extend(e.GreaterThan,e.Signal),e.GreaterThan.prototype.dispose=function(){return e.prototype.dispose.call(this),this._param.dispose(),this._param=null,this._gtz.dispose(),this._gtz=null,this},e.GreaterThan}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(6),__webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(s){\"use strict\";return s.Abs=function(){this._abs=this.input=this.output=new s.WaveShaper(function(s){return 0===s?0:Math.abs(s)},127)},s.extend(s.Abs,s.SignalBase),s.Abs.prototype.dispose=function(){return s.prototype.dispose.call(this),this._abs.dispose(),this._abs=null,this},s.Abs}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(6),__webpack_require__(1),__webpack_require__(13)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(i){\"use strict\";return i.Modulo=function(t){this.createInsOuts(1,0),this._shaper=new i.WaveShaper(Math.pow(2,16)),this._multiply=new i.Multiply,this._subtract=this.output=new i.Subtract,this._modSignal=new i.Signal(t),this.input.fan(this._shaper,this._subtract),this._modSignal.connect(this._multiply,0,0),this._shaper.connect(this._multiply,0,1),this._multiply.connect(this._subtract,0,1),this._setWaveShaper(t)},i.extend(i.Modulo,i.SignalBase),i.Modulo.prototype._setWaveShaper=function(i){this._shaper.setMap(function(t){return Math.floor((t+1e-4)/i)})},Object.defineProperty(i.Modulo.prototype,\"value\",{get:function(){return this._modSignal.value},set:function(t){this._modSignal.value=t,this._setWaveShaper(t)}}),i.Modulo.prototype.dispose=function(){return i.prototype.dispose.call(this),this._shaper.dispose(),this._shaper=null,this._multiply.dispose(),this._multiply=null,this._subtract.dispose(),this._subtract=null,this._modSignal.dispose(),this._modSignal=null,this},i.Modulo}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t){\"use strict\";return t.Pow=function(e){this._exp=this.defaultArg(e,1),this._expScaler=this.input=this.output=new t.WaveShaper(this._expFunc(this._exp),8192)},t.extend(t.Pow,t.SignalBase),Object.defineProperty(t.Pow.prototype,\"value\",{get:function(){return this._exp},set:function(e){this._exp=e,this._expScaler.setMap(this._expFunc(this._exp))}}),t.Pow.prototype._expFunc=function(t){return function(e){return Math.pow(Math.abs(e),t)}},t.Pow.prototype.dispose=function(){return t.prototype.dispose.call(this),this._expScaler.dispose(),this._expScaler=null,this},t.Pow}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(6),__webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(n){\"use strict\";return n.AudioToGain=function(){this._norm=this.input=this.output=new n.WaveShaper(function(n){return(n+1)/2})},n.extend(n.AudioToGain,n.SignalBase),n.AudioToGain.prototype.dispose=function(){return n.prototype.dispose.call(this),this._norm.dispose(),this._norm=null,this},n.AudioToGain}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(6)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(e){\"use strict\";return e.EqualPowerGain=function(){this._eqPower=this.input=this.output=new e.WaveShaper(function(e){return Math.abs(e)<.001?0:this.equalPowerScale(e)}.bind(this),4096)},e.extend(e.EqualPowerGain,e.SignalBase),e.EqualPowerGain.prototype.dispose=function(){return e.prototype.dispose.call(this),this._eqPower.dispose(),this._eqPower=null,this},e.EqualPowerGain}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0),__webpack_require__(19),__webpack_require__(9)], __WEBPACK_AMD_DEFINE_RESULT__ = (function(t){\"use strict\";return t.TimelineState=function(e){t.Timeline.call(this),this._initial=e},t.extend(t.TimelineState,t.Timeline),t.TimelineState.prototype.getValueAtTime=function(e){var t=this.get(e);return null!==t?t.state:this._initial},t.TimelineState.prototype.setStateAtTime=function(e,t){this.add({state:e,time:t})},t.TimelineState}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n }),\n (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n\nvar audioworklet_polyfill = __webpack_require__(24);\n\nvar shims = __webpack_require__(25);\n\nvar audiocontext = __webpack_require__(3);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\nvar main_Main = function Main() {\n  _classCallCheck(this, Main);\n\n  this.input = audiocontext[\"a\" ].createGain();\n  this.output = audiocontext[\"a\" ].createGain(); \n\n  this.limiter = audiocontext[\"a\" ].createDynamicsCompressor();\n  this.limiter.threshold.value = -3;\n  this.limiter.ratio.value = 20;\n  this.limiter.knee.value = 1;\n  this.audiocontext = audiocontext[\"a\" ];\n  this.output.disconnect(); \n\n  this.input.connect(this.limiter); \n\n  this.limiter.connect(this.output); \n\n  this.meter = audiocontext[\"a\" ].createGain();\n  this.fftMeter = audiocontext[\"a\" ].createGain();\n  this.output.connect(this.meter);\n  this.output.connect(this.fftMeter); \n\n  this.output.connect(this.audiocontext.destination); \n\n  this.soundArray = []; \n\n  this.parts = []; \n\n  this.extensions = [];\n}; \n\n\nvar p5sound = new main_Main();\n/**\n * Returns a number representing the output volume for sound\n * in this sketch.\n *\n * @method getOutputVolume\n * @return {Number} Output volume for sound in this sketch.\n *                  Should be between 0.0 (silence) and 1.0.\n */\n\np5.prototype.getOutputVolume = function () {\n  return p5sound.output.gain.value;\n};\n/**\n *  <p>Scale the output of all sound in this sketch</p>\n *  Scaled between 0.0 (silence) and 1.0 (full volume).\n *  1.0 is the maximum amplitude of a digital sound, so multiplying\n *  by greater than 1.0 may cause digital distortion. To\n *  fade, provide a <code>rampTime</code> parameter. For more\n *  complex fades, see the Envelope class.\n *\n *  Alternately, you can pass in a signal source such as an\n *  oscillator to modulate the amplitude with an audio signal.\n *\n *  <p><b>How This Works</b>: When you load the p5.sound module, it\n *  creates a single instance of p5sound. All sound objects in this\n *  module output to p5sound before reaching your computer's output.\n *  So if you change the amplitude of p5sound, it impacts all of the\n *  sound in this module.</p>\n *\n *  <p>If no value is provided, returns a Web Audio API Gain Node</p>\n *\n *  @method  outputVolume\n *  @param {Number|Object} volume  Volume (amplitude) between 0.0\n *                                     and 1.0 or modulating signal/oscillator\n *  @param {Number} [rampTime]  Fade for t seconds\n *  @param {Number} [timeFromNow]  Schedule this event to happen at\n *                                 t seconds in the future\n */\n\n\np5.prototype.outputVolume = function (vol) {\n  var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n  if (typeof vol === 'number') {\n    var now = p5sound.audiocontext.currentTime;\n    var currentVol = p5sound.output.gain.value;\n    p5sound.output.gain.cancelScheduledValues(now + tFromNow);\n    p5sound.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n    p5sound.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n  } else if (vol) {\n    vol.connect(p5sound.output.gain);\n  } else {\n    return p5sound.output.gain;\n  }\n};\n/**\n *  `p5.soundOut` is the p5.sound final output bus. It sends output to\n *  the destination of this window's web audio context. It contains\n *  Web Audio API nodes including a dyanmicsCompressor (<code>.limiter</code>),\n *  and Gain Nodes for <code>.input</code> and <code>.output</code>.\n *\n *  @property {Object} soundOut\n */\n\n\np5.prototype.soundOut = p5.soundOut = p5sound; \n\np5.soundOut._silentNode = p5sound.audiocontext.createGain();\np5.soundOut._silentNode.gain.value = 0;\n\np5.soundOut._silentNode.connect(p5sound.audiocontext.destination);\n\n var main = (p5sound);\nvar processorNames = __webpack_require__(5);\nvar processorNames_default = __webpack_require__.n(processorNames);\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\n\n/**\n * @for p5\n */\n\n/**\n * Returns a number representing the sample rate, in samples per second,\n * of all sound objects in this audio context. It is determined by the\n * sampling rate of your operating system's sound card, and it is not\n * currently possile to change.\n * It is often 44100, or twice the range of human hearing.\n *\n * @method sampleRate\n * @return {Number} samplerate samples per second\n */\n\nfunction sampleRate() {\n  return main.audiocontext.sampleRate;\n}\n/**\n *  Returns the closest MIDI note value for\n *  a given frequency.\n *\n *  @method freqToMidi\n *  @param  {Number} frequency A freqeuncy, for example, the \"A\"\n *                             above Middle C is 440Hz\n *  @return {Number}   MIDI note value\n */\n\n\nfunction freqToMidi(f) {\n  var mathlog2 = Math.log(f / 440) / Math.log(2);\n  var m = Math.round(12 * mathlog2) + 69;\n  return m;\n}\n/**\n *  Returns the frequency value of a MIDI note value.\n *  General MIDI treats notes as integers where middle C\n *  is 60, C# is 61, D is 62 etc. Useful for generating\n *  musical frequencies with oscillators.\n *\n *  @method  midiToFreq\n *  @param  {Number} midiNote The number of a MIDI note\n *  @return {Number} Frequency value of the given MIDI note\n *  @example\n *  <div><code>\n *  let midiNotes = [60, 64, 67, 72];\n *  let noteIndex = 0;\n *  let midiVal, freq;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(startSound);\n *    osc = new p5.TriOsc();\n *    env = new p5.Envelope();\n *  }\n *\n *  function draw() {\n *    background(220);\n *    text('tap to play', 10, 20);\n *    if (midiVal) {\n *      text('MIDI: ' + midiVal, 10, 40);\n *      text('Freq: ' + freq, 10, 60);\n *    }\n *  }\n *\n *  function startSound() {\n *    // see also: userStartAudio();\n *    osc.start();\n *\n *    midiVal = midiNotes[noteIndex % midiNotes.length];\n *    freq = midiToFreq(midiVal);\n *    osc.freq(freq);\n *    env.ramp(osc, 0, 1.0, 0);\n *\n *    noteIndex++;\n *  }\n *  </code></div>\n */\n\n\nfunction midiToFreq(m) {\n  return 440 * Math.pow(2, (m - 69) / 12.0);\n} \n\n\nfunction noteToFreq(note) {\n  if (typeof note !== 'string') {\n    return note;\n  }\n\n  var wholeNotes = {\n    A: 21,\n    B: 23,\n    C: 24,\n    D: 26,\n    E: 28,\n    F: 29,\n    G: 31\n  };\n  var value = wholeNotes[note[0].toUpperCase()];\n  var octave = ~~note.slice(-1);\n  value += 12 * (octave - 1);\n\n  switch (note[1]) {\n    case '#':\n      value += 1;\n      break;\n\n    case 'b':\n      value -= 1;\n      break;\n\n    default:\n      break;\n  }\n\n  return midiToFreq(value);\n}\n/**\n *  List the SoundFile formats that you will include. LoadSound\n *  will search your directory for these extensions, and will pick\n *  a format that is compatable with the client's web browser.\n *  <a href=\"http://media.io/\">Here</a> is a free online file\n *  converter.\n *\n *  @method soundFormats\n *  @param {String} [...formats] i.e. 'mp3', 'wav', 'ogg'\n *  @example\n *  <div><code>\n *  function preload() {\n *    // set the global sound formats\n *    soundFormats('mp3', 'ogg');\n *\n *    // load either beatbox.mp3, or .ogg, depending on browser\n *    mySound = loadSound('assets/beatbox.mp3');\n *  }\n *\n *  function setup() {\n *       let cnv = createCanvas(100, 100);\n *       background(220);\n *       text('sound loaded! tap to play', 10, 20, width - 20);\n *       cnv.mousePressed(function() {\n *         mySound.play();\n *       });\n *     }\n *  </code></div>\n */\n\n\nfunction soundFormats() {\n  main.extensions = []; \n\n  for (var i = 0; i < arguments.length; i++) {\n    arguments[i] = arguments[i].toLowerCase();\n\n    if (['mp3', 'wav', 'ogg', 'm4a', 'aac'].indexOf(arguments[i]) > -1) {\n      main.extensions.push(arguments[i]);\n    } else {\n      throw arguments[i] + ' is not a valid sound format!';\n    }\n  }\n}\n\nfunction disposeSound() {\n  for (var i = 0; i < main.soundArray.length; i++) {\n    main.soundArray[i].dispose();\n  }\n}\n\nfunction _checkFileFormats(paths) {\n  var path; \n\n  if (typeof paths === 'string') {\n    path = paths; \n\n    var extTest = path.split('.').pop(); \n\n    if (['mp3', 'wav', 'ogg', 'm4a', 'aac'].indexOf(extTest) > -1) {\n      if (!p5.prototype.isFileSupported(extTest)) {\n        var pathSplit = path.split('.');\n        var pathCore = pathSplit[pathSplit.length - 1];\n\n        for (var _i = 0; _i < main.extensions.length; _i++) {\n          var _extension = main.extensions[_i];\n\n          var _supported = p5.prototype.isFileSupported(_extension);\n\n          if (_supported) {\n            pathCore = '';\n\n            if (pathSplit.length === 2) {\n              pathCore += pathSplit[0];\n            }\n\n            for (var _i2 = 1; _i2 <= pathSplit.length - 2; _i2++) {\n              var p = pathSplit[_i2];\n              pathCore += '.' + p;\n            }\n\n            path = pathCore += '.';\n            path = path += _extension;\n            break;\n          }\n        }\n      }\n    } \n    else {\n        for (var _i3 = 0; _i3 < main.extensions.length; _i3++) {\n          var _extension2 = main.extensions[_i3];\n\n          var _supported2 = p5.prototype.isFileSupported(_extension2);\n\n          if (_supported2) {\n            path = path + '.' + _extension2;\n            break;\n          }\n        }\n      }\n  } \n  else if (_typeof(paths) === 'object') {\n      for (var i = 0; i < paths.length; i++) {\n        var extension = paths[i].split('.').pop();\n        var supported = p5.prototype.isFileSupported(extension);\n\n        if (supported) {\n          path = paths[i];\n          break;\n        }\n      }\n    }\n\n  return path;\n}\n/**\n *  Used by Osc and Envelope to chain signal math\n */\n\n\nfunction _mathChain(o, math, thisChain, nextChain, type) {\n  for (var i in o.mathOps) {\n    if (o.mathOps[i] instanceof type) {\n      o.mathOps[i].dispose();\n      thisChain = i;\n\n      if (thisChain < o.mathOps.length - 1) {\n        nextChain = o.mathOps[i + 1];\n      }\n    }\n  }\n\n  o.mathOps[thisChain - 1].disconnect();\n  o.mathOps[thisChain - 1].connect(math);\n  math.connect(nextChain);\n  o.mathOps[thisChain] = math;\n  return o;\n} \n\n\nfunction convertToWav(audioBuffer) {\n  var leftChannel, rightChannel;\n  leftChannel = audioBuffer.getChannelData(0); \n\n  if (audioBuffer.numberOfChannels > 1) {\n    rightChannel = audioBuffer.getChannelData(1);\n  } else {\n    rightChannel = leftChannel;\n  }\n\n  var interleaved = interleave(leftChannel, rightChannel); \n\n  var buffer = new window.ArrayBuffer(44 + interleaved.length * 2);\n  var view = new window.DataView(buffer); \n\n  writeUTFBytes(view, 0, 'RIFF');\n  view.setUint32(4, 36 + interleaved.length * 2, true);\n  writeUTFBytes(view, 8, 'WAVE'); \n\n  writeUTFBytes(view, 12, 'fmt ');\n  view.setUint32(16, 16, true);\n  view.setUint16(20, 1, true); \n\n  view.setUint16(22, 2, true);\n  view.setUint32(24, main.audiocontext.sampleRate, true);\n  view.setUint32(28, main.audiocontext.sampleRate * 4, true);\n  view.setUint16(32, 4, true);\n  view.setUint16(34, 16, true); \n\n  writeUTFBytes(view, 36, 'data');\n  view.setUint32(40, interleaved.length * 2, true); \n\n  var lng = interleaved.length;\n  var index = 44;\n  var volume = 1;\n\n  for (var i = 0; i < lng; i++) {\n    view.setInt16(index, interleaved[i] * (0x7fff * volume), true);\n    index += 2;\n  }\n\n  return view;\n} \n\n\nfunction interleave(leftChannel, rightChannel) {\n  var length = leftChannel.length + rightChannel.length;\n  var result = new Float32Array(length);\n  var inputIndex = 0;\n\n  for (var index = 0; index < length;) {\n    result[index++] = leftChannel[inputIndex];\n    result[index++] = rightChannel[inputIndex];\n    inputIndex++;\n  }\n\n  return result;\n}\n\nfunction writeUTFBytes(view, offset, string) {\n  var lng = string.length;\n\n  for (var i = 0; i < lng; i++) {\n    view.setUint8(offset + i, string.charCodeAt(i));\n  }\n}\n\nfunction safeBufferSize(idealBufferSize) {\n  var bufferSize = idealBufferSize; \n\n  var tempAudioWorkletNode = new AudioWorkletNode(main.audiocontext, processorNames_default.a.soundFileProcessor);\n\n  if (tempAudioWorkletNode instanceof ScriptProcessorNode) {\n    bufferSize = tempAudioWorkletNode.bufferSize;\n  }\n\n  tempAudioWorkletNode.disconnect();\n  tempAudioWorkletNode = null;\n  return bufferSize;\n}\n/**\n * Save a p5.SoundFile as a .wav file. The browser will prompt the user\n * to download the file to their device.\n * For uploading audio to a server, use\n * <a href=\"/docs/reference/#/p5.SoundFile/saveBlob\">`p5.SoundFile.saveBlob`</a>.\n *\n *  @for p5\n *  @method saveSound\n *  @param  {p5.SoundFile} soundFile p5.SoundFile that you wish to save\n *  @param  {String} fileName      name of the resulting .wav file.\n */\n\n\nfunction saveSound(soundFile, fileName) {\n  var dataView = convertToWav(soundFile.buffer);\n  p5.prototype.writeFile([dataView], fileName, 'wav');\n}\n\n\nvar CustomError = function CustomError(name, errorTrace, failedPath) {\n  var err = new Error();\n  var tempStack, splitStack;\n  err.name = name;\n  err.originalStack = err.stack + errorTrace;\n  tempStack = err.stack + errorTrace;\n  err.failedPath = failedPath; \n\n  splitStack = tempStack.split('\\n').filter(function (ln) {\n    return !ln.match(/(p5.|native code|globalInit)/g);\n  });\n  err.stack = splitStack.join('\\n');\n  return err; \n};\n\n var errorHandler = (CustomError);\n\nvar moduleSources = [__webpack_require__(27)[\"default\"], __webpack_require__(28)[\"default\"], __webpack_require__(29)[\"default\"]];\nvar audioWorklet_ac = main.audiocontext;\nvar initializedAudioWorklets = false;\n\nfunction loadAudioWorkletModules() {\n  return Promise.all(moduleSources.map(function (moduleSrc) {\n    var blob = new Blob([moduleSrc], {\n      type: 'application/javascript'\n    });\n    var objectURL = URL.createObjectURL(blob);\n    return audioWorklet_ac.audioWorklet.addModule(objectURL);\n  }));\n}\n\np5.prototype.registerMethod('init', function () {\n  if (initializedAudioWorklets) return; \n\n  if (!this.preload && !window.preload) {\n    this.preload = function () {};\n  } \n\n\n  this._incrementPreload();\n\n  var onWorkletModulesLoad = function () {\n    initializedAudioWorklets = true;\n\n    this._decrementPreload();\n  }.bind(this);\n\n  loadAudioWorkletModules().then(onWorkletModulesLoad);\n});\nfunction panner_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\nvar panner_ac = main.audiocontext;\nvar panner; \n\nif (typeof panner_ac.createStereoPanner !== 'undefined') {\n  var Panner =\n  function () {\n    function Panner(input, output) {\n      panner_classCallCheck(this, Panner);\n\n      this.stereoPanner = this.input = panner_ac.createStereoPanner();\n      input.connect(this.stereoPanner);\n      this.stereoPanner.connect(output);\n    }\n\n    _createClass(Panner, [{\n      key: \"pan\",\n      value: function pan(val, tFromNow) {\n        var time = tFromNow || 0;\n        var t = panner_ac.currentTime + time;\n        this.stereoPanner.pan.linearRampToValueAtTime(val, t);\n      } \n\n    }, {\n      key: \"inputChannels\",\n      value: function inputChannels() {}\n    }, {\n      key: \"connect\",\n      value: function connect(obj) {\n        this.stereoPanner.connect(obj);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.stereoPanner) {\n          this.stereoPanner.disconnect();\n        }\n      }\n    }]);\n\n    return Panner;\n  }();\n\n  panner = Panner;\n} else {\n  var _Panner =\n  function () {\n    function _Panner(input, output, numInputChannels) {\n      panner_classCallCheck(this, _Panner);\n\n      this.input = panner_ac.createGain();\n      input.connect(this.input);\n      this.left = panner_ac.createGain();\n      this.right = panner_ac.createGain();\n      this.left.channelInterpretation = 'discrete';\n      this.right.channelInterpretation = 'discrete'; \n\n      if (numInputChannels > 1) {\n        this.splitter = panner_ac.createChannelSplitter(2);\n        this.input.connect(this.splitter);\n        this.splitter.connect(this.left, 1);\n        this.splitter.connect(this.right, 0);\n      } else {\n        this.input.connect(this.left);\n        this.input.connect(this.right);\n      }\n\n      this.output = panner_ac.createChannelMerger(2);\n      this.left.connect(this.output, 0, 1);\n      this.right.connect(this.output, 0, 0);\n      this.output.connect(output);\n    } \n\n\n    _createClass(_Panner, [{\n      key: \"pan\",\n      value: function pan(val, tFromNow) {\n        var time = tFromNow || 0;\n        var t = panner_ac.currentTime + time;\n        var v = (val + 1) / 2;\n        var rightVal = Math.cos(v * Math.PI / 2);\n        var leftVal = Math.sin(v * Math.PI / 2);\n        this.left.gain.linearRampToValueAtTime(leftVal, t);\n        this.right.gain.linearRampToValueAtTime(rightVal, t);\n      }\n    }, {\n      key: \"inputChannels\",\n      value: function inputChannels(numChannels) {\n        if (numChannels === 1) {\n          this.input.disconnect();\n          this.input.connect(this.left);\n          this.input.connect(this.right);\n        } else if (numChannels === 2) {\n          if (typeof this.splitter === 'undefined') {\n            this.splitter = panner_ac.createChannelSplitter(2);\n          }\n\n          this.input.disconnect();\n          this.input.connect(this.splitter);\n          this.splitter.connect(this.left, 1);\n          this.splitter.connect(this.right, 0);\n        }\n      }\n    }, {\n      key: \"connect\",\n      value: function connect(obj) {\n        this.output.connect(obj);\n      }\n    }, {\n      key: \"disconnect\",\n      value: function disconnect() {\n        if (this.output) {\n          this.output.disconnect();\n        }\n      }\n    }]);\n\n    return _Panner;\n  }();\n\n  panner = _Panner;\n}\n\n var panner_0 = (panner);\nfunction soundfile_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { soundfile_typeof = function _typeof(obj) { return typeof obj; }; } else { soundfile_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return soundfile_typeof(obj); }\n\nfunction soundfile_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction soundfile_createClass(Constructor, protoProps, staticProps) { if (protoProps) soundfile_defineProperties(Constructor.prototype, protoProps); if (staticProps) soundfile_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction soundfile_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\nvar soundfile_ac = main.audiocontext;\n\nvar _createCounterBuffer = function _createCounterBuffer(buffer) {\n  var len = buffer.length;\n  var audioBuf = soundfile_ac.createBuffer(1, buffer.length, soundfile_ac.sampleRate);\n  var arrayBuffer = audioBuf.getChannelData(0);\n\n  for (var index = 0; index < len; index++) {\n    arrayBuffer[index] = index;\n  }\n\n  return audioBuf;\n};\n\n\nvar Cue = function Cue(callback, time, id, val) {\n  soundfile_classCallCheck(this, Cue);\n\n  this.callback = callback;\n  this.time = time;\n  this.id = id;\n  this.val = val;\n}; \n\n\nfunction _clearOnEnd(e) {\n  var thisBufferSourceNode = e.target;\n  var soundFile = this; \n\n  thisBufferSourceNode._playing = false;\n  thisBufferSourceNode.removeEventListener('ended', soundFile._clearOnEnd); \n\n  soundFile._onended(soundFile); \n\n\n  soundFile.bufferSourceNodes.map(function (_, i) {\n    return i;\n  }).reverse().forEach(function (i) {\n    var n = soundFile.bufferSourceNodes[i];\n\n    if (n._playing === false) {\n      soundFile.bufferSourceNodes.splice(i, 1);\n    }\n  });\n\n  if (soundFile.bufferSourceNodes.length === 0) {\n    soundFile._playing = false;\n  }\n}\n/**\n *  <p>SoundFile object with a path to a file.</p>\n *\n *  <p>The p5.SoundFile may not be available immediately because\n *  it loads the file information asynchronously.</p>\n *\n *  <p>To do something with the sound as soon as it loads\n *  pass the name of a function as the second parameter.</p>\n *\n *  <p>Only one file path is required. However, audio file formats\n *  (i.e. mp3, ogg, wav and m4a/aac) are not supported by all\n *  web browsers. If you want to ensure compatability, instead of a single\n *  file path, you may include an Array of filepaths, and the browser will\n *  choose a format that works.</p>\n *\n *  @class p5.SoundFile\n *  @constructor\n *  @param {String|Array} path   path to a sound file (String). Optionally,\n *                               you may include multiple file formats in\n *                               an array. Alternately, accepts an object\n *                               from the HTML5 File API, or a p5.File.\n *  @param {Function} [successCallback]   Name of a function to call once file loads\n *  @param {Function} [errorCallback]   Name of a function to call if file fails to\n *                                      load. This function will receive an error or\n *                                     XMLHttpRequest object with information\n *                                     about what went wrong.\n *  @param {Function} [whileLoadingCallback]   Name of a function to call while file\n *                                             is loading. That function will\n *                                             receive progress of the request to\n *                                             load the sound file\n *                                             (between 0 and 1) as its first\n *                                             parameter. This progress\n *                                             does not account for the additional\n *                                             time needed to decode the audio data.\n *\n *  @example\n *  <div><code>\n *  let mySound;\n *  function preload() {\n *    soundFormats('mp3', 'ogg');\n *    mySound = loadSound('assets/doorbell');\n *  }\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(canvasPressed);\n *    background(220);\n *    text('tap here to play', 10, 20);\n *  }\n *\n *  function canvasPressed() {\n *    // playing a sound file on a user gesture\n *    // is equivalent to `userStartAudio()`\n *    mySound.play();\n *  }\n * </code></div>\n */\n\n\nvar soundfile_SoundFile =\nfunction () {\n  function SoundFile(paths, onload, onerror, whileLoading) {\n    soundfile_classCallCheck(this, SoundFile);\n\n    if (typeof paths !== 'undefined') {\n      if (typeof paths === 'string' || typeof paths[0] === 'string') {\n        var path = p5.prototype._checkFileFormats(paths);\n\n        this.url = path;\n      } else if (soundfile_typeof(paths) === 'object') {\n        if (!(window.File && window.FileReader && window.FileList && window.Blob)) {\n          throw 'Unable to load file because the File API is not supported';\n        }\n      } \n\n\n      if (paths.file) {\n        paths = paths.file;\n      }\n\n      this.file = paths;\n    } \n\n\n    this._onended = function () {};\n\n    this._looping = false;\n    this._playing = false;\n    this._paused = false;\n    this._pauseTime = 0; \n\n    this._cues = [];\n    this._cueIDCounter = 0; \n\n    this._lastPos = 0;\n    this._counterNode = null;\n    this._workletNode = null; \n\n    this.bufferSourceNodes = []; \n\n    this.bufferSourceNode = null;\n    this.buffer = null;\n    this.playbackRate = 1;\n    this.input = main.audiocontext.createGain();\n    this.output = main.audiocontext.createGain();\n    this.reversed = false; \n\n    this.startTime = 0;\n    this.endTime = null;\n    this.pauseTime = 0; \n\n    this.mode = 'sustain'; \n\n    this.startMillis = null; \n\n    this.panPosition = 0.0;\n    this.panner = new panner_0(this.output, main.input, 2); \n\n    if (this.url || this.file) {\n      this.load(onload, onerror);\n    } \n\n\n    main.soundArray.push(this);\n\n    if (typeof whileLoading === 'function') {\n      this._whileLoading = whileLoading;\n    } else {\n      this._whileLoading = function () {};\n    }\n\n    this._clearOnEnd = _clearOnEnd.bind(this); \n\n    this.amp = this.setVolume; \n\n    this.fade = this.setVolume;\n  }\n  /**\n   * This is a helper function that the p5.SoundFile calls to load\n   * itself. Accepts a callback (the name of another function)\n   * as an optional parameter.\n   *\n   * @private\n   * @for p5.SoundFile\n   * @param {Function} [successCallback]   Name of a function to call once file loads\n   * @param {Function} [errorCallback]   Name of a function to call if there is an error\n   */\n\n\n  soundfile_createClass(SoundFile, [{\n    key: \"load\",\n    value: function load(callback, errorCallback) {\n      var self = this;\n      var errorTrace = new Error().stack;\n\n      if (this.url !== undefined && this.url !== '') {\n        var request = new XMLHttpRequest();\n        request.addEventListener('progress', function (evt) {\n          self._updateProgress(evt);\n        }, false);\n        request.open('GET', this.url, true);\n        request.responseType = 'arraybuffer';\n\n        request.onload = function () {\n          if (request.status === 200) {\n            if (!self.panner) return;\n            soundfile_ac.decodeAudioData(request.response, \n            function (buff) {\n              if (!self.panner) return;\n              self.buffer = buff;\n              self.panner.inputChannels(buff.numberOfChannels);\n\n              if (callback) {\n                callback(self);\n              }\n            }, \n            function () {\n              if (!self.panner) return;\n              var err = new errorHandler('decodeAudioData', errorTrace, self.url);\n              var msg = 'AudioContext error at decodeAudioData for ' + self.url;\n\n              if (errorCallback) {\n                err.msg = msg;\n                errorCallback(err);\n              } else {\n                console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n              }\n            });\n          } \n          else {\n              if (!self.panner) return;\n              var err = new errorHandler('loadSound', errorTrace, self.url);\n              var msg = 'Unable to load ' + self.url + '. The request status was: ' + request.status + ' (' + request.statusText + ')';\n\n              if (errorCallback) {\n                err.message = msg;\n                errorCallback(err);\n              } else {\n                console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n              }\n            }\n        }; \n\n\n        request.onerror = function () {\n          var err = new errorHandler('loadSound', errorTrace, self.url);\n          var msg = 'There was no response from the server at ' + self.url + '. Check the url and internet connectivity.';\n\n          if (errorCallback) {\n            err.message = msg;\n            errorCallback(err);\n          } else {\n            console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n          }\n        };\n\n        request.send();\n      } else if (this.file !== undefined) {\n        var reader = new FileReader();\n\n        reader.onload = function () {\n          if (!self.panner) return;\n          soundfile_ac.decodeAudioData(reader.result, function (buff) {\n            if (!self.panner) return;\n            self.buffer = buff;\n            self.panner.inputChannels(buff.numberOfChannels);\n\n            if (callback) {\n              callback(self);\n            }\n          });\n        };\n\n        reader.onerror = function (e) {\n          if (!self.panner) return;\n\n          if (onerror) {\n            onerror(e);\n          }\n        };\n\n        reader.readAsArrayBuffer(this.file);\n      }\n    } \n\n  }, {\n    key: \"_updateProgress\",\n    value: function _updateProgress(evt) {\n      if (evt.lengthComputable) {\n        var percentComplete = evt.loaded / evt.total * 0.99;\n\n        this._whileLoading(percentComplete, evt); \n\n      } else {\n        this._whileLoading('size unknown');\n      }\n    }\n    /**\n     *  Returns true if the sound file finished loading successfully.\n     *\n     *  @method  isLoaded\n     *  @for p5.SoundFile\n     *  @return {Boolean}\n     */\n\n  }, {\n    key: \"isLoaded\",\n    value: function isLoaded() {\n      if (this.buffer) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n    /**\n     * Play the p5.SoundFile\n     *\n     * @method play\n     * @for p5.SoundFile\n     * @param {Number} [startTime]            (optional) schedule playback to start (in seconds from now).\n     * @param {Number} [rate]             (optional) playback rate\n     * @param {Number} [amp]              (optional) amplitude (volume)\n     *                                     of playback\n     * @param {Number} [cueStart]        (optional) cue start time in seconds\n     * @param {Number} [duration]          (optional) duration of playback in seconds\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(startTime, rate, amp, _cueStart, duration) {\n      if (!this.output) {\n        console.warn('SoundFile.play() called after dispose');\n        return;\n      }\n\n      var now = main.audiocontext.currentTime;\n      var cueStart, cueEnd;\n      var time = startTime || 0;\n\n      if (time < 0) {\n        time = 0;\n      }\n\n      time = time + now;\n\n      if (typeof rate !== 'undefined') {\n        this.rate(rate);\n      }\n\n      if (typeof amp !== 'undefined') {\n        this.setVolume(amp);\n      } \n\n\n      if (this.buffer) {\n        this._pauseTime = 0; \n\n        if (this.mode === 'restart' && this.buffer && this.bufferSourceNode) {\n          this.bufferSourceNode.stop(time);\n\n          this._counterNode.stop(time);\n        } \n\n\n        if (this.mode === 'untildone' && this.isPlaying()) {\n          return;\n        } \n\n\n        this.bufferSourceNode = this._initSourceNode(); \n\n        delete this._counterNode;\n        this._counterNode = this._initCounterNode();\n\n        if (_cueStart) {\n          if (_cueStart >= 0 && _cueStart < this.buffer.duration) {\n            cueStart = _cueStart;\n          } else {\n            throw 'start time out of range';\n          }\n        } else {\n          cueStart = 0;\n        }\n\n        if (duration) {\n          duration = duration <= this.buffer.duration - cueStart ? duration : this.buffer.duration;\n        } \n\n\n        if (this._paused) {\n          this.bufferSourceNode.start(time, this.pauseTime, duration);\n\n          this._counterNode.start(time, this.pauseTime, duration);\n        } else {\n          this.bufferSourceNode.start(time, cueStart, duration);\n\n          this._counterNode.start(time, cueStart, duration);\n        }\n\n        this._playing = true;\n        this._paused = false; \n\n        this.bufferSourceNodes.push(this.bufferSourceNode);\n        this.bufferSourceNode._arrayIndex = this.bufferSourceNodes.length - 1;\n        this.bufferSourceNode.addEventListener('ended', this._clearOnEnd);\n      } \n      else {\n          throw 'not ready to play file, buffer has yet to load. Try preload()';\n        } \n\n\n      this.bufferSourceNode.loop = this._looping;\n      this._counterNode.loop = this._looping;\n\n      if (this._looping === true) {\n        cueEnd = duration ? duration : cueStart - 0.000000000000001;\n        this.bufferSourceNode.loopStart = cueStart;\n        this.bufferSourceNode.loopEnd = cueEnd;\n        this._counterNode.loopStart = cueStart;\n        this._counterNode.loopEnd = cueEnd;\n      }\n    }\n    /**\n     *  p5.SoundFile has two play modes: <code>restart</code> and\n     *  <code>sustain</code>. Play Mode determines what happens to a\n     *  p5.SoundFile if it is triggered while in the middle of playback.\n     *  In sustain mode, playback will continue simultaneous to the\n     *  new playback. In restart mode, play() will stop playback\n     *  and start over. With untilDone, a sound will play only if it's\n     *  not already playing. Sustain is the default mode.\n     *\n     *  @method  playMode\n     *  @for p5.SoundFile\n     *  @param  {String} str 'restart' or 'sustain' or 'untilDone'\n     *  @example\n     *  <div><code>\n     *  let mySound;\n     *  function preload(){\n     *    mySound = loadSound('assets/Damscray_DancingTiger.mp3');\n     *  }\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(canvasPressed);\n     *    noFill();\n     *    rect(0, height/2, width - 1, height/2 - 1);\n     *    rect(0, 0, width - 1, height/2);\n     *    textAlign(CENTER, CENTER);\n     *    fill(20);\n     *    text('restart', width/2, 1 * height/4);\n     *    text('sustain', width/2, 3 * height/4);\n     *  }\n     *  function canvasPressed() {\n     *    if (mouseX < height/2) {\n     *      mySound.playMode('restart');\n     *    } else {\n     *      mySound.playMode('sustain');\n     *    }\n     *    mySound.play();\n     *  }\n     *\n     * </code></div>\n     */\n\n  }, {\n    key: \"playMode\",\n    value: function playMode(str) {\n      var s = str.toLowerCase(); \n\n      if (s === 'restart' && this.buffer && this.bufferSourceNode) {\n        for (var i = 0; i < this.bufferSourceNodes.length - 1; i++) {\n          var now = main.audiocontext.currentTime;\n          this.bufferSourceNodes[i].stop(now);\n        }\n      } \n\n\n      if (s === 'restart' || s === 'sustain' || s === 'untildone') {\n        this.mode = s;\n      } else {\n        throw 'Invalid play mode. Must be either \"restart\" or \"sustain\"';\n      }\n    }\n    /**\n     *  Pauses a file that is currently playing. If the file is not\n     *  playing, then nothing will happen.\n     *\n     *  After pausing, .play() will resume from the paused\n     *  position.\n     *  If p5.SoundFile had been set to loop before it was paused,\n     *  it will continue to loop after it is unpaused with .play().\n     *\n     *  @method pause\n     *  @for p5.SoundFile\n     *  @param {Number} [startTime] (optional) schedule event to occur\n     *                               seconds from now\n     *  @example\n     *  <div><code>\n     *  let soundFile;\n     *  function preload() {\n     *    soundFormats('ogg', 'mp3');\n     *    soundFile = loadSound('assets/Damscray_-_Dancing_Tiger_02.mp3');\n     *  }\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(canvasPressed);\n     *    background(220);\n     *    text('tap to play, release to pause', 10, 20, width - 20);\n     *  }\n     *  function canvasPressed() {\n     *    soundFile.loop();\n     *    background(0, 200, 50);\n     *  }\n     *  function mouseReleased() {\n     *    soundFile.pause();\n     *    background(220);\n     *  }\n     *  </code>\n     *  </div>\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause(startTime) {\n      var now = main.audiocontext.currentTime;\n      var time = startTime || 0;\n      var pTime = time + now;\n\n      if (this.isPlaying() && this.buffer && this.bufferSourceNode) {\n        this._paused = true;\n        this._playing = false;\n        this.pauseTime = this.currentTime();\n        this.bufferSourceNode.stop(pTime);\n\n        this._counterNode.stop(pTime);\n\n        this._pauseTime = this.currentTime(); \n      } else {\n        this._pauseTime = 0;\n      }\n    }\n    /**\n     * Loop the p5.SoundFile. Accepts optional parameters to set the\n     * playback rate, playback volume, loopStart, loopEnd.\n     *\n     * @method loop\n     * @for p5.SoundFile\n     * @param {Number} [startTime] (optional) schedule event to occur\n     *                             seconds from now\n     * @param {Number} [rate]        (optional) playback rate\n     * @param {Number} [amp]         (optional) playback volume\n     * @param {Number} [cueLoopStart] (optional) startTime in seconds\n     * @param {Number} [duration]  (optional) loop duration in seconds\n     * @example\n     *  <div><code>\n     *  let soundFile;\n     *  let loopStart = 0.5;\n     *  let loopDuration = 0.2;\n     *  function preload() {\n     *    soundFormats('ogg', 'mp3');\n     *    soundFile = loadSound('assets/Damscray_-_Dancing_Tiger_02.mp3');\n     *  }\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(canvasPressed);\n     *    background(220);\n     *    text('tap to play, release to pause', 10, 20, width - 20);\n     *  }\n     *  function canvasPressed() {\n     *    soundFile.loop();\n     *    background(0, 200, 50);\n     *  }\n     *  function mouseReleased() {\n     *    soundFile.pause();\n     *    background(220);\n     *  }\n     *  </code>\n     *  </div>\n     */\n\n  }, {\n    key: \"loop\",\n    value: function loop(startTime, rate, amp, loopStart, duration) {\n      this._looping = true;\n      this.play(startTime, rate, amp, loopStart, duration);\n    }\n    /**\n     * Set a p5.SoundFile's looping flag to true or false. If the sound\n     * is currently playing, this change will take effect when it\n     * reaches the end of the current playback.\n     *\n     * @method setLoop\n     * @for p5.SoundFile\n     * @param {Boolean} Boolean   set looping to true or false\n     */\n\n  }, {\n    key: \"setLoop\",\n    value: function setLoop(bool) {\n      if (bool === true) {\n        this._looping = true;\n      } else if (bool === false) {\n        this._looping = false;\n      } else {\n        throw 'Error: setLoop accepts either true or false';\n      }\n\n      if (this.bufferSourceNode) {\n        this.bufferSourceNode.loop = this._looping;\n        this._counterNode.loop = this._looping;\n      }\n    }\n    /**\n     * Returns 'true' if a p5.SoundFile is currently looping and playing, 'false' if not.\n     *\n     * @method isLooping\n     * @for p5.SoundFile\n     * @return {Boolean}\n     */\n\n  }, {\n    key: \"isLooping\",\n    value: function isLooping() {\n      if (!this.bufferSourceNode) {\n        return false;\n      }\n\n      if (this._looping === true && this.isPlaying() === true) {\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     *  Returns true if a p5.SoundFile is playing, false if not (i.e.\n     *  paused or stopped).\n     *\n     *  @method isPlaying\n     *  @for p5.SoundFile\n     *  @return {Boolean}\n     */\n\n  }, {\n    key: \"isPlaying\",\n    value: function isPlaying() {\n      return this._playing;\n    }\n    /**\n     *  Returns true if a p5.SoundFile is paused, false if not (i.e.\n     *  playing or stopped).\n     *\n     *  @method  isPaused\n     *  @for p5.SoundFile\n     *  @return {Boolean}\n     */\n\n  }, {\n    key: \"isPaused\",\n    value: function isPaused() {\n      return this._paused;\n    }\n    /**\n     * Stop soundfile playback.\n     *\n     * @method stop\n     * @for p5.SoundFile\n     * @param {Number} [startTime] (optional) schedule event to occur\n     *                             in seconds from now\n     */\n\n  }, {\n    key: \"stop\",\n    value: function stop(timeFromNow) {\n      var time = timeFromNow || 0;\n\n      if (this.mode === 'sustain' || this.mode === 'untildone') {\n        this.stopAll(time);\n        this._playing = false;\n        this.pauseTime = 0;\n        this._paused = false;\n      } else if (this.buffer && this.bufferSourceNode) {\n        var now = main.audiocontext.currentTime;\n        var t = time || 0;\n        this.pauseTime = 0;\n        this.bufferSourceNode.stop(now + t);\n\n        this._counterNode.stop(now + t);\n\n        this._playing = false;\n        this._paused = false;\n      }\n    }\n    /**\n     *  Stop playback on all of this soundfile's sources.\n     *  @private\n     */\n\n  }, {\n    key: \"stopAll\",\n    value: function stopAll(_time) {\n      var now = main.audiocontext.currentTime;\n      var time = _time || 0;\n\n      if (this.buffer && this.bufferSourceNode) {\n        for (var i in this.bufferSourceNodes) {\n          var bufferSourceNode = this.bufferSourceNodes[i];\n\n          if (bufferSourceNode) {\n            try {\n              bufferSourceNode.stop(now + time);\n            } catch (e) {\n            }\n          }\n        }\n\n        this._counterNode.stop(now + time);\n      }\n    }\n  }, {\n    key: \"getVolume\",\n    value: function getVolume() {\n      return this.output.gain.value;\n    }\n    /**\n     * Set the stereo panning of a p5.sound object to\n     * a floating point number between -1.0 (left) and 1.0 (right).\n     * Default is 0.0 (center).\n     *\n     * @method pan\n     * @for p5.SoundFile\n     * @param {Number} [panValue]     Set the stereo panner\n     * @param {Number} [timeFromNow]  schedule this event to happen\n     *                                 seconds from now\n     * @example\n     * <div><code>\n     *  let ballX = 0;\n     *  let soundFile;\n     *\n     *  function preload() {\n     *    soundFormats('ogg', 'mp3');\n     *    soundFile = loadSound('assets/beatbox.mp3');\n     *  }\n     *\n     *  function draw() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(canvasPressed);\n     *    background(220);\n     *    ballX = constrain(mouseX, 0, width);\n     *    ellipse(ballX, height/2, 20, 20);\n     *  }\n     *\n     *  function canvasPressed(){\n     *    // map the ball's x location to a panning degree\n     *    // between -1.0 (left) and 1.0 (right)\n     *    let panning = map(ballX, 0., width,-1.0, 1.0);\n     *    soundFile.pan(panning);\n     *    soundFile.play();\n     *  }\n     *  </div></code>\n     */\n\n  }, {\n    key: \"pan\",\n    value: function pan(pval, tFromNow) {\n      this.panPosition = pval;\n      this.panner.pan(pval, tFromNow);\n    }\n    /**\n     * Returns the current stereo pan position (-1.0 to 1.0)\n     *\n     * @method getPan\n     * @for p5.SoundFile\n     * @return {Number} Returns the stereo pan setting of the Oscillator\n     *                          as a number between -1.0 (left) and 1.0 (right).\n     *                          0.0 is center and default.\n     */\n\n  }, {\n    key: \"getPan\",\n    value: function getPan() {\n      return this.panPosition;\n    }\n    /**\n     *  Set the playback rate of a sound file. Will change the speed and the pitch.\n     *  Values less than zero will reverse the audio buffer.\n     *\n     *  @method rate\n     *  @for p5.SoundFile\n     *  @param {Number} [playbackRate]     Set the playback rate. 1.0 is normal,\n     *                                     .5 is half-speed, 2.0 is twice as fast.\n     *                                     Values less than zero play backwards.\n     *  @example\n     *  <div><code>\n     *  let mySound;\n     *\n     *  function preload() {\n     *    mySound = loadSound('assets/Damscray_DancingTiger.mp3');\n     *  }\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(canvasPressed);\n     *  }\n     *  function canvasPressed() {\n     *    mySound.loop();\n     *  }\n     *  function mouseReleased() {\n     *    mySound.pause();\n     *  }\n     *  function draw() {\n     *    background(220);\n     *\n     *    // Set the rate to a range between 0.1 and 4\n     *    // Changing the rate also alters the pitch\n     *    let playbackRate = map(mouseY, 0.1, height, 2, 0);\n     *    playbackRate = constrain(playbackRate, 0.01, 4);\n     *    mySound.rate(playbackRate);\n     *\n     *    line(0, mouseY, width, mouseY);\n     *    text('rate: ' + round(playbackRate * 100) + '%', 10, 20);\n     *  }\n     *\n     * </code>\n     * </div>\n     *\n     */\n\n  }, {\n    key: \"rate\",\n    value: function rate(playbackRate) {\n      var reverse = false;\n\n      if (typeof playbackRate === 'undefined') {\n        return this.playbackRate;\n      }\n\n      this.playbackRate = playbackRate;\n\n      if (playbackRate === 0) {\n        playbackRate = 0.0000000000001;\n      } else if (playbackRate < 0 && !this.reversed) {\n        playbackRate = Math.abs(playbackRate);\n        reverse = true;\n      } else if (playbackRate > 0 && this.reversed) {\n        reverse = true;\n      }\n\n      if (this.bufferSourceNode) {\n        var now = main.audiocontext.currentTime;\n        this.bufferSourceNode.playbackRate.cancelScheduledValues(now);\n        this.bufferSourceNode.playbackRate.linearRampToValueAtTime(Math.abs(playbackRate), now);\n\n        this._counterNode.playbackRate.cancelScheduledValues(now);\n\n        this._counterNode.playbackRate.linearRampToValueAtTime(Math.abs(playbackRate), now);\n      }\n\n      if (reverse) {\n        this.reverseBuffer();\n      }\n\n      return this.playbackRate;\n    } \n\n  }, {\n    key: \"setPitch\",\n    value: function setPitch(num) {\n      var newPlaybackRate = midiToFreq(num) / midiToFreq(60);\n      this.rate(newPlaybackRate);\n    }\n  }, {\n    key: \"getPlaybackRate\",\n    value: function getPlaybackRate() {\n      return this.playbackRate;\n    }\n    /**\n     *  Multiply the output volume (amplitude) of a sound file\n     *  between 0.0 (silence) and 1.0 (full volume).\n     *  1.0 is the maximum amplitude of a digital sound, so multiplying\n     *  by greater than 1.0 may cause digital distortion. To\n     *  fade, provide a <code>rampTime</code> parameter. For more\n     *  complex fades, see the Envelope class.\n     *\n     *  Alternately, you can pass in a signal source such as an\n     *  oscillator to modulate the amplitude with an audio signal.\n     *\n     *  @method  setVolume\n     *  @for p5.SoundFile\n     *  @param {Number|Object} volume  Volume (amplitude) between 0.0\n     *                                     and 1.0 or modulating signal/oscillator\n     *  @param {Number} [rampTime]  Fade for t seconds\n     *  @param {Number} [timeFromNow]  Schedule this event to happen at\n     *                                 t seconds in the future\n     */\n\n  }, {\n    key: \"setVolume\",\n    value: function setVolume(vol, _rampTime, _tFromNow) {\n      if (typeof vol === 'number') {\n        var rampTime = _rampTime || 0;\n        var tFromNow = _tFromNow || 0;\n        var now = main.audiocontext.currentTime;\n        var currentVol = this.output.gain.value;\n        this.output.gain.cancelScheduledValues(now + tFromNow);\n        this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n        this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n      } else if (vol) {\n        vol.connect(this.output.gain);\n      } else {\n        return this.output.gain;\n      }\n    }\n    /**\n     * Returns the duration of a sound file in seconds.\n     *\n     * @method duration\n     * @for p5.SoundFile\n     * @return {Number} The duration of the soundFile in seconds.\n     */\n\n  }, {\n    key: \"duration\",\n    value: function duration() {\n      if (this.buffer) {\n        return this.buffer.duration;\n      } else {\n        return 0;\n      }\n    }\n    /**\n     * Return the current position of the p5.SoundFile playhead, in seconds.\n     * Time is relative to the normal buffer direction, so if `reverseBuffer`\n     * has been called, currentTime will count backwards.\n     *\n     * @method currentTime\n     * @for p5.SoundFile\n     * @return {Number}   currentTime of the soundFile in seconds.\n     */\n\n  }, {\n    key: \"currentTime\",\n    value: function currentTime() {\n      return this.reversed ? Math.abs(this._lastPos - this.buffer.length) / soundfile_ac.sampleRate : this._lastPos / soundfile_ac.sampleRate;\n    }\n    /**\n     * Move the playhead of a soundfile that is currently playing to a\n     * new position and a new duration, in seconds.\n     * If none are given, will reset the file to play entire duration\n     * from start to finish. To set the position of a soundfile that is\n     * not currently playing, use the `play` or `loop` methods.\n     *\n     * @method jump\n     * @for p5.SoundFile\n     * @param {Number} cueTime    cueTime of the soundFile in seconds.\n     * @param {Number} duration    duration in seconds.\n     */\n\n  }, {\n    key: \"jump\",\n    value: function jump(cueTime, duration) {\n      if (cueTime < 0 || cueTime > this.buffer.duration) {\n        throw 'jump time out of range';\n      }\n\n      if (duration > this.buffer.duration - cueTime) {\n        throw 'end time out of range';\n      }\n\n      var cTime = cueTime || 0;\n      var dur = duration || undefined;\n\n      if (this.isPlaying()) {\n        this.stop(0);\n        this.play(0, this.playbackRate, this.output.gain.value, cTime, dur);\n      }\n    }\n    /**\n     * Return the number of channels in a sound file.\n     * For example, Mono = 1, Stereo = 2.\n     *\n     * @method channels\n     * @for p5.SoundFile\n     * @return {Number} [channels]\n     */\n\n  }, {\n    key: \"channels\",\n    value: function channels() {\n      return this.buffer.numberOfChannels;\n    }\n    /**\n     * Return the sample rate of the sound file.\n     *\n     * @method sampleRate\n     * @for p5.SoundFile\n     * @return {Number} [sampleRate]\n     */\n\n  }, {\n    key: \"sampleRate\",\n    value: function sampleRate() {\n      return this.buffer.sampleRate;\n    }\n    /**\n     * Return the number of samples in a sound file.\n     * Equal to sampleRate * duration.\n     *\n     * @method frames\n     * @for p5.SoundFile\n     * @return {Number} [sampleCount]\n     */\n\n  }, {\n    key: \"frames\",\n    value: function frames() {\n      return this.buffer.length;\n    }\n    /**\n     * Returns an array of amplitude peaks in a p5.SoundFile that can be\n     * used to draw a static waveform. Scans through the p5.SoundFile's\n     * audio buffer to find the greatest amplitudes. Accepts one\n     * parameter, 'length', which determines size of the array.\n     * Larger arrays result in more precise waveform visualizations.\n     *\n     * Inspired by Wavesurfer.js.\n     *\n     * @method  getPeaks\n     * @for p5.SoundFile\n     * @params {Number} [length] length is the size of the returned array.\n     *                          Larger length results in more precision.\n     *                          Defaults to 5*width of the browser window.\n     * @returns {Float32Array} Array of peaks.\n     */\n\n  }, {\n    key: \"getPeaks\",\n    value: function getPeaks(length) {\n      if (this.buffer) {\n        if (!length) {\n          length = window.width * 5;\n        }\n\n        if (this.buffer) {\n          var buffer = this.buffer;\n          var sampleSize = buffer.length / length;\n          var sampleStep = ~~(sampleSize / 10) || 1;\n          var channels = buffer.numberOfChannels;\n          var peaks = new Float32Array(Math.round(length));\n\n          for (var c = 0; c < channels; c++) {\n            var chan = buffer.getChannelData(c);\n\n            for (var i = 0; i < length; i++) {\n              var start = ~~(i * sampleSize);\n              var end = ~~(start + sampleSize);\n              var max = 0;\n\n              for (var j = start; j < end; j += sampleStep) {\n                var value = chan[j];\n\n                if (value > max) {\n                  max = value; \n                } else if (-value > max) {\n                  max = value;\n                }\n              }\n\n              if (c === 0 || Math.abs(max) > peaks[i]) {\n                peaks[i] = max;\n              }\n            }\n          }\n\n          return peaks;\n        }\n      } else {\n        throw 'Cannot load peaks yet, buffer is not loaded';\n      }\n    }\n    /**\n     *  Reverses the p5.SoundFile's buffer source.\n     *  Playback must be handled separately (see example).\n     *\n     *  @method  reverseBuffer\n     *  @for p5.SoundFile\n     *  @example\n     *  <div><code>\n     *  let drum;\n     *  function preload() {\n     *    drum = loadSound('assets/drum.mp3');\n     *  }\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(canvasPressed);\n     *    background(220);\n     *    text('tap to play', 20, 20);\n     *  }\n     *\n     *  function canvasPressed() {\n     *    drum.stop();\n     *    drum.reverseBuffer();\n     *    drum.play();\n     *  }\n     * </code>\n     * </div>\n     */\n\n  }, {\n    key: \"reverseBuffer\",\n    value: function reverseBuffer() {\n      if (this.buffer) {\n        var currentPos = this._lastPos / soundfile_ac.sampleRate;\n        var curVol = this.getVolume();\n        this.setVolume(0, 0.001);\n        var numChannels = this.buffer.numberOfChannels;\n\n        for (var i = 0; i < numChannels; i++) {\n          this.buffer.getChannelData(i).reverse();\n        } \n\n\n        this.reversed = !this.reversed;\n\n        if (this.isPlaying() && currentPos) {\n          this.jump(this.duration() - currentPos);\n        }\n\n        this.setVolume(curVol, 0.001);\n      } else {\n        throw 'SoundFile is not done loading';\n      }\n    }\n    /**\n     *  Schedule an event to be called when the soundfile\n     *  reaches the end of a buffer. If the soundfile is\n     *  playing through once, this will be called when it\n     *  ends. If it is looping, it will be called when\n     *  stop is called.\n     *\n     *  @method  onended\n     *  @for p5.SoundFile\n     *  @param  {Function} callback function to call when the\n     *                              soundfile has ended.\n     */\n\n  }, {\n    key: \"onended\",\n    value: function onended(callback) {\n      this._onended = callback;\n      return this;\n    }\n  }, {\n    key: \"add\",\n    value: function add() {\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var now = main.audiocontext.currentTime; \n\n      var index = main.soundArray.indexOf(this);\n      main.soundArray.splice(index, 1);\n      this.stop(now);\n\n      if (this.buffer && this.bufferSourceNode) {\n        for (var i = 0; i < this.bufferSourceNodes.length - 1; i++) {\n          if (this.bufferSourceNodes[i] !== null) {\n            this.bufferSourceNodes[i].disconnect();\n\n            try {\n              this.bufferSourceNodes[i].stop(now);\n            } catch (e) {\n              console.warn('no buffer source node to dispose');\n            }\n\n            this.bufferSourceNodes[i] = null;\n          }\n        }\n\n        if (this.isPlaying()) {\n          try {\n            this._counterNode.stop(now);\n          } catch (e) {\n            console.log(e);\n          }\n\n          this._counterNode = null;\n        }\n      }\n\n      if (this.output) {\n        this.output.disconnect();\n        this.output = null;\n      }\n\n      if (this.panner) {\n        this.panner.disconnect();\n        this.panner = null;\n      }\n    }\n    /**\n     * Connects the output of a p5sound object to input of another\n     * p5.sound object. For example, you may connect a p5.SoundFile to an\n     * FFT or an Effect. If no parameter is given, it will connect to\n     * the main output. Most p5sound objects connect to the master\n     * output when they are created.\n     *\n     * @method connect\n     * @for p5.SoundFile\n     * @param {Object} [object] Audio object that accepts an input\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect(unit) {\n      if (!unit) {\n        this.panner.connect(main.input);\n      } else {\n        if (unit.hasOwnProperty('input')) {\n          this.panner.connect(unit.input);\n        } else {\n          this.panner.connect(unit);\n        }\n      }\n    }\n    /**\n     * Disconnects the output of this p5sound object.\n     *\n     * @method disconnect\n     * @for p5.SoundFile\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.panner) {\n        this.panner.disconnect();\n      }\n    }\n    /**\n     */\n\n  }, {\n    key: \"getLevel\",\n    value: function getLevel() {\n      console.warn('p5.SoundFile.getLevel has been removed from the library. Use p5.Amplitude instead');\n    }\n    /**\n     *  Reset the source for this SoundFile to a\n     *  new path (URL).\n     *\n     *  @method  setPath\n     *  @for p5.SoundFile\n     *  @param {String}   path     path to audio file\n     *  @param {Function} callback Callback\n     */\n\n  }, {\n    key: \"setPath\",\n    value: function setPath(p, callback) {\n      var path = p5.prototype._checkFileFormats(p);\n\n      this.url = path;\n      this.load(callback);\n    }\n    /**\n     *  Replace the current Audio Buffer with a new Buffer.\n     *\n     *  @method setBuffer\n     *  @for p5.SoundFile\n     *  @param {Array} buf Array of Float32 Array(s). 2 Float32 Arrays\n     *                     will create a stereo source. 1 will create\n     *                     a mono source.\n     */\n\n  }, {\n    key: \"setBuffer\",\n    value: function setBuffer(buf) {\n      var numChannels = buf.length;\n      var size = buf[0].length;\n      var newBuffer = soundfile_ac.createBuffer(numChannels, size, soundfile_ac.sampleRate);\n\n      if (!(buf[0] instanceof Float32Array)) {\n        buf[0] = new Float32Array(buf[0]);\n      }\n\n      for (var channelNum = 0; channelNum < numChannels; channelNum++) {\n        var channel = newBuffer.getChannelData(channelNum);\n        channel.set(buf[channelNum]);\n      }\n\n      this.buffer = newBuffer; \n\n      this.panner.inputChannels(numChannels);\n    } \n\n  }, {\n    key: \"_initCounterNode\",\n    value: function _initCounterNode() {\n      var _this = this;\n\n      var self = this;\n      var now = soundfile_ac.currentTime;\n      var cNode = soundfile_ac.createBufferSource();\n      var workletBufferSize = safeBufferSize(256); \n\n      if (self._workletNode) {\n        self._workletNode.disconnect();\n\n        delete self._workletNode;\n      }\n\n      self._workletNode = new AudioWorkletNode(soundfile_ac, processorNames_default.a.soundFileProcessor, {\n        processorOptions: {\n          bufferSize: workletBufferSize\n        }\n      });\n\n      self._workletNode.port.onmessage = function (event) {\n        if (event.data.name === 'position') {\n          if (event.data.position === 0) {\n            return;\n          }\n\n          _this._lastPos = event.data.position; \n\n          _this._onTimeUpdate(self._lastPos);\n        }\n      }; \n\n\n      cNode.buffer = _createCounterBuffer(self.buffer);\n      cNode.playbackRate.setValueAtTime(self.playbackRate, now);\n      cNode.connect(self._workletNode);\n\n      self._workletNode.connect(p5.soundOut._silentNode);\n\n      return cNode;\n    } \n\n  }, {\n    key: \"_initSourceNode\",\n    value: function _initSourceNode() {\n      var bufferSourceNode = soundfile_ac.createBufferSource();\n      bufferSourceNode.buffer = this.buffer;\n      bufferSourceNode.playbackRate.value = this.playbackRate;\n      bufferSourceNode.connect(this.output);\n      return bufferSourceNode;\n    }\n  }, {\n    key: \"processPeaks\",\n    value: function processPeaks(callback, _initThreshold, _minThreshold, _minPeaks) {\n      console.warn('processPeaks is deprecated');\n    }\n    /**\n     *  Schedule events to trigger every time a MediaElement\n     *  (audio/video) reaches a playback cue point.\n     *\n     *  Accepts a callback function, a time (in seconds) at which to trigger\n     *  the callback, and an optional parameter for the callback.\n     *\n     *  Time will be passed as the first parameter to the callback function,\n     *  and param will be the second parameter.\n     *\n     *\n     *  @method  addCue\n     *  @for p5.SoundFile\n     *  @param {Number}   time     Time in seconds, relative to this media\n     *                             element's playback. For example, to trigger\n     *                             an event every time playback reaches two\n     *                             seconds, pass in the number 2. This will be\n     *                             passed as the first parameter to\n     *                             the callback function.\n     *  @param {Function} callback Name of a function that will be\n     *                             called at the given time. The callback will\n     *                             receive time and (optionally) param as its\n     *                             two parameters.\n     *  @param {Object} [value]    An object to be passed as the\n     *                             second parameter to the\n     *                             callback function.\n     *  @return {Number} id ID of this cue,\n     *                      useful for removeCue(id)\n     *  @example\n     *  <div><code>\n     *  let mySound;\n     *  function preload() {\n     *    mySound = loadSound('assets/Damscray_DancingTiger.mp3');\n     *  }\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(canvasPressed);\n     *    background(220);\n     *    text('tap to play', 10, 20);\n     *\n     *    // schedule calls to changeText\n     *    mySound.addCue(0, changeText, \"hello\" );\n     *    mySound.addCue(0.5, changeText, \"hello,\" );\n     *    mySound.addCue(1, changeText, \"hello, p5!\");\n     *    mySound.addCue(1.5, changeText, \"hello, p5!!\");\n     *    mySound.addCue(2, changeText, \"hello, p5!!!!!\");\n     *  }\n     *\n     *  function changeText(val) {\n     *    background(220);\n     *    text(val, 10, 20);\n     *  }\n     *\n     *  function canvasPressed() {\n     *    mySound.play();\n     *  }\n     *  </code></div>\n     */\n\n  }, {\n    key: \"addCue\",\n    value: function addCue(time, callback, val) {\n      var id = this._cueIDCounter++;\n      var cue = new Cue(callback, time, id, val);\n\n      this._cues.push(cue); \n\n\n      return id;\n    }\n    /**\n     *  Remove a callback based on its ID. The ID is returned by the\n     *  addCue method.\n     *\n     *  @method removeCue\n     *  @for p5.SoundFile\n     *  @param  {Number} id ID of the cue, as returned by addCue\n     */\n\n  }, {\n    key: \"removeCue\",\n    value: function removeCue(id) {\n      var cueLength = this._cues.length;\n\n      for (var i = 0; i < cueLength; i++) {\n        var cue = this._cues[i];\n\n        if (cue.id === id) {\n          this._cues.splice(i, 1);\n\n          break;\n        }\n      }\n\n      if (this._cues.length === 0) {\n      }\n    }\n    /**\n     *  Remove all of the callbacks that had originally been scheduled\n     *  via the addCue method.\n     *\n     *  @method  clearCues\n     */\n\n  }, {\n    key: \"clearCues\",\n    value: function clearCues() {\n      this._cues = []; \n    } \n\n  }, {\n    key: \"_onTimeUpdate\",\n    value: function _onTimeUpdate(position) {\n      var playbackTime = position / this.buffer.sampleRate;\n      var cueLength = this._cues.length;\n\n      for (var i = 0; i < cueLength; i++) {\n        var cue = this._cues[i];\n        var callbackTime = cue.time;\n        var val = cue.val;\n        var leftLimit = this._prevUpdateTime || 0;\n        var rightLimit = playbackTime;\n\n        if (leftLimit <= callbackTime && callbackTime <= rightLimit) {\n          cue.callback(val);\n        }\n      }\n\n      this._prevUpdateTime = playbackTime;\n    }\n    /**\n     * Save a p5.SoundFile as a .wav file. The browser will prompt the user\n     * to download the file to their device. To upload a file to a server, see\n     * <a href=\"/reference/#/p5.SoundFile/getBlob\">getBlob</a>\n     *\n     * @method save\n     * @for p5.SoundFile\n     * @param  {String} [fileName]      name of the resulting .wav file.\n     * @example\n     *  <div><code>\n     *  let mySound;\n     *  function preload() {\n     *    mySound = loadSound('assets/doorbell.mp3');\n     *  }\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(canvasPressed);\n     *    background(220);\n     *    text('tap to download', 10, 20);\n     *  }\n     *\n     *  function canvasPressed() {\n     *    mySound.save('my cool filename');\n     *  }\n     * </code></div>\n     */\n\n  }, {\n    key: \"save\",\n    value: function save(fileName) {\n      p5.prototype.saveSound(this, fileName, 'wav');\n    }\n    /**\n     * This method is useful for sending a SoundFile to a server. It returns the\n     * .wav-encoded audio data as a \"<a target=\"_blank\" title=\"Blob reference at\n     * MDN\" href=\"https://developer.mozilla.org/en-US/docs/Web/API/Blob\">Blob</a>\".\n     * A Blob is a file-like data object that can be uploaded to a server\n     * with an <a href=\"/reference/#/p5/httpDo\">http</a> request. We'll\n     * use the `httpDo` options object to send a POST request with some\n     * specific options: we encode the request as `multipart/form-data`,\n     * and attach the blob as one of the form values using `FormData`.\n     *\n     *\n     * @method getBlob\n     * @for p5.SoundFile\n     * @returns {Blob} A file-like data object\n     * @example\n     *  <div><code>\n     *  function preload() {\n     *    mySound = loadSound('assets/doorbell.mp3');\n     *  }\n     *\n     *  function setup() {\n     *    noCanvas();\n     *    let soundBlob = mySound.getBlob();\n     *\n     *    // Now we can send the blob to a server...\n     *    let serverUrl = 'https://jsonplaceholder.typicode.com/posts';\n     *    let httpRequestOptions = {\n     *      method: 'POST',\n     *      body: new FormData().append('soundBlob', soundBlob),\n     *      headers: new Headers({\n     *        'Content-Type': 'multipart/form-data'\n     *      })\n     *    };\n     *    httpDo(serverUrl, httpRequestOptions);\n     *\n     *    // We can also create an `ObjectURL` pointing to the Blob\n     *    let blobUrl = URL.createObjectURL(soundBlob);\n     *\n     *    // The `<Audio>` Element accepts Object URL's\n     *    createAudio(blobUrl).showControls();\n     *\n     *    createDiv();\n     *\n     *    // The ObjectURL exists as long as this tab is open\n     *    let input = createInput(blobUrl);\n     *    input.attribute('readonly', true);\n     *    input.mouseClicked(function() { input.elt.select() });\n     *  }\n     *\n     * </code></div>\n     */\n\n  }, {\n    key: \"getBlob\",\n    value: function getBlob() {\n      var dataView = convertToWav(this.buffer);\n      return new Blob([dataView], {\n        type: 'audio/wav'\n      });\n    }\n  }]);\n\n  return SoundFile;\n}();\n/**\n *  loadSound() returns a new p5.SoundFile from a specified\n *  path. If called during preload(), the p5.SoundFile will be ready\n *  to play in time for setup() and draw(). If called outside of\n *  preload, the p5.SoundFile will not be ready immediately, so\n *  loadSound accepts a callback as the second parameter. Using a\n *  <a href=\"https://github.com/processing/p5.js/wiki/Local-server\">\n *  local server</a> is recommended when loading external files.\n *\n *  @method loadSound\n *  @for p5\n *  @param  {String|Array}   path     Path to the sound file, or an array with\n *                                    paths to soundfiles in multiple formats\n *                                    i.e. ['sound.ogg', 'sound.mp3'].\n *                                    Alternately, accepts an object: either\n *                                    from the HTML5 File API, or a p5.File.\n *  @param {Function} [successCallback]   Name of a function to call once file loads\n *  @param {Function} [errorCallback]   Name of a function to call if there is\n *                                      an error loading the file.\n *  @param {Function} [whileLoading] Name of a function to call while file is loading.\n *                                 This function will receive the percentage loaded\n *                                 so far, from 0.0 to 1.0.\n *  @return {SoundFile}            Returns a p5.SoundFile\n *  @example\n *  <div><code>\n *  let mySound;\n *  function preload() {\n *    soundFormats('mp3', 'ogg');\n *    mySound = loadSound('assets/doorbell');\n *  }\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(canvasPressed);\n *    background(220);\n *    text('tap here to play', 10, 20);\n *  }\n *\n *  function canvasPressed() {\n *    // playing a sound file on a user gesture\n *    // is equivalent to `userStartAudio()`\n *    mySound.play();\n *  }\n *  </code></div>\n */\n\n\nfunction loadSound(path, callback, onerror, whileLoading) {\n  if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n    window.alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n  }\n\n  var self = this;\n  var s = new soundfile_SoundFile(path, function () {\n    if (typeof callback === 'function') {\n      callback.apply(self, arguments);\n    }\n\n    if (typeof self._decrementPreload === 'function') {\n      self._decrementPreload();\n    }\n  }, onerror, whileLoading);\n  return s;\n}\n\n var soundfile = (soundfile_SoundFile);\n\nfunction amplitude_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction amplitude_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction amplitude_createClass(Constructor, protoProps, staticProps) { if (protoProps) amplitude_defineProperties(Constructor.prototype, protoProps); if (staticProps) amplitude_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n/**\n *  Amplitude measures volume between 0.0 and 1.0.\n *  Listens to all p5sound by default, or use setInput()\n *  to listen to a specific sound source. Accepts an optional\n *  smoothing value, which defaults to 0.\n *\n *  @class p5.Amplitude\n *  @constructor\n *  @param {Number} [smoothing] between 0.0 and .999 to smooth\n *                             amplitude readings (defaults to 0)\n *  @example\n *  <div><code>\n *  let sound, amplitude;\n *\n *  function preload(){\n *    sound = loadSound('assets/beat.mp3');\n *  }\n *  function setup() {\n *    let cnv = createCanvas(100,100);\n *    cnv.mouseClicked(togglePlay);\n *    amplitude = new p5.Amplitude();\n *  }\n *\n *  function draw() {\n *    background(220);\n *    text('tap to play', 20, 20);\n *\n *    let level = amplitude.getLevel();\n *    let size = map(level, 0, 1, 0, 200);\n *    ellipse(width/2, height/2, size, size);\n *  }\n *\n *  function togglePlay() {\n *    if (sound.isPlaying() ){\n *      sound.pause();\n *    } else {\n *      sound.loop();\n *\t\tamplitude = new p5.Amplitude();\n *\t\tamplitude.setInput(sound);\n *    }\n *  }\n *\n *  </code></div>\n */\n\nvar amplitude_Amplitude =\nfunction () {\n  function Amplitude(smoothing) {\n    amplitude_classCallCheck(this, Amplitude);\n\n    this.bufferSize = safeBufferSize(2048); \n\n    this.audiocontext = main.audiocontext;\n    this._workletNode = new AudioWorkletNode(this.audiocontext, processorNames_default.a.amplitudeProcessor, {\n      outputChannelCount: [1],\n      parameterData: {\n        smoothing: smoothing || 0\n      },\n      processorOptions: {\n        normalize: false,\n        smoothing: smoothing || 0,\n        numInputChannels: 2,\n        bufferSize: this.bufferSize\n      }\n    });\n\n    this._workletNode.port.onmessage = function (event) {\n      if (event.data.name === 'amplitude') {\n        this.volume = event.data.volume;\n        this.volNorm = event.data.volNorm;\n        this.stereoVol = event.data.stereoVol;\n        this.stereoVolNorm = event.data.stereoVolNorm;\n      }\n    }.bind(this); \n\n\n    this.input = this._workletNode;\n    this.output = this.audiocontext.createGain(); \n\n    this.volume = 0;\n    this.volNorm = 0;\n    this.stereoVol = [0, 0];\n    this.stereoVolNorm = [0, 0];\n    this.normalize = false;\n\n    this._workletNode.connect(this.output);\n\n    this.output.gain.value = 0; \n\n    this.output.connect(this.audiocontext.destination); \n\n    main.meter.connect(this._workletNode); \n\n    main.soundArray.push(this);\n  }\n  /**\n   *  Connects to the p5sound instance (main output) by default.\n   *  Optionally, you can pass in a specific source (i.e. a soundfile).\n   *\n   *  @method setInput\n   *  @for p5.Amplitude\n   *  @param {soundObject|undefined} [snd] set the sound source\n   *                                       (optional, defaults to\n   *                                       main output)\n   *  @param {Number|undefined} [smoothing] a range between 0.0 and 1.0\n   *                                        to smooth amplitude readings\n   *  @example\n   *  <div><code>\n   *  function preload(){\n   *    sound1 = loadSound('assets/beat.mp3');\n   *    sound2 = loadSound('assets/drum.mp3');\n   *  }\n   *  function setup(){\n   *    cnv = createCanvas(100, 100);\n   *    cnv.mouseClicked(toggleSound);\n   *\n   *    amplitude = new p5.Amplitude();\n   *    amplitude.setInput(sound2);\n   *  }\n   *\n   *  function draw() {\n   *    background(220);\n   *    text('tap to play', 20, 20);\n   *\n   *    let level = amplitude.getLevel();\n   *    let size = map(level, 0, 1, 0, 200);\n   *    ellipse(width/2, height/2, size, size);\n   *  }\n   *\n   *  function toggleSound(){\n   *    if (sound1.isPlaying() && sound2.isPlaying()) {\n   *      sound1.stop();\n   *      sound2.stop();\n   *    } else {\n   *      sound1.play();\n   *      sound2.play();\n   *    }\n   *  }\n   *  </code></div>\n   */\n\n\n  amplitude_createClass(Amplitude, [{\n    key: \"setInput\",\n    value: function setInput(source, smoothing) {\n      main.meter.disconnect();\n\n      if (smoothing) {\n        this._workletNode.parameters.get('smoothing').value = smoothing;\n      } \n\n\n      if (source == null) {\n        console.log('Amplitude input source is not ready! Connecting to main output instead');\n        main.meter.connect(this._workletNode);\n      } \n      else if (source) {\n          source.connect(this._workletNode);\n\n          this._workletNode.disconnect();\n\n          this._workletNode.connect(this.output);\n        } \n        else {\n            main.meter.connect(this._workletNode);\n          }\n    }\n  }, {\n    key: \"connect\",\n    value: function connect(unit) {\n      if (unit) {\n        if (unit.hasOwnProperty('input')) {\n          this.output.connect(unit.input);\n        } else {\n          this.output.connect(unit);\n        }\n      } else {\n        this.output.connect(this.panner.connect(main.input));\n      }\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.output) {\n        this.output.disconnect();\n      }\n    }\n    /**\n     *  Returns a single Amplitude reading at the moment it is called.\n     *  For continuous readings, run in the draw loop.\n     *\n     *  @method getLevel\n     *  @for p5.Amplitude\n     *  @param {Number} [channel] Optionally return only channel 0 (left) or 1 (right)\n     *  @return {Number}       Amplitude as a number between 0.0 and 1.0\n     *  @example\n     *  <div><code>\n     *  function preload(){\n     *    sound = loadSound('assets/beat.mp3');\n     *  }\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mouseClicked(toggleSound);\n     *    amplitude = new p5.Amplitude();\n     *  }\n     *\n     *  function draw() {\n     *    background(220, 150);\n     *    textAlign(CENTER);\n     *    text('tap to play', width/2, 20);\n     *\n     *    let level = amplitude.getLevel();\n     *    let size = map(level, 0, 1, 0, 200);\n     *    ellipse(width/2, height/2, size, size);\n     *  }\n     *\n     *  function toggleSound(){\n     *    if (sound.isPlaying()) {\n     *      sound.stop();\n     *    } else {\n     *      sound.play();\n     *    }\n     *  }\n     *  </code></div>\n     */\n\n  }, {\n    key: \"getLevel\",\n    value: function getLevel(channel) {\n      if (typeof channel !== 'undefined') {\n        if (this.normalize) {\n          return this.stereoVolNorm[channel];\n        } else {\n          return this.stereoVol[channel];\n        }\n      } else if (this.normalize) {\n        return this.volNorm;\n      } else {\n        return this.volume;\n      }\n    }\n    /**\n     * Determines whether the results of Amplitude.process() will be\n     * Normalized. To normalize, Amplitude finds the difference the\n     * loudest reading it has processed and the maximum amplitude of\n     * 1.0. Amplitude adds this difference to all values to produce\n     * results that will reliably map between 0.0 and 1.0. However,\n     * if a louder moment occurs, the amount that Normalize adds to\n     * all the values will change. Accepts an optional boolean parameter\n     * (true or false). Normalizing is off by default.\n     *\n     * @method toggleNormalize\n     * @for p5.Amplitude\n     * @param {boolean} [boolean] set normalize to true (1) or false (0)\n     */\n\n  }, {\n    key: \"toggleNormalize\",\n    value: function toggleNormalize(bool) {\n      if (typeof bool === 'boolean') {\n        this.normalize = bool;\n      } else {\n        this.normalize = !this.normalize;\n      }\n\n      this._workletNode.port.postMessage({\n        name: 'toggleNormalize',\n        normalize: this.normalize\n      });\n    }\n    /**\n     *  Smooth Amplitude analysis by averaging with the last analysis\n     *  frame. Off by default.\n     *\n     *  @method smooth\n     *  @for p5.Amplitude\n     *  @param {Number} set smoothing from 0.0 <= 1\n     */\n\n  }, {\n    key: \"smooth\",\n    value: function smooth(s) {\n      if (s >= 0 && s < 1) {\n        this._workletNode.port.postMessage({\n          name: 'smoothing',\n          smoothing: s\n        });\n      } else {\n        console.log('Error: smoothing must be between 0 and 1');\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var index = main.soundArray.indexOf(this);\n      main.soundArray.splice(index, 1);\n\n      if (this.input) {\n        this.input.disconnect();\n        delete this.input;\n      }\n\n      if (this.output) {\n        this.output.disconnect();\n        delete this.output;\n      }\n\n      this._workletNode.disconnect();\n\n      delete this._workletNode;\n    }\n  }]);\n\n  return Amplitude;\n}();\n\n var amplitude = (amplitude_Amplitude);\nfunction fft_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction fft_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction fft_createClass(Constructor, protoProps, staticProps) { if (protoProps) fft_defineProperties(Constructor.prototype, protoProps); if (staticProps) fft_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n/**\n *  <p>FFT (Fast Fourier Transform) is an analysis algorithm that\n *  isolates individual\n *  <a href=\"https://en.wikipedia.org/wiki/Audio_frequency\">\n *  audio frequencies</a> within a waveform.</p>\n *\n *  <p>Once instantiated, a p5.FFT object can return an array based on\n *  two types of analyses: <br> • <code>FFT.waveform()</code> computes\n *  amplitude values along the time domain. The array indices correspond\n *  to samples across a brief moment in time. Each value represents\n *  amplitude of the waveform at that sample of time.<br>\n *  • <code>FFT.analyze() </code> computes amplitude values along the\n *  frequency domain. The array indices correspond to frequencies (i.e.\n *  pitches), from the lowest to the highest that humans can hear. Each\n *  value represents amplitude at that slice of the frequency spectrum.\n *  Use with <code>getEnergy()</code> to measure amplitude at specific\n *  frequencies, or within a range of frequencies. </p>\n *\n *  <p>FFT analyzes a very short snapshot of sound called a sample\n *  buffer. It returns an array of amplitude measurements, referred\n *  to as <code>bins</code>. The array is 1024 bins long by default.\n *  You can change the bin array length, but it must be a power of 2\n *  between 16 and 1024 in order for the FFT algorithm to function\n *  correctly. The actual size of the FFT buffer is twice the\n *  number of bins, so given a standard sample rate, the buffer is\n *  2048/44100 seconds long.</p>\n *\n *\n *  @class p5.FFT\n *  @constructor\n *  @param {Number} [smoothing]   Smooth results of Freq Spectrum.\n *                                0.0 < smoothing < 1.0.\n *                                Defaults to 0.8.\n *  @param {Number} [bins]    Length of resulting array.\n *                            Must be a power of two between\n *                            16 and 1024. Defaults to 1024.\n *  @example\n *  <div><code>\n *  function preload(){\n *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n *  }\n *\n *  function setup(){\n *    let cnv = createCanvas(100,100);\n *    cnv.mouseClicked(togglePlay);\n *    fft = new p5.FFT();\n *    sound.amp(0.2);\n *  }\n *\n *  function draw(){\n *    background(220);\n *\n *    let spectrum = fft.analyze();\n *    noStroke();\n *    fill(255, 0, 255);\n *    for (let i = 0; i< spectrum.length; i++){\n *      let x = map(i, 0, spectrum.length, 0, width);\n *      let h = -height + map(spectrum[i], 0, 255, height, 0);\n *      rect(x, height, width / spectrum.length, h )\n *    }\n *\n *    let waveform = fft.waveform();\n *    noFill();\n *    beginShape();\n *    stroke(20);\n *    for (let i = 0; i < waveform.length; i++){\n *      let x = map(i, 0, waveform.length, 0, width);\n *      let y = map( waveform[i], -1, 1, 0, height);\n *      vertex(x,y);\n *    }\n *    endShape();\n *\n *    text('tap to play', 20, 20);\n *  }\n *\n *  function togglePlay() {\n *    if (sound.isPlaying()) {\n *      sound.pause();\n *    } else {\n *      sound.loop();\n *    }\n *  }\n *  </code></div>\n */\n\nvar fft_FFT =\nfunction () {\n  function FFT(smoothing, bins) {\n    fft_classCallCheck(this, FFT);\n\n    this.input = this.analyser = main.audiocontext.createAnalyser();\n    Object.defineProperties(this, {\n      bins: {\n        get: function get() {\n          return this.analyser.fftSize / 2;\n        },\n        set: function set(b) {\n          this.analyser.fftSize = b * 2;\n        },\n        configurable: true,\n        enumerable: true\n      },\n      smoothing: {\n        get: function get() {\n          return this.analyser.smoothingTimeConstant;\n        },\n        set: function set(s) {\n          this.analyser.smoothingTimeConstant = s;\n        },\n        configurable: true,\n        enumerable: true\n      }\n    }); \n\n    this.smooth(smoothing);\n    this.bins = bins || 1024; \n\n    main.fftMeter.connect(this.analyser);\n    this.freqDomain = new Uint8Array(this.analyser.frequencyBinCount);\n    this.timeDomain = new Uint8Array(this.analyser.frequencyBinCount); \n\n    this.bass = [20, 140];\n    this.lowMid = [140, 400];\n    this.mid = [400, 2600];\n    this.highMid = [2600, 5200];\n    this.treble = [5200, 14000]; \n\n    main.soundArray.push(this);\n  }\n  /**\n   *  Set the input source for the FFT analysis. If no source is\n   *  provided, FFT will analyze all sound in the sketch.\n   *\n   *  @method  setInput\n   *  @for p5.FFT\n   *  @param {Object} [source] p5.sound object (or web audio API source node)\n   */\n\n\n  fft_createClass(FFT, [{\n    key: \"setInput\",\n    value: function setInput(source) {\n      if (!source) {\n        main.fftMeter.connect(this.analyser);\n      } else {\n        if (source.output) {\n          source.output.connect(this.analyser);\n        } else if (source.connect) {\n          source.connect(this.analyser);\n        }\n\n        main.fftMeter.disconnect();\n      }\n    }\n    /**\n     *  Returns an array of amplitude values (between -1.0 and +1.0) that represent\n     *  a snapshot of amplitude readings in a single buffer. Length will be\n     *  equal to bins (defaults to 1024). Can be used to draw the waveform\n     *  of a sound.\n     *\n     *  @method waveform\n     *  @for p5.FFT\n     *  @param {Number} [bins]    Must be a power of two between\n     *                            16 and 1024. Defaults to 1024.\n     *  @param {String} [precision] If any value is provided, will return results\n     *                              in a Float32 Array which is more precise\n     *                              than a regular array.\n     *  @return {Array}  Array    Array of amplitude values (-1 to 1)\n     *                            over time. Array length = bins.\n     *\n     */\n\n  }, {\n    key: \"waveform\",\n    value: function waveform() {\n      var bins, mode;\n      var normalArray = new Array();\n\n      for (var i = 0; i < arguments.length; i++) {\n        if (typeof arguments[i] === 'number') {\n          bins = arguments[i];\n          this.analyser.fftSize = bins * 2;\n        }\n\n        if (typeof arguments[i] === 'string') {\n          mode = arguments[i];\n        }\n      } \n\n\n      if (mode && !p5.prototype._isSafari()) {\n        timeToFloat(this, this.timeDomain);\n        this.analyser.getFloatTimeDomainData(this.timeDomain);\n        return this.timeDomain;\n      } else {\n        timeToInt(this, this.timeDomain);\n        this.analyser.getByteTimeDomainData(this.timeDomain);\n\n        for (var j = 0; j < this.timeDomain.length; j++) {\n          var scaled = p5.prototype.map(this.timeDomain[j], 0, 255, -1, 1);\n          normalArray.push(scaled);\n        }\n\n        return normalArray;\n      }\n    }\n    /**\n     *  Returns an array of amplitude values (between 0 and 255)\n     *  across the frequency spectrum. Length is equal to FFT bins\n     *  (1024 by default). The array indices correspond to frequencies\n     *  (i.e. pitches), from the lowest to the highest that humans can\n     *  hear. Each value represents amplitude at that slice of the\n     *  frequency spectrum. Must be called prior to using\n     *  <code>getEnergy()</code>.\n     *\n     *  @method analyze\n     *  @for p5.FFT\n     *  @param {Number} [bins]    Must be a power of two between\n     *                             16 and 1024. Defaults to 1024.\n     *  @param {Number} [scale]    If \"dB,\" returns decibel\n     *                             float measurements between\n     *                             -140 and 0 (max).\n     *                             Otherwise returns integers from 0-255.\n     *  @return {Array} spectrum    Array of energy (amplitude/volume)\n     *                              values across the frequency spectrum.\n     *                              Lowest energy (silence) = 0, highest\n     *                              possible is 255.\n     *  @example\n     *  <div><code>\n     *  let osc, fft;\n     *\n     *  function setup(){\n     *    let cnv = createCanvas(100,100);\n     *    cnv.mousePressed(startSound);\n     *    osc = new p5.Oscillator();\n     *    osc.amp(0);\n     *    fft = new p5.FFT();\n     *  }\n     *\n     *  function draw(){\n     *    background(220);\n     *\n     *    let freq = map(mouseX, 0, windowWidth, 20, 10000);\n     *    freq = constrain(freq, 1, 20000);\n     *    osc.freq(freq);\n     *\n     *    let spectrum = fft.analyze();\n     *    noStroke();\n     *    fill(255, 0, 255);\n     *    for (let i = 0; i< spectrum.length; i++){\n     *      let x = map(i, 0, spectrum.length, 0, width);\n     *      let h = -height + map(spectrum[i], 0, 255, height, 0);\n     *      rect(x, height, width / spectrum.length, h );\n     *    }\n     *\n     *    stroke(255);\n     *    if (!osc.started) {\n     *      text('tap here and drag to change frequency', 10, 20, width - 20);\n     *    } else {\n     *      text(round(freq)+'Hz', 10, 20);\n     *    }\n     *  }\n     *\n     *  function startSound() {\n     *    osc.start();\n     *    osc.amp(0.5, 0.2);\n     *  }\n     *\n     *  function mouseReleased() {\n     *    osc.amp(0, 0.2);\n     *  }\n     *  </code></div>\n     *\n     *\n     */\n\n  }, {\n    key: \"analyze\",\n    value: function analyze() {\n      var mode;\n\n      for (var i = 0; i < arguments.length; i++) {\n        if (typeof arguments[i] === 'number') {\n          this.bins = arguments[i];\n          this.analyser.fftSize = this.bins * 2;\n        }\n\n        if (typeof arguments[i] === 'string') {\n          mode = arguments[i];\n        }\n      }\n\n      if (mode && mode.toLowerCase() === 'db') {\n        freqToFloat(this);\n        this.analyser.getFloatFrequencyData(this.freqDomain);\n        return this.freqDomain;\n      } else {\n        freqToInt(this, this.freqDomain);\n        this.analyser.getByteFrequencyData(this.freqDomain);\n        var normalArray = Array.apply([], this.freqDomain);\n        return normalArray;\n      }\n    }\n    /**\n     *  Returns the amount of energy (volume) at a specific\n     *  <a href=\"https://en.wikipedia.org/wiki/Audio_frequency\" target=\"_blank\">\n     *  frequency</a>, or the average amount of energy between two\n     *  frequencies. Accepts Number(s) corresponding\n     *  to frequency (in Hz), or a \"string\" corresponding to predefined\n     *  frequency ranges (\"bass\", \"lowMid\", \"mid\", \"highMid\", \"treble\").\n     *  Returns a range between 0 (no energy/volume at that frequency) and\n     *  255 (maximum energy).\n     *  <em>NOTE: analyze() must be called prior to getEnergy(). analyze()\n     *  tells the FFT to analyze frequency data, and getEnergy() uses\n     *  the results to determine the value at a specific frequency or\n     *  range of frequencies.</em></p>\n     *\n     *  @method  getEnergy\n     *  @for p5.FFT\n     *  @param  {Number|String} frequency1   Will return a value representing\n     *                                energy at this frequency. Alternately,\n     *                                the strings \"bass\", \"lowMid\" \"mid\",\n     *                                \"highMid\", and \"treble\" will return\n     *                                predefined frequency ranges.\n     *  @param  {Number} [frequency2] If a second frequency is given,\n     *                                will return average amount of\n     *                                energy that exists between the\n     *                                two frequencies.\n     *  @return {Number}   Energy   Energy (volume/amplitude) from\n     *                              0 and 255.\n     *\n     */\n\n  }, {\n    key: \"getEnergy\",\n    value: function getEnergy(frequency1, frequency2) {\n      var nyquist = main.audiocontext.sampleRate / 2;\n\n      if (frequency1 === 'bass') {\n        frequency1 = this.bass[0];\n        frequency2 = this.bass[1];\n      } else if (frequency1 === 'lowMid') {\n        frequency1 = this.lowMid[0];\n        frequency2 = this.lowMid[1];\n      } else if (frequency1 === 'mid') {\n        frequency1 = this.mid[0];\n        frequency2 = this.mid[1];\n      } else if (frequency1 === 'highMid') {\n        frequency1 = this.highMid[0];\n        frequency2 = this.highMid[1];\n      } else if (frequency1 === 'treble') {\n        frequency1 = this.treble[0];\n        frequency2 = this.treble[1];\n      }\n\n      if (typeof frequency1 !== 'number') {\n        throw 'invalid input for getEnergy()';\n      } else if (!frequency2) {\n        var index = Math.round(frequency1 / nyquist * this.freqDomain.length);\n        return this.freqDomain[index];\n      } else if (frequency1 && frequency2) {\n        if (frequency1 > frequency2) {\n          var swap = frequency2;\n          frequency2 = frequency1;\n          frequency1 = swap;\n        }\n\n        var lowIndex = Math.round(frequency1 / nyquist * this.freqDomain.length);\n        var highIndex = Math.round(frequency2 / nyquist * this.freqDomain.length);\n        var total = 0;\n        var numFrequencies = 0; \n\n        for (var i = lowIndex; i <= highIndex; i++) {\n          total += this.freqDomain[i];\n          numFrequencies += 1;\n        } \n\n\n        var toReturn = total / numFrequencies;\n        return toReturn;\n      } else {\n        throw 'invalid input for getEnergy()';\n      }\n    } \n\n  }, {\n    key: \"getFreq\",\n    value: function getFreq(freq1, freq2) {\n      console.log('getFreq() is deprecated. Please use getEnergy() instead.');\n      var x = this.getEnergy(freq1, freq2);\n      return x;\n    }\n    /**\n     *  Returns the\n     *  <a href=\"http://en.wikipedia.org/wiki/Spectral_centroid\" target=\"_blank\">\n     *  spectral centroid</a> of the input signal.\n     *  <em>NOTE: analyze() must be called prior to getCentroid(). Analyze()\n     *  tells the FFT to analyze frequency data, and getCentroid() uses\n     *  the results determine the spectral centroid.</em></p>\n     *\n     *  @method  getCentroid\n     *  @for p5.FFT\n     *  @return {Number}   Spectral Centroid Frequency  of the spectral centroid in Hz.\n     *\n     *\n     * @example\n     *  <div><code>\n     * function setup(){\n     *  cnv = createCanvas(100,100);\n     *  cnv.mousePressed(userStartAudio);\n     *  sound = new p5.AudioIn();\n     *  sound.start();\n     *  fft = new p5.FFT();\n     *  sound.connect(fft);\n     *}\n     *\n     *function draw() {\n     *  if (getAudioContext().state !== 'running') {\n     *    background(220);\n     *    text('tap here and enable mic to begin', 10, 20, width - 20);\n     *    return;\n     *  }\n     *  let centroidplot = 0.0;\n     *  let spectralCentroid = 0;\n     *\n     *  background(0);\n     *  stroke(0,255,0);\n     *  let spectrum = fft.analyze();\n     *  fill(0,255,0); // spectrum is green\n     *\n     *  //draw the spectrum\n     *  for (let i = 0; i < spectrum.length; i++){\n     *    let x = map(log(i), 0, log(spectrum.length), 0, width);\n     *    let h = map(spectrum[i], 0, 255, 0, height);\n     *    let rectangle_width = (log(i+1)-log(i))*(width/log(spectrum.length));\n     *    rect(x, height, rectangle_width, -h )\n     *  }\n     *  let nyquist = 22050;\n     *\n     *  // get the centroid\n     *  spectralCentroid = fft.getCentroid();\n     *\n     *  // the mean_freq_index calculation is for the display.\n     *  let mean_freq_index = spectralCentroid/(nyquist/spectrum.length);\n     *\n     *  centroidplot = map(log(mean_freq_index), 0, log(spectrum.length), 0, width);\n     *\n     *  stroke(255,0,0); // the line showing where the centroid is will be red\n     *\n     *  rect(centroidplot, 0, width / spectrum.length, height)\n     *  noStroke();\n     *  fill(255,255,255);  // text is white\n     *  text('centroid: ', 10, 20);\n     *  text(round(spectralCentroid)+' Hz', 10, 40);\n     *}\n     * </code></div>\n     */\n\n  }, {\n    key: \"getCentroid\",\n    value: function getCentroid() {\n      var nyquist = main.audiocontext.sampleRate / 2;\n      var cumulative_sum = 0;\n      var centroid_normalization = 0;\n\n      for (var i = 0; i < this.freqDomain.length; i++) {\n        cumulative_sum += i * this.freqDomain[i];\n        centroid_normalization += this.freqDomain[i];\n      }\n\n      var mean_freq_index = 0;\n\n      if (centroid_normalization !== 0) {\n        mean_freq_index = cumulative_sum / centroid_normalization;\n      }\n\n      var spec_centroid_freq = mean_freq_index * (nyquist / this.freqDomain.length);\n      return spec_centroid_freq;\n    }\n    /**\n     *  Smooth FFT analysis by averaging with the last analysis frame.\n     *\n     *  @method smooth\n     *  @param {Number} smoothing    0.0 < smoothing < 1.0.\n     *                               Defaults to 0.8.\n     */\n\n  }, {\n    key: \"smooth\",\n    value: function smooth(s) {\n      if (typeof s !== 'undefined') {\n        this.smoothing = s;\n      }\n\n      return this.smoothing;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var index = main.soundArray.indexOf(this);\n      main.soundArray.splice(index, 1);\n\n      if (this.analyser) {\n        this.analyser.disconnect();\n        delete this.analyser;\n      }\n    }\n    /**\n     *  Returns an array of average amplitude values for a given number\n     *  of frequency bands split equally. N defaults to 16.\n     *  <em>NOTE: analyze() must be called prior to linAverages(). Analyze()\n     *  tells the FFT to analyze frequency data, and linAverages() uses\n     *  the results to group them into a smaller set of averages.</em></p>\n     *\n     *  @method  linAverages\n     *  @for p5.FFT\n     *  @param  {Number}  N                Number of returned frequency groups\n     *  @return {Array}   linearAverages   Array of average amplitude values for each group\n     */\n\n  }, {\n    key: \"linAverages\",\n    value: function linAverages(_N) {\n      var N = _N || 16; \n\n      var spectrum = this.freqDomain;\n      var spectrumLength = spectrum.length;\n      var spectrumStep = Math.floor(spectrumLength / N);\n      var linearAverages = new Array(N); \n\n      var groupIndex = 0;\n\n      for (var specIndex = 0; specIndex < spectrumLength; specIndex++) {\n        linearAverages[groupIndex] = linearAverages[groupIndex] !== undefined ? (linearAverages[groupIndex] + spectrum[specIndex]) / 2 : spectrum[specIndex]; \n\n        if (specIndex % spectrumStep === spectrumStep - 1) {\n          groupIndex++;\n        }\n      }\n\n      return linearAverages;\n    }\n    /**\n     *  Returns an array of average amplitude values of the spectrum, for a given\n     *  set of <a href=\"https://en.wikipedia.org/wiki/Octave_band\" target=\"_blank\">\n     *  Octave Bands</a>\n     *  <em>NOTE: analyze() must be called prior to logAverages(). Analyze()\n     *  tells the FFT to analyze frequency data, and logAverages() uses\n     *  the results to group them into a smaller set of averages.</em></p>\n     *\n     *  @method  logAverages\n     *  @for p5.FFT\n     *  @param  {Array}   octaveBands    Array of Octave Bands objects for grouping\n     *  @return {Array}   logAverages    Array of average amplitude values for each group\n     */\n\n  }, {\n    key: \"logAverages\",\n    value: function logAverages(octaveBands) {\n      var nyquist = main.audiocontext.sampleRate / 2;\n      var spectrum = this.freqDomain;\n      var spectrumLength = spectrum.length;\n      var logAverages = new Array(octaveBands.length); \n\n      var octaveIndex = 0;\n\n      for (var specIndex = 0; specIndex < spectrumLength; specIndex++) {\n        var specIndexFrequency = Math.round(specIndex * nyquist / this.freqDomain.length); \n\n        if (specIndexFrequency > octaveBands[octaveIndex].hi) {\n          octaveIndex++;\n        }\n\n        logAverages[octaveIndex] = logAverages[octaveIndex] !== undefined ? (logAverages[octaveIndex] + spectrum[specIndex]) / 2 : spectrum[specIndex];\n      }\n\n      return logAverages;\n    }\n    /**\n     *  Calculates and Returns the 1/N\n     *  <a href=\"https://en.wikipedia.org/wiki/Octave_band\" target=\"_blank\">Octave Bands</a>\n     *  N defaults to 3 and minimum central frequency to 15.625Hz.\n     *  (1/3 Octave Bands ~= 31 Frequency Bands)\n     *  Setting fCtr0 to a central value of a higher octave will ignore the lower bands\n     *  and produce less frequency groups.\n     *\n     *  @method   getOctaveBands\n     *  @for p5.FFT\n     *  @param  {Number}  N             Specifies the 1/N type of generated octave bands\n     *  @param  {Number}  fCtr0         Minimum central frequency for the lowest band\n     *  @return {Array}   octaveBands   Array of octave band objects with their bounds\n     */\n\n  }, {\n    key: \"getOctaveBands\",\n    value: function getOctaveBands(_N, _fCtr0) {\n      var N = _N || 3; \n\n      var fCtr0 = _fCtr0 || 15.625; \n\n      var octaveBands = [];\n      var lastFrequencyBand = {\n        lo: fCtr0 / Math.pow(2, 1 / (2 * N)),\n        ctr: fCtr0,\n        hi: fCtr0 * Math.pow(2, 1 / (2 * N))\n      };\n      octaveBands.push(lastFrequencyBand);\n      var nyquist = main.audiocontext.sampleRate / 2;\n\n      while (lastFrequencyBand.hi < nyquist) {\n        var newFrequencyBand = {};\n        newFrequencyBand.lo = lastFrequencyBand.hi;\n        newFrequencyBand.ctr = lastFrequencyBand.ctr * Math.pow(2, 1 / N);\n        newFrequencyBand.hi = newFrequencyBand.ctr * Math.pow(2, 1 / (2 * N));\n        octaveBands.push(newFrequencyBand);\n        lastFrequencyBand = newFrequencyBand;\n      }\n\n      return octaveBands;\n    }\n  }]);\n\n  return FFT;\n}(); \n\n\nfunction freqToFloat(fft) {\n  if (fft.freqDomain instanceof Float32Array === false) {\n    fft.freqDomain = new Float32Array(fft.analyser.frequencyBinCount);\n  }\n}\n\nfunction freqToInt(fft) {\n  if (fft.freqDomain instanceof Uint8Array === false) {\n    fft.freqDomain = new Uint8Array(fft.analyser.frequencyBinCount);\n  }\n}\n\nfunction timeToFloat(fft) {\n  if (fft.timeDomain instanceof Float32Array === false) {\n    fft.timeDomain = new Float32Array(fft.analyser.frequencyBinCount);\n  }\n}\n\nfunction timeToInt(fft) {\n  if (fft.timeDomain instanceof Uint8Array === false) {\n    fft.timeDomain = new Uint8Array(fft.analyser.frequencyBinCount);\n  }\n}\n\n var fft = (fft_FFT);\nvar Add = __webpack_require__(4);\nvar Add_default = __webpack_require__.n(Add);\n\nvar Multiply = __webpack_require__(1);\nvar Multiply_default = __webpack_require__.n(Multiply);\n\nvar Scale = __webpack_require__(8);\nvar Scale_default = __webpack_require__.n(Scale);\n\nfunction oscillator_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { oscillator_typeof = function _typeof(obj) { return typeof obj; }; } else { oscillator_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return oscillator_typeof(obj); }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (oscillator_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction oscillator_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction oscillator_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction oscillator_createClass(Constructor, protoProps, staticProps) { if (protoProps) oscillator_defineProperties(Constructor.prototype, protoProps); if (staticProps) oscillator_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n\n\nfunction sigChain(o, mathObj, thisChain, nextChain, type) {\n  var chainSource = o.oscillator; \n\n  for (var i in o.mathOps) {\n    if (o.mathOps[i] instanceof type) {\n      chainSource.disconnect();\n      o.mathOps[i].dispose();\n      thisChain = i; \n\n      if (thisChain < o.mathOps.length - 2) {\n        nextChain = o.mathOps[i + 1];\n      }\n    }\n  }\n\n  if (thisChain === o.mathOps.length - 1) {\n    o.mathOps.push(nextChain);\n  } \n\n\n  if (i > 0) {\n    chainSource = o.mathOps[i - 1];\n  }\n\n  chainSource.disconnect();\n  chainSource.connect(mathObj);\n  mathObj.connect(nextChain);\n  o.mathOps[thisChain] = mathObj;\n  return o;\n}\n/**\n *  <p>Creates a signal that oscillates between -1.0 and 1.0.\n *  By default, the oscillation takes the form of a sinusoidal\n *  shape ('sine'). Additional types include 'triangle',\n *  'sawtooth' and 'square'. The frequency defaults to\n *  440 oscillations per second (440Hz, equal to the pitch of an\n *  'A' note).</p>\n *\n *  <p>Set the type of oscillation with setType(), or by instantiating a\n *  specific oscillator: <a href=\"/reference/#/p5.SinOsc\">p5.SinOsc</a>, <a\n *  href=\"/reference/#/p5.TriOsc\">p5.TriOsc</a>, <a\n *  href=\"/reference/#/p5.SqrOsc\">p5.SqrOsc</a>, or <a\n *  href=\"/reference/#/p5.SawOsc\">p5.SawOsc</a>.\n *  </p>\n *\n *  @class p5.Oscillator\n *  @constructor\n *  @param {Number} [freq] frequency defaults to 440Hz\n *  @param {String} [type] type of oscillator. Options:\n *                         'sine' (default), 'triangle',\n *                         'sawtooth', 'square'\n *  @example\n *  <div><code>\n *  let osc, playing, freq, amp;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playOscillator);\n *    osc = new p5.Oscillator('sine');\n *  }\n *\n *  function draw() {\n *    background(220)\n *    freq = constrain(map(mouseX, 0, width, 100, 500), 100, 500);\n *    amp = constrain(map(mouseY, height, 0, 0, 1), 0, 1);\n *\n *    text('tap to play', 20, 20);\n *    text('freq: ' + freq, 20, 40);\n *    text('amp: ' + amp, 20, 60);\n *\n *    if (playing) {\n *      // smooth the transitions by 0.1 seconds\n *      osc.freq(freq, 0.1);\n *      osc.amp(amp, 0.1);\n *    }\n *  }\n *\n *  function playOscillator() {\n *    // starting an oscillator on a user gesture will enable audio\n *    // in browsers that have a strict autoplay policy.\n *    // See also: userStartAudio();\n *    osc.start();\n *    playing = true;\n *  }\n *\n *  function mouseReleased() {\n *    // ramp amplitude to 0 over 0.5 seconds\n *    osc.amp(0, 0.5);\n *    playing = false;\n *  }\n *  </code> </div>\n */\n\n\nvar oscillator_Oscillator =\nfunction () {\n  function Oscillator(freq, type) {\n    oscillator_classCallCheck(this, Oscillator);\n\n    if (typeof freq === 'string') {\n      var f = type;\n      type = freq;\n      freq = f;\n    }\n\n    if (typeof type === 'number') {\n      var _f = type;\n      type = freq;\n      freq = _f;\n    }\n\n    this.started = false; \n\n    this.phaseAmount = undefined;\n    this.oscillator = main.audiocontext.createOscillator();\n    this.f = freq || 440.0; \n\n    this.oscillator.type = type || 'sine';\n    this.oscillator.frequency.setValueAtTime(this.f, main.audiocontext.currentTime); \n\n    this.output = main.audiocontext.createGain();\n    this._freqMods = []; \n\n    this.output.gain.value = 0.5;\n    this.output.gain.setValueAtTime(0.5, main.audiocontext.currentTime);\n    this.oscillator.connect(this.output); \n\n    this.panPosition = 0.0;\n    this.connection = main.input; \n\n    this.panner = new panner_0(this.output, this.connection, 1); \n\n    this.mathOps = [this.output]; \n\n    main.soundArray.push(this); \n\n    this.fade = this.amp;\n  }\n  /**\n   *  Start an oscillator.\n   *\n   *  Starting an oscillator on a user gesture will enable audio in browsers\n   *  that have a strict autoplay policy, including Chrome and most mobile\n   *  devices. See also: `userStartAudio()`.\n   *\n   *  @method  start\n   *  @for p5.Oscillator\n   *  @param  {Number} [time] startTime in seconds from now.\n   *  @param  {Number} [frequency] frequency in Hz.\n   */\n\n\n  oscillator_createClass(Oscillator, [{\n    key: \"start\",\n    value: function start(time, f) {\n      if (this.started) {\n        var now = main.audiocontext.currentTime;\n        this.stop(now);\n      }\n\n      if (!this.started) {\n        var freq = f || this.f;\n        var type = this.oscillator.type; \n\n        if (this.oscillator) {\n          this.oscillator.disconnect();\n          delete this.oscillator;\n        } \n\n\n        this.oscillator = main.audiocontext.createOscillator();\n        this.oscillator.frequency.value = Math.abs(freq);\n        this.oscillator.type = type; \n\n        this.oscillator.connect(this.output);\n        time = time || 0;\n        this.oscillator.start(time + main.audiocontext.currentTime);\n        this.freqNode = this.oscillator.frequency; \n\n        for (var i in this._freqMods) {\n          if (typeof this._freqMods[i].connect !== 'undefined') {\n            this._freqMods[i].connect(this.oscillator.frequency);\n          }\n        }\n\n        this.started = true;\n      }\n    }\n    /**\n     *  Stop an oscillator. Accepts an optional parameter\n     *  to determine how long (in seconds from now) until the\n     *  oscillator stops.\n     *\n     *  @method  stop\n     *  @for p5.Oscillator\n     *  @param  {Number} secondsFromNow Time, in seconds from now.\n     */\n\n  }, {\n    key: \"stop\",\n    value: function stop(time) {\n      if (this.started) {\n        var t = time || 0;\n        var now = main.audiocontext.currentTime;\n        this.oscillator.stop(t + now);\n        this.started = false;\n      }\n    }\n    /**\n     *  Set the amplitude between 0 and 1.0. Or, pass in an object\n     *  such as an oscillator to modulate amplitude with an audio signal.\n     *\n     *  @method  amp\n     *  @for p5.Oscillator\n     *  @param  {Number|Object} vol between 0 and 1.0\n     *                              or a modulating signal/oscillator\n     *  @param {Number} [rampTime] create a fade that lasts rampTime\n     *  @param {Number} [timeFromNow] schedule this event to happen\n     *                                seconds from now\n     *  @return  {AudioParam} gain  If no value is provided,\n     *                              returns the Web Audio API\n     *                              AudioParam that controls\n     *                              this oscillator's\n     *                              gain/amplitude/volume)\n     */\n\n  }, {\n    key: \"amp\",\n    value: function amp(vol) {\n      var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n      if (typeof vol === 'number') {\n        var now = main.audiocontext.currentTime;\n        this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n      } else if (vol) {\n        vol.connect(this.output.gain);\n      } else {\n        return this.output.gain;\n      }\n    }\n    /**\n     * Returns the value of output gain\n     *\n     *  @method  getAmp\n     *  @for p5.Oscillator\n     *\n     * @returns {number} Amplitude value between 0.0 and 1.0\n     */\n\n  }, {\n    key: \"getAmp\",\n    value: function getAmp() {\n      return this.output.gain.value;\n    }\n    /**\n     *  Set frequency of an oscillator to a value. Or, pass in an object\n     *  such as an oscillator to modulate the frequency with an audio signal.\n     *\n     *  @method  freq\n     *  @for p5.Oscillator\n     *  @param  {Number|Object} Frequency Frequency in Hz\n     *                                        or modulating signal/oscillator\n     *  @param  {Number} [rampTime] Ramp time (in seconds)\n     *  @param  {Number} [timeFromNow] Schedule this event to happen\n     *                                   at x seconds from now\n     *  @return  {AudioParam} Frequency If no value is provided,\n     *                                  returns the Web Audio API\n     *                                  AudioParam that controls\n     *                                  this oscillator's frequency\n     *  @example\n     *  <div><code>\n     *  let osc;\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(playOscillator);\n     *    osc = new p5.Oscillator(300);\n     *    background(220);\n     *    text('tap to play', 20, 20);\n     *  }\n     *\n     *  function playOscillator() {\n     *    osc.start();\n     *    osc.amp(0.5);\n     *    // start at 700Hz\n     *    osc.freq(700);\n     *    // ramp to 60Hz over 0.7 seconds\n     *    osc.freq(60, 0.7);\n     *    osc.amp(0, 0.1, 0.7);\n     *  }\n     *  </code></div>\n     */\n\n  }, {\n    key: \"freq\",\n    value: function freq(val) {\n      var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n      if (typeof val === 'number' && !isNaN(val)) {\n        this.f = val;\n        var now = main.audiocontext.currentTime;\n\n        if (rampTime === 0) {\n          this.oscillator.frequency.setValueAtTime(val, tFromNow + now);\n        } else {\n          if (val > 0) {\n            this.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n          } else {\n            this.oscillator.frequency.linearRampToValueAtTime(val, tFromNow + rampTime + now);\n          }\n        } \n\n\n        if (this.phaseAmount) {\n          this.phase(this.phaseAmount);\n        }\n      } else if (val) {\n        if (val.output) {\n          val = val.output;\n        }\n\n        val.connect(this.oscillator.frequency); \n\n        this._freqMods.push(val);\n      } else {\n        return this.oscillator.frequency;\n      }\n    }\n    /**\n     * Returns the value of frequency of oscillator\n     *\n     *  @method  getFreq\n     *  @for p5.Oscillator\n     *  @returns {number} Frequency of oscillator in Hertz\n     */\n\n  }, {\n    key: \"getFreq\",\n    value: function getFreq() {\n      return this.oscillator.frequency.value;\n    }\n    /**\n     *  Set type to 'sine', 'triangle', 'sawtooth' or 'square'.\n     *\n     *  @method  setType\n     *  @for p5.Oscillator\n     *  @param {String} type 'sine', 'triangle', 'sawtooth' or 'square'.\n     */\n\n  }, {\n    key: \"setType\",\n    value: function setType(type) {\n      this.oscillator.type = type;\n    }\n    /**\n     *  Returns  current type of oscillator eg. 'sine', 'triangle', 'sawtooth' or 'square'.\n     *\n     *  @method  getType\n     *  @for p5.Oscillator\n     *  @returns {String} type of oscillator  eg . 'sine', 'triangle', 'sawtooth' or 'square'.\n     */\n\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return this.oscillator.type;\n    }\n    /**\n     *  Connect to a p5.sound / Web Audio object.\n     *\n     *  @method  connect\n     *  @for p5.Oscillator\n     *  @param  {Object} unit A p5.sound or Web Audio object\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect(unit) {\n      if (!unit) {\n        this.panner.connect(main.input);\n      } else if (unit.hasOwnProperty('input')) {\n        this.panner.connect(unit.input);\n        this.connection = unit.input;\n      } else {\n        this.panner.connect(unit);\n        this.connection = unit;\n      }\n    }\n    /**\n     *  Disconnect all outputs\n     *\n     *  @method  disconnect\n     *  @for p5.Oscillator\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.output) {\n        this.output.disconnect();\n      }\n\n      if (this.panner) {\n        this.panner.disconnect();\n\n        if (this.output) {\n          this.output.connect(this.panner);\n        }\n      }\n\n      this.oscMods = [];\n    }\n    /**\n     *  Pan between Left (-1) and Right (1)\n     *\n     *  @method  pan\n     *  @for p5.Oscillator\n     *  @param  {Number} panning Number between -1 and 1\n     *  @param  {Number} timeFromNow schedule this event to happen\n     *                                seconds from now\n     */\n\n  }, {\n    key: \"pan\",\n    value: function pan(pval, tFromNow) {\n      this.panPosition = pval;\n      this.panner.pan(pval, tFromNow);\n    }\n    /**\n     *  Returns the current value of panPosition , between Left (-1) and Right (1)\n     *\n     *  @method  getPan\n     *  @for p5.Oscillator\n     *\n     *  @returns {number} panPosition of oscillator , between Left (-1) and Right (1)\n     */\n\n  }, {\n    key: \"getPan\",\n    value: function getPan() {\n      return this.panPosition;\n    } \n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var index = main.soundArray.indexOf(this);\n      main.soundArray.splice(index, 1);\n\n      if (this.oscillator) {\n        var now = main.audiocontext.currentTime;\n        this.stop(now);\n        this.disconnect();\n        this.panner = null;\n        this.oscillator = null;\n      } \n\n\n      if (this.osc2) {\n        this.osc2.dispose();\n      }\n    }\n    /**\n     *  Set the phase of an oscillator between 0.0 and 1.0.\n     *  In this implementation, phase is a delay time\n     *  based on the oscillator's current frequency.\n     *\n     *  @method  phase\n     *  @for p5.Oscillator\n     *  @param  {Number} phase float between 0.0 and 1.0\n     */\n\n  }, {\n    key: \"phase\",\n    value: function phase(p) {\n      var delayAmt = p5.prototype.map(p, 0, 1.0, 0, 1 / this.f);\n      var now = main.audiocontext.currentTime;\n      this.phaseAmount = p;\n\n      if (!this.dNode) {\n        this.dNode = main.audiocontext.createDelay(); \n\n        this.oscillator.disconnect();\n        this.oscillator.connect(this.dNode);\n        this.dNode.connect(this.output);\n      } \n\n\n      this.dNode.delayTime.setValueAtTime(delayAmt, now);\n    }\n    /**\n     *  Add a value to the p5.Oscillator's output amplitude,\n     *  and return the oscillator. Calling this method again\n     *  will override the initial add() with a new value.\n     *\n     *  @method  add\n     *  @for p5.Oscillator\n     *  @param {Number} number Constant number to add\n     *  @return {p5.Oscillator} Oscillator Returns this oscillator\n     *                                     with scaled output\n     *\n     */\n\n  }, {\n    key: \"add\",\n    value: function add(num) {\n      var add = new Add_default.a(num);\n      var thisChain = this.mathOps.length - 1;\n      var nextChain = this.output;\n      return sigChain(this, add, thisChain, nextChain, Add_default.a);\n    }\n    /**\n     *  Multiply the p5.Oscillator's output amplitude\n     *  by a fixed value (i.e. turn it up!). Calling this method\n     *  again will override the initial mult() with a new value.\n     *\n     *  @method  mult\n     *  @for p5.Oscillator\n     *  @param {Number} number Constant number to multiply\n     *  @return {p5.Oscillator} Oscillator Returns this oscillator\n     *                                     with multiplied output\n     */\n\n  }, {\n    key: \"mult\",\n    value: function mult(num) {\n      var mult = new Multiply_default.a(num);\n      var thisChain = this.mathOps.length - 1;\n      var nextChain = this.output;\n      return sigChain(this, mult, thisChain, nextChain, Multiply_default.a);\n    }\n    /**\n     *  Scale this oscillator's amplitude values to a given\n     *  range, and return the oscillator. Calling this method\n     *  again will override the initial scale() with new values.\n     *\n     *  @method  scale\n     *  @for p5.Oscillator\n     *  @param  {Number} inMin  input range minumum\n     *  @param  {Number} inMax  input range maximum\n     *  @param  {Number} outMin input range minumum\n     *  @param  {Number} outMax input range maximum\n     *  @return {p5.Oscillator} Oscillator Returns this oscillator\n     *                                     with scaled output\n     */\n\n  }, {\n    key: \"scale\",\n    value: function scale(inMin, inMax, outMin, outMax) {\n      var mapOutMin, mapOutMax;\n\n      if (arguments.length === 4) {\n        mapOutMin = p5.prototype.map(outMin, inMin, inMax, 0, 1) - 0.5; \n\n        mapOutMax = p5.prototype.map(outMax, inMin, inMax, 0, 1) - 0.5; \n      } else {\n        mapOutMin = arguments[0];\n        mapOutMax = arguments[1];\n      }\n\n      var scale = new Scale_default.a(mapOutMin, mapOutMax);\n      var thisChain = this.mathOps.length - 1;\n      var nextChain = this.output;\n      return sigChain(this, scale, thisChain, nextChain, Scale_default.a); \n    }\n  }]);\n\n  return Oscillator;\n}(); \n\n/**\n *  Constructor: <code>new p5.SinOsc()</code>.\n *  This creates a Sine Wave Oscillator and is\n *  equivalent to <code> new p5.Oscillator('sine')\n *  </code> or creating a p5.Oscillator and then calling\n *  its method <code>setType('sine')</code>.\n *  See p5.Oscillator for methods.\n *\n *  @class  p5.SinOsc\n *  @constructor\n *  @extends p5.Oscillator\n *  @param {Number} [freq] Set the frequency\n */\n\n\nvar SinOsc =\nfunction (_Oscillator) {\n  _inherits(SinOsc, _Oscillator);\n\n  function SinOsc(freq) {\n    oscillator_classCallCheck(this, SinOsc);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SinOsc).call(this, freq, 'sine'));\n  }\n\n  return SinOsc;\n}(oscillator_Oscillator);\n/**\n *  Constructor: <code>new p5.TriOsc()</code>.\n *  This creates a Triangle Wave Oscillator and is\n *  equivalent to <code>new p5.Oscillator('triangle')\n *  </code> or creating a p5.Oscillator and then calling\n *  its method <code>setType('triangle')</code>.\n *  See p5.Oscillator for methods.\n *\n *  @class  p5.TriOsc\n *  @constructor\n *  @extends p5.Oscillator\n *  @param {Number} [freq] Set the frequency\n */\n\n\nvar TriOsc =\nfunction (_Oscillator2) {\n  _inherits(TriOsc, _Oscillator2);\n\n  function TriOsc(freq) {\n    oscillator_classCallCheck(this, TriOsc);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(TriOsc).call(this, freq, 'triangle'));\n  }\n\n  return TriOsc;\n}(oscillator_Oscillator);\n/**\n *  Constructor: <code>new p5.SawOsc()</code>.\n *  This creates a SawTooth Wave Oscillator and is\n *  equivalent to <code> new p5.Oscillator('sawtooth')\n *  </code> or creating a p5.Oscillator and then calling\n *  its method <code>setType('sawtooth')</code>.\n *  See p5.Oscillator for methods.\n *\n *  @class  p5.SawOsc\n *  @constructor\n *  @extends p5.Oscillator\n *  @param {Number} [freq] Set the frequency\n */\n\n\nvar SawOsc =\nfunction (_Oscillator3) {\n  _inherits(SawOsc, _Oscillator3);\n\n  function SawOsc(freq) {\n    oscillator_classCallCheck(this, SawOsc);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SawOsc).call(this, freq, 'sawtooth'));\n  }\n\n  return SawOsc;\n}(oscillator_Oscillator);\n/**\n *  Constructor: <code>new p5.SqrOsc()</code>.\n *  This creates a Square Wave Oscillator and is\n *  equivalent to <code> new p5.Oscillator('square')\n *  </code> or creating a p5.Oscillator and then calling\n *  its method <code>setType('square')</code>.\n *  See p5.Oscillator for methods.\n *\n *  @class  p5.SqrOsc\n *  @constructor\n *  @extends p5.Oscillator\n *  @param {Number} [freq] Set the frequency\n */\n\n\nvar SqrOsc =\nfunction (_Oscillator4) {\n  _inherits(SqrOsc, _Oscillator4);\n\n  function SqrOsc(freq) {\n    oscillator_classCallCheck(this, SqrOsc);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(SqrOsc).call(this, freq, 'square'));\n  }\n\n  return SqrOsc;\n}(oscillator_Oscillator);\n\n var oscillator = (oscillator_Oscillator);\n\nvar TimelineSignal = __webpack_require__(7);\nvar TimelineSignal_default = __webpack_require__.n(TimelineSignal);\n\n\n\n\n\n\n/**\n *  <p>Envelopes are pre-defined amplitude distribution over time.\n *  Typically, envelopes are used to control the output volume\n *  of an object, a series of fades referred to as Attack, Decay,\n *  Sustain and Release (\n *  <a href=\"https://upload.wikimedia.org/wikipedia/commons/e/ea/ADSR_parameter.svg\">ADSR</a>\n *  ). Envelopes can also control other Web Audio Parameters—for example, a p5.Envelope can\n *  control an Oscillator's frequency like this: <code>osc.freq(env)</code>.</p>\n *  <p>Use <code><a href=\"#/p5.Envelope/setRange\">setRange</a></code> to change the attack/release level.\n *  Use <code><a href=\"#/p5.Envelope/setADSR\">setADSR</a></code> to change attackTime, decayTime, sustainPercent and releaseTime.</p>\n *  <p>Use the <code><a href=\"#/p5.Envelope/play\">play</a></code> method to play the entire envelope,\n *  the <code><a href=\"#/p5.Envelope/ramp\">ramp</a></code> method for a pingable trigger,\n *  or <code><a href=\"#/p5.Envelope/triggerAttack\">triggerAttack</a></code>/\n *  <code><a href=\"#/p5.Envelope/triggerRelease\">triggerRelease</a></code> to trigger noteOn/noteOff.</p>\n *\n *  @class p5.Envelope\n *  @constructor\n *  @example\n *  <div><code>\n *  let t1 = 0.1; // attack time in seconds\n *  let l1 = 0.7; // attack level 0.0 to 1.0\n *  let t2 = 0.3; // decay time in seconds\n *  let l2 = 0.1; // decay level  0.0 to 1.0\n *\n *  let env;\n *  let triOsc;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    background(220);\n *    text('tap to play', 20, 20);\n *    cnv.mousePressed(playSound);\n *\n *    env = new p5.Envelope(t1, l1, t2, l2);\n *    triOsc = new p5.Oscillator('triangle');\n *  }\n *\n *  function playSound() {\n *    // starting the oscillator ensures that audio is enabled.\n *    triOsc.start();\n *    env.play(triOsc);\n *  }\n *  </code></div>\n */\n\np5.Envelope = function (t1, l1, t2, l2, t3, l3) {\n  /**\n   * Time until envelope reaches attackLevel\n   * @property attackTime\n   */\n  this.aTime = t1 || 0.1;\n  /**\n   * Level once attack is complete.\n   * @property attackLevel\n   */\n\n  this.aLevel = l1 || 1;\n  /**\n   * Time until envelope reaches decayLevel.\n   * @property decayTime\n   */\n\n  this.dTime = t2 || 0.5;\n  /**\n   * Level after decay. The envelope will sustain here until it is released.\n   * @property decayLevel\n   */\n\n  this.dLevel = l2 || 0;\n  /**\n   * Duration of the release portion of the envelope.\n   * @property releaseTime\n   */\n\n  this.rTime = t3 || 0;\n  /**\n   * Level at the end of the release.\n   * @property releaseLevel\n   */\n\n  this.rLevel = l3 || 0;\n  this._rampHighPercentage = 0.98;\n  this._rampLowPercentage = 0.02;\n  this.output = main.audiocontext.createGain();\n  this.control = new TimelineSignal_default.a();\n\n  this._init(); \n\n\n  this.control.connect(this.output); \n\n  this.connection = null; \n\n  this.mathOps = [this.control]; \n\n  this.isExponential = false; \n\n  this.sourceToClear = null; \n\n  this.wasTriggered = false; \n\n  main.soundArray.push(this);\n}; \n\n\np5.Envelope.prototype._init = function () {\n  var now = main.audiocontext.currentTime;\n  var t = now;\n  this.control.setTargetAtTime(0.00001, t, 0.001); \n\n  this._setRampAD(this.aTime, this.dTime);\n};\n/**\n *  Reset the envelope with a series of time/value pairs.\n *\n *  @method  set\n *  @for p5.Envelope\n *  @param {Number} attackTime     Time (in seconds) before level\n *                                 reaches attackLevel\n *  @param {Number} attackLevel    Typically an amplitude between\n *                                 0.0 and 1.0\n *  @param {Number} decayTime      Time\n *  @param {Number} decayLevel   Amplitude (In a standard ADSR envelope,\n *                                 decayLevel = sustainLevel)\n *  @param {Number} releaseTime   Release Time (in seconds)\n *  @param {Number} releaseLevel  Amplitude\n *  @example\n *  <div><code>\n *  let attackTime;\n *  let l1 = 0.7; // attack level 0.0 to 1.0\n *  let t2 = 0.3; // decay time in seconds\n *  let l2 = 0.1; // decay level  0.0 to 1.0\n *  let l3 = 0.2; // release time in seconds\n *\n *  let env, triOsc;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playSound);\n *\n *    env = new p5.Envelope();\n *    triOsc = new p5.Oscillator('triangle');\n *  }\n *\n *  function draw() {\n *    background(220);\n *    text('tap here to play', 5, 20);\n *\n *    attackTime = map(mouseX, 0, width, 0.0, 1.0);\n *    text('attack time: ' + attackTime, 5, height - 20);\n *  }\n *\n *  // mouseClick triggers envelope if over canvas\n *  function playSound() {\n *    env.set(attackTime, l1, t2, l2, l3);\n *\n *    triOsc.start();\n *    env.play(triOsc);\n *  }\n *  </code></div>\n *\n */\n\n\np5.Envelope.prototype.set = function (t1, l1, t2, l2, t3, l3) {\n  this.aTime = t1;\n  this.aLevel = l1;\n  this.dTime = t2 || 0;\n  this.dLevel = l2 || 0;\n  this.rTime = t3 || 0;\n  this.rLevel = l3 || 0; \n\n  this._setRampAD(t1, t2);\n};\n/**\n *  Set values like a traditional\n *  <a href=\"https://en.wikipedia.org/wiki/Synthesizer#/media/File:ADSR_parameter.svg\">\n *  ADSR envelope\n *  </a>.\n *\n *  @method  setADSR\n *  @for p5.Envelope\n *  @param {Number} attackTime    Time (in seconds before envelope\n *                                reaches Attack Level\n *  @param {Number} [decayTime]    Time (in seconds) before envelope\n *                                reaches Decay/Sustain Level\n *  @param {Number} [susRatio]    Ratio between attackLevel and releaseLevel, on a scale from 0 to 1,\n *                                where 1.0 = attackLevel, 0.0 = releaseLevel.\n *                                The susRatio determines the decayLevel and the level at which the\n *                                sustain portion of the envelope will sustain.\n *                                For example, if attackLevel is 0.4, releaseLevel is 0,\n *                                and susAmt is 0.5, the decayLevel would be 0.2. If attackLevel is\n *                                increased to 1.0 (using <code>setRange</code>),\n *                                then decayLevel would increase proportionally, to become 0.5.\n *  @param {Number} [releaseTime]   Time in seconds from now (defaults to 0)\n *  @example\n *  <div><code>\n *  let attackLevel = 1.0;\n *  let releaseLevel = 0;\n *\n *  let attackTime = 0.001;\n *  let decayTime = 0.2;\n *  let susPercent = 0.2;\n *  let releaseTime = 0.5;\n *\n *  let env, triOsc;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playEnv);\n *\n *    env = new p5.Envelope();\n *    triOsc = new p5.Oscillator('triangle');\n *    triOsc.amp(env);\n *    triOsc.freq(220);\n *  }\n *\n *  function draw() {\n *    background(220);\n *    text('tap here to play', 5, 20);\n *    attackTime = map(mouseX, 0, width, 0, 1.0);\n *    text('attack time: ' + attackTime, 5, height - 40);\n *  }\n *\n *  function playEnv() {\n *    triOsc.start();\n *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n *    env.play();\n *  }\n *  </code></div>\n */\n\n\np5.Envelope.prototype.setADSR = function (aTime, dTime, sPercent, rTime) {\n  this.aTime = aTime;\n  this.dTime = dTime || 0; \n\n  this.sPercent = sPercent || 0;\n  this.dLevel = typeof sPercent !== 'undefined' ? sPercent * (this.aLevel - this.rLevel) + this.rLevel : 0;\n  this.rTime = rTime || 0; \n\n  this._setRampAD(aTime, dTime);\n};\n/**\n *  Set max (attackLevel) and min (releaseLevel) of envelope.\n *\n *  @method  setRange\n *  @for p5.Envelope\n *  @param {Number} aLevel attack level (defaults to 1)\n *  @param {Number} rLevel release level (defaults to 0)\n *  @example\n *  <div><code>\n *  let attackLevel = 1.0;\n *  let releaseLevel = 0;\n *\n *  let attackTime = 0.001;\n *  let decayTime = 0.2;\n *  let susPercent = 0.2;\n *  let releaseTime = 0.5;\n *\n *  let env, triOsc;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playEnv);\n *\n *    env = new p5.Envelope();\n *    triOsc = new p5.Oscillator('triangle');\n *    triOsc.amp(env);\n *    triOsc.freq(220);\n *  }\n *\n *  function draw() {\n *    background(220);\n *    text('tap here to play', 5, 20);\n *    attackLevel = map(mouseY, height, 0, 0, 1.0);\n *    text('attack level: ' + attackLevel, 5, height - 20);\n *  }\n *\n *  function playEnv() {\n *    triOsc.start();\n *    env.setRange(attackLevel, releaseLevel);\n *    env.play();\n *  }\n *  </code></div>\n */\n\n\np5.Envelope.prototype.setRange = function (aLevel, rLevel) {\n  this.aLevel = aLevel || 1;\n  this.rLevel = rLevel || 0; \n}; \n\n\np5.Envelope.prototype._setRampAD = function (t1, t2) {\n  this._rampAttackTime = this.checkExpInput(t1);\n  this._rampDecayTime = this.checkExpInput(t2);\n  var TCDenominator = 1.0; \n\n  TCDenominator = Math.log(1.0 / this.checkExpInput(1.0 - this._rampHighPercentage));\n  this._rampAttackTC = t1 / this.checkExpInput(TCDenominator);\n  TCDenominator = Math.log(1.0 / this._rampLowPercentage);\n  this._rampDecayTC = t2 / this.checkExpInput(TCDenominator);\n}; \n\n\np5.Envelope.prototype.setRampPercentages = function (p1, p2) {\n  this._rampHighPercentage = this.checkExpInput(p1);\n  this._rampLowPercentage = this.checkExpInput(p2);\n  var TCDenominator = 1.0; \n\n  TCDenominator = Math.log(1.0 / this.checkExpInput(1.0 - this._rampHighPercentage));\n  this._rampAttackTC = this._rampAttackTime / this.checkExpInput(TCDenominator);\n  TCDenominator = Math.log(1.0 / this._rampLowPercentage);\n  this._rampDecayTC = this._rampDecayTime / this.checkExpInput(TCDenominator);\n};\n/**\n *  Assign a parameter to be controlled by this envelope.\n *  If a p5.Sound object is given, then the p5.Envelope will control its\n *  output gain. If multiple inputs are provided, the env will\n *  control all of them.\n *\n *  @method  setInput\n *  @for p5.Envelope\n *  @param  {Object} [...inputs]         A p5.sound object or\n *                                Web Audio Param.\n */\n\n\np5.Envelope.prototype.setInput = function () {\n  for (var i = 0; i < arguments.length; i++) {\n    this.connect(arguments[i]);\n  }\n};\n/**\n *  Set whether the envelope ramp is linear (default) or exponential.\n *  Exponential ramps can be useful because we perceive amplitude\n *  and frequency logarithmically.\n *\n *  @method  setExp\n *  @for p5.Envelope\n *  @param {Boolean} isExp true is exponential, false is linear\n */\n\n\np5.Envelope.prototype.setExp = function (isExp) {\n  this.isExponential = isExp;\n}; \n\n\np5.Envelope.prototype.checkExpInput = function (value) {\n  if (value <= 0) {\n    value = 0.00000001;\n  }\n\n  return value;\n};\n/**\n *  <p>Play tells the envelope to start acting on a given input.\n *  If the input is a p5.sound object (i.e. AudioIn, Oscillator,\n *  SoundFile), then Envelope will control its output volume.\n *  Envelopes can also be used to control any <a href=\"\n *  http://docs.webplatform.org/wiki/apis/webaudio/AudioParam\">\n *  Web Audio Audio Param.</a></p>\n *\n *  @method  play\n *  @for p5.Envelope\n *  @param  {Object} unit         A p5.sound object or\n *                                Web Audio Param.\n *  @param  {Number} [startTime]  time from now (in seconds) at which to play\n *  @param  {Number} [sustainTime] time to sustain before releasing the envelope\n *  @example\n *  <div><code>\n *  let attackLevel = 1.0;\n *  let releaseLevel = 0;\n *\n *  let attackTime = 0.001;\n *  let decayTime = 0.2;\n *  let susPercent = 0.2;\n *  let releaseTime = 0.5;\n *\n *  let env, triOsc;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playEnv);\n *\n *    env = new p5.Envelope();\n *    triOsc = new p5.Oscillator('triangle');\n *    triOsc.amp(env);\n *    triOsc.freq(220);\n *    triOsc.start();\n *  }\n *\n *  function draw() {\n *    background(220);\n *    text('tap here to play', 5, 20);\n *    attackTime = map(mouseX, 0, width, 0, 1.0);\n *    attackLevel = map(mouseY, height, 0, 0, 1.0);\n *    text('attack time: ' + attackTime, 5, height - 40);\n *    text('attack level: ' + attackLevel, 5, height - 20);\n *  }\n *\n *  function playEnv() {\n *    // ensure that audio is enabled\n *    userStartAudio();\n *\n *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n *    env.setRange(attackLevel, releaseLevel);\n *    env.play();\n *  }\n *  </code></div>\n */\n\n\np5.Envelope.prototype.play = function (unit, secondsFromNow, susTime) {\n  var tFromNow = secondsFromNow || 0;\n\n  if (unit) {\n    if (this.connection !== unit) {\n      this.connect(unit);\n    }\n  }\n\n  this.triggerAttack(unit, tFromNow);\n  this.triggerRelease(unit, tFromNow + this.aTime + this.dTime + ~~susTime);\n};\n/**\n *  Trigger the Attack, and Decay portion of the Envelope.\n *  Similar to holding down a key on a piano, but it will\n *  hold the sustain level until you let go. Input can be\n *  any p5.sound object, or a <a href=\"\n *  http://docs.webplatform.org/wiki/apis/webaudio/AudioParam\">\n *  Web Audio Param</a>.\n *\n *  @method  triggerAttack\n *  @for p5.Envelope\n *  @param  {Object} unit p5.sound Object or Web Audio Param\n *  @param  {Number} secondsFromNow time from now (in seconds)\n *  @example\n *  <div><code>\n *  let attackTime = 0.001;\n *  let decayTime = 0.2;\n *  let susPercent = 0.3;\n *  let releaseTime = 0.4;\n *  let env, triOsc;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    background(220);\n *    textAlign(CENTER);\n *    textSize(10);\n *    text('tap to triggerAttack', width/2, height/2);\n *\n *    env = new p5.Envelope();\n *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n *    env.setRange(1.0, 0.0);\n *    triOsc = new p5.Oscillator('triangle');\n *    triOsc.freq(220);\n *\n *    cnv.mousePressed(envAttack);\n *  }\n *\n *  function envAttack()  {\n *    background(0, 255, 255);\n *    text('release to release', width/2, height/2);\n *\n *    // ensures audio is enabled. See also: `userStartAudio`\n *    triOsc.start();\n *\n *    env.triggerAttack(triOsc);\n *  }\n *\n *  function mouseReleased() {\n *    background(220);\n *    text('tap to triggerAttack', width/2, height/2);\n *\n *    env.triggerRelease(triOsc);\n *  }\n *  </code></div>\n */\n\n\np5.Envelope.prototype.triggerAttack = function (unit, secondsFromNow) {\n  var now = main.audiocontext.currentTime;\n  var tFromNow = secondsFromNow || 0;\n  var t = now + tFromNow;\n  this.lastAttack = t;\n  this.wasTriggered = true;\n\n  if (unit) {\n    if (this.connection !== unit) {\n      this.connect(unit);\n    }\n  } \n\n\n  var valToSet = this.control.getValueAtTime(t);\n\n  if (this.isExponential === true) {\n    this.control.exponentialRampToValueAtTime(this.checkExpInput(valToSet), t);\n  } else {\n    this.control.linearRampToValueAtTime(valToSet, t);\n  } \n\n\n  t += this.aTime;\n\n  if (this.isExponential === true) {\n    this.control.exponentialRampToValueAtTime(this.checkExpInput(this.aLevel), t);\n    valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n    this.control.cancelScheduledValues(t);\n    this.control.exponentialRampToValueAtTime(valToSet, t);\n  } else {\n    this.control.linearRampToValueAtTime(this.aLevel, t);\n    valToSet = this.control.getValueAtTime(t);\n    this.control.cancelScheduledValues(t);\n    this.control.linearRampToValueAtTime(valToSet, t);\n  } \n\n\n  t += this.dTime;\n\n  if (this.isExponential === true) {\n    this.control.exponentialRampToValueAtTime(this.checkExpInput(this.dLevel), t);\n    valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n    this.control.cancelScheduledValues(t);\n    this.control.exponentialRampToValueAtTime(valToSet, t);\n  } else {\n    this.control.linearRampToValueAtTime(this.dLevel, t);\n    valToSet = this.control.getValueAtTime(t);\n    this.control.cancelScheduledValues(t);\n    this.control.linearRampToValueAtTime(valToSet, t);\n  }\n};\n/**\n *  Trigger the Release of the Envelope. This is similar to releasing\n *  the key on a piano and letting the sound fade according to the\n *  release level and release time.\n *\n *  @method  triggerRelease\n *  @for p5.Envelope\n *  @param  {Object} unit p5.sound Object or Web Audio Param\n *  @param  {Number} secondsFromNow time to trigger the release\n *  @example\n *  <div><code>\n *  let attackTime = 0.001;\n *  let decayTime = 0.2;\n *  let susPercent = 0.3;\n *  let releaseTime = 0.4;\n *  let env, triOsc;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    background(220);\n *    textAlign(CENTER);\n *    textSize(10);\n *    text('tap to triggerAttack', width/2, height/2);\n *\n *    env = new p5.Envelope();\n *    env.setADSR(attackTime, decayTime, susPercent, releaseTime);\n *    env.setRange(1.0, 0.0);\n *    triOsc = new p5.Oscillator('triangle');\n *    triOsc.freq(220);\n *\n *    cnv.mousePressed(envAttack);\n *  }\n *\n *  function envAttack()  {\n *    background(0, 255, 255);\n *    text('release to release', width/2, height/2);\n *\n *    // ensures audio is enabled. See also: `userStartAudio`\n *    triOsc.start();\n *\n *    env.triggerAttack(triOsc);\n *  }\n *\n *  function mouseReleased() {\n *    background(220);\n *    text('tap to triggerAttack', width/2, height/2);\n *\n *    env.triggerRelease(triOsc);\n *  }\n *  </code></div>\n */\n\n\np5.Envelope.prototype.triggerRelease = function (unit, secondsFromNow) {\n  if (!this.wasTriggered) {\n    return;\n  }\n\n  var now = main.audiocontext.currentTime;\n  var tFromNow = secondsFromNow || 0;\n  var t = now + tFromNow;\n\n  if (unit) {\n    if (this.connection !== unit) {\n      this.connect(unit);\n    }\n  } \n\n\n  var valToSet = this.control.getValueAtTime(t);\n\n  if (this.isExponential === true) {\n    this.control.exponentialRampToValueAtTime(this.checkExpInput(valToSet), t);\n  } else {\n    this.control.linearRampToValueAtTime(valToSet, t);\n  } \n\n\n  t += this.rTime;\n\n  if (this.isExponential === true) {\n    this.control.exponentialRampToValueAtTime(this.checkExpInput(this.rLevel), t);\n    valToSet = this.checkExpInput(this.control.getValueAtTime(t));\n    this.control.cancelScheduledValues(t);\n    this.control.exponentialRampToValueAtTime(valToSet, t);\n  } else {\n    this.control.linearRampToValueAtTime(this.rLevel, t);\n    valToSet = this.control.getValueAtTime(t);\n    this.control.cancelScheduledValues(t);\n    this.control.linearRampToValueAtTime(valToSet, t);\n  }\n\n  this.wasTriggered = false;\n};\n/**\n *  Exponentially ramp to a value using the first two\n *  values from <code><a href=\"#/p5.Envelope/setADSR\">setADSR(attackTime, decayTime)</a></code>\n *  as <a href=\"https://en.wikipedia.org/wiki/RC_time_constant\">\n *  time constants</a> for simple exponential ramps.\n *  If the value is higher than current value, it uses attackTime,\n *  while a decrease uses decayTime.\n *\n *  @method  ramp\n *  @for p5.Envelope\n *  @param  {Object} unit           p5.sound Object or Web Audio Param\n *  @param  {Number} secondsFromNow When to trigger the ramp\n *  @param  {Number} v              Target value\n *  @param  {Number} [v2]           Second target value\n *  @example\n *  <div><code>\n *  let env, osc, amp;\n *\n *  let attackTime = 0.001;\n *  let decayTime = 0.2;\n *  let attackLevel = 1;\n *  let decayLevel = 0;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    fill(0,255,0);\n *    noStroke();\n *\n *    env = new p5.Envelope();\n *    env.setADSR(attackTime, decayTime);\n *    osc = new p5.Oscillator();\n *    osc.amp(env);\n *    amp = new p5.Amplitude();\n *\n *    cnv.mousePressed(triggerRamp);\n *  }\n *\n *  function triggerRamp() {\n *    // ensures audio is enabled. See also: `userStartAudio`\n *    osc.start();\n *\n *    env.ramp(osc, 0, attackLevel, decayLevel);\n *  }\n *\n *  function draw() {\n *    background(20);\n *    text('tap to play', 10, 20);\n *    let h = map(amp.getLevel(), 0, 0.4, 0, height);;\n *    rect(0, height, width, -h);\n *  }\n *  </code></div>\n */\n\n\np5.Envelope.prototype.ramp = function (unit, secondsFromNow, v1, v2) {\n  var now = main.audiocontext.currentTime;\n  var tFromNow = secondsFromNow || 0;\n  var t = now + tFromNow;\n  var destination1 = this.checkExpInput(v1);\n  var destination2 = typeof v2 !== 'undefined' ? this.checkExpInput(v2) : undefined; \n\n  if (unit) {\n    if (this.connection !== unit) {\n      this.connect(unit);\n    }\n  } \n\n\n  var currentVal = this.checkExpInput(this.control.getValueAtTime(t)); \n\n  if (destination1 > currentVal) {\n    this.control.setTargetAtTime(destination1, t, this._rampAttackTC);\n    t += this._rampAttackTime;\n  } \n  else if (destination1 < currentVal) {\n      this.control.setTargetAtTime(destination1, t, this._rampDecayTC);\n      t += this._rampDecayTime;\n    } \n\n\n  if (destination2 === undefined) return; \n\n  if (destination2 > destination1) {\n    this.control.setTargetAtTime(destination2, t, this._rampAttackTC);\n  } \n  else if (destination2 < destination1) {\n      this.control.setTargetAtTime(destination2, t, this._rampDecayTC);\n    }\n};\n\np5.Envelope.prototype.connect = function (unit) {\n  this.connection = unit; \n\n  if (unit instanceof p5.Oscillator || unit instanceof p5.SoundFile || unit instanceof p5.AudioIn || unit instanceof p5.Reverb || unit instanceof p5.Noise || unit instanceof p5.Filter || unit instanceof p5.Delay) {\n    unit = unit.output.gain;\n  }\n\n  if (unit instanceof AudioParam) {\n    unit.setValueAtTime(0, main.audiocontext.currentTime);\n  }\n\n  this.output.connect(unit);\n};\n\np5.Envelope.prototype.disconnect = function () {\n  if (this.output) {\n    this.output.disconnect();\n  }\n}; \n\n/**\n *  Add a value to the p5.Oscillator's output amplitude,\n *  and return the oscillator. Calling this method\n *  again will override the initial add() with new values.\n *\n *  @method  add\n *  @for p5.Envelope\n *  @param {Number} number Constant number to add\n *  @return {p5.Envelope} Envelope Returns this envelope\n *                                     with scaled output\n */\n\n\np5.Envelope.prototype.add = function (num) {\n  var add = new Add_default.a(num);\n  var thisChain = this.mathOps.length;\n  var nextChain = this.output;\n  return p5.prototype._mathChain(this, add, thisChain, nextChain, Add_default.a);\n};\n/**\n *  Multiply the p5.Envelope's output amplitude\n *  by a fixed value. Calling this method\n *  again will override the initial mult() with new values.\n *\n *  @method  mult\n *  @for p5.Envelope\n *  @param {Number} number Constant number to multiply\n *  @return {p5.Envelope} Envelope Returns this envelope\n *                                     with scaled output\n */\n\n\np5.Envelope.prototype.mult = function (num) {\n  var mult = new Multiply_default.a(num);\n  var thisChain = this.mathOps.length;\n  var nextChain = this.output;\n  return p5.prototype._mathChain(this, mult, thisChain, nextChain, Multiply_default.a);\n};\n/**\n *  Scale this envelope's amplitude values to a given\n *  range, and return the envelope. Calling this method\n *  again will override the initial scale() with new values.\n *\n *  @method  scale\n *  @for p5.Envelope\n *  @param  {Number} inMin  input range minumum\n *  @param  {Number} inMax  input range maximum\n *  @param  {Number} outMin input range minumum\n *  @param  {Number} outMax input range maximum\n *  @return {p5.Envelope} Envelope Returns this envelope\n *                                     with scaled output\n */\n\n\np5.Envelope.prototype.scale = function (inMin, inMax, outMin, outMax) {\n  var scale = new Scale_default.a(inMin, inMax, outMin, outMax);\n  var thisChain = this.mathOps.length;\n  var nextChain = this.output;\n  return p5.prototype._mathChain(this, scale, thisChain, nextChain, Scale_default.a);\n}; \n\n\np5.Envelope.prototype.dispose = function () {\n  var index = main.soundArray.indexOf(this);\n  main.soundArray.splice(index, 1);\n  this.disconnect();\n\n  if (this.control) {\n    this.control.dispose();\n    this.control = null;\n  }\n\n  for (var i = 1; i < this.mathOps.length; i++) {\n    this.mathOps[i].dispose();\n  }\n}; \n\n\np5.Env = function (t1, l1, t2, l2, t3, l3) {\n  console.warn('WARNING: p5.Env is now deprecated and may be removed in future versions. ' + 'Please use the new p5.Envelope instead.');\n  p5.Envelope.call(this, t1, l1, t2, l2, t3, l3);\n};\n\np5.Env.prototype = Object.create(p5.Envelope.prototype);\nvar Envelope = p5.Envelope;\n var envelope = (Envelope);\nfunction noise_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { noise_typeof = function _typeof(obj) { return typeof obj; }; } else { noise_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return noise_typeof(obj); }\n\nfunction noise_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction noise_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction noise_createClass(Constructor, protoProps, staticProps) { if (protoProps) noise_defineProperties(Constructor.prototype, protoProps); if (staticProps) noise_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction noise_possibleConstructorReturn(self, call) { if (call && (noise_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return noise_assertThisInitialized(self); }\n\nfunction noise_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction noise_getPrototypeOf(o) { noise_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return noise_getPrototypeOf(o); }\n\nfunction noise_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) noise_setPrototypeOf(subClass, superClass); }\n\nfunction noise_setPrototypeOf(o, p) { noise_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return noise_setPrototypeOf(o, p); }\n\n\n\nvar _whiteNoiseBuffer = function () {\n  var bufferSize = 2 * main.audiocontext.sampleRate;\n  var whiteBuffer = main.audiocontext.createBuffer(1, bufferSize, main.audiocontext.sampleRate);\n  var noiseData = whiteBuffer.getChannelData(0);\n\n  for (var i = 0; i < bufferSize; i++) {\n    noiseData[i] = Math.random() * 2 - 1;\n  }\n\n  whiteBuffer.type = 'white';\n  return whiteBuffer;\n}();\n\nvar _pinkNoiseBuffer = function () {\n  var bufferSize = 2 * main.audiocontext.sampleRate;\n  var pinkBuffer = main.audiocontext.createBuffer(1, bufferSize, main.audiocontext.sampleRate);\n  var noiseData = pinkBuffer.getChannelData(0);\n  var b0, b1, b2, b3, b4, b5, b6;\n  b0 = b1 = b2 = b3 = b4 = b5 = b6 = 0.0;\n\n  for (var i = 0; i < bufferSize; i++) {\n    var white = Math.random() * 2 - 1;\n    b0 = 0.99886 * b0 + white * 0.0555179;\n    b1 = 0.99332 * b1 + white * 0.0750759;\n    b2 = 0.969 * b2 + white * 0.153852;\n    b3 = 0.8665 * b3 + white * 0.3104856;\n    b4 = 0.55 * b4 + white * 0.5329522;\n    b5 = -0.7616 * b5 - white * 0.016898;\n    noiseData[i] = b0 + b1 + b2 + b3 + b4 + b5 + b6 + white * 0.5362;\n    noiseData[i] *= 0.11; \n\n    b6 = white * 0.115926;\n  }\n\n  pinkBuffer.type = 'pink';\n  return pinkBuffer;\n}();\n\nvar _brownNoiseBuffer = function () {\n  var bufferSize = 2 * main.audiocontext.sampleRate;\n  var brownBuffer = main.audiocontext.createBuffer(1, bufferSize, main.audiocontext.sampleRate);\n  var noiseData = brownBuffer.getChannelData(0);\n  var lastOut = 0.0;\n\n  for (var i = 0; i < bufferSize; i++) {\n    var white = Math.random() * 2 - 1;\n    noiseData[i] = (lastOut + 0.02 * white) / 1.02;\n    lastOut = noiseData[i];\n    noiseData[i] *= 3.5;\n  }\n\n  brownBuffer.type = 'brown';\n  return brownBuffer;\n}();\n/**\n *  Noise is a type of oscillator that generates a buffer with random values.\n *\n *  @class p5.Noise\n *  @extends p5.Oscillator\n *  @constructor\n *  @param {String} type Type of noise can be 'white' (default),\n *                       'brown' or 'pink'.\n */\n\n\nvar noise_Noise =\nfunction (_Oscillator) {\n  noise_inherits(Noise, _Oscillator);\n\n  function Noise(type) {\n    var _this;\n\n    noise_classCallCheck(this, Noise);\n\n    _this = noise_possibleConstructorReturn(this, noise_getPrototypeOf(Noise).call(this));\n    var assignType;\n    delete _this.f;\n    delete _this.freq;\n    delete _this.oscillator;\n\n    if (type === 'brown') {\n      assignType = _brownNoiseBuffer;\n    } else if (type === 'pink') {\n      assignType = _pinkNoiseBuffer;\n    } else {\n      assignType = _whiteNoiseBuffer;\n    }\n\n    _this.buffer = assignType;\n    return _this;\n  }\n  /**\n   *  Set type of noise to 'white', 'pink' or 'brown'.\n   *  White is the default.\n   *\n   *  @method setType\n   *  @param {String} [type] 'white', 'pink' or 'brown'\n   */\n\n\n  noise_createClass(Noise, [{\n    key: \"setType\",\n    value: function setType(type) {\n      switch (type) {\n        case 'white':\n          this.buffer = _whiteNoiseBuffer;\n          break;\n\n        case 'pink':\n          this.buffer = _pinkNoiseBuffer;\n          break;\n\n        case 'brown':\n          this.buffer = _brownNoiseBuffer;\n          break;\n\n        default:\n          this.buffer = _whiteNoiseBuffer;\n      }\n\n      if (this.started) {\n        var now = main.audiocontext.currentTime;\n        this.stop(now);\n        this.start(now + 0.01);\n      }\n    }\n  }, {\n    key: \"getType\",\n    value: function getType() {\n      return this.buffer.type;\n    }\n  }, {\n    key: \"start\",\n    value: function start() {\n      if (this.started) {\n        this.stop();\n      }\n\n      this.noise = main.audiocontext.createBufferSource();\n      this.noise.buffer = this.buffer;\n      this.noise.loop = true;\n      this.noise.connect(this.output);\n      var now = main.audiocontext.currentTime;\n      this.noise.start(now);\n      this.started = true;\n    }\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      var now = main.audiocontext.currentTime;\n\n      if (this.noise) {\n        this.noise.stop(now);\n        this.started = false;\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var now = main.audiocontext.currentTime; \n\n      var index = main.soundArray.indexOf(this);\n      main.soundArray.splice(index, 1);\n\n      if (this.noise) {\n        this.noise.disconnect();\n        this.stop(now);\n      }\n\n      if (this.output) {\n        this.output.disconnect();\n      }\n\n      if (this.panner) {\n        this.panner.disconnect();\n      }\n\n      this.output = null;\n      this.panner = null;\n      this.buffer = null;\n      this.noise = null;\n    }\n  }]);\n\n  return Noise;\n}(oscillator);\n\n var noise = (noise_Noise);\nvar Signal = __webpack_require__(2);\nvar Signal_default = __webpack_require__.n(Signal);\n\nfunction pulse_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { pulse_typeof = function _typeof(obj) { return typeof obj; }; } else { pulse_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return pulse_typeof(obj); }\n\nfunction pulse_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction pulse_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction pulse_createClass(Constructor, protoProps, staticProps) { if (protoProps) pulse_defineProperties(Constructor.prototype, protoProps); if (staticProps) pulse_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction pulse_possibleConstructorReturn(self, call) { if (call && (pulse_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return pulse_assertThisInitialized(self); }\n\nfunction pulse_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction pulse_getPrototypeOf(o) { pulse_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return pulse_getPrototypeOf(o); }\n\nfunction pulse_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) pulse_setPrototypeOf(subClass, superClass); }\n\nfunction pulse_setPrototypeOf(o, p) { pulse_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return pulse_setPrototypeOf(o, p); }\n\n\n\n\n\n/**\n *  Creates a Pulse object, an oscillator that implements\n *  Pulse Width Modulation.\n *  The pulse is created with two oscillators.\n *  Accepts a parameter for frequency, and to set the\n *  width between the pulses. See <a href=\"\n *  http://p5js.org/reference/#/p5.Oscillator\">\n *  <code>p5.Oscillator</code> for a full list of methods.\n *\n *  @class p5.Pulse\n *  @extends p5.Oscillator\n *  @constructor\n *  @param {Number} [freq] Frequency in oscillations per second (Hz)\n *  @param {Number} [w]    Width between the pulses (0 to 1.0,\n *                         defaults to 0)\n *  @example\n *  <div><code>\n *  let pulse;\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(startPulse);\n *    background(220);\n *\n *    pulse = new p5.Pulse();\n *    pulse.amp(0.5);\n *    pulse.freq(220);\n *  }\n *  function startPulse() {\n *    pulse.start();\n *    pulse.amp(0.5, 0.02);\n *  }\n *  function mouseReleased() {\n *    pulse.amp(0, 0.2);\n *  }\n *  function draw() {\n *    background(220);\n *    text('tap to play', 5, 20, width - 20);\n *    let w = map(mouseX, 0, width, 0, 1);\n *    w = constrain(w, 0, 1);\n *    pulse.width(w);\n *    text('pulse width: ' + w, 5, height - 20);\n *  }\n *  </code></div>\n */\n\nvar pulse_Pulse =\nfunction (_Oscillator) {\n  pulse_inherits(Pulse, _Oscillator);\n\n  function Pulse(freq, w) {\n    var _this;\n\n    pulse_classCallCheck(this, Pulse);\n\n    _this = pulse_possibleConstructorReturn(this, pulse_getPrototypeOf(Pulse).call(this, freq, 'sawtooth')); \n\n    _this.w = w || 0; \n\n    _this.osc2 = new SawOsc(freq); \n\n    _this.dNode = main.audiocontext.createDelay(); \n\n    _this.dcOffset = createDCOffset();\n    _this.dcGain = main.audiocontext.createGain();\n\n    _this.dcOffset.connect(_this.dcGain);\n\n    _this.dcGain.connect(_this.output); \n\n\n    _this.f = freq || 440;\n    var mW = _this.w / _this.oscillator.frequency.value;\n    _this.dNode.delayTime.value = mW;\n    _this.dcGain.gain.value = 1.7 * (0.5 - _this.w); \n\n    _this.osc2.disconnect();\n\n    _this.osc2.panner.disconnect();\n\n    _this.osc2.amp(-1); \n\n\n    _this.osc2.output.connect(_this.dNode);\n\n    _this.dNode.connect(_this.output);\n\n    _this.output.gain.value = 1;\n\n    _this.output.connect(_this.panner);\n\n    return _this;\n  }\n  /**\n   *  Set the width of a Pulse object (an oscillator that implements\n   *  Pulse Width Modulation).\n   *\n   *  @method  width\n   *  @param {Number} [width]    Width between the pulses (0 to 1.0,\n   *                         defaults to 0)\n   */\n\n\n  pulse_createClass(Pulse, [{\n    key: \"width\",\n    value: function width(w) {\n      if (typeof w === 'number') {\n        if (w <= 1.0 && w >= 0.0) {\n          this.w = w; \n\n          var mW = this.w / this.oscillator.frequency.value;\n          this.dNode.delayTime.value = mW;\n        }\n\n        this.dcGain.gain.value = 1.7 * (0.5 - this.w);\n      } else {\n        w.connect(this.dNode.delayTime);\n        var sig = new Signal_default.a(-0.5); \n\n        w.connect(sig);\n        var mult1 = new Multiply_default.a(-1);\n        var mult2 = new Multiply_default.a(1.7);\n        sig = sig.connect(mult1).connect(mult2);\n        sig.connect(this.dcGain.gain);\n      }\n    }\n  }, {\n    key: \"start\",\n    value: function start(f, time) {\n      var now = main.audiocontext.currentTime;\n      var t = time || 0;\n\n      if (!this.started) {\n        var freq = f || this.f;\n        var type = this.oscillator.type;\n        this.oscillator = main.audiocontext.createOscillator();\n        this.oscillator.frequency.setValueAtTime(freq, now);\n        this.oscillator.type = type;\n        this.oscillator.connect(this.output);\n        this.oscillator.start(t + now); \n\n        this.osc2.oscillator = main.audiocontext.createOscillator();\n        this.osc2.oscillator.frequency.setValueAtTime(freq, t + now);\n        this.osc2.oscillator.type = type;\n        this.osc2.oscillator.connect(this.osc2.output);\n        this.osc2.start(t + now);\n        this.freqNode = [this.oscillator.frequency, this.osc2.oscillator.frequency]; \n\n        this.dcOffset = createDCOffset();\n        this.dcOffset.connect(this.dcGain);\n        this.dcOffset.start(t + now); \n\n        if (this.mods !== undefined && this.mods.frequency !== undefined) {\n          this.mods.frequency.connect(this.freqNode[0]);\n          this.mods.frequency.connect(this.freqNode[1]);\n        }\n\n        this.started = true;\n        this.osc2.started = true;\n      }\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(time) {\n      if (this.started) {\n        var t = time || 0;\n        var now = main.audiocontext.currentTime;\n        this.oscillator.stop(t + now);\n\n        if (this.osc2.oscillator) {\n          this.osc2.oscillator.stop(t + now);\n        }\n\n        this.dcOffset.stop(t + now);\n        this.started = false;\n        this.osc2.started = false;\n      }\n    }\n  }, {\n    key: \"freq\",\n    value: function freq(val) {\n      var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n      if (typeof val === 'number') {\n        this.f = val;\n        var now = main.audiocontext.currentTime;\n        var currentFreq = this.oscillator.frequency.value;\n        this.oscillator.frequency.cancelScheduledValues(now);\n        this.oscillator.frequency.setValueAtTime(currentFreq, now + tFromNow);\n        this.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n        this.osc2.oscillator.frequency.cancelScheduledValues(now);\n        this.osc2.oscillator.frequency.setValueAtTime(currentFreq, now + tFromNow);\n        this.osc2.oscillator.frequency.exponentialRampToValueAtTime(val, tFromNow + rampTime + now);\n\n        if (this.freqMod) {\n          this.freqMod.output.disconnect();\n          this.freqMod = null;\n        }\n      } else if (val.output) {\n        val.output.disconnect();\n        val.output.connect(this.oscillator.frequency);\n        val.output.connect(this.osc2.oscillator.frequency);\n        this.freqMod = val;\n      }\n    }\n  }]);\n\n  return Pulse;\n}(oscillator); \n\n\nfunction createDCOffset() {\n  var ac = main.audiocontext;\n  var buffer = ac.createBuffer(1, 2048, ac.sampleRate);\n  var data = buffer.getChannelData(0);\n\n  for (var i = 0; i < 2048; i++) {\n    data[i] = 1.0;\n  }\n\n  var bufferSource = ac.createBufferSource();\n  bufferSource.buffer = buffer;\n  bufferSource.loop = true;\n  return bufferSource;\n}\n\n var pulse = (pulse_Pulse);\nfunction audioin_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction audioin_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction audioin_createClass(Constructor, protoProps, staticProps) { if (protoProps) audioin_defineProperties(Constructor.prototype, protoProps); if (staticProps) audioin_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\nmain.inputSources = [];\n/**\n *  <p>Get audio from an input, i.e. your computer's microphone.</p>\n *\n *  <p>Turn the mic on/off with the start() and stop() methods. When the mic\n *  is on, its volume can be measured with getLevel or by connecting an\n *  FFT object.</p>\n *\n *  <p>If you want to hear the AudioIn, use the .connect() method.\n *  AudioIn does not connect to p5.sound output by default to prevent\n *  feedback.</p>\n *\n *  <p><em>Note: This uses the <a href=\"http://caniuse.com/stream\">getUserMedia/\n *  Stream</a> API, which is not supported by certain browsers. Access in Chrome browser\n *  is limited to localhost and https, but access over http may be limited.</em></p>\n *\n *  @class p5.AudioIn\n *  @constructor\n *  @param {Function} [errorCallback] A function to call if there is an error\n *                                    accessing the AudioIn. For example,\n *                                    Safari and iOS devices do not\n *                                    currently allow microphone access.\n *  @example\n *  <div><code>\n *  let mic;\n *\n *   function setup(){\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(userStartAudio);\n *    textAlign(CENTER);\n *    mic = new p5.AudioIn();\n *    mic.start();\n *  }\n *\n *  function draw(){\n *    background(0);\n *    fill(255);\n *    text('tap to start', width/2, 20);\n *\n *    micLevel = mic.getLevel();\n *    let y = height - micLevel * height;\n *    ellipse(width/2, y, 10, 10);\n *  }\n *  </code></div>\n */\n\nvar audioin_AudioIn =\nfunction () {\n  function AudioIn(errorCallback) {\n    audioin_classCallCheck(this, AudioIn);\n\n\n    /**\n     * @property {GainNode} input\n     */\n    this.input = main.audiocontext.createGain();\n    /**\n     * @property {GainNode} output\n     */\n\n    this.output = main.audiocontext.createGain();\n    /**\n     * @property {MediaStream|null} stream\n     */\n\n    this.stream = null;\n    /**\n     * @property {MediaStreamAudioSourceNode|null} mediaStream\n     */\n\n    this.mediaStream = null;\n    /**\n     * @property {Number|null} currentSource\n     */\n\n    this.currentSource = null;\n    /**\n     *  Client must allow browser to access their microphone / audioin source.\n     *  Default: false. Will become true when the client enables access.\n     *\n     *  @property {Boolean} enabled\n     */\n\n    this.enabled = false;\n    /**\n     * Input amplitude, connect to it by default but not to master out\n     *\n     *  @property {p5.Amplitude} amplitude\n     */\n\n    this.amplitude = new amplitude();\n    this.output.connect(this.amplitude.input);\n\n    if (!window.MediaStreamTrack || !window.navigator.mediaDevices || !window.navigator.mediaDevices.getUserMedia) {\n      errorCallback ? errorCallback() : window.alert('This browser does not support MediaStreamTrack and mediaDevices');\n    } \n\n\n    main.soundArray.push(this);\n  }\n  /**\n   *  Start processing audio input. This enables the use of other\n   *  AudioIn methods like getLevel(). Note that by default, AudioIn\n   *  is not connected to p5.sound's output. So you won't hear\n   *  anything unless you use the connect() method.<br/>\n   *\n   *  Certain browsers limit access to the user's microphone. For example,\n   *  Chrome only allows access from localhost and over https. For this reason,\n   *  you may want to include an errorCallback—a function that is called in case\n   *  the browser won't provide mic access.\n   *\n   *  @method start\n   *  @for p5.AudioIn\n   *  @param {Function} [successCallback] Name of a function to call on\n   *                                    success.\n   *  @param {Function} [errorCallback] Name of a function to call if\n   *                                    there was an error. For example,\n   *                                    some browsers do not support\n   *                                    getUserMedia.\n   */\n\n\n  audioin_createClass(AudioIn, [{\n    key: \"start\",\n    value: function start(successCallback, errorCallback) {\n      var self = this;\n\n      if (this.stream) {\n        this.stop();\n      } \n\n\n      var audioSource = main.inputSources[self.currentSource];\n      var constraints = {\n        audio: {\n          sampleRate: main.audiocontext.sampleRate,\n          echoCancellation: false\n        }\n      }; \n\n      if (main.inputSources[this.currentSource]) {\n        constraints.audio.deviceId = audioSource.deviceId;\n      }\n\n      window.navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {\n        self.stream = stream;\n        self.enabled = true; \n\n        self.mediaStream = main.audiocontext.createMediaStreamSource(stream);\n        self.mediaStream.connect(self.output); \n\n        self.amplitude.setInput(self.output);\n        if (successCallback) successCallback();\n      })[\"catch\"](function (err) {\n        if (errorCallback) errorCallback(err);else console.error(err);\n      });\n    }\n    /**\n     *  Turn the AudioIn off. If the AudioIn is stopped, it cannot getLevel().\n     *  If re-starting, the user may be prompted for permission access.\n     *\n     *  @method stop\n     *  @for p5.AudioIn\n     */\n\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      if (this.stream) {\n        this.stream.getTracks().forEach(function (track) {\n          track.stop();\n        });\n        this.mediaStream.disconnect();\n        delete this.mediaStream;\n        delete this.stream;\n      }\n    }\n    /**\n     *  Connect to an audio unit. If no parameter is provided, will\n     *  connect to the main output (i.e. your speakers).<br/>\n     *\n     *  @method  connect\n     *  @for p5.AudioIn\n     *  @param  {Object} [unit] An object that accepts audio input,\n     *                          such as an FFT\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect(unit) {\n      if (unit) {\n        if (unit.hasOwnProperty('input')) {\n          this.output.connect(unit.input);\n        } else if (unit.hasOwnProperty('analyser')) {\n          this.output.connect(unit.analyser);\n        } else {\n          this.output.connect(unit);\n        }\n      } else {\n        this.output.connect(main.input);\n      }\n    }\n    /**\n     *  Disconnect the AudioIn from all audio units. For example, if\n     *  connect() had been called, disconnect() will stop sending\n     *  signal to your speakers.<br/>\n     *\n     *  @method  disconnect\n     *  @for p5.AudioIn\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.output) {\n        this.output.disconnect(); \n\n        this.output.connect(this.amplitude.input);\n      }\n    }\n    /**\n     *  Read the Amplitude (volume level) of an AudioIn. The AudioIn\n     *  class contains its own instance of the Amplitude class to help\n     *  make it easy to get a microphone's volume level. Accepts an\n     *  optional smoothing value (0.0 < 1.0). <em>NOTE: AudioIn must\n     *  .start() before using .getLevel().</em><br/>\n     *\n     *  @method  getLevel\n     *  @for p5.AudioIn\n     *  @param  {Number} [smoothing] Smoothing is 0.0 by default.\n     *                               Smooths values based on previous values.\n     *  @return {Number}           Volume level (between 0.0 and 1.0)\n     */\n\n  }, {\n    key: \"getLevel\",\n    value: function getLevel(smoothing) {\n      if (smoothing) {\n        this.amplitude.smoothing = smoothing;\n      }\n\n      return this.amplitude.getLevel();\n    }\n    /**\n     *  Set amplitude (volume) of a mic input between 0 and 1.0. <br/>\n     *\n     *  @method  amp\n     *  @for p5.AudioIn\n     *  @param  {Number} vol between 0 and 1.0\n     *  @param {Number} [time] ramp time (optional)\n     */\n\n  }, {\n    key: \"amp\",\n    value: function amp(vol, t) {\n      if (t) {\n        var rampTime = t || 0;\n        var currentVol = this.output.gain.value;\n        this.output.gain.cancelScheduledValues(main.audiocontext.currentTime);\n        this.output.gain.setValueAtTime(currentVol, main.audiocontext.currentTime);\n        this.output.gain.linearRampToValueAtTime(vol, rampTime + main.audiocontext.currentTime);\n      } else {\n        this.output.gain.cancelScheduledValues(main.audiocontext.currentTime);\n        this.output.gain.setValueAtTime(vol, main.audiocontext.currentTime);\n      }\n    }\n    /**\n     * Returns a list of available input sources. This is a wrapper\n     * for <a href=\"https://developer.mozilla.org/\n     * en-US/docs/Web/API/MediaDevices/enumerateDevices\" target=\"_blank\">\n     * MediaDevices.enumerateDevices() - Web APIs | MDN</a>\n     * and it returns a Promise.\n     * @method  getSources\n     * @for p5.AudioIn\n     * @param  {Function} [successCallback] This callback function handles the sources when they\n     *                                      have been enumerated. The callback function\n     *                                      receives the deviceList array as its only argument\n     * @param  {Function} [errorCallback] This optional callback receives the error\n     *                                    message as its argument.\n     * @returns {Promise} Returns a Promise that can be used in place of the callbacks, similar\n     *                            to the enumerateDevices() method\n     * @example\n     *  <div><code>\n     *  let audioIn;\n     *\n     *  function setup(){\n     *    text('getting sources...', 0, 20);\n     *    audioIn = new p5.AudioIn();\n     *    audioIn.getSources(gotSources);\n     *  }\n     *\n     *  function gotSources(deviceList) {\n     *    if (deviceList.length > 0) {\n     *      //set the source to the first item in the deviceList array\n     *      audioIn.setSource(0);\n     *      let currentSource = deviceList[audioIn.currentSource];\n     *      text('set source to: ' + currentSource.deviceId, 5, 20, width);\n     *    }\n     *  }\n     *  </code></div>\n     */\n\n  }, {\n    key: \"getSources\",\n    value: function getSources(onSuccess, onError) {\n      return new Promise(function (resolve, reject) {\n        window.navigator.mediaDevices.enumerateDevices().then(function (devices) {\n          main.inputSources = devices.filter(function (device) {\n            return device.kind === 'audioinput';\n          });\n          resolve(main.inputSources);\n\n          if (onSuccess) {\n            onSuccess(main.inputSources);\n          }\n        })[\"catch\"](function (error) {\n          reject(error);\n\n          if (onError) {\n            onError(error);\n          } else {\n            console.error('This browser does not support MediaStreamTrack.getSources()');\n          }\n        });\n      });\n    }\n    /**\n     *  Set the input source. Accepts a number representing a\n     *  position in the array returned by getSources().\n     *  This is only available in browsers that support\n     * <a href=\"https://developer.mozilla.org/\n     * en-US/docs/Web/API/MediaDevices/enumerateDevices\" target=\"_blank\">\n     * navigator.mediaDevices.enumerateDevices()</a>\n     *\n     *  @method setSource\n     *  @for p5.AudioIn\n     *  @param {number} num position of input source in the array\n     *  @example\n     *  <div><code>\n     *  let audioIn;\n     *\n     *  function setup(){\n     *    text('getting sources...', 0, 20);\n     *    audioIn = new p5.AudioIn();\n     *    audioIn.getSources(gotSources);\n     *  }\n     *\n     *  function gotSources(deviceList) {\n     *    if (deviceList.length > 0) {\n     *      //set the source to the first item in the deviceList array\n     *      audioIn.setSource(0);\n     *      let currentSource = deviceList[audioIn.currentSource];\n     *      text('set source to: ' + currentSource.deviceId, 5, 20, width);\n     *    }\n     *  }\n     *  </code></div>\n     */\n\n  }, {\n    key: \"setSource\",\n    value: function setSource(num) {\n      if (main.inputSources.length > 0 && num < main.inputSources.length) {\n        this.currentSource = num;\n        console.log('set source to ', main.inputSources[this.currentSource]);\n      } else {\n        console.log('unable to set input source');\n      } \n\n\n      if (this.stream && this.stream.active) {\n        this.start();\n      }\n    } \n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var index = main.soundArray.indexOf(this);\n      main.soundArray.splice(index, 1);\n      this.stop();\n\n      if (this.output) {\n        this.output.disconnect();\n      }\n\n      if (this.amplitude) {\n        this.amplitude.disconnect();\n      }\n\n      delete this.amplitude;\n      delete this.output;\n    }\n  }]);\n\n  return AudioIn;\n}();\n\n var audioin = (audioin_AudioIn);\nvar CrossFade = __webpack_require__(23);\nvar CrossFade_default = __webpack_require__.n(CrossFade);\n\nfunction effect_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction effect_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction effect_createClass(Constructor, protoProps, staticProps) { if (protoProps) effect_defineProperties(Constructor.prototype, protoProps); if (staticProps) effect_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n/**\n * Effect is a base class for audio effects in p5. <br>\n * This module handles the nodes and methods that are\n * common and useful for current and future effects.\n *\n *\n * This class is extended by <a href=\"/reference/#/p5.Distortion\">p5.Distortion</a>,\n * <a href=\"/reference/#/p5.Compressor\">p5.Compressor</a>,\n * <a href=\"/reference/#/p5.Delay\">p5.Delay</a>,\n * <a href=\"/reference/#/p5.Filter\">p5.Filter</a>,\n * <a href=\"/reference/#/p5.Reverb\">p5.Reverb</a>.\n *\n * @class  p5.Effect\n * @constructor\n *\n * @param {Object} [ac]   Reference to the audio context of the p5 object\n * @param {AudioNode} [input]  Gain Node effect wrapper\n * @param {AudioNode} [output] Gain Node effect wrapper\n * @param {Object} [_drywet]   Tone.JS CrossFade node (defaults to value: 1)\n * @param {AudioNode} [wet]  Effects that extend this class should connect\n *                              to the wet signal to this gain node, so that dry and wet\n *                              signals are mixed properly.\n */\n\nvar effect_Effect =\nfunction () {\n  function Effect() {\n    effect_classCallCheck(this, Effect);\n\n    this.ac = main.audiocontext;\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain();\n    /**\n     *\tThe p5.Effect class is built\n     * \tusing Tone.js CrossFade\n     * \t@private\n     */\n\n    this._drywet = new CrossFade_default.a(1);\n    /**\n     *\tIn classes that extend\n     *\tp5.Effect, connect effect nodes\n     *\tto the wet parameter\n     */\n\n    this.wet = this.ac.createGain();\n    this.input.connect(this._drywet.a);\n    this.wet.connect(this._drywet.b);\n\n    this._drywet.connect(this.output);\n\n    this.connect(); \n\n    main.soundArray.push(this);\n  }\n  /**\n   *  Set the output volume of the filter.\n   *\n   *  @method  amp\n   *  @for p5.Effect\n   *  @param {Number} [vol] amplitude between 0 and 1.0\n   *  @param {Number} [rampTime] create a fade that lasts until rampTime\n   *  @param {Number} [tFromNow] schedule this event to happen in tFromNow seconds\n   */\n\n\n  effect_createClass(Effect, [{\n    key: \"amp\",\n    value: function amp(vol) {\n      var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var now = main.audiocontext.currentTime;\n      var startTime = now + tFromNow;\n      var endTime = startTime + rampTime + 0.001;\n      var currentVol = this.output.gain.value;\n      this.output.gain.cancelScheduledValues(now);\n      this.output.gain.linearRampToValueAtTime(currentVol, startTime + 0.001);\n      this.output.gain.linearRampToValueAtTime(vol, endTime);\n    }\n    /**\n     *  Link effects together in a chain\n     *  Example usage: filter.chain(reverb, delay, panner);\n     *  May be used with an open-ended number of arguments\n     *\n     *  @method chain\n     *  @for p5.Effect\n     *  @param {Object} [arguments]  Chain together multiple sound objects\n     */\n\n  }, {\n    key: \"chain\",\n    value: function chain() {\n      if (arguments.length > 0) {\n        this.connect(arguments[0]);\n\n        for (var i = 1; i < arguments.length; i += 1) {\n          arguments[i - 1].connect(arguments[i]);\n        }\n      }\n\n      return this;\n    }\n    /**\n     *  Adjust the dry/wet value.\n     *\n     *  @method drywet\n     *  @for p5.Effect\n     *  @param {Number} [fade] The desired drywet value (0 - 1.0)\n     */\n\n  }, {\n    key: \"drywet\",\n    value: function drywet(fade) {\n      if (typeof fade !== 'undefined') {\n        this._drywet.fade.value = fade;\n      }\n\n      return this._drywet.fade.value;\n    }\n    /**\n     *  Send output to a p5.js-sound, Web Audio Node, or use signal to\n     *  control an AudioParam\n     *\n     *  @method connect\n     *  @for p5.Effect\n     *  @param {Object} unit\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect(unit) {\n      var u = unit || p5.soundOut.input;\n      this.output.connect(u.input ? u.input : u);\n    }\n    /**\n     * Disconnect all output.\n     * @method disconnect\n     * @for p5.Effect\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.output) {\n        this.output.disconnect();\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var index = main.soundArray.indexOf(this);\n      main.soundArray.splice(index, 1);\n\n      if (this.input) {\n        this.input.disconnect();\n        delete this.input;\n      }\n\n      if (this.output) {\n        this.output.disconnect();\n        delete this.output;\n      }\n\n      if (this._drywet) {\n        this._drywet.disconnect();\n\n        delete this._drywet;\n      }\n\n      if (this.wet) {\n        this.wet.disconnect();\n        delete this.wet;\n      }\n\n      this.ac = undefined;\n    }\n  }]);\n\n  return Effect;\n}();\n\n var effect = (effect_Effect);\nfunction filter_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { filter_typeof = function _typeof(obj) { return typeof obj; }; } else { filter_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return filter_typeof(obj); }\n\nfunction filter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction filter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction filter_createClass(Constructor, protoProps, staticProps) { if (protoProps) filter_defineProperties(Constructor.prototype, protoProps); if (staticProps) filter_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction filter_possibleConstructorReturn(self, call) { if (call && (filter_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return filter_assertThisInitialized(self); }\n\nfunction filter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return _get(target, property, receiver || target); }\n\nfunction _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = filter_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction filter_getPrototypeOf(o) { filter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return filter_getPrototypeOf(o); }\n\nfunction filter_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) filter_setPrototypeOf(subClass, superClass); }\n\nfunction filter_setPrototypeOf(o, p) { filter_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return filter_setPrototypeOf(o, p); }\n\n\n/**\n *  <p>A p5.Filter uses a Web Audio Biquad Filter to filter\n *  the frequency response of an input source. Subclasses\n *  include:</p>\n *  <a href=\"/reference/#/p5.LowPass\"><code>p5.LowPass</code></a>:\n *  Allows frequencies below the cutoff frequency to pass through,\n *  and attenuates frequencies above the cutoff.<br/>\n *  <a href=\"/reference/#/p5.HighPass\"><code>p5.HighPass</code></a>:\n *  The opposite of a lowpass filter. <br/>\n *  <a href=\"/reference/#/p5.BandPass\"><code>p5.BandPass</code></a>:\n *  Allows a range of frequencies to pass through and attenuates\n *  the frequencies below and above this frequency range.<br/>\n *\n *  The <code>.res()</code> method controls either width of the\n *  bandpass, or resonance of the low/highpass cutoff frequency.\n *\n *  This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n *  Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n *  <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n *  <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n *\n *  @class p5.Filter\n *  @extends p5.Effect\n *  @constructor\n *  @param {String} [type] 'lowpass' (default), 'highpass', 'bandpass'\n *  @example\n *  <div><code>\n *  let fft, noise, filter;\n *\n *  function setup() {\n *    let cnv = createCanvas(100,100);\n *    cnv.mousePressed(makeNoise);\n *    fill(255, 0, 255);\n *\n *    filter = new p5.BandPass();\n *    noise = new p5.Noise();\n *    noise.disconnect();\n *    noise.connect(filter);\n *\n *    fft = new p5.FFT();\n *  }\n *\n *  function draw() {\n *    background(220);\n *\n *    // set the BandPass frequency based on mouseX\n *    let freq = map(mouseX, 0, width, 20, 10000);\n *    freq = constrain(freq, 0, 22050);\n *    filter.freq(freq);\n *    // give the filter a narrow band (lower res = wider bandpass)\n *    filter.res(50);\n *\n *    // draw filtered spectrum\n *    let spectrum = fft.analyze();\n *    noStroke();\n *    for (let i = 0; i < spectrum.length; i++) {\n *      let x = map(i, 0, spectrum.length, 0, width);\n *      let h = -height + map(spectrum[i], 0, 255, height, 0);\n *      rect(x, height, width/spectrum.length, h);\n *    }\n *    if (!noise.started) {\n *      text('tap here and drag to change frequency', 10, 20, width - 20);\n *    } else {\n *      text('Frequency: ' + round(freq)+'Hz', 20, 20, width - 20);\n *    }\n *  }\n *\n *  function makeNoise() {\n *    // see also: `userStartAudio()`\n *    noise.start();\n *    noise.amp(0.5, 0.2);\n *  }\n *\n *  function mouseReleased() {\n *    noise.amp(0, 0.2);\n *  }\n *\n *  </code></div>\n */\n\nvar Filter =\nfunction (_Effect) {\n  filter_inherits(Filter, _Effect);\n\n  function Filter(type) {\n    var _this;\n\n    filter_classCallCheck(this, Filter);\n\n    _this = filter_possibleConstructorReturn(this, filter_getPrototypeOf(Filter).call(this)); \n\n    /**\n     *  The p5.Filter is built with a\n     *  <a href=\"http://www.w3.org/TR/webaudio/#BiquadFilterNode\">\n     *  Web Audio BiquadFilter Node</a>.\n     *\n     *  @property {DelayNode} biquadFilter\n     */\n\n    _this.biquad = _this.ac.createBiquadFilter();\n\n    _this.input.connect(_this.biquad);\n\n    _this.biquad.connect(_this.wet);\n\n    if (type) {\n      _this.setType(type);\n    } \n\n\n    _this._on = true;\n    _this._untoggledType = _this.biquad.type;\n    return _this;\n  }\n  /**\n   *  Filter an audio signal according to a set\n   *  of filter parameters.\n   *\n   *  @method  process\n   *  @param  {Object} Signal  An object that outputs audio\n   *  @param {Number} [freq] Frequency in Hz, from 10 to 22050\n   *  @param {Number} [res] Resonance/Width of the filter frequency\n   *                        from 0.001 to 1000\n   */\n\n\n  filter_createClass(Filter, [{\n    key: \"process\",\n    value: function process(src, freq, res, time) {\n      src.connect(this.input);\n      this.set(freq, res, time);\n    }\n    /**\n     *  Set the frequency and the resonance of the filter.\n     *\n     *  @method  set\n     *  @param {Number} [freq] Frequency in Hz, from 10 to 22050\n     *  @param {Number} [res]  Resonance (Q) from 0.001 to 1000\n     *  @param {Number} [timeFromNow] schedule this event to happen\n     *                                seconds from now\n     */\n\n  }, {\n    key: \"set\",\n    value: function set(freq, res, time) {\n      if (freq) {\n        this.freq(freq, time);\n      }\n\n      if (res) {\n        this.res(res, time);\n      }\n    }\n    /**\n     *  Set the filter frequency, in Hz, from 10 to 22050 (the range of\n     *  human hearing, although in reality most people hear in a narrower\n     *  range).\n     *\n     *  @method  freq\n     *  @param  {Number} freq Filter Frequency\n     *  @param {Number} [timeFromNow] schedule this event to happen\n     *                                seconds from now\n     *  @return {Number} value  Returns the current frequency value\n     */\n\n  }, {\n    key: \"freq\",\n    value: function freq(_freq, time) {\n      var t = time || 0;\n\n      if (_freq <= 0) {\n        _freq = 1;\n      }\n\n      if (typeof _freq === 'number') {\n        this.biquad.frequency.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.biquad.frequency.exponentialRampToValueAtTime(_freq, this.ac.currentTime + 0.02 + t);\n      } else if (_freq) {\n        _freq.connect(this.biquad.frequency);\n      }\n\n      return this.biquad.frequency.value;\n    }\n    /**\n     *  Controls either width of a bandpass frequency,\n     *  or the resonance of a low/highpass cutoff frequency.\n     *\n     *  @method  res\n     *  @param {Number} res  Resonance/Width of filter freq\n     *                       from 0.001 to 1000\n     *  @param {Number} [timeFromNow] schedule this event to happen\n     *                                seconds from now\n     *  @return {Number} value Returns the current res value\n     */\n\n  }, {\n    key: \"res\",\n    value: function res(_res, time) {\n      var t = time || 0;\n\n      if (typeof _res === 'number') {\n        this.biquad.Q.value = _res;\n        this.biquad.Q.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.biquad.Q.linearRampToValueAtTime(_res, this.ac.currentTime + 0.02 + t);\n      } else if (_res) {\n        _res.connect(this.biquad.Q);\n      }\n\n      return this.biquad.Q.value;\n    }\n    /**\n     * Controls the gain attribute of a Biquad Filter.\n     * This is distinctly different from .amp() which is inherited from p5.Effect\n     * .amp() controls the volume via the output gain node\n     * p5.Filter.gain() controls the gain parameter of a Biquad Filter node.\n     *\n     * @method gain\n     * @param  {Number} gain\n     * @return {Number} Returns the current or updated gain value\n     */\n\n  }, {\n    key: \"gain\",\n    value: function gain(_gain, time) {\n      var t = time || 0;\n\n      if (typeof _gain === 'number') {\n        this.biquad.gain.value = _gain;\n        this.biquad.gain.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.biquad.gain.linearRampToValueAtTime(_gain, this.ac.currentTime + 0.02 + t);\n      } else if (_gain) {\n        _gain.connect(this.biquad.gain);\n      }\n\n      return this.biquad.gain.value;\n    }\n    /**\n     * Toggle function. Switches between the specified type and allpass\n     *\n     * @method toggle\n     * @return {boolean} [Toggle value]\n     */\n\n  }, {\n    key: \"toggle\",\n    value: function toggle() {\n      this._on = !this._on;\n\n      if (this._on === true) {\n        this.biquad.type = this._untoggledType;\n      } else if (this._on === false) {\n        this.biquad.type = 'allpass';\n      }\n\n      return this._on;\n    }\n    /**\n     *  Set the type of a p5.Filter. Possible types include:\n     *  \"lowpass\" (default), \"highpass\", \"bandpass\",\n     *  \"lowshelf\", \"highshelf\", \"peaking\", \"notch\",\n     *  \"allpass\".\n     *\n     *  @method  setType\n     *  @param {String} t\n     */\n\n  }, {\n    key: \"setType\",\n    value: function setType(t) {\n      this.biquad.type = t;\n      this._untoggledType = this.biquad.type;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      _get(filter_getPrototypeOf(Filter.prototype), \"dispose\", this).call(this);\n\n      if (this.biquad) {\n        this.biquad.disconnect();\n        delete this.biquad;\n      }\n    }\n  }]);\n\n  return Filter;\n}(effect);\n/**\n *  Constructor: <code>new p5.LowPass()</code> Filter.\n *  This is the same as creating a p5.Filter and then calling\n *  its method <code>setType('lowpass')</code>.\n *  See p5.Filter for methods.\n *\n *  @class p5.LowPass\n *  @constructor\n *  @extends p5.Filter\n */\n\n\nvar LowPass =\nfunction (_Filter) {\n  filter_inherits(LowPass, _Filter);\n\n  function LowPass() {\n    filter_classCallCheck(this, LowPass);\n\n    return filter_possibleConstructorReturn(this, filter_getPrototypeOf(LowPass).call(this, 'lowpass'));\n  }\n\n  return LowPass;\n}(Filter);\n/**\n *  Constructor: <code>new p5.HighPass()</code> Filter.\n *  This is the same as creating a p5.Filter and then calling\n *  its method <code>setType('highpass')</code>.\n *  See p5.Filter for methods.\n *\n *  @class p5.HighPass\n *  @constructor\n *  @extends p5.Filter\n */\n\n\nvar HighPass =\nfunction (_Filter2) {\n  filter_inherits(HighPass, _Filter2);\n\n  function HighPass() {\n    filter_classCallCheck(this, HighPass);\n\n    return filter_possibleConstructorReturn(this, filter_getPrototypeOf(HighPass).call(this, 'highpass'));\n  }\n\n  return HighPass;\n}(Filter);\n/**\n *  Constructor: <code>new p5.BandPass()</code> Filter.\n *  This is the same as creating a p5.Filter and then calling\n *  its method <code>setType('bandpass')</code>.\n *  See p5.Filter for methods.\n *\n *  @class p5.BandPass\n *  @constructor\n *  @extends p5.Filter\n */\n\n\nvar BandPass =\nfunction (_Filter3) {\n  filter_inherits(BandPass, _Filter3);\n\n  function BandPass() {\n    filter_classCallCheck(this, BandPass);\n\n    return filter_possibleConstructorReturn(this, filter_getPrototypeOf(BandPass).call(this, 'bandpass'));\n  }\n\n  return BandPass;\n}(Filter);\n\n var filter = (Filter);\n\nfunction eqFilter_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { eqFilter_typeof = function _typeof(obj) { return typeof obj; }; } else { eqFilter_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return eqFilter_typeof(obj); }\n\nfunction eqFilter_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction eqFilter_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction eqFilter_createClass(Constructor, protoProps, staticProps) { if (protoProps) eqFilter_defineProperties(Constructor.prototype, protoProps); if (staticProps) eqFilter_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction eqFilter_possibleConstructorReturn(self, call) { if (call && (eqFilter_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return eqFilter_assertThisInitialized(self); }\n\nfunction eqFilter_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction eqFilter_getPrototypeOf(o) { eqFilter_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return eqFilter_getPrototypeOf(o); }\n\nfunction eqFilter_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) eqFilter_setPrototypeOf(subClass, superClass); }\n\nfunction eqFilter_setPrototypeOf(o, p) { eqFilter_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return eqFilter_setPrototypeOf(o, p); }\n\n\n\n/**\n *  EQFilter extends p5.Filter with constraints\n *  necessary for the p5.EQ\n *\n *  @private\n */\n\nvar eqFilter_EQFilter =\nfunction (_Filter) {\n  eqFilter_inherits(EQFilter, _Filter);\n\n  function EQFilter(freq, res) {\n    var _this;\n\n    eqFilter_classCallCheck(this, EQFilter);\n\n    _this = eqFilter_possibleConstructorReturn(this, eqFilter_getPrototypeOf(EQFilter).call(this, 'peaking'));\n\n    _this.disconnect();\n\n    _this.set(freq, res);\n\n    _this.biquad.gain.value = 0;\n    delete _this.input;\n    delete _this.output;\n    delete _this._drywet;\n    delete _this.wet;\n    return _this;\n  }\n\n  eqFilter_createClass(EQFilter, [{\n    key: \"amp\",\n    value: function amp() {\n      console.warn('`amp()` is not available for p5.EQ bands. Use `.gain()`');\n    }\n  }, {\n    key: \"drywet\",\n    value: function drywet() {\n      console.warn('`drywet()` is not available for p5.EQ bands.');\n    }\n  }, {\n    key: \"connect\",\n    value: function connect(unit) {\n      var u = unit || p5.soundOut.input;\n\n      if (this.biquad) {\n        this.biquad.connect(u.input ? u.input : u);\n      } else {\n        this.output.connect(u.input ? u.input : u);\n      }\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.biquad) {\n        this.biquad.disconnect();\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var index = main.soundArray.indexOf(this);\n      main.soundArray.splice(index, 1);\n      this.disconnect();\n      delete this.biquad;\n    }\n  }]);\n\n  return EQFilter;\n}(filter);\n\n var eqFilter = (eqFilter_EQFilter);\nfunction eq_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { eq_typeof = function _typeof(obj) { return typeof obj; }; } else { eq_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return eq_typeof(obj); }\n\nfunction eq_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction eq_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction eq_createClass(Constructor, protoProps, staticProps) { if (protoProps) eq_defineProperties(Constructor.prototype, protoProps); if (staticProps) eq_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction eq_possibleConstructorReturn(self, call) { if (call && (eq_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return eq_assertThisInitialized(self); }\n\nfunction eq_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction eq_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { eq_get = Reflect.get; } else { eq_get = function _get(target, property, receiver) { var base = eq_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return eq_get(target, property, receiver || target); }\n\nfunction eq_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = eq_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction eq_getPrototypeOf(o) { eq_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return eq_getPrototypeOf(o); }\n\nfunction eq_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) eq_setPrototypeOf(subClass, superClass); }\n\nfunction eq_setPrototypeOf(o, p) { eq_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return eq_setPrototypeOf(o, p); }\n\n\n\n/**\n * p5.EQ is an audio effect that performs the function of a multiband\n * audio equalizer. Equalization is used to adjust the balance of\n * frequency compoenents of an audio signal. This process is commonly used\n * in sound production and recording to change the waveform before it reaches\n * a sound output device. EQ can also be used as an audio effect to create\n * interesting distortions by filtering out parts of the spectrum. p5.EQ is\n * built using a chain of Web Audio Biquad Filter Nodes and can be\n * instantiated with 3 or 8 bands. Bands can be added or removed from\n * the EQ by directly modifying p5.EQ.bands (the array that stores filters).\n *\n * This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n * Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n * <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n * <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n *\n * @class p5.EQ\n * @constructor\n * @extends p5.Effect\n * @param {Number} [_eqsize] Constructor will accept 3 or 8, defaults to 3\n * @return {Object} p5.EQ object\n *\n * @example\n * <div><code>\n * let eq, soundFile\n * let eqBandIndex = 0;\n * let eqBandNames = ['lows', 'mids', 'highs'];\n *\n * function preload() {\n *   soundFormats('mp3', 'ogg');\n *   soundFile = loadSound('assets/beat');\n * }\n *\n * function setup() {\n *   let cnv = createCanvas(100, 100);\n *   cnv.mousePressed(toggleSound);\n *\n *   eq = new p5.EQ(eqBandNames.length);\n *   soundFile.disconnect();\n *   eq.process(soundFile);\n * }\n *\n * function draw() {\n *   background(30);\n *   noStroke();\n *   fill(255);\n *   textAlign(CENTER);\n *   text('filtering ', 50, 25);\n *\n *   fill(255, 40, 255);\n *   textSize(26);\n *   text(eqBandNames[eqBandIndex], 50, 55);\n *\n *   fill(255);\n *   textSize(9);\n *\n *   if (!soundFile.isPlaying()) {\n *     text('tap to play', 50, 80);\n *   } else {\n *     text('tap to filter next band', 50, 80)\n *   }\n * }\n *\n * function toggleSound() {\n *   if (!soundFile.isPlaying()) {\n *     soundFile.play();\n *   } else {\n *     eqBandIndex = (eqBandIndex + 1) % eq.bands.length;\n *   }\n *\n *   for (let i = 0; i < eq.bands.length; i++) {\n *     eq.bands[i].gain(0);\n *   }\n *   // filter the band we want to filter\n *   eq.bands[eqBandIndex].gain(-40);\n * }\n * </code></div>\n */\n\nvar eq_EQ =\nfunction (_Effect) {\n  eq_inherits(EQ, _Effect);\n\n  function EQ(_eqsize) {\n    var _this;\n\n    eq_classCallCheck(this, EQ);\n\n    _this = eq_possibleConstructorReturn(this, eq_getPrototypeOf(EQ).call(this)); \n\n    _eqsize = _eqsize === 3 || _eqsize === 8 ? _eqsize : 3;\n    var factor;\n    _eqsize === 3 ? factor = Math.pow(2, 3) : factor = 2;\n    /**\n     *  The p5.EQ is built with abstracted p5.Filter objects.\n     *  To modify any bands, use methods of the <a\n     *  href=\"/reference/#/p5.Filter\" title=\"p5.Filter reference\">\n     *  p5.Filter</a> API, especially `gain` and `freq`.\n     *  Bands are stored in an array, with indices 0 - 3, or 0 - 7\n     *  @property {Array}  bands\n     *\n     */\n\n    _this.bands = [];\n    var freq, res;\n\n    for (var i = 0; i < _eqsize; i++) {\n      if (i === _eqsize - 1) {\n        freq = 21000;\n        res = 0.01;\n      } else if (i === 0) {\n        freq = 100;\n        res = 0.1;\n      } else if (i === 1) {\n        freq = _eqsize === 3 ? 360 * factor : 360;\n        res = 1;\n      } else {\n        freq = _this.bands[i - 1].freq() * factor;\n        res = 1;\n      }\n\n      _this.bands[i] = _this._newBand(freq, res);\n\n      if (i > 0) {\n        _this.bands[i - 1].connect(_this.bands[i].biquad);\n      } else {\n        _this.input.connect(_this.bands[i].biquad);\n      }\n    }\n\n    _this.bands[_eqsize - 1].connect(_this.output);\n\n    return _this;\n  }\n  /**\n   * Process an input by connecting it to the EQ\n   * @method  process\n   * @param  {Object} src Audio source\n   */\n\n\n  eq_createClass(EQ, [{\n    key: \"process\",\n    value: function process(src) {\n      src.connect(this.input);\n    } \n    //   * Set the frequency and gain of each band in the EQ. This method should be\n    //   * called with 3 or 8 frequency and gain pairs, depending on the size of the EQ.\n    //   * ex. eq.set(freq0, gain0, freq1, gain1, freq2, gain2);\n    //   *\n    //   * @method  set\n    //   * @for p5.EQ\n    //   * @param {Number} [freq0] Frequency value for band with index 0\n    //   * @param {Number} [gain0] Gain value for band with index 0\n    //   * @param {Number} [freq1] Frequency value for band with index 1\n    //   * @param {Number} [gain1] Gain value for band with index 1\n    //   * @param {Number} [freq2] Frequency value for band with index 2\n    //   * @param {Number} [gain2] Gain value for band with index 2\n    //   * @param {Number} [freq3] Frequency value for band with index 3\n    //   * @param {Number} [gain3] Gain value for band with index 3\n    //   * @param {Number} [freq4] Frequency value for band with index 4\n    //   * @param {Number} [gain4] Gain value for band with index 4\n    //   * @param {Number} [freq5] Frequency value for band with index 5\n    //   * @param {Number} [gain5] Gain value for band with index 5\n    //   * @param {Number} [freq6] Frequency value for band with index 6\n    //   * @param {Number} [gain6] Gain value for band with index 6\n    //   * @param {Number} [freq7] Frequency value for band with index 7\n    //   * @param {Number} [gain7] Gain value for band with index 7\n    //   */\n\n  }, {\n    key: \"set\",\n    value: function set() {\n      if (arguments.length === this.bands.length * 2) {\n        for (var i = 0; i < arguments.length; i += 2) {\n          this.bands[i / 2].freq(arguments[i]);\n          this.bands[i / 2].gain(arguments[i + 1]);\n        }\n      } else {\n        console.error('Argument mismatch. .set() should be called with ' + this.bands.length * 2 + ' arguments. (one frequency and gain value pair for each band of the eq)');\n      }\n    }\n    /**\n     * Add a new band. Creates a p5.Filter and strips away everything but\n     * the raw biquad filter. This method returns an abstracted p5.Filter,\n     * which can be added to p5.EQ.bands, in order to create new EQ bands.\n     * @private\n     * @for p5.EQ\n     * @method  _newBand\n     * @param  {Number} freq\n     * @param  {Number} res\n     * @return {Object}      Abstracted Filter\n     */\n\n  }, {\n    key: \"_newBand\",\n    value: function _newBand(freq, res) {\n      return new eqFilter(freq, res);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      eq_get(eq_getPrototypeOf(EQ.prototype), \"dispose\", this).call(this);\n\n      if (this.bands) {\n        while (this.bands.length > 0) {\n          delete this.bands.pop().dispose();\n        }\n\n        delete this.bands;\n      }\n    }\n  }]);\n\n  return EQ;\n}(effect);\n\n var eq = (eq_EQ);\nfunction listener3d_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction listener3d_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction listener3d_createClass(Constructor, protoProps, staticProps) { if (protoProps) listener3d_defineProperties(Constructor.prototype, protoProps); if (staticProps) listener3d_defineProperties(Constructor, staticProps); return Constructor; }\n\n//   * listener is a class that can construct both a Spatial Panner\n//   * and a Spatial Listener. The panner is based on the\n//   * Web Audio Spatial Panner Node\n//   * https://www.w3.org/TR/webaudio/#the-listenernode-interface\n//   * This panner is a spatial processing node that allows audio to be positioned\n//   * and oriented in 3D space.\n//   *\n//   * The Listener modifies the properties of the Audio Context Listener.\n//   * Both objects types use the same methods. The default is a spatial panner.\n//   *\n//   * <code>p5.Panner3D</code> - Constructs a Spatial Panner<br/>\n//   * <code>p5.Listener3D</code> - Constructs a Spatial Listener<br/>\n//   *\n//   * @class listener\n//   * @constructor\n//   * @return {Object} p5.Listener3D Object\n//   *\n//   * @param {Web Audio Node} listener Web Audio Spatial Panning Node\n//   * @param {AudioParam} listener.panningModel \"equal power\" or \"HRTF\"\n//   * @param {AudioParam} listener.distanceModel \"linear\", \"inverse\", or \"exponential\"\n//   * @param {String} [type] [Specify construction of a spatial panner or listener]\n//   */\n\nvar listener3d_Listener3D =\nfunction () {\n  function Listener3D(type) {\n    listener3d_classCallCheck(this, Listener3D);\n\n    this.ac = main.audiocontext;\n    this.listener = this.ac.listener;\n  } \n  //   * Connect an audio sorce\n  //   * @param  {Object} src Input source\n  //   */\n\n\n  listener3d_createClass(Listener3D, [{\n    key: \"process\",\n    value: function process(src) {\n      src.connect(this.input);\n    } \n    //   * Set the X,Y,Z position of the Panner\n    //   * @param  {[Number]} xVal\n    //   * @param  {[Number]} yVal\n    //   * @param  {[Number]} zVal\n    //   * @param  {[Number]} time\n    //   * @return {[Array]}      [Updated x, y, z values as an array]\n    //   */\n\n  }, {\n    key: \"position\",\n    value: function position(xVal, yVal, zVal, time) {\n      this.positionX(xVal, time);\n      this.positionY(yVal, time);\n      this.positionZ(zVal, time);\n      return [this.listener.positionX.value, this.listener.positionY.value, this.listener.positionZ.value];\n    } \n    //   * Getter and setter methods for position coordinates\n    //   * @return {Number}      [updated coordinate value]\n    //   */\n\n  }, {\n    key: \"positionX\",\n    value: function positionX(xVal, time) {\n      var t = time || 0;\n\n      if (typeof xVal === 'number') {\n        this.listener.positionX.value = xVal;\n        this.listener.positionX.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.listener.positionX.linearRampToValueAtTime(xVal, this.ac.currentTime + 0.02 + t);\n      } else if (xVal) {\n        xVal.connect(this.listener.positionX);\n      }\n\n      return this.listener.positionX.value;\n    }\n  }, {\n    key: \"positionY\",\n    value: function positionY(yVal, time) {\n      var t = time || 0;\n\n      if (typeof yVal === 'number') {\n        this.listener.positionY.value = yVal;\n        this.listener.positionY.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.listener.positionY.linearRampToValueAtTime(yVal, this.ac.currentTime + 0.02 + t);\n      } else if (yVal) {\n        yVal.connect(this.listener.positionY);\n      }\n\n      return this.listener.positionY.value;\n    }\n  }, {\n    key: \"positionZ\",\n    value: function positionZ(zVal, time) {\n      var t = time || 0;\n\n      if (typeof zVal === 'number') {\n        this.listener.positionZ.value = zVal;\n        this.listener.positionZ.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.listener.positionZ.linearRampToValueAtTime(zVal, this.ac.currentTime + 0.02 + t);\n      } else if (zVal) {\n        zVal.connect(this.listener.positionZ);\n      }\n\n      return this.listener.positionZ.value;\n    } \n    //   * Overrides the listener orient() method because Listener has slightly\n    //   * different params. In human terms, Forward vectors are the direction the\n    //   * nose is pointing. Up vectors are the direction of the top of the head.\n    //   *\n    //   * @method orient\n    //   * @param  {Number} xValF  Forward vector X direction\n    //   * @param  {Number} yValF  Forward vector Y direction\n    //   * @param  {Number} zValF  Forward vector Z direction\n    //   * @param  {Number} xValU  Up vector X direction\n    //   * @param  {Number} yValU  Up vector Y direction\n    //   * @param  {Number} zValU  Up vector Z direction\n    //   * @param  {Number} time\n    //   * @return {Array}       All orienation params\n    //   */\n\n  }, {\n    key: \"orient\",\n    value: function orient(xValF, yValF, zValF, xValU, yValU, zValU, time) {\n      if (arguments.length === 3 || arguments.length === 4) {\n        time = arguments[3];\n        this.orientForward(xValF, yValF, zValF, time);\n      } else if (arguments.length === 6 || arguments === 7) {\n        this.orientForward(xValF, yValF, zValF);\n        this.orientUp(xValU, yValU, zValU, time);\n      }\n\n      return [this.listener.forwardX.value, this.listener.forwardY.value, this.listener.forwardZ.value, this.listener.upX.value, this.listener.upY.value, this.listener.upZ.value];\n    }\n  }, {\n    key: \"orientForward\",\n    value: function orientForward(xValF, yValF, zValF, time) {\n      this.forwardX(xValF, time);\n      this.forwardY(yValF, time);\n      this.forwardZ(zValF, time);\n      return [this.listener.forwardX, this.listener.forwardY, this.listener.forwardZ];\n    }\n  }, {\n    key: \"orientUp\",\n    value: function orientUp(xValU, yValU, zValU, time) {\n      this.upX(xValU, time);\n      this.upY(yValU, time);\n      this.upZ(zValU, time);\n      return [this.listener.upX, this.listener.upY, this.listener.upZ];\n    } \n    //   * Getter and setter methods for orient coordinates\n    //   * @return {Number}      [updated coordinate value]\n    //   */\n\n  }, {\n    key: \"forwardX\",\n    value: function forwardX(xVal, time) {\n      var t = time || 0;\n\n      if (typeof xVal === 'number') {\n        this.listener.forwardX.value = xVal;\n        this.listener.forwardX.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.listener.forwardX.linearRampToValueAtTime(xVal, this.ac.currentTime + 0.02 + t);\n      } else if (xVal) {\n        xVal.connect(this.listener.forwardX);\n      }\n\n      return this.listener.forwardX.value;\n    }\n  }, {\n    key: \"forwardY\",\n    value: function forwardY(yVal, time) {\n      var t = time || 0;\n\n      if (typeof yVal === 'number') {\n        this.listener.forwardY.value = yVal;\n        this.listener.forwardY.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.listener.forwardY.linearRampToValueAtTime(yVal, this.ac.currentTime + 0.02 + t);\n      } else if (yVal) {\n        yVal.connect(this.listener.forwardY);\n      }\n\n      return this.listener.forwardY.value;\n    }\n  }, {\n    key: \"forwardZ\",\n    value: function forwardZ(zVal, time) {\n      var t = time || 0;\n\n      if (typeof zVal === 'number') {\n        this.listener.forwardZ.value = zVal;\n        this.listener.forwardZ.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.listener.forwardZ.linearRampToValueAtTime(zVal, this.ac.currentTime + 0.02 + t);\n      } else if (zVal) {\n        zVal.connect(this.listener.forwardZ);\n      }\n\n      return this.listener.forwardZ.value;\n    }\n  }, {\n    key: \"upX\",\n    value: function upX(xVal, time) {\n      var t = time || 0;\n\n      if (typeof xVal === 'number') {\n        this.listener.upX.value = xVal;\n        this.listener.upX.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.listener.upX.linearRampToValueAtTime(xVal, this.ac.currentTime + 0.02 + t);\n      } else if (xVal) {\n        xVal.connect(this.listener.upX);\n      }\n\n      return this.listener.upX.value;\n    }\n  }, {\n    key: \"upY\",\n    value: function upY(yVal, time) {\n      var t = time || 0;\n\n      if (typeof yVal === 'number') {\n        this.listener.upY.value = yVal;\n        this.listener.upY.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.listener.upY.linearRampToValueAtTime(yVal, this.ac.currentTime + 0.02 + t);\n      } else if (yVal) {\n        yVal.connect(this.listener.upY);\n      }\n\n      return this.listener.upY.value;\n    }\n  }, {\n    key: \"upZ\",\n    value: function upZ(zVal, time) {\n      var t = time || 0;\n\n      if (typeof zVal === 'number') {\n        this.listener.upZ.value = zVal;\n        this.listener.upZ.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.listener.upZ.linearRampToValueAtTime(zVal, this.ac.currentTime + 0.02 + t);\n      } else if (zVal) {\n        zVal.connect(this.listener.upZ);\n      }\n\n      return this.listener.upZ.value;\n    }\n  }]);\n\n  return Listener3D;\n}();\n\n var listener3d = (listener3d_Listener3D);\nfunction panner3d_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { panner3d_typeof = function _typeof(obj) { return typeof obj; }; } else { panner3d_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return panner3d_typeof(obj); }\n\nfunction panner3d_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction panner3d_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction panner3d_createClass(Constructor, protoProps, staticProps) { if (protoProps) panner3d_defineProperties(Constructor.prototype, protoProps); if (staticProps) panner3d_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction panner3d_possibleConstructorReturn(self, call) { if (call && (panner3d_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return panner3d_assertThisInitialized(self); }\n\nfunction panner3d_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction panner3d_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { panner3d_get = Reflect.get; } else { panner3d_get = function _get(target, property, receiver) { var base = panner3d_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return panner3d_get(target, property, receiver || target); }\n\nfunction panner3d_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = panner3d_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction panner3d_getPrototypeOf(o) { panner3d_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return panner3d_getPrototypeOf(o); }\n\nfunction panner3d_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) panner3d_setPrototypeOf(subClass, superClass); }\n\nfunction panner3d_setPrototypeOf(o, p) { panner3d_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return panner3d_setPrototypeOf(o, p); }\n\n\n/**\n * Panner3D is based on the <a title=\"Web Audio Panner docs\"  href=\n * \"https://developer.mozilla.org/en-US/docs/Web/API/PannerNode\">\n * Web Audio Spatial Panner Node</a>.\n * This panner is a spatial processing node that allows audio to be positioned\n * and oriented in 3D space.\n *\n * The position is relative to an <a title=\"Web Audio Listener docs\" href=\n * \"https://developer.mozilla.org/en-US/docs/Web/API/AudioListener\">\n * Audio Context Listener</a>, which can be accessed\n * by <code>p5.soundOut.audiocontext.listener</code>\n *\n *\n * @class p5.Panner3D\n * @constructor\n */\n\nvar Panner3D =\nfunction (_Effect) {\n  panner3d_inherits(Panner3D, _Effect);\n\n  function Panner3D() {\n    var _this;\n\n    panner3d_classCallCheck(this, Panner3D);\n\n    _this = panner3d_possibleConstructorReturn(this, panner3d_getPrototypeOf(Panner3D).call(this));\n    /**\n     *  <a title=\"Web Audio Panner docs\"  href=\n     *  \"https://developer.mozilla.org/en-US/docs/Web/API/PannerNode\">\n     *  Web Audio Spatial Panner Node</a>\n     *\n     *  Properties include<br>\n     * [Panning Model](https://www.w3.org/TR/webaudio/#idl-def-PanningModelType)\n     * : \"equal power\" or \"HRTF\"<br>\n     * [DistanceModel](https://www.w3.org/TR/webaudio/#idl-def-DistanceModelType)\n     *  : \"linear\", \"inverse\", or \"exponential\"\n     *\n     *  @property {AudioNode} panner\n     *\n     */\n\n    _this.panner = _this.ac.createPanner();\n    _this.panner.panningModel = 'HRTF';\n    _this.panner.distanceModel = 'linear';\n\n    _this.panner.connect(_this.output);\n\n    _this.input.connect(_this.panner);\n\n    return _this;\n  }\n  /**\n   * Connect an audio sorce\n   *\n   * @method  process\n   * @for p5.Panner3D\n   * @param  {Object} src Input source\n   */\n\n\n  panner3d_createClass(Panner3D, [{\n    key: \"process\",\n    value: function process(src) {\n      src.connect(this.input);\n    }\n    /**\n     * Set the X,Y,Z position of the Panner\n     * @method set\n     * @for p5.Panner3D\n     * @param  {Number} xVal\n     * @param  {Number} yVal\n     * @param  {Number} zVal\n     * @param  {Number} time\n     * @return {Array}      Updated x, y, z values as an array\n     */\n\n  }, {\n    key: \"set\",\n    value: function set(xVal, yVal, zVal, time) {\n      this.positionX(xVal, time);\n      this.positionY(yVal, time);\n      this.positionZ(zVal, time);\n      return [this.panner.positionX.value, this.panner.positionY.value, this.panner.positionZ.value];\n    }\n    /**\n     * Getter and setter methods for position coordinates\n     * @method positionX\n     * @for p5.Panner3D\n     * @return {Number}      updated coordinate value\n     */\n\n    /**\n     * Getter and setter methods for position coordinates\n     * @method positionY\n     * @for p5.Panner3D\n     * @return {Number}      updated coordinate value\n     */\n\n    /**\n     * Getter and setter methods for position coordinates\n     * @method positionZ\n     * @for p5.Panner3D\n     * @return {Number}      updated coordinate value\n     */\n\n  }, {\n    key: \"positionX\",\n    value: function positionX(xVal, time) {\n      var t = time || 0;\n\n      if (typeof xVal === 'number') {\n        this.panner.positionX.value = xVal;\n        this.panner.positionX.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.panner.positionX.linearRampToValueAtTime(xVal, this.ac.currentTime + 0.02 + t);\n      } else if (xVal) {\n        xVal.connect(this.panner.positionX);\n      }\n\n      return this.panner.positionX.value;\n    }\n  }, {\n    key: \"positionY\",\n    value: function positionY(yVal, time) {\n      var t = time || 0;\n\n      if (typeof yVal === 'number') {\n        this.panner.positionY.value = yVal;\n        this.panner.positionY.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.panner.positionY.linearRampToValueAtTime(yVal, this.ac.currentTime + 0.02 + t);\n      } else if (yVal) {\n        yVal.connect(this.panner.positionY);\n      }\n\n      return this.panner.positionY.value;\n    }\n  }, {\n    key: \"positionZ\",\n    value: function positionZ(zVal, time) {\n      var t = time || 0;\n\n      if (typeof zVal === 'number') {\n        this.panner.positionZ.value = zVal;\n        this.panner.positionZ.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.panner.positionZ.linearRampToValueAtTime(zVal, this.ac.currentTime + 0.02 + t);\n      } else if (zVal) {\n        zVal.connect(this.panner.positionZ);\n      }\n\n      return this.panner.positionZ.value;\n    }\n    /**\n     * Set the X,Y,Z position of the Panner\n     * @method  orient\n     * @for p5.Panner3D\n     * @param  {Number} xVal\n     * @param  {Number} yVal\n     * @param  {Number} zVal\n     * @param  {Number} time\n     * @return {Array}      Updated x, y, z values as an array\n     */\n\n  }, {\n    key: \"orient\",\n    value: function orient(xVal, yVal, zVal, time) {\n      this.orientX(xVal, time);\n      this.orientY(yVal, time);\n      this.orientZ(zVal, time);\n      return [this.panner.orientationX.value, this.panner.orientationY.value, this.panner.orientationZ.value];\n    }\n    /**\n     * Getter and setter methods for orient coordinates\n     * @method orientX\n     * @for p5.Panner3D\n     * @return {Number}      updated coordinate value\n     */\n\n    /**\n     * Getter and setter methods for orient coordinates\n     * @method orientY\n     * @for p5.Panner3D\n     * @return {Number}      updated coordinate value\n     */\n\n    /**\n     * Getter and setter methods for orient coordinates\n     * @method orientZ\n     * @for p5.Panner3D\n     * @return {Number}      updated coordinate value\n     */\n\n  }, {\n    key: \"orientX\",\n    value: function orientX(xVal, time) {\n      var t = time || 0;\n\n      if (typeof xVal === 'number') {\n        this.panner.orientationX.value = xVal;\n        this.panner.orientationX.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.panner.orientationX.linearRampToValueAtTime(xVal, this.ac.currentTime + 0.02 + t);\n      } else if (xVal) {\n        xVal.connect(this.panner.orientationX);\n      }\n\n      return this.panner.orientationX.value;\n    }\n  }, {\n    key: \"orientY\",\n    value: function orientY(yVal, time) {\n      var t = time || 0;\n\n      if (typeof yVal === 'number') {\n        this.panner.orientationY.value = yVal;\n        this.panner.orientationY.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.panner.orientationY.linearRampToValueAtTime(yVal, this.ac.currentTime + 0.02 + t);\n      } else if (yVal) {\n        yVal.connect(this.panner.orientationY);\n      }\n\n      return this.panner.orientationY.value;\n    }\n  }, {\n    key: \"orientZ\",\n    value: function orientZ(zVal, time) {\n      var t = time || 0;\n\n      if (typeof zVal === 'number') {\n        this.panner.orientationZ.value = zVal;\n        this.panner.orientationZ.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.panner.orientationZ.linearRampToValueAtTime(zVal, this.ac.currentTime + 0.02 + t);\n      } else if (zVal) {\n        zVal.connect(this.panner.orientationZ);\n      }\n\n      return this.panner.orientationZ.value;\n    }\n    /**\n     * Set the rolloff factor and max distance\n     * @method  setFalloff\n     * @for p5.Panner3D\n     * @param {Number} [maxDistance]\n     * @param {Number} [rolloffFactor]\n     */\n\n  }, {\n    key: \"setFalloff\",\n    value: function setFalloff(maxDistance, rolloffFactor) {\n      this.maxDist(maxDistance);\n      this.rolloff(rolloffFactor);\n    }\n    /**\n     * Maxium distance between the source and the listener\n     * @method  maxDist\n     * @for p5.Panner3D\n     * @param  {Number} maxDistance\n     * @return {Number} updated value\n     */\n\n  }, {\n    key: \"maxDist\",\n    value: function maxDist(maxDistance) {\n      if (typeof maxDistance === 'number') {\n        this.panner.maxDistance = maxDistance;\n      }\n\n      return this.panner.maxDistance;\n    }\n    /**\n     * How quickly the volume is reduced as the source moves away from the listener\n     * @method  rollof\n     * @for p5.Panner3D\n     * @param  {Number} rolloffFactor\n     * @return {Number} updated value\n     */\n\n  }, {\n    key: \"rolloff\",\n    value: function rolloff(rolloffFactor) {\n      if (typeof rolloffFactor === 'number') {\n        this.panner.rolloffFactor = rolloffFactor;\n      }\n\n      return this.panner.rolloffFactor;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      panner3d_get(panner3d_getPrototypeOf(Panner3D.prototype), \"dispose\", this).call(this);\n\n      if (this.panner) {\n        this.panner.disconnect();\n        delete this.panner;\n      }\n    }\n  }]);\n\n  return Panner3D;\n}(effect);\n\n var panner3d = (Panner3D);\nfunction delay_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { delay_typeof = function _typeof(obj) { return typeof obj; }; } else { delay_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return delay_typeof(obj); }\n\nfunction delay_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction delay_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction delay_createClass(Constructor, protoProps, staticProps) { if (protoProps) delay_defineProperties(Constructor.prototype, protoProps); if (staticProps) delay_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction delay_possibleConstructorReturn(self, call) { if (call && (delay_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return delay_assertThisInitialized(self); }\n\nfunction delay_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction delay_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { delay_get = Reflect.get; } else { delay_get = function _get(target, property, receiver) { var base = delay_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return delay_get(target, property, receiver || target); }\n\nfunction delay_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = delay_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction delay_getPrototypeOf(o) { delay_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return delay_getPrototypeOf(o); }\n\nfunction delay_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) delay_setPrototypeOf(subClass, superClass); }\n\nfunction delay_setPrototypeOf(o, p) { delay_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return delay_setPrototypeOf(o, p); }\n\n\n\n/**\n *  Delay is an echo effect. It processes an existing sound source,\n *  and outputs a delayed version of that sound. The p5.Delay can\n *  produce different effects depending on the delayTime, feedback,\n *  filter, and type. In the example below, a feedback of 0.5 (the\n *  default value) will produce a looping delay that decreases in\n *  volume by 50% each repeat. A filter will cut out the high\n *  frequencies so that the delay does not sound as piercing as the\n *  original source.\n *\n *\n *  This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n *  Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n *  <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n *  <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n *  @class p5.Delay\n *  @extends p5.Effect\n *  @constructor\n *  @example\n *  <div><code>\n *  let osc;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    background(220);\n *    textAlign(CENTER);\n *    text('tap to play', width/2, height/2);\n *\n *    osc = new p5.Oscillator('square');\n *    osc.amp(0.5);\n *    delay = new p5.Delay();\n *\n *    // delay.process() accepts 4 parameters:\n *    // source, delayTime (in seconds), feedback, filter frequency\n *    delay.process(osc, 0.12, .7, 2300);\n *\n *    cnv.mousePressed(oscStart);\n *  }\n *\n *  function oscStart() {\n *    osc.start();\n *  }\n *\n *  function mouseReleased() {\n *    osc.stop();\n *  }\n *  </code></div>\n */\n\nvar delay_Delay =\nfunction (_Effect) {\n  delay_inherits(Delay, _Effect);\n\n  function Delay() {\n    var _this;\n\n    delay_classCallCheck(this, Delay);\n\n    _this = delay_possibleConstructorReturn(this, delay_getPrototypeOf(Delay).call(this));\n    _this._split = _this.ac.createChannelSplitter(2);\n    _this._merge = _this.ac.createChannelMerger(2);\n    _this._leftGain = _this.ac.createGain();\n    _this._rightGain = _this.ac.createGain();\n    /**\n     *  The p5.Delay is built with two\n     *  <a href=\"http://www.w3.org/TR/webaudio/#DelayNode\">\n     *  Web Audio Delay Nodes</a>, one for each stereo channel.\n     *\n     *  @for p5.Delay\n     *  @property {DelayNode} leftDelay\n     */\n\n    _this.leftDelay = _this.ac.createDelay();\n    /**\n     *  The p5.Delay is built with two\n     *  <a href=\"http://www.w3.org/TR/webaudio/#DelayNode\">\n     *  Web Audio Delay Nodes</a>, one for each stereo channel.\n     *  @for p5.Delay\n     *  @property {DelayNode} rightDelay\n     */\n\n    _this.rightDelay = _this.ac.createDelay();\n    _this._leftFilter = new filter();\n    _this._rightFilter = new filter();\n\n    _this._leftFilter.disconnect();\n\n    _this._rightFilter.disconnect();\n\n    _this._leftFilter.biquad.frequency.setValueAtTime(1200, _this.ac.currentTime);\n\n    _this._rightFilter.biquad.frequency.setValueAtTime(1200, _this.ac.currentTime);\n\n    _this._leftFilter.biquad.Q.setValueAtTime(0.3, _this.ac.currentTime);\n\n    _this._rightFilter.biquad.Q.setValueAtTime(0.3, _this.ac.currentTime); \n\n\n    _this.input.connect(_this._split);\n\n    _this.leftDelay.connect(_this._leftGain);\n\n    _this.rightDelay.connect(_this._rightGain);\n\n    _this._leftGain.connect(_this._leftFilter.input);\n\n    _this._rightGain.connect(_this._rightFilter.input);\n\n    _this._merge.connect(_this.wet);\n\n    _this._leftFilter.biquad.gain.setValueAtTime(1, _this.ac.currentTime);\n\n    _this._rightFilter.biquad.gain.setValueAtTime(1, _this.ac.currentTime); \n\n\n    _this.setType(0);\n\n    _this._maxDelay = _this.leftDelay.delayTime.maxValue; \n\n    _this.feedback(0.5);\n\n    return _this;\n  }\n  /**\n   *  Add delay to an audio signal according to a set\n   *  of delay parameters.\n   *\n   *  @method  process\n   *  @for p5.Delay\n   *  @param  {Object} Signal  An object that outputs audio\n   *  @param  {Number} [delayTime] Time (in seconds) of the delay/echo.\n   *                               Some browsers limit delayTime to\n   *                               1 second.\n   *  @param  {Number} [feedback]  sends the delay back through itself\n   *                               in a loop that decreases in volume\n   *                               each time.\n   *  @param  {Number} [lowPass]   Cutoff frequency. Only frequencies\n   *                               below the lowPass will be part of the\n   *                               delay.\n   */\n\n\n  delay_createClass(Delay, [{\n    key: \"process\",\n    value: function process(src, _delayTime, _feedback, _filter) {\n      var feedback = _feedback || 0;\n      var delayTime = _delayTime || 0;\n\n      if (feedback >= 1.0) {\n        throw new Error('Feedback value will force a positive feedback loop.');\n      }\n\n      if (delayTime >= this._maxDelay) {\n        throw new Error('Delay Time exceeds maximum delay time of ' + this._maxDelay + ' second.');\n      }\n\n      src.connect(this.input);\n      this.leftDelay.delayTime.setValueAtTime(delayTime, this.ac.currentTime);\n      this.rightDelay.delayTime.setValueAtTime(delayTime, this.ac.currentTime);\n      this._leftGain.gain.value = feedback;\n      this._rightGain.gain.value = feedback;\n\n      if (_filter) {\n        this._leftFilter.freq(_filter);\n\n        this._rightFilter.freq(_filter);\n      }\n    }\n    /**\n     *  Set the delay (echo) time, in seconds. Usually this value will be\n     *  a floating point number between 0.0 and 1.0.\n     *\n     *  @method  delayTime\n     *  @for p5.Delay\n     *  @param {Number} delayTime Time (in seconds) of the delay\n     */\n\n  }, {\n    key: \"delayTime\",\n    value: function delayTime(t) {\n      if (typeof t !== 'number') {\n        t.connect(this.leftDelay.delayTime);\n        t.connect(this.rightDelay.delayTime);\n      } else {\n        this.leftDelay.delayTime.cancelScheduledValues(this.ac.currentTime);\n        this.rightDelay.delayTime.cancelScheduledValues(this.ac.currentTime);\n        this.leftDelay.delayTime.linearRampToValueAtTime(t, this.ac.currentTime);\n        this.rightDelay.delayTime.linearRampToValueAtTime(t, this.ac.currentTime);\n      }\n    }\n    /**\n     *  Feedback occurs when Delay sends its signal back through its input\n     *  in a loop. The feedback amount determines how much signal to send each\n     *  time through the loop. A feedback greater than 1.0 is not desirable because\n     *  it will increase the overall output each time through the loop,\n     *  creating an infinite feedback loop. The default value is 0.5\n     *\n     *  @method  feedback\n     *  @for p5.Delay\n     *  @param {Number|Object} feedback 0.0 to 1.0, or an object such as an\n     *                                  Oscillator that can be used to\n     *                                  modulate this param\n     *  @returns {Number} Feedback value\n     *\n     */\n\n  }, {\n    key: \"feedback\",\n    value: function feedback(f) {\n      if (f && typeof f !== 'number') {\n        f.connect(this._leftGain.gain);\n        f.connect(this._rightGain.gain);\n      } else if (f >= 1.0) {\n        throw new Error('Feedback value will force a positive feedback loop.');\n      } else if (typeof f === 'number') {\n        this._leftGain.gain.value = f;\n        this._rightGain.gain.value = f;\n      } \n\n\n      return this._leftGain.gain.value;\n    }\n    /**\n     *  Set a lowpass filter frequency for the delay. A lowpass filter\n     *  will cut off any frequencies higher than the filter frequency.\n     *\n     *  @method  filter\n     *  @for p5.Delay\n     *  @param {Number|Object} cutoffFreq  A lowpass filter will cut off any\n     *                              frequencies higher than the filter frequency.\n     *  @param {Number|Object} res  Resonance of the filter frequency\n     *                              cutoff, or an object (i.e. a p5.Oscillator)\n     *                              that can be used to modulate this parameter.\n     *                              High numbers (i.e. 15) will produce a resonance,\n     *                              low numbers (i.e. .2) will produce a slope.\n     */\n\n  }, {\n    key: \"filter\",\n    value: function filter(freq, q) {\n      this._leftFilter.set(freq, q);\n\n      this._rightFilter.set(freq, q);\n    }\n    /**\n     *  Choose a preset type of delay. 'pingPong' bounces the signal\n     *  from the left to the right channel to produce a stereo effect.\n     *  Any other parameter will revert to the default delay setting.\n     *\n     *  @method  setType\n     *  @for p5.Delay\n     *  @param {String|Number} type 'pingPong' (1) or 'default' (0)\n     */\n\n  }, {\n    key: \"setType\",\n    value: function setType(t) {\n      if (t === 1) {\n        t = 'pingPong';\n      }\n\n      this._split.disconnect();\n\n      this._leftFilter.disconnect();\n\n      this._rightFilter.disconnect();\n\n      this._split.connect(this.leftDelay, 0);\n\n      this._split.connect(this.rightDelay, 1);\n\n      switch (t) {\n        case 'pingPong':\n          this._rightFilter.setType(this._leftFilter.biquad.type);\n\n          this._leftFilter.output.connect(this._merge, 0, 0);\n\n          this._rightFilter.output.connect(this._merge, 0, 1);\n\n          this._leftFilter.output.connect(this.rightDelay);\n\n          this._rightFilter.output.connect(this.leftDelay);\n\n          break;\n\n        default:\n          this._leftFilter.output.connect(this._merge, 0, 0);\n\n          this._rightFilter.output.connect(this._merge, 0, 1);\n\n          this._leftFilter.output.connect(this.leftDelay);\n\n          this._rightFilter.output.connect(this.rightDelay);\n\n      }\n    } \n\n    /**\n     *  Set the output level of the delay effect.\n     *\n     *  @method  amp\n     *  @for p5.Delay\n     *  @param  {Number} volume amplitude between 0 and 1.0\n     *  @param {Number} [rampTime] create a fade that lasts rampTime\n     *  @param {Number} [timeFromNow] schedule this event to happen\n     *                                seconds from now\n     */\n\n    /**\n     *  Send output to a p5.sound or web audio object\n     *\n     *  @method  connect\n     *  @for p5.Delay\n     *  @param  {Object} unit\n     */\n\n    /**\n     *  Disconnect all output.\n     *\n     *  @method disconnect\n     *  @for p5.Delay\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      delay_get(delay_getPrototypeOf(Delay.prototype), \"dispose\", this).call(this);\n\n      this._split.disconnect();\n\n      this._leftFilter.dispose();\n\n      this._rightFilter.dispose();\n\n      this._merge.disconnect();\n\n      this._leftGain.disconnect();\n\n      this._rightGain.disconnect();\n\n      this.leftDelay.disconnect();\n      this.rightDelay.disconnect();\n      this._split = undefined;\n      this._leftFilter = undefined;\n      this._rightFilter = undefined;\n      this._merge = undefined;\n      this._leftGain = undefined;\n      this._rightGain = undefined;\n      this.leftDelay = undefined;\n      this.rightDelay = undefined;\n    }\n  }]);\n\n  return Delay;\n}(effect);\n\n var delay = (delay_Delay);\nfunction reverb_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { reverb_typeof = function _typeof(obj) { return typeof obj; }; } else { reverb_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return reverb_typeof(obj); }\n\nfunction reverb_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction reverb_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction reverb_createClass(Constructor, protoProps, staticProps) { if (protoProps) reverb_defineProperties(Constructor.prototype, protoProps); if (staticProps) reverb_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction reverb_possibleConstructorReturn(self, call) { if (call && (reverb_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return reverb_assertThisInitialized(self); }\n\nfunction reverb_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction reverb_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { reverb_get = Reflect.get; } else { reverb_get = function _get(target, property, receiver) { var base = reverb_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return reverb_get(target, property, receiver || target); }\n\nfunction reverb_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = reverb_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction reverb_getPrototypeOf(o) { reverb_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return reverb_getPrototypeOf(o); }\n\nfunction reverb_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) reverb_setPrototypeOf(subClass, superClass); }\n\nfunction reverb_setPrototypeOf(o, p) { reverb_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return reverb_setPrototypeOf(o, p); }\n\n\n\n\n/**\n *  Reverb adds depth to a sound through a large number of decaying\n *  echoes. It creates the perception that sound is occurring in a\n *  physical space. The p5.Reverb has paramters for Time (how long does the\n *  reverb last) and decayRate (how much the sound decays with each echo)\n *  that can be set with the .set() or .process() methods. The p5.Convolver\n *  extends p5.Reverb allowing you to recreate the sound of actual physical\n *  spaces through convolution.\n *\n *  This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n *  Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n *  <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n *  <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n *\n *  @class p5.Reverb\n *  @extends p5.Effect\n *  @constructor\n *  @example\n *  <div><code>\n *  let soundFile, reverb;\n *  function preload() {\n *    soundFile = loadSound('assets/Damscray_DancingTiger.mp3');\n *  }\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playSound);\n *\n *    reverb = new p5.Reverb();\n *    soundFile.disconnect(); // so we'll only hear reverb...\n *\n *    // connect soundFile to reverb, process w/\n *    // 3 second reverbTime, decayRate of 2%\n *    reverb.process(soundFile, 3, 2);\n *  }\n *\n *  function draw() {\n *    let dryWet = constrain(map(mouseX, 0, width, 0, 1), 0, 1);\n *    // 1 = all reverb, 0 = no reverb\n *    reverb.drywet(dryWet);\n *\n *    background(220);\n *    text('tap to play', 10, 20);\n *    text('dry/wet: ' + round(dryWet * 100) + '%', 10, height - 20);\n *  }\n *\n *  function playSound() {\n *    soundFile.play();\n *  }\n *  </code></div>\n */\n\nvar Reverb =\nfunction (_Effect) {\n  reverb_inherits(Reverb, _Effect);\n\n  function Reverb() {\n    var _this;\n\n    reverb_classCallCheck(this, Reverb);\n\n    _this = reverb_possibleConstructorReturn(this, reverb_getPrototypeOf(Reverb).call(this));\n\n    _this._initConvolverNode(); \n\n\n    _this.input.gain.value = 0.5; \n\n    _this._seconds = 3;\n    _this._decay = 2;\n    _this._reverse = false;\n\n    _this._buildImpulse();\n\n    return _this;\n  }\n\n  reverb_createClass(Reverb, [{\n    key: \"_initConvolverNode\",\n    value: function _initConvolverNode() {\n      this.convolverNode = this.ac.createConvolver();\n      this.input.connect(this.convolverNode);\n      this.convolverNode.connect(this.wet);\n    }\n  }, {\n    key: \"_teardownConvolverNode\",\n    value: function _teardownConvolverNode() {\n      if (this.convolverNode) {\n        this.convolverNode.disconnect();\n        delete this.convolverNode;\n      }\n    }\n  }, {\n    key: \"_setBuffer\",\n    value: function _setBuffer(audioBuffer) {\n      this._teardownConvolverNode();\n\n      this._initConvolverNode();\n\n      this.convolverNode.buffer = audioBuffer;\n    }\n    /**\n     *  Connect a source to the reverb, and assign reverb parameters.\n     *\n     *  @method  process\n     *  @for p5.Reverb\n     *  @param  {Object} src     p5.sound / Web Audio object with a sound\n     *                           output.\n     *  @param  {Number} [seconds] Duration of the reverb, in seconds.\n     *                           Min: 0, Max: 10. Defaults to 3.\n     *  @param  {Number} [decayRate] Percentage of decay with each echo.\n     *                            Min: 0, Max: 100. Defaults to 2.\n     *  @param  {Boolean} [reverse] Play the reverb backwards or forwards.\n     */\n\n  }, {\n    key: \"process\",\n    value: function process(src, seconds, decayRate, reverse) {\n      src.connect(this.input);\n      var rebuild = false;\n\n      if (seconds) {\n        this._seconds = seconds;\n        rebuild = true;\n      }\n\n      if (decayRate) {\n        this._decay = decayRate;\n      }\n\n      if (reverse) {\n        this._reverse = reverse;\n      }\n\n      if (rebuild) {\n        this._buildImpulse();\n      }\n    }\n    /**\n     *  Set the reverb settings. Similar to .process(), but without\n     *  assigning a new input.\n     *\n     *  @method  set\n     *  @for p5.Reverb\n     *  @param  {Number} [seconds] Duration of the reverb, in seconds.\n     *                           Min: 0, Max: 10. Defaults to 3.\n     *  @param  {Number} [decayRate] Percentage of decay with each echo.\n     *                            Min: 0, Max: 100. Defaults to 2.\n     *  @param  {Boolean} [reverse] Play the reverb backwards or forwards.\n     */\n\n  }, {\n    key: \"set\",\n    value: function set(seconds, decayRate, reverse) {\n      var rebuild = false;\n\n      if (seconds) {\n        this._seconds = seconds;\n        rebuild = true;\n      }\n\n      if (decayRate) {\n        this._decay = decayRate;\n      }\n\n      if (reverse) {\n        this._reverse = reverse;\n      }\n\n      if (rebuild) {\n        this._buildImpulse();\n      }\n    } \n\n    /**\n     *  Set the output level of the reverb effect.\n     *\n     *  @method  amp\n     *  @for p5.Reverb\n     *  @param  {Number} volume amplitude between 0 and 1.0\n     *  @param  {Number} [rampTime] create a fade that lasts rampTime\n     *  @param  {Number} [timeFromNow] schedule this event to happen\n     *                                seconds from now\n     */\n\n    /**\n     *  Send output to a p5.sound or web audio object\n     *\n     *  @method  connect\n     *  @for p5.Reverb\n     *  @param  {Object} unit\n     */\n\n    /**\n     *  Disconnect all output.\n     *\n     *  @method disconnect\n     *  @for p5.Reverb\n     */\n\n    /**\n     *  Inspired by Simple Reverb by Jordan Santell\n     *  https://github.com/web-audio-components/simple-reverb/blob/master/index.js\n     *\n     *  Utility function for building an impulse response\n     *  based on the module parameters.\n     *\n     *  @private\n     */\n\n  }, {\n    key: \"_buildImpulse\",\n    value: function _buildImpulse() {\n      var rate = this.ac.sampleRate;\n      var length = rate * this._seconds;\n      var decay = this._decay;\n      var impulse = this.ac.createBuffer(2, length, rate);\n      var impulseL = impulse.getChannelData(0);\n      var impulseR = impulse.getChannelData(1);\n      var n, i;\n\n      for (i = 0; i < length; i++) {\n        n = this._reverse ? length - i : i;\n        impulseL[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);\n        impulseR[i] = (Math.random() * 2 - 1) * Math.pow(1 - n / length, decay);\n      }\n\n      this._setBuffer(impulse);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      reverb_get(reverb_getPrototypeOf(Reverb.prototype), \"dispose\", this).call(this);\n\n      this._teardownConvolverNode();\n    }\n  }]);\n\n  return Reverb;\n}(effect); \n\n/**\n *  <p>p5.Convolver extends p5.Reverb. It can emulate the sound of real\n *  physical spaces through a process called <a href=\"\n *  https://en.wikipedia.org/wiki/Convolution_reverb#Real_space_simulation\">\n *  convolution</a>.</p>\n *\n *  <p>Convolution multiplies any audio input by an \"impulse response\"\n *  to simulate the dispersion of sound over time. The impulse response is\n *  generated from an audio file that you provide. One way to\n *  generate an impulse response is to pop a balloon in a reverberant space\n *  and record the echo. Convolution can also be used to experiment with\n *  sound.</p>\n *\n *  <p>Use the method <code>createConvolution(path)</code> to instantiate a\n *  p5.Convolver with a path to your impulse response audio file.</p>\n *\n *  @class p5.Convolver\n *  @extends p5.Effect\n *  @constructor\n *  @param  {String}   path     path to a sound file\n *  @param  {Function} [callback] function to call when loading succeeds\n *  @param  {Function} [errorCallback] function to call if loading fails.\n *                                     This function will receive an error or\n *                                     XMLHttpRequest object with information\n *                                     about what went wrong.\n *  @example\n *  <div><code>\n *  let cVerb, sound;\n *  function preload() {\n *    // We have both MP3 and OGG versions of all sound assets\n *    soundFormats('ogg', 'mp3');\n *\n *    // Try replacing 'bx-spring' with other soundfiles like\n *    // 'concrete-tunnel' 'small-plate' 'drum' 'beatbox'\n *    cVerb = createConvolver('assets/bx-spring.mp3');\n *\n *    // Try replacing 'Damscray_DancingTiger' with\n *    // 'beat', 'doorbell', lucky_dragons_-_power_melody'\n *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n *  }\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playSound);\n *    background(220);\n *    text('tap to play', 20, 20);\n *\n *    // disconnect from main output...\n *    sound.disconnect();\n *\n *    // ...and process with cVerb\n *    // so that we only hear the convolution\n *    cVerb.process(sound);\n *  }\n *\n *  function playSound() {\n *    sound.play();\n *  }\n *  </code></div>\n */\n\n\nvar reverb_Convolver =\nfunction (_Reverb) {\n  reverb_inherits(Convolver, _Reverb);\n\n  function Convolver(path, callback, errorCallback) {\n    var _this2;\n\n    reverb_classCallCheck(this, Convolver);\n\n    _this2 = reverb_possibleConstructorReturn(this, reverb_getPrototypeOf(Convolver).call(this));\n    /**\n     *  Internally, the p5.Convolver uses the a\n     *  <a href=\"http://www.w3.org/TR/webaudio/#ConvolverNode\">\n     *  Web Audio Convolver Node</a>.\n     *\n     *  @property {ConvolverNode} convolverNode\n     */\n\n    _this2._initConvolverNode(); \n\n\n    _this2.input.gain.value = 0.5;\n\n    if (path) {\n      _this2.impulses = [];\n\n      _this2._loadBuffer(path, callback, errorCallback);\n    } else {\n      _this2._seconds = 3;\n      _this2._decay = 2;\n      _this2._reverse = false;\n\n      _this2._buildImpulse();\n    }\n    /**\n     *  If you load multiple impulse files using the .addImpulse method,\n     *  they will be stored as Objects in this Array. Toggle between them\n     *  with the <code>toggleImpulse(id)</code> method.\n     *\n     *  @property {Array} impulses\n     *  @for p5.Convolver\n     */\n\n\n    _this2.impulses = [];\n    _this2.set = null;\n    return _this2;\n  }\n  /**\n   *  Private method to load a buffer as an Impulse Response,\n   *  assign it to the convolverNode, and add to the Array of .impulses.\n   *\n   *  @param   {String}   path\n   *  @param   {Function} callback\n   *  @param   {Function} errorCallback\n   *  @private\n   */\n\n\n  reverb_createClass(Convolver, [{\n    key: \"_loadBuffer\",\n    value: function _loadBuffer(_path, callback, errorCallback) {\n      var path = p5.prototype._checkFileFormats(_path);\n\n      var self = this;\n      var errorTrace = new Error().stack;\n      var ac = Object(audiocontext[\"b\" ])();\n      var request = new XMLHttpRequest();\n      request.open('GET', path, true);\n      request.responseType = 'arraybuffer';\n\n      request.onload = function () {\n        if (request.status === 200) {\n          ac.decodeAudioData(request.response, function (buff) {\n            var buffer = {};\n            var chunks = path.split('/');\n            buffer.name = chunks[chunks.length - 1];\n            buffer.audioBuffer = buff;\n            self.impulses.push(buffer);\n\n            self._setBuffer(buffer.audioBuffer);\n\n            if (callback) {\n              callback(buffer);\n            }\n          }, \n          function () {\n            var err = new errorHandler('decodeAudioData', errorTrace, self.url);\n            var msg = 'AudioContext error at decodeAudioData for ' + self.url;\n\n            if (errorCallback) {\n              err.msg = msg;\n              errorCallback(err);\n            } else {\n              console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n            }\n          });\n        } \n        else {\n            var err = new errorHandler('loadConvolver', errorTrace, self.url);\n            var msg = 'Unable to load ' + self.url + '. The request status was: ' + request.status + ' (' + request.statusText + ')';\n\n            if (errorCallback) {\n              err.message = msg;\n              errorCallback(err);\n            } else {\n              console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n            }\n          }\n      }; \n\n\n      request.onerror = function () {\n        var err = new errorHandler('loadConvolver', errorTrace, self.url);\n        var msg = 'There was no response from the server at ' + self.url + '. Check the url and internet connectivity.';\n\n        if (errorCallback) {\n          err.message = msg;\n          errorCallback(err);\n        } else {\n          console.error(msg + '\\n The error stack trace includes: \\n' + err.stack);\n        }\n      };\n\n      request.send();\n    }\n    /**\n     *  Connect a source to the convolver.\n     *\n     *  @method  process\n     *  @for p5.Convolver\n     *  @param  {Object} src     p5.sound / Web Audio object with a sound\n     *                           output.\n     *  @example\n     *  <div><code>\n     *  let cVerb, sound;\n     *  function preload() {\n     *    // We have both MP3 and OGG versions of all sound assets\n     *    soundFormats('ogg', 'mp3');\n     *\n     *    // Try replacing 'bx-spring' with other soundfiles like\n     *    // 'concrete-tunnel' 'small-plate' 'drum' 'beatbox'\n     *    cVerb = createConvolver('assets/bx-spring.mp3');\n     *\n     *    // Try replacing 'Damscray_DancingTiger' with\n     *    // 'beat', 'doorbell', lucky_dragons_-_power_melody'\n     *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n     *  }\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(playSound);\n     *    background(220);\n     *    text('tap to play', 20, 20);\n     *\n     *    // disconnect from main output...\n     *    sound.disconnect();\n     *\n     *    // ...and process with cVerb\n     *    // so that we only hear the convolution\n     *    cVerb.process(sound);\n     *  }\n     *\n     *  function playSound() {\n     *    sound.play();\n     *  }\n     *\n     *  </code></div>\n     */\n\n  }, {\n    key: \"process\",\n    value: function process(src) {\n      src.connect(this.input);\n    }\n    /**\n     *  Load and assign a new Impulse Response to the p5.Convolver.\n     *  The impulse is added to the <code>.impulses</code> array. Previous\n     *  impulses can be accessed with the <code>.toggleImpulse(id)</code>\n     *  method.\n     *\n     *  @method  addImpulse\n     *  @for p5.Convolver\n     *  @param  {String}   path     path to a sound file\n     *  @param  {Function} callback function (optional)\n     *  @param  {Function} errorCallback function (optional)\n     */\n\n  }, {\n    key: \"addImpulse\",\n    value: function addImpulse(path, callback, errorCallback) {\n      if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n        alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n      }\n\n      this._loadBuffer(path, callback, errorCallback);\n    }\n    /**\n     *  Similar to .addImpulse, except that the <code>.impulses</code>\n     *  Array is reset to save memory. A new <code>.impulses</code>\n     *  array is created with this impulse as the only item.\n     *\n     *  @method  resetImpulse\n     *  @for p5.Convolver\n     *  @param  {String}   path     path to a sound file\n     *  @param  {Function} callback function (optional)\n     *  @param  {Function} errorCallback function (optional)\n     */\n\n  }, {\n    key: \"resetImpulse\",\n    value: function resetImpulse(path, callback, errorCallback) {\n      if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n        alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n      }\n\n      this.impulses = [];\n\n      this._loadBuffer(path, callback, errorCallback);\n    }\n    /**\n     *  If you have used <code>.addImpulse()</code> to add multiple impulses\n     *  to a p5.Convolver, then you can use this method to toggle between\n     *  the items in the <code>.impulses</code> Array. Accepts a parameter\n     *  to identify which impulse you wish to use, identified either by its\n     *  original filename (String) or by its position in the <code>.impulses\n     *  </code> Array (Number).<br/>\n     *  You can access the objects in the .impulses Array directly. Each\n     *  Object has two attributes: an <code>.audioBuffer</code> (type:\n     *  Web Audio <a href=\"\n     *  http://webaudio.github.io/web-audio-api/#the-audiobuffer-interface\">\n     *  AudioBuffer)</a> and a <code>.name</code>, a String that corresponds\n     *  with the original filename.\n     *\n     *  @method toggleImpulse\n     *  @for p5.Convolver\n     *  @param {String|Number} id Identify the impulse by its original filename\n     *                            (String), or by its position in the\n     *                            <code>.impulses</code> Array (Number).\n     */\n\n  }, {\n    key: \"toggleImpulse\",\n    value: function toggleImpulse(id) {\n      if (typeof id === 'number' && id < this.impulses.length) {\n        this._setBuffer(this.impulses[id].audioBuffer);\n      }\n\n      if (typeof id === 'string') {\n        for (var i = 0; i < this.impulses.length; i++) {\n          if (this.impulses[i].name === id) {\n            this._setBuffer(this.impulses[i].audioBuffer);\n\n            break;\n          }\n        }\n      }\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      reverb_get(reverb_getPrototypeOf(Convolver.prototype), \"dispose\", this).call(this); \n\n\n      for (var i in this.impulses) {\n        if (this.impulses[i]) {\n          this.impulses[i] = null;\n        }\n      }\n    }\n  }]);\n\n  return Convolver;\n}(Reverb);\n/**\n *  Create a p5.Convolver. Accepts a path to a soundfile\n *  that will be used to generate an impulse response.\n *\n *  @method  createConvolver\n *  @for p5\n *  @param  {String}   path     path to a sound file\n *  @param  {Function} [callback] function to call if loading is successful.\n *                                The object will be passed in as the argument\n *                                to the callback function.\n *  @param  {Function} [errorCallback] function to call if loading is not successful.\n *                                A custom error will be passed in as the argument\n *                                to the callback function.\n *  @return {p5.Convolver}\n *  @example\n *  <div><code>\n *  let cVerb, sound;\n *  function preload() {\n *    // We have both MP3 and OGG versions of all sound assets\n *    soundFormats('ogg', 'mp3');\n *\n *    // Try replacing 'bx-spring' with other soundfiles like\n *    // 'concrete-tunnel' 'small-plate' 'drum' 'beatbox'\n *    cVerb = createConvolver('assets/bx-spring.mp3');\n *\n *    // Try replacing 'Damscray_DancingTiger' with\n *    // 'beat', 'doorbell', lucky_dragons_-_power_melody'\n *    sound = loadSound('assets/Damscray_DancingTiger.mp3');\n *  }\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playSound);\n *    background(220);\n *    text('tap to play', 20, 20);\n *\n *    // disconnect from main output...\n *    sound.disconnect();\n *\n *    // ...and process with cVerb\n *    // so that we only hear the convolution\n *    cVerb.process(sound);\n *  }\n *\n *  function playSound() {\n *    sound.play();\n *  }\n *  </code></div>\n */\n\n\nfunction createConvolver(path, callback, errorCallback) {\n  if (window.location.origin.indexOf('file://') > -1 && window.cordova === 'undefined') {\n    alert('This sketch may require a server to load external files. Please see http://bit.ly/1qcInwS');\n  }\n\n  var self = this;\n  var cReverb = new reverb_Convolver(path, function (buffer) {\n    if (typeof callback === 'function') {\n      callback(buffer);\n    }\n\n    if (typeof self._decrementPreload === 'function') {\n      self._decrementPreload();\n    }\n  }, errorCallback);\n  cReverb.impulses = [];\n  return cReverb;\n}\n\n\nvar Clock = __webpack_require__(11);\nvar Clock_default = __webpack_require__.n(Clock);\n\nfunction metro_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction metro_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction metro_createClass(Constructor, protoProps, staticProps) { if (protoProps) metro_defineProperties(Constructor.prototype, protoProps); if (staticProps) metro_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar metro_Metro =\nfunction () {\n  function Metro() {\n    metro_classCallCheck(this, Metro);\n\n    this.clock = new Clock_default.a({\n      callback: this.ontick.bind(this)\n    });\n    this.syncedParts = [];\n    this.bpm = 120; \n\n    this._init();\n\n    this.prevTick = 0;\n    this.tatumTime = 0;\n\n    this.tickCallback = function () {};\n  }\n\n  metro_createClass(Metro, [{\n    key: \"ontick\",\n    value: function ontick(tickTime) {\n      var elapsedTime = tickTime - this.prevTick;\n      var secondsFromNow = tickTime - main.audiocontext.currentTime;\n\n      if (elapsedTime - this.tatumTime <= -0.02) {\n        return;\n      } else {\n        this.prevTick = tickTime; \n\n        var self = this;\n        this.syncedParts.forEach(function (thisPart) {\n          if (!thisPart.isPlaying) return;\n          thisPart.incrementStep(secondsFromNow); \n\n          thisPart.phrases.forEach(function (thisPhrase) {\n            var phraseArray = thisPhrase.sequence;\n            var bNum = self.metroTicks % phraseArray.length;\n\n            if (phraseArray[bNum] !== 0 && (self.metroTicks < phraseArray.length || !thisPhrase.looping)) {\n              thisPhrase.callback(secondsFromNow, phraseArray[bNum]);\n            }\n          });\n        });\n        this.metroTicks += 1;\n        this.tickCallback(secondsFromNow);\n      }\n    }\n  }, {\n    key: \"setBPM\",\n    value: function setBPM(bpm) {\n      var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var beatTime = 60 / (bpm * this.tatums);\n      var now = main.audiocontext.currentTime;\n      this.tatumTime = beatTime;\n      this.clock.frequency.setValueAtTime(this.clock.frequency.value, now);\n      this.clock.frequency.linearRampToValueAtTime(bpm, now + rampTime);\n      this.bpm = bpm;\n    }\n  }, {\n    key: \"getBPM\",\n    value: function getBPM() {\n      return this.clock.getRate() / this.tatums * 60;\n    }\n  }, {\n    key: \"_init\",\n    value: function _init() {\n      this.metroTicks = 0; \n    } \n\n  }, {\n    key: \"resetSync\",\n    value: function resetSync(part) {\n      this.syncedParts = [part];\n    } \n\n  }, {\n    key: \"pushSync\",\n    value: function pushSync(part) {\n      this.syncedParts.push(part);\n    }\n  }, {\n    key: \"start\",\n    value: function start(timeFromNow) {\n      var t = timeFromNow || 0;\n      var now = main.audiocontext.currentTime;\n      this.clock.start(now + t);\n      this.setBPM(this.bpm);\n    }\n  }, {\n    key: \"stop\",\n    value: function stop(timeFromNow) {\n      var t = timeFromNow || 0;\n      var now = main.audiocontext.currentTime;\n      this.clock.stop(now + t);\n    }\n  }, {\n    key: \"beatLength\",\n    value: function beatLength(tatums) {\n      this.tatums = 1 / tatums / 4; \n    }\n  }]);\n\n  return Metro;\n}();\n\n var metro = (metro_Metro);\nfunction looper_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction looper_createClass(Constructor, protoProps, staticProps) { if (protoProps) looper_defineProperties(Constructor.prototype, protoProps); if (staticProps) looper_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction looper_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\nvar BPM = 120;\n/**\n *  Set the global tempo, in beats per minute, for all\n *  p5.Parts. This method will impact all active p5.Parts.\n *\n *  @method setBPM\n *  @for p5\n *  @param {Number} BPM      Beats Per Minute\n *  @param {Number} rampTime Seconds from now\n */\n\np5.prototype.setBPM = function (bpm, rampTime) {\n  BPM = bpm;\n\n  for (var i in main.parts) {\n    if (main.parts[i]) {\n      main.parts[i].setBPM(bpm, rampTime);\n    }\n  }\n};\n/**\n *  <p>A phrase is a pattern of musical events over time, i.e.\n *  a series of notes and rests.</p>\n *\n *  <p>Phrases must be added to a p5.Part for playback, and\n *  each part can play multiple phrases at the same time.\n *  For example, one Phrase might be a kick drum, another\n *  could be a snare, and another could be the bassline.</p>\n *\n *  <p>The first parameter is a name so that the phrase can be\n *  modified or deleted later. The callback is a a function that\n *  this phrase will call at every step—for example it might be\n *  called <code>playNote(value){}</code>. The array determines\n *  which value is passed into the callback at each step of the\n *  phrase. It can be numbers, an object with multiple numbers,\n *  or a zero (0) indicates a rest so the callback won't be called).</p>\n *\n *  @class p5.Phrase\n *  @constructor\n *  @param {String}   name     Name so that you can access the Phrase.\n *  @param {Function} callback The name of a function that this phrase\n *                             will call. Typically it will play a sound,\n *                             and accept two parameters: a time at which\n *                             to play the sound (in seconds from now),\n *                             and a value from the sequence array. The\n *                             time should be passed into the play() or\n *                             start() method to ensure precision.\n *  @param {Array}   sequence    Array of values to pass into the callback\n *                            at each step of the phrase.\n *  @example\n *  <div><code>\n *  let mySound, myPhrase, myPart;\n *  let pattern = [1,0,0,2,0,2,0,0];\n *\n *  function preload() {\n *    mySound = loadSound('assets/beatbox.mp3');\n *  }\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playMyPart);\n *    background(220);\n *    text('tap to play', width/2, height/2);\n *    textAlign(CENTER, CENTER);\n *\n *    myPhrase = new p5.Phrase('bbox', onEachStep, pattern);\n *    myPart = new p5.Part();\n *    myPart.addPhrase(myPhrase);\n *    myPart.setBPM(60);\n *  }\n *\n *  function onEachStep(time, playbackRate) {\n *    mySound.rate(playbackRate);\n *    mySound.play(time);\n *  }\n *\n *  function playMyPart() {\n *    userStartAudio();\n *    myPart.start();\n *  }\n *  </code></div>\n */\n\n\nvar Phrase = function Phrase(name, callback, sequence) {\n  looper_classCallCheck(this, Phrase);\n\n  this.phraseStep = 0;\n  this.name = name;\n  this.callback = callback;\n  /**\n   * Array of values to pass into the callback\n   * at each step of the phrase. Depending on the callback\n   * function's requirements, these values may be numbers,\n   * strings, or an object with multiple parameters.\n   * Zero (0) indicates a rest.\n   *\n   * @property {Array} sequence\n   */\n\n  this.sequence = sequence;\n};\n/**\n *  <p>A p5.Part plays back one or more p5.Phrases. Instantiate a part\n *  with steps and tatums. By default, each step represents a 1/16th note.</p>\n *\n *  <p>See p5.Phrase for more about musical timing.</p>\n *\n *  @class p5.Part\n *  @constructor\n *  @param {Number} [steps]   Steps in the part\n *  @param {Number} [tatums] Divisions of a beat, e.g. use 1/4, or 0.25 for a quater note (default is 1/16, a sixteenth note)\n *  @example\n *  <div><code>\n *  let box, drum, myPart;\n *  let boxPat = [1,0,0,2,0,2,0,0];\n *  let drumPat = [0,1,1,0,2,0,1,0];\n *\n *  function preload() {\n *    box = loadSound('assets/beatbox.mp3');\n *    drum = loadSound('assets/drum.mp3');\n *  }\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playMyPart);\n *    background(220);\n *    textAlign(CENTER, CENTER);\n *    text('tap to play', width/2, height/2);\n *\n *    let boxPhrase = new p5.Phrase('box', playBox, boxPat);\n *    let drumPhrase = new p5.Phrase('drum', playDrum, drumPat);\n *    myPart = new p5.Part();\n *    myPart.addPhrase(boxPhrase);\n *    myPart.addPhrase(drumPhrase);\n *    myPart.setBPM(60);\n *  }\n *\n *  function playBox(time, playbackRate) {\n *    box.rate(playbackRate);\n *    box.play(time);\n *  }\n *\n *  function playDrum(time, playbackRate) {\n *    drum.rate(playbackRate);\n *    drum.play(time);\n *  }\n *\n *  function playMyPart() {\n *    userStartAudio();\n *\n *    myPart.start();\n *  }\n *  </code></div>\n */\n\n\nvar looper_Part =\nfunction () {\n  function Part(steps, bLength) {\n    looper_classCallCheck(this, Part);\n\n    this.length = steps || 0; \n\n    this.partStep = 0;\n    this.phrases = [];\n    this.isPlaying = false;\n    this.noLoop();\n    this.tatums = bLength || 0.0625; \n\n    this.metro = new metro();\n\n    this.metro._init();\n\n    this.metro.beatLength(this.tatums);\n    this.metro.setBPM(BPM);\n    main.parts.push(this);\n\n    this.callback = function () {};\n  }\n  /**\n   *  Set the tempo of this part, in Beats Per Minute.\n   *\n   *  @method  setBPM\n   *  @for p5.Part\n   *  @param {Number} BPM      Beats Per Minute\n   *  @param {Number} [rampTime] Seconds from now\n   */\n\n\n  looper_createClass(Part, [{\n    key: \"setBPM\",\n    value: function setBPM(tempo, rampTime) {\n      this.metro.setBPM(tempo, rampTime);\n    }\n    /**\n     *  Returns the tempo, in Beats Per Minute, of this part.\n     *\n     *  @method getBPM\n     *  @for p5.Part\n     *  @return {Number}\n     */\n\n  }, {\n    key: \"getBPM\",\n    value: function getBPM() {\n      return this.metro.getBPM();\n    }\n    /**\n     *  Start playback of this part. It will play\n     *  through all of its phrases at a speed\n     *  determined by setBPM.\n     *\n     *  @method  start\n     *  @for p5.Part\n     *  @param  {Number} [time] seconds from now\n     */\n\n  }, {\n    key: \"start\",\n    value: function start(time) {\n      if (!this.isPlaying) {\n        this.isPlaying = true;\n        this.metro.resetSync(this);\n        var t = time || 0;\n        this.metro.start(t);\n      }\n    }\n    /**\n     *  Loop playback of this part. It will begin\n     *  looping through all of its phrases at a speed\n     *  determined by setBPM.\n     *\n     *  @method  loop\n     *  @for p5.Part\n     *  @param  {Number} [time] seconds from now\n     */\n\n  }, {\n    key: \"loop\",\n    value: function loop(time) {\n      this.looping = true; \n\n      this.onended = function () {\n        this.partStep = 0;\n      };\n\n      var t = time || 0;\n      this.start(t);\n    }\n    /**\n     *  Tell the part to stop looping.\n     *\n     *  @method  noLoop\n     *  @for p5.Part\n     */\n\n  }, {\n    key: \"noLoop\",\n    value: function noLoop() {\n      this.looping = false; \n\n      this.onended = function () {\n        this.stop();\n      };\n    }\n    /**\n     *  Stop the part and cue it to step 0. Playback will resume from the begining of the Part when it is played again.\n     *\n     *  @method  stop\n     *  @for p5.Part\n     *  @param  {Number} [time] seconds from now\n     */\n\n  }, {\n    key: \"stop\",\n    value: function stop(time) {\n      this.partStep = 0;\n      this.pause(time);\n    }\n    /**\n     *  Pause the part. Playback will resume\n     *  from the current step.\n     *\n     *  @method  pause\n     *  @for p5.Part\n     *  @param  {Number} time seconds from now\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause(time) {\n      this.isPlaying = false;\n      var t = time || 0;\n      this.metro.stop(t);\n    }\n    /**\n     *  Add a p5.Phrase to this Part.\n     *\n     *  @method  addPhrase\n     *  @for p5.Part\n     *  @param {p5.Phrase}   phrase   reference to a p5.Phrase\n     */\n\n  }, {\n    key: \"addPhrase\",\n    value: function addPhrase(name, callback, array) {\n      var p;\n\n      if (arguments.length === 3) {\n        p = new Phrase(name, callback, array);\n      } else if (arguments[0] instanceof Phrase) {\n        p = arguments[0];\n      } else {\n        throw 'invalid input. addPhrase accepts name, callback, array or a p5.Phrase';\n      }\n\n      this.phrases.push(p); \n\n      if (p.sequence.length > this.length) {\n        this.length = p.sequence.length;\n      }\n    }\n    /**\n     *  Remove a phrase from this part, based on the name it was\n     *  given when it was created.\n     *\n     *  @method  removePhrase\n     *  @for p5.Part\n     *  @param  {String} phraseName\n     */\n\n  }, {\n    key: \"removePhrase\",\n    value: function removePhrase(name) {\n      for (var i in this.phrases) {\n        if (this.phrases[i].name === name) {\n          this.phrases.splice(i, 1);\n        }\n      }\n    }\n    /**\n     *  Get a phrase from this part, based on the name it was\n     *  given when it was created. Now you can modify its array.\n     *\n     *  @method  getPhrase\n     *  @for p5.Part\n     *  @param  {String} phraseName\n     */\n\n  }, {\n    key: \"getPhrase\",\n    value: function getPhrase(name) {\n      for (var i in this.phrases) {\n        if (this.phrases[i].name === name) {\n          return this.phrases[i];\n        }\n      }\n    }\n    /**\n     *  Find all sequences with the specified name, and replace their patterns with the specified array.\n     *\n     *  @method  replaceSequence\n     *  @for p5.Part\n     *  @param  {String} phraseName\n     *  @param  {Array} sequence  Array of values to pass into the callback\n     *                            at each step of the phrase.\n     */\n\n  }, {\n    key: \"replaceSequence\",\n    value: function replaceSequence(name, array) {\n      for (var i in this.phrases) {\n        if (this.phrases[i].name === name) {\n          this.phrases[i].sequence = array;\n        }\n      }\n    }\n  }, {\n    key: \"incrementStep\",\n    value: function incrementStep(time) {\n      if (this.partStep < this.length - 1) {\n        this.callback(time);\n        this.partStep += 1;\n      } else {\n        if (!this.looping && this.partStep === this.length - 1) {\n          this.onended();\n        }\n      }\n    }\n    /**\n     *  Set the function that will be called at every step. This will clear the previous function.\n     *\n     *  @method onStep\n     *  @for p5.Part\n     *  @param  {Function} callback The name of the callback\n     *                              you want to fire\n     *                              on every beat/tatum.\n     */\n\n  }, {\n    key: \"onStep\",\n    value: function onStep(callback) {\n      this.callback = callback;\n    }\n  }]);\n\n  return Part;\n}(); \n\n/**\n *  A Score consists of a series of Parts. The parts will\n *  be played back in order. For example, you could have an\n *  A part, a B part, and a C part, and play them back in this order\n *  <code>new p5.Score(a, a, b, a, c)</code>\n *\n *  @class p5.Score\n *  @constructor\n *  @param {p5.Part} [...parts] One or multiple parts, to be played in sequence.\n */\n\n\nvar Score =\nfunction () {\n  function Score() {\n    looper_classCallCheck(this, Score);\n\n    this.parts = [];\n    this.currentPart = new Array(arguments.length);\n    ;\n    var thisScore = this;\n\n    for (var i in arguments) {\n      this.parts[i] = arguments[i];\n      this.parts[i].nextPart = this.parts[i + 1];\n\n      this.parts[i].onended = function () {\n        thisScore.resetPart(i);\n        playNextPart(thisScore);\n      };\n    }\n\n    this.looping = false;\n  }\n\n  looper_createClass(Score, [{\n    key: \"onended\",\n    value: function onended() {\n      if (this.looping) {\n        this.parts[0].start();\n      } else {\n        this.parts[this.parts.length - 1].onended = function () {\n          this.stop();\n          this.resetParts();\n        };\n      }\n\n      this.currentPart = 0;\n    }\n    /**\n     *  Start playback of the score.\n     *\n     *  @method  start\n     *  @for p5.Score\n     */\n\n  }, {\n    key: \"start\",\n    value: function start() {\n      this.parts[this.currentPart].start();\n      this.scoreStep = 0;\n    }\n    /**\n     *  Stop playback of the score.\n     *\n     *  @method  stop\n     *  @for p5.Score\n     */\n\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this.parts[this.currentPart].stop();\n      this.currentPart = 0;\n      this.scoreStep = 0;\n    }\n    /**\n     *  Pause playback of the score.\n     *\n     *  @method  pause\n     *  @for p5.Score\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      this.parts[this.currentPart].stop();\n    }\n    /**\n     *  Loop playback of the score.\n     *\n     *  @method  loop\n     *  @for p5.Score\n     */\n\n  }, {\n    key: \"loop\",\n    value: function loop() {\n      this.looping = true;\n      this.start();\n    }\n    /**\n     *  Stop looping playback of the score. If it\n     *  is currently playing, this will go into effect\n     *  after the current round of playback completes.\n     *\n     *  @method  noLoop\n     *  @for p5.Score\n     */\n\n  }, {\n    key: \"noLoop\",\n    value: function noLoop() {\n      this.looping = false;\n    }\n  }, {\n    key: \"resetParts\",\n    value: function resetParts() {\n      var self = this;\n      this.parts.forEach(function (part) {\n        self.resetParts[part];\n      });\n    }\n  }, {\n    key: \"resetPart\",\n    value: function resetPart(i) {\n      this.parts[i].stop();\n      this.parts[i].partStep = 0;\n\n      for (var p in this.parts[i].phrases) {\n        if (this.parts[i]) {\n          this.parts[i].phrases[p].phraseStep = 0;\n        }\n      }\n    }\n    /**\n     *  Set the tempo for all parts in the score\n     *\n     *  @method setBPM\n     *  @for p5.Score\n     *  @param {Number} BPM      Beats Per Minute\n     *  @param {Number} rampTime Seconds from now\n     */\n\n  }, {\n    key: \"setBPM\",\n    value: function setBPM(bpm, rampTime) {\n      for (var i in this.parts) {\n        if (this.parts[i]) {\n          this.parts[i].setBPM(bpm, rampTime);\n        }\n      }\n    }\n  }]);\n\n  return Score;\n}();\n\nfunction playNextPart(aScore) {\n  aScore.currentPart++;\n\n  if (aScore.currentPart >= aScore.parts.length) {\n    aScore.scoreStep = 0;\n    aScore.onended();\n  } else {\n    aScore.scoreStep = 0;\n    aScore.parts[aScore.currentPart - 1].stop();\n    aScore.parts[aScore.currentPart].start();\n  }\n}\n\n\nfunction soundLoop_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction soundLoop_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction soundLoop_createClass(Constructor, protoProps, staticProps) { if (protoProps) soundLoop_defineProperties(Constructor.prototype, protoProps); if (staticProps) soundLoop_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n/**\n * SoundLoop\n *\n * @class p5.SoundLoop\n * @constructor\n *\n * @param {Function} callback this function will be called on each iteration of theloop\n * @param {Number|String} [interval] amount of time (if a number) or beats (if a string, following <a href = \"https://github.com/Tonejs/Tone.js/wiki/Time\">Tone.Time</a> convention) for each iteration of the loop. Defaults to 1 second.\n *\n * @example\n * <div><code>\n *  let synth, soundLoop;\n *  let notePattern = [60, 62, 64, 67, 69, 72];\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(canvasPressed);\n *    colorMode(HSB);\n *    background(0, 0, 86);\n *    text('tap to start/stop', 10, 20);\n *\n *    //the looper's callback is passed the timeFromNow\n *    //this value should be used as a reference point from\n *    //which to schedule sounds\n *    let intervalInSeconds = 0.2;\n *    soundLoop = new p5.SoundLoop(onSoundLoop, intervalInSeconds);\n *\n *    synth = new p5.MonoSynth();\n * }\n *\n * function canvasPressed() {\n *   // ensure audio is enabled\n *   userStartAudio();\n *\n *   if (soundLoop.isPlaying) {\n *     soundLoop.stop();\n *   } else {\n *     // start the loop\n *     soundLoop.start();\n *   }\n * }\n *\n * function onSoundLoop(timeFromNow) {\n *   let noteIndex = (soundLoop.iterations - 1) % notePattern.length;\n *   let note = midiToFreq(notePattern[noteIndex]);\n *   synth.play(note, 0.5, timeFromNow);\n *   background(noteIndex * 360 / notePattern.length, 50, 100);\n * }\n * </code></div>\n */\n\nvar soundLoop_SoundLoop =\nfunction () {\n  function SoundLoop(callback, interval) {\n    soundLoop_classCallCheck(this, SoundLoop);\n\n    /**\n     * Getters and Setters, setting any paramter will result in a change in the clock's\n     * frequency, that will be reflected after the next callback\n     * beats per minute (defaults to 60)\n     * @property {Number} bpm\n     * @for p5.SoundLoop\n     */\n    Object.defineProperty(this, 'bpm', {\n      get: function get() {\n        return this._bpm;\n      },\n      set: function set(bpm) {\n        if (!this.musicalTimeMode) {\n          console.warn('Changing the BPM in \"seconds\" mode has no effect. ' + 'BPM is only relevant in musicalTimeMode ' + 'when the interval is specified as a string ' + '(\"2n\", \"4n\", \"1m\"...etc)');\n        }\n\n        this._bpm = bpm;\n\n        this._update();\n      }\n    });\n    /**\n     * number of quarter notes in a measure (defaults to 4)\n     * @property {Number} timeSignature\n     * @for p5.SoundLoop\n     */\n\n    Object.defineProperty(this, 'timeSignature', {\n      get: function get() {\n        return this._timeSignature;\n      },\n      set: function set(timeSig) {\n        if (!this.musicalTimeMode) {\n          console.warn('Changing the timeSignature in \"seconds\" mode has no effect. ' + 'BPM is only relevant in musicalTimeMode ' + 'when the interval is specified as a string ' + '(\"2n\", \"4n\", \"1m\"...etc)');\n        }\n\n        this._timeSignature = timeSig;\n\n        this._update();\n      }\n    });\n    /**\n     * length of the loops interval\n     * @property {Number|String} interval\n     * @for p5.SoundLoop\n     */\n\n    Object.defineProperty(this, 'interval', {\n      get: function get() {\n        return this._interval;\n      },\n      set: function set(interval) {\n        this.musicalTimeMode = typeof interval === 'number' ? false : true;\n        this._interval = interval;\n\n        this._update();\n      }\n    });\n    /**\n     * how many times the callback has been called so far\n     * @property {Number} iterations\n     * @for p5.SoundLoop\n     * @readonly\n     */\n\n    Object.defineProperty(this, 'iterations', {\n      get: function get() {\n        return this.clock.ticks;\n      }\n    });\n    this.callback = callback;\n    /**\n     * musicalTimeMode uses <a href = \"https://github.com/Tonejs/Tone.js/wiki/Time\">Tone.Time</a> convention\n     * true if string, false if number\n     * @property {Boolean} musicalTimeMode\n     */\n\n    this.musicalTimeMode = typeof this._interval === 'number' ? false : true;\n    this._interval = interval || 1;\n    /**\n     * musicalTimeMode variables\n     * modify these only when the interval is specified in musicalTime format as a string\n     */\n\n    this._timeSignature = 4;\n    this._bpm = 60;\n    this.isPlaying = false;\n    /**\n     * Set a limit to the number of loops to play. defaults to Infinity\n     * @property {Number} maxIterations\n     */\n\n    this.maxIterations = Infinity;\n    var self = this;\n    this.clock = new Clock_default.a({\n      callback: function callback(time) {\n        var timeFromNow = time - main.audiocontext.currentTime;\n        /**\n         * Do not initiate the callback if timeFromNow is < 0\n         * This ususually occurs for a few milliseconds when the page\n         * is not fully loaded\n         *\n         * The callback should only be called until maxIterations is reached\n         */\n\n        if (timeFromNow > 0 && self.iterations <= self.maxIterations) {\n          self.callback(timeFromNow);\n        }\n      },\n      frequency: this._calcFreq()\n    });\n  }\n  /**\n   * Start the loop\n   * @method  start\n   * @for p5.SoundLoop\n   * @param  {Number} [timeFromNow] schedule a starting time\n   */\n\n\n  soundLoop_createClass(SoundLoop, [{\n    key: \"start\",\n    value: function start(timeFromNow) {\n      var t = timeFromNow || 0;\n      var now = main.audiocontext.currentTime;\n\n      if (!this.isPlaying) {\n        this.clock.start(now + t);\n        this.isPlaying = true;\n      }\n    }\n    /**\n     * Stop the loop\n     * @method  stop\n     * @for p5.SoundLoop\n     * @param  {Number} [timeFromNow] schedule a stopping time\n     */\n\n  }, {\n    key: \"stop\",\n    value: function stop(timeFromNow) {\n      var t = timeFromNow || 0;\n      var now = main.audiocontext.currentTime;\n\n      if (this.isPlaying) {\n        this.clock.stop(now + t);\n        this.isPlaying = false;\n      }\n    }\n    /**\n     * Pause the loop\n     * @method pause\n     * @for p5.SoundLoop\n     * @param  {Number} [timeFromNow] schedule a pausing time\n     */\n\n  }, {\n    key: \"pause\",\n    value: function pause(timeFromNow) {\n      var t = timeFromNow || 0;\n      var now = main.audiocontext.currentTime;\n\n      if (this.isPlaying) {\n        this.clock.pause(now + t);\n        this.isPlaying = false;\n      }\n    }\n    /**\n     * Synchronize loops. Use this method to start two or more loops in synchronization\n     * or to start a loop in synchronization with a loop that is already playing\n     * This method will schedule the implicit loop in sync with the explicit master loop\n     * i.e. loopToStart.syncedStart(loopToSyncWith)\n     *\n     * @method  syncedStart\n     * @for p5.SoundLoop\n     * @param  {Object} otherLoop   a p5.SoundLoop to sync with\n     * @param  {Number} [timeFromNow] Start the loops in sync after timeFromNow seconds\n     */\n\n  }, {\n    key: \"syncedStart\",\n    value: function syncedStart(otherLoop, timeFromNow) {\n      var t = timeFromNow || 0;\n      var now = main.audiocontext.currentTime;\n\n      if (!otherLoop.isPlaying) {\n        otherLoop.clock.start(now + t);\n        otherLoop.isPlaying = true;\n        this.clock.start(now + t);\n        this.isPlaying = true;\n      } else if (otherLoop.isPlaying) {\n        var time = otherLoop.clock._nextTick - main.audiocontext.currentTime;\n        this.clock.start(now + time);\n        this.isPlaying = true;\n      }\n    }\n    /**\n     * Updates frequency value, reflected in next callback\n     * @private\n     * @for p5.SoundLoop\n     * @method  _update\n     */\n\n  }, {\n    key: \"_update\",\n    value: function _update() {\n      this.clock.frequency.value = this._calcFreq();\n    }\n    /**\n     * Calculate the frequency of the clock's callback based on bpm, interval, and timesignature\n     * @private\n     * @for p5.SoundLoop\n     * @method  _calcFreq\n     * @return {Number} new clock frequency value\n     */\n\n  }, {\n    key: \"_calcFreq\",\n    value: function _calcFreq() {\n      if (typeof this._interval === 'number') {\n        this.musicalTimeMode = false;\n        return 1 / this._interval;\n      } \n      else if (typeof this._interval === 'string') {\n          this.musicalTimeMode = true;\n          return this._bpm / 60 / this._convertNotation(this._interval) * (this._timeSignature / 4);\n        }\n    }\n    /**\n     * Convert notation from musical time format to seconds\n     * Uses <a href = \"https://github.com/Tonejs/Tone.js/wiki/Time\">Tone.Time</a> convention\n     * @private\n     * @for p5.SoundLoop\n     * @method _convertNotation\n     * @param  {String} value value to be converted\n     * @return {Number}       converted value in seconds\n     */\n\n  }, {\n    key: \"_convertNotation\",\n    value: function _convertNotation(value) {\n      var type = value.slice(-1);\n      value = Number(value.slice(0, -1));\n\n      switch (type) {\n        case 'm':\n          return this._measure(value);\n\n        case 'n':\n          return this._note(value);\n\n        default:\n          console.warn('Specified interval is not formatted correctly. See Tone.js ' + 'timing reference for more info: https://github.com/Tonejs/Tone.js/wiki/Time');\n      }\n    }\n    /**\n     * Helper conversion methods of measure and note\n     * @private\n     * @for p5.SoundLoop\n     * @method  _measure\n     */\n\n  }, {\n    key: \"_measure\",\n    value: function _measure(value) {\n      return value * this._timeSignature;\n    }\n    /**\n     * @private\n     * @method  _note\n     * @for p5.SoundLoop\n     */\n\n  }, {\n    key: \"_note\",\n    value: function _note(value) {\n      return this._timeSignature / value;\n    }\n  }]);\n\n  return SoundLoop;\n}();\n\n var soundLoop = (soundLoop_SoundLoop);\nfunction compressor_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { compressor_typeof = function _typeof(obj) { return typeof obj; }; } else { compressor_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return compressor_typeof(obj); }\n\nfunction compressor_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction compressor_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction compressor_createClass(Constructor, protoProps, staticProps) { if (protoProps) compressor_defineProperties(Constructor.prototype, protoProps); if (staticProps) compressor_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction compressor_possibleConstructorReturn(self, call) { if (call && (compressor_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return compressor_assertThisInitialized(self); }\n\nfunction compressor_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction compressor_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { compressor_get = Reflect.get; } else { compressor_get = function _get(target, property, receiver) { var base = compressor_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return compressor_get(target, property, receiver || target); }\n\nfunction compressor_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = compressor_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction compressor_getPrototypeOf(o) { compressor_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return compressor_getPrototypeOf(o); }\n\nfunction compressor_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) compressor_setPrototypeOf(subClass, superClass); }\n\nfunction compressor_setPrototypeOf(o, p) { compressor_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return compressor_setPrototypeOf(o, p); }\n\n\n/**\n * Compressor is an audio effect class that performs dynamics compression\n * on an audio input source. This is a very commonly used technique in music\n * and sound production. Compression creates an overall louder, richer,\n * and fuller sound by lowering the volume of louds and raising that of softs.\n * Compression can be used to avoid clipping (sound distortion due to\n * peaks in volume) and is especially useful when many sounds are played\n * at once. Compression can be used on indivudal sound sources in addition\n * to the main output.\n *\n * This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n * Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n * <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n * <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n *\n * @class p5.Compressor\n * @constructor\n * @extends p5.Effect\n *\n *\n */\n\nvar Compressor =\nfunction (_Effect) {\n  compressor_inherits(Compressor, _Effect);\n\n  function Compressor() {\n    var _this;\n\n    compressor_classCallCheck(this, Compressor);\n\n    _this = compressor_possibleConstructorReturn(this, compressor_getPrototypeOf(Compressor).call(this));\n    /**\n     *\n     * The p5.Compressor is built with a <a href=\"https://www.w3.org/TR/webaudio/#the-dynamicscompressornode-interface\"\n     *   target=\"_blank\" title=\"W3 spec for Dynamics Compressor Node\">Web Audio Dynamics Compressor Node\n     *   </a>\n     * @property {AudioNode} compressor\n     */\n\n    _this.compressor = _this.ac.createDynamicsCompressor();\n\n    _this.input.connect(_this.compressor);\n\n    _this.compressor.connect(_this.wet);\n\n    return _this;\n  }\n  /**\n   * Performs the same function as .connect, but also accepts\n   * optional parameters to set compressor's audioParams\n   * @method process\n   * @for p5.Compressor\n   *\n   * @param {Object} src         Sound source to be connected\n   *\n   * @param {Number} [attack]     The amount of time (in seconds) to reduce the gain by 10dB,\n   *                            default = .003, range 0 - 1\n   * @param {Number} [knee]       A decibel value representing the range above the\n   *                            threshold where the curve smoothly transitions to the \"ratio\" portion.\n   *                            default = 30, range 0 - 40\n   * @param {Number} [ratio]      The amount of dB change in input for a 1 dB change in output\n   *                            default = 12, range 1 - 20\n   * @param {Number} [threshold]  The decibel value above which the compression will start taking effect\n   *                            default = -24, range -100 - 0\n   * @param {Number} [release]    The amount of time (in seconds) to increase the gain by 10dB\n   *                            default = .25, range 0 - 1\n   */\n\n\n  compressor_createClass(Compressor, [{\n    key: \"process\",\n    value: function process(src, attack, knee, ratio, threshold, release) {\n      src.connect(this.input);\n      this.set(attack, knee, ratio, threshold, release);\n    }\n    /**\n     * Set the paramters of a compressor.\n     * @method  set\n     * @for p5.Compressor\n     * @param {Number} attack     The amount of time (in seconds) to reduce the gain by 10dB,\n     *                            default = .003, range 0 - 1\n     * @param {Number} knee       A decibel value representing the range above the\n     *                            threshold where the curve smoothly transitions to the \"ratio\" portion.\n     *                            default = 30, range 0 - 40\n     * @param {Number} ratio      The amount of dB change in input for a 1 dB change in output\n     *                            default = 12, range 1 - 20\n     * @param {Number} threshold  The decibel value above which the compression will start taking effect\n     *                            default = -24, range -100 - 0\n     * @param {Number} release    The amount of time (in seconds) to increase the gain by 10dB\n     *                            default = .25, range 0 - 1\n     */\n\n  }, {\n    key: \"set\",\n    value: function set(attack, knee, ratio, threshold, release) {\n      if (typeof attack !== 'undefined') {\n        this.attack(attack);\n      }\n\n      if (typeof knee !== 'undefined') {\n        this.knee(knee);\n      }\n\n      if (typeof ratio !== 'undefined') {\n        this.ratio(ratio);\n      }\n\n      if (typeof threshold !== 'undefined') {\n        this.threshold(threshold);\n      }\n\n      if (typeof release !== 'undefined') {\n        this.release(release);\n      }\n    }\n    /**\n     * Get current attack or set value w/ time ramp\n     *\n     *\n     * @method attack\n     * @for p5.Compressor\n     * @param {Number} [attack] Attack is the amount of time (in seconds) to reduce the gain by 10dB,\n     *                          default = .003, range 0 - 1\n     * @param {Number} [time]  Assign time value to schedule the change in value\n     */\n\n  }, {\n    key: \"attack\",\n    value: function attack(_attack, time) {\n      var t = time || 0;\n\n      if (typeof _attack === 'number') {\n        this.compressor.attack.value = _attack;\n        this.compressor.attack.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.compressor.attack.linearRampToValueAtTime(_attack, this.ac.currentTime + 0.02 + t);\n      } else if (typeof _attack !== 'undefined') {\n        _attack.connect(this.compressor.attack);\n      }\n\n      return this.compressor.attack.value;\n    }\n    /**\n     * Get current knee or set value w/ time ramp\n     *\n     * @method knee\n     * @for p5.Compressor\n     * @param {Number} [knee] A decibel value representing the range above the\n     *                        threshold where the curve smoothly transitions to the \"ratio\" portion.\n     *                        default = 30, range 0 - 40\n     * @param {Number} [time]  Assign time value to schedule the change in value\n     */\n\n  }, {\n    key: \"knee\",\n    value: function knee(_knee, time) {\n      var t = time || 0;\n\n      if (typeof _knee === 'number') {\n        this.compressor.knee.value = _knee;\n        this.compressor.knee.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.compressor.knee.linearRampToValueAtTime(_knee, this.ac.currentTime + 0.02 + t);\n      } else if (typeof _knee !== 'undefined') {\n        _knee.connect(this.compressor.knee);\n      }\n\n      return this.compressor.knee.value;\n    }\n    /**\n     * Get current ratio or set value w/ time ramp\n     * @method ratio\n     * @for p5.Compressor\n     * @param {Number} [ratio]      The amount of dB change in input for a 1 dB change in output\n     *                            default = 12, range 1 - 20\n     * @param {Number} [time]  Assign time value to schedule the change in value\n     */\n\n  }, {\n    key: \"ratio\",\n    value: function ratio(_ratio, time) {\n      var t = time || 0;\n\n      if (typeof _ratio === 'number') {\n        this.compressor.ratio.value = _ratio;\n        this.compressor.ratio.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.compressor.ratio.linearRampToValueAtTime(_ratio, this.ac.currentTime + 0.02 + t);\n      } else if (typeof _ratio !== 'undefined') {\n        _ratio.connect(this.compressor.ratio);\n      }\n\n      return this.compressor.ratio.value;\n    }\n    /**\n     * Get current threshold or set value w/ time ramp\n     * @method threshold\n     * @for p5.Compressor\n     * @param {Number} threshold  The decibel value above which the compression will start taking effect\n     *                            default = -24, range -100 - 0\n     * @param {Number} [time]  Assign time value to schedule the change in value\n     */\n\n  }, {\n    key: \"threshold\",\n    value: function threshold(_threshold, time) {\n      var t = time || 0;\n\n      if (typeof _threshold === 'number') {\n        this.compressor.threshold.value = _threshold;\n        this.compressor.threshold.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.compressor.threshold.linearRampToValueAtTime(_threshold, this.ac.currentTime + 0.02 + t);\n      } else if (typeof _threshold !== 'undefined') {\n        _threshold.connect(this.compressor.threshold);\n      }\n\n      return this.compressor.threshold.value;\n    }\n    /**\n     * Get current release or set value w/ time ramp\n     * @method release\n     * @for p5.Compressor\n     * @param {Number} release    The amount of time (in seconds) to increase the gain by 10dB\n     *                            default = .25, range 0 - 1\n     *\n     * @param {Number} [time]  Assign time value to schedule the change in value\n     */\n\n  }, {\n    key: \"release\",\n    value: function release(_release, time) {\n      var t = time || 0;\n\n      if (typeof _release === 'number') {\n        this.compressor.release.value = _release;\n        this.compressor.release.cancelScheduledValues(this.ac.currentTime + 0.01 + t);\n        this.compressor.release.linearRampToValueAtTime(_release, this.ac.currentTime + 0.02 + t);\n      } else if (typeof number !== 'undefined') {\n        _release.connect(this.compressor.release);\n      }\n\n      return this.compressor.release.value;\n    }\n    /**\n     * Return the current reduction value\n     *\n     * @method reduction\n     * @for p5.Compressor\n     * @return {Number} Value of the amount of gain reduction that is applied to the signal\n     */\n\n  }, {\n    key: \"reduction\",\n    value: function reduction() {\n      return this.compressor.reduction.value;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      compressor_get(compressor_getPrototypeOf(Compressor.prototype), \"dispose\", this).call(this);\n\n      if (this.compressor) {\n        this.compressor.disconnect();\n        delete this.compressor;\n      }\n    }\n  }]);\n\n  return Compressor;\n}(effect);\n\n var compressor = (Compressor);\nfunction peakDetect_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction peakDetect_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction peakDetect_createClass(Constructor, protoProps, staticProps) { if (protoProps) peakDetect_defineProperties(Constructor.prototype, protoProps); if (staticProps) peakDetect_defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n *  <p>PeakDetect works in conjunction with p5.FFT to\n *  look for onsets in some or all of the frequency spectrum.\n *  </p>\n *  <p>\n *  To use p5.PeakDetect, call <code>update</code> in the draw loop\n *  and pass in a p5.FFT object.\n *  </p>\n *  <p>\n *  You can listen for a specific part of the frequency spectrum by\n *  setting the range between <code>freq1</code> and <code>freq2</code>.\n *  </p>\n *\n *  <p><code>threshold</code> is the threshold for detecting a peak,\n *  scaled between 0 and 1. It is logarithmic, so 0.1 is half as loud\n *  as 1.0.</p>\n *\n *  <p>\n *  The update method is meant to be run in the draw loop, and\n *  <b>frames</b> determines how many loops must pass before\n *  another peak can be detected.\n *  For example, if the frameRate() = 60, you could detect the beat of a\n *  120 beat-per-minute song with this equation:\n *  <code> framesPerPeak = 60 / (estimatedBPM / 60 );</code>\n *  </p>\n *\n *  <p>\n *  Based on example contribtued by @b2renger, and a simple beat detection\n *  explanation by <a\n *  href=\"http://www.airtightinteractive.com/2013/10/making-audio-reactive-visuals/\"\n *  target=\"_blank\">Felix Turner</a>.\n *  </p>\n *\n *  @class  p5.PeakDetect\n *  @constructor\n *  @param {Number} [freq1]     lowFrequency - defaults to 20Hz\n *  @param {Number} [freq2]     highFrequency - defaults to 20000 Hz\n *  @param {Number} [threshold] Threshold for detecting a beat between 0 and 1\n *                            scaled logarithmically where 0.1 is 1/2 the loudness\n *                            of 1.0. Defaults to 0.35.\n *  @param {Number} [framesPerPeak]     Defaults to 20.\n *  @example\n *  <div><code>\n *\n *  var cnv, soundFile, fft, peakDetect;\n *  var ellipseWidth = 10;\n *\n *  function preload() {\n *    soundFile = loadSound('assets/beat.mp3');\n *  }\n *\n *  function setup() {\n *    background(0);\n *    noStroke();\n *    fill(255);\n *    textAlign(CENTER);\n *\n *    // p5.PeakDetect requires a p5.FFT\n *    fft = new p5.FFT();\n *    peakDetect = new p5.PeakDetect();\n *  }\n *\n *  function draw() {\n *    background(0);\n *    text('click to play/pause', width/2, height/2);\n *\n *    // peakDetect accepts an fft post-analysis\n *    fft.analyze();\n *    peakDetect.update(fft);\n *\n *    if ( peakDetect.isDetected ) {\n *      ellipseWidth = 50;\n *    } else {\n *      ellipseWidth *= 0.95;\n *    }\n *\n *    ellipse(width/2, height/2, ellipseWidth, ellipseWidth);\n *  }\n *\n *  // toggle play/stop when canvas is clicked\n *  function mouseClicked() {\n *    if (mouseX > 0 && mouseX < width && mouseY > 0 && mouseY < height) {\n *      if (soundFile.isPlaying() ) {\n *        soundFile.stop();\n *      } else {\n *        soundFile.play();\n *      }\n *    }\n *  }\n *  </code></div>\n */\nvar PeakDetect =\nfunction () {\n  function PeakDetect(freq1, freq2, threshold, _framesPerPeak) {\n    peakDetect_classCallCheck(this, PeakDetect);\n\n    this.framesPerPeak = _framesPerPeak || 20;\n    this.framesSinceLastPeak = 0;\n    this.decayRate = 0.95;\n    this.threshold = threshold || 0.35;\n    this.cutoff = 0; \n\n    this.cutoffMult = 1.5;\n    this.energy = 0;\n    this.penergy = 0; \n\n    this.currentValue = 0;\n    /**\n     *  isDetected is set to true when a peak is detected.\n     *\n     *  @attribute isDetected {Boolean}\n     *  @default  false\n     */\n\n    this.isDetected = false;\n    this.f1 = freq1 || 40;\n    this.f2 = freq2 || 20000; \n\n    this._onPeak = function () {};\n  }\n  /**\n   *  The update method is run in the draw loop.\n   *\n   *  Accepts an FFT object. You must call .analyze()\n   *  on the FFT object prior to updating the peakDetect\n   *  because it relies on a completed FFT analysis.\n   *\n   *  @method  update\n   *  @param  {p5.FFT} fftObject A p5.FFT object\n   */\n\n\n  peakDetect_createClass(PeakDetect, [{\n    key: \"update\",\n    value: function update(fftObject) {\n      var nrg = this.energy = fftObject.getEnergy(this.f1, this.f2) / 255;\n\n      if (nrg > this.cutoff && nrg > this.threshold && nrg - this.penergy > 0) {\n        this._onPeak();\n\n        this.isDetected = true; \n\n        this.cutoff = nrg * this.cutoffMult;\n        this.framesSinceLastPeak = 0;\n      } else {\n        this.isDetected = false;\n\n        if (this.framesSinceLastPeak <= this.framesPerPeak) {\n          this.framesSinceLastPeak++;\n        } else {\n          this.cutoff *= this.decayRate;\n          this.cutoff = Math.max(this.cutoff, this.threshold);\n        }\n      }\n\n      this.currentValue = nrg;\n      this.penergy = nrg;\n    }\n    /**\n     *  onPeak accepts two arguments: a function to call when\n     *  a peak is detected. The value of the peak,\n     *  between 0.0 and 1.0, is passed to the callback.\n     *\n     *  @method  onPeak\n     *  @param  {Function} callback Name of a function that will\n     *                              be called when a peak is\n     *                              detected.\n     *  @param  {Object}   [val]    Optional value to pass\n     *                              into the function when\n     *                              a peak is detected.\n     *  @example\n     *  <div><code>\n     *  var cnv, soundFile, fft, peakDetect;\n     *  var ellipseWidth = 0;\n     *\n     *  function preload() {\n     *    soundFile = loadSound('assets/beat.mp3');\n     *  }\n     *\n     *  function setup() {\n     *    cnv = createCanvas(100,100);\n     *    textAlign(CENTER);\n     *\n     *    fft = new p5.FFT();\n     *    peakDetect = new p5.PeakDetect();\n     *\n     *    setupSound();\n     *\n     *    // when a beat is detected, call triggerBeat()\n     *    peakDetect.onPeak(triggerBeat);\n     *  }\n     *\n     *  function draw() {\n     *    background(0);\n     *    fill(255);\n     *    text('click to play', width/2, height/2);\n     *\n     *    fft.analyze();\n     *    peakDetect.update(fft);\n     *\n     *    ellipseWidth *= 0.95;\n     *    ellipse(width/2, height/2, ellipseWidth, ellipseWidth);\n     *  }\n     *\n     *  // this function is called by peakDetect.onPeak\n     *  function triggerBeat() {\n     *    ellipseWidth = 50;\n     *  }\n     *\n     *  // mouseclick starts/stops sound\n     *  function setupSound() {\n     *    cnv.mouseClicked( function() {\n     *      if (soundFile.isPlaying() ) {\n     *        soundFile.stop();\n     *      } else {\n     *        soundFile.play();\n     *      }\n     *    });\n     *  }\n     *  </code></div>\n     */\n\n  }, {\n    key: \"onPeak\",\n    value: function onPeak(callback, val) {\n      var self = this;\n\n      self._onPeak = function () {\n        callback(self.energy, val);\n      };\n    }\n  }]);\n\n  return PeakDetect;\n}();\n\n var peakDetect = (PeakDetect);\nfunction soundRecorder_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction soundRecorder_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction soundRecorder_createClass(Constructor, protoProps, staticProps) { if (protoProps) soundRecorder_defineProperties(Constructor.prototype, protoProps); if (staticProps) soundRecorder_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar soundRecorder_ac = main.audiocontext;\n/**\n *  <p>Record sounds for playback and/or to save as a .wav file.\n *  The p5.SoundRecorder records all sound output from your sketch,\n *  or can be assigned a specific source with setInput().</p>\n *  <p>The record() method accepts a p5.SoundFile as a parameter.\n *  When playback is stopped (either after the given amount of time,\n *  or with the stop() method), the p5.SoundRecorder will send its\n *  recording to that p5.SoundFile for playback.</p>\n *\n *  @class p5.SoundRecorder\n *  @constructor\n *  @example\n *  <div><code>\n *  let mic, recorder, soundFile;\n *  let state = 0;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(canvasPressed);\n *    background(220);\n *    textAlign(CENTER, CENTER);\n *\n *    // create an audio in\n *    mic = new p5.AudioIn();\n *\n *    // prompts user to enable their browser mic\n *    mic.start();\n *\n *    // create a sound recorder\n *    recorder = new p5.SoundRecorder();\n *\n *    // connect the mic to the recorder\n *    recorder.setInput(mic);\n *\n *    // this sound file will be used to\n *    // playback & save the recording\n *    soundFile = new p5.SoundFile();\n *\n *    text('tap to record', width/2, height/2);\n *  }\n *\n *  function canvasPressed() {\n *    // ensure audio is enabled\n *    userStartAudio();\n *\n *    // make sure user enabled the mic\n *    if (state === 0 && mic.enabled) {\n *\n *      // record to our p5.SoundFile\n *      recorder.record(soundFile);\n *\n *      background(255,0,0);\n *      text('Recording!', width/2, height/2);\n *      state++;\n *    }\n *    else if (state === 1) {\n *      background(0,255,0);\n *\n *      // stop recorder and\n *      // send result to soundFile\n *      recorder.stop();\n *\n *      text('Done! Tap to play and download', width/2, height/2, width - 20);\n *      state++;\n *    }\n *\n *    else if (state === 2) {\n *      soundFile.play(); // play the result!\n *      save(soundFile, 'mySound.wav');\n *      state++;\n *    }\n *  }\n *  </div></code>\n */\n\nvar soundRecorder_SoundRecorder =\nfunction () {\n  function SoundRecorder() {\n    soundRecorder_classCallCheck(this, SoundRecorder);\n\n    this.input = soundRecorder_ac.createGain();\n    this.output = soundRecorder_ac.createGain();\n    this._inputChannels = 2;\n    this._outputChannels = 2; \n\n    var workletBufferSize = safeBufferSize(1024);\n    this._workletNode = new AudioWorkletNode(soundRecorder_ac, processorNames_default.a.recorderProcessor, {\n      outputChannelCount: [this._outputChannels],\n      processorOptions: {\n        numInputChannels: this._inputChannels,\n        bufferSize: workletBufferSize\n      }\n    });\n\n    this._workletNode.port.onmessage = function (event) {\n      if (event.data.name === 'buffers') {\n        var buffers = [new Float32Array(event.data.leftBuffer), new Float32Array(event.data.rightBuffer)];\n\n        this._callback(buffers);\n      }\n    }.bind(this);\n    /**\n     *  callback invoked when the recording is over\n     *  @private\n     *  @type Function(Float32Array)\n     */\n\n\n    this._callback = function () {}; \n\n\n    this._workletNode.connect(p5.soundOut._silentNode);\n\n    this.setInput(); \n\n    main.soundArray.push(this);\n  }\n  /**\n   *  Connect a specific device to the p5.SoundRecorder.\n   *  If no parameter is given, p5.SoundRecorer will record\n   *  all audible p5.sound from your sketch.\n   *\n   *  @method  setInput\n   *  @for p5.SoundRecorder\n   *  @param {Object} [unit] p5.sound object or a web audio unit\n   *                         that outputs sound\n   */\n\n\n  soundRecorder_createClass(SoundRecorder, [{\n    key: \"setInput\",\n    value: function setInput(unit) {\n      this.input.disconnect();\n      this.input = null;\n      this.input = soundRecorder_ac.createGain();\n      this.input.connect(this._workletNode);\n      this.input.connect(this.output);\n\n      if (unit) {\n        unit.connect(this.input);\n      } else {\n        p5.soundOut.output.connect(this.input);\n      }\n    }\n    /**\n     *  Start recording. To access the recording, provide\n     *  a p5.SoundFile as the first parameter. The p5.SoundRecorder\n     *  will send its recording to that p5.SoundFile for playback once\n     *  recording is complete. Optional parameters include duration\n     *  (in seconds) of the recording, and a callback function that\n     *  will be called once the complete recording has been\n     *  transfered to the p5.SoundFile.\n     *\n     *  @method  record\n     *  @for p5.SoundRecorder\n     *  @param  {p5.SoundFile}   soundFile    p5.SoundFile\n     *  @param  {Number}   [duration] Time (in seconds)\n     *  @param  {Function} [callback] The name of a function that will be\n     *                                called once the recording completes\n     */\n\n  }, {\n    key: \"record\",\n    value: function record(sFile, duration, callback) {\n      this._workletNode.port.postMessage({\n        name: 'start',\n        duration: duration\n      });\n\n      if (sFile && callback) {\n        this._callback = function (buffer) {\n          sFile.setBuffer(buffer);\n          callback();\n        };\n      } else if (sFile) {\n        this._callback = function (buffer) {\n          sFile.setBuffer(buffer);\n        };\n      }\n    }\n    /**\n     *  Stop the recording. Once the recording is stopped,\n     *  the results will be sent to the p5.SoundFile that\n     *  was given on .record(), and if a callback function\n     *  was provided on record, that function will be called.\n     *\n     *  @method  stop\n     *  @for p5.SoundRecorder\n     */\n\n  }, {\n    key: \"stop\",\n    value: function stop() {\n      this._workletNode.port.postMessage({\n        name: 'stop'\n      });\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var index = main.soundArray.indexOf(this);\n      main.soundArray.splice(index, 1);\n\n      this._callback = function () {};\n\n      if (this.input) {\n        this.input.disconnect();\n      }\n\n      this.input = null;\n      this._workletNode = null;\n    }\n  }]);\n\n  return SoundRecorder;\n}();\n\n var soundRecorder = (soundRecorder_SoundRecorder);\nfunction distortion_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { distortion_typeof = function _typeof(obj) { return typeof obj; }; } else { distortion_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return distortion_typeof(obj); }\n\nfunction distortion_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction distortion_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction distortion_createClass(Constructor, protoProps, staticProps) { if (protoProps) distortion_defineProperties(Constructor.prototype, protoProps); if (staticProps) distortion_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction distortion_possibleConstructorReturn(self, call) { if (call && (distortion_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return distortion_assertThisInitialized(self); }\n\nfunction distortion_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction distortion_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { distortion_get = Reflect.get; } else { distortion_get = function _get(target, property, receiver) { var base = distortion_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return distortion_get(target, property, receiver || target); }\n\nfunction distortion_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = distortion_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction distortion_getPrototypeOf(o) { distortion_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return distortion_getPrototypeOf(o); }\n\nfunction distortion_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) distortion_setPrototypeOf(subClass, superClass); }\n\nfunction distortion_setPrototypeOf(o, p) { distortion_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return distortion_setPrototypeOf(o, p); }\n\n\n\nfunction makeDistortionCurve(amount) {\n  var k = typeof amount === 'number' ? amount : 50;\n  var numSamples = 44100;\n  var curve = new Float32Array(numSamples);\n  var deg = Math.PI / 180;\n  var i = 0;\n  var x;\n\n  for (; i < numSamples; ++i) {\n    x = i * 2 / numSamples - 1;\n    curve[i] = (3 + k) * x * 20 * deg / (Math.PI + k * Math.abs(x));\n  }\n\n  return curve;\n}\n/**\n * A Distortion effect created with a Waveshaper Node,\n * with an approach adapted from\n * [Kevin Ennis](http://stackoverflow.com/questions/22312841/waveshaper-node-in-webaudio-how-to-emulate-distortion)\n *\n * This class extends <a href = \"/reference/#/p5.Effect\">p5.Effect</a>.\n * Methods <a href = \"/reference/#/p5.Effect/amp\">amp()</a>, <a href = \"/reference/#/p5.Effect/chain\">chain()</a>,\n * <a href = \"/reference/#/p5.Effect/drywet\">drywet()</a>, <a href = \"/reference/#/p5.Effect/connect\">connect()</a>, and\n * <a href = \"/reference/#/p5.Effect/disconnect\">disconnect()</a> are available.\n *\n * @class p5.Distortion\n * @extends p5.Effect\n * @constructor\n * @param {Number} [amount=0.25] Unbounded distortion amount.\n *                                Normal values range from 0-1.\n * @param {String} [oversample='none'] 'none', '2x', or '4x'.\n *\n */\n\n\nvar Distortion =\nfunction (_Effect) {\n  distortion_inherits(Distortion, _Effect);\n\n  function Distortion(amount, oversample) {\n    var _this;\n\n    distortion_classCallCheck(this, Distortion);\n\n    _this = distortion_possibleConstructorReturn(this, distortion_getPrototypeOf(Distortion).call(this));\n\n    if (typeof amount === 'undefined') {\n      amount = 0.25;\n    }\n\n    if (typeof amount !== 'number') {\n      throw new Error('amount must be a number');\n    }\n\n    if (typeof oversample === 'undefined') {\n      oversample = '2x';\n    }\n\n    if (typeof oversample !== 'string') {\n      throw new Error('oversample must be a String');\n    }\n\n    var curveAmount = p5.prototype.map(amount, 0.0, 1.0, 0, 2000);\n    /**\n     *  The p5.Distortion is built with a\n     *  <a href=\"http://www.w3.org/TR/webaudio/#WaveShaperNode\">\n     *  Web Audio WaveShaper Node</a>.\n     *\n     *  @property {AudioNode} WaveShaperNode\n     */\n\n    _this.waveShaperNode = _this.ac.createWaveShaper();\n    _this.amount = curveAmount;\n    _this.waveShaperNode.curve = makeDistortionCurve(curveAmount);\n    _this.waveShaperNode.oversample = oversample;\n\n    _this.input.connect(_this.waveShaperNode);\n\n    _this.waveShaperNode.connect(_this.wet);\n\n    return _this;\n  }\n  /**\n   * Process a sound source, optionally specify amount and oversample values.\n   *\n   * @method process\n   * @for p5.Distortion\n   * @param {Number} [amount=0.25] Unbounded distortion amount.\n   *                                Normal values range from 0-1.\n   * @param {String} [oversample='none'] 'none', '2x', or '4x'.\n   */\n\n\n  distortion_createClass(Distortion, [{\n    key: \"process\",\n    value: function process(src, amount, oversample) {\n      src.connect(this.input);\n      this.set(amount, oversample);\n    }\n    /**\n     * Set the amount and oversample of the waveshaper distortion.\n     *\n     * @method set\n     * @for p5.Distortion\n     * @param {Number} [amount=0.25] Unbounded distortion amount.\n     *                                Normal values range from 0-1.\n     * @param {String} [oversample='none'] 'none', '2x', or '4x'.\n     */\n\n  }, {\n    key: \"set\",\n    value: function set(amount, oversample) {\n      if (amount) {\n        var curveAmount = p5.prototype.map(amount, 0.0, 1.0, 0, 2000);\n        this.amount = curveAmount;\n        this.waveShaperNode.curve = makeDistortionCurve(curveAmount);\n      }\n\n      if (oversample) {\n        this.waveShaperNode.oversample = oversample;\n      }\n    }\n    /**\n     *  Return the distortion amount, typically between 0-1.\n     *\n     *  @method  getAmount\n     *  @for p5.Distortion\n     *  @return {Number} Unbounded distortion amount.\n     *                   Normal values range from 0-1.\n     */\n\n  }, {\n    key: \"getAmount\",\n    value: function getAmount() {\n      return this.amount;\n    }\n    /**\n     *  Return the oversampling.\n     *\n     *  @method getOversample\n     *  @for p5.Distortion\n     *  @return {String} Oversample can either be 'none', '2x', or '4x'.\n     */\n\n  }, {\n    key: \"getOversample\",\n    value: function getOversample() {\n      return this.waveShaperNode.oversample;\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      distortion_get(distortion_getPrototypeOf(Distortion.prototype), \"dispose\", this).call(this);\n\n      if (this.waveShaperNode) {\n        this.waveShaperNode.disconnect();\n        this.waveShaperNode = null;\n      }\n    }\n  }]);\n\n  return Distortion;\n}(effect);\n\n var distortion = (Distortion);\nfunction gain_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction gain_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction gain_createClass(Constructor, protoProps, staticProps) { if (protoProps) gain_defineProperties(Constructor.prototype, protoProps); if (staticProps) gain_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n/**\n *  A gain node is usefull to set the relative volume of sound.\n *  It's typically used to build mixers.\n *\n *  @class p5.Gain\n *  @constructor\n *  @example\n *  <div><code>\n *\n *  // load two soundfile and crossfade beetween them\n *  let sound1,sound2;\n *  let sound1Gain, sound2Gain, mixGain;\n *  function preload(){\n *    soundFormats('ogg', 'mp3');\n *    sound1 = loadSound('assets/Damscray_-_Dancing_Tiger_01');\n *    sound2 = loadSound('assets/beat');\n *  }\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(startSound);\n *    // create a 'mix' gain bus to which we will connect both soundfiles\n *    mixGain = new p5.Gain();\n *    mixGain.connect();\n *    sound1.disconnect(); // diconnect from p5 output\n *    sound1Gain = new p5.Gain(); // setup a gain node\n *    sound1Gain.setInput(sound1); // connect the first sound to its input\n *    sound1Gain.connect(mixGain); // connect its output to the final mix bus\n *    sound2.disconnect();\n *    sound2Gain = new p5.Gain();\n *    sound2Gain.setInput(sound2);\n *    sound2Gain.connect(mixGain);\n *  }\n *  function startSound() {\n *    sound1.loop();\n *    sound2.loop();\n *    loop();\n *  }\n *  function mouseReleased() {\n *    sound1.stop();\n *    sound2.stop();\n *  }\n *  function draw(){\n *    background(220);\n *    textAlign(CENTER);\n *    textSize(11);\n *    fill(0);\n *    if (!sound1.isPlaying()) {\n *      text('tap and drag to play', width/2, height/2);\n *      return;\n *    }\n *    // map the horizontal position of the mouse to values useable for volume    *  control of sound1\n *    var sound1Volume = constrain(map(mouseX,width,0,0,1), 0, 1);\n *    var sound2Volume = 1-sound1Volume;\n *    sound1Gain.amp(sound1Volume);\n *    sound2Gain.amp(sound2Volume);\n *    // map the vertical position of the mouse to values useable for 'output    *  volume control'\n *    var outputVolume = constrain(map(mouseY,height,0,0,1), 0, 1);\n *    mixGain.amp(outputVolume);\n *    text('output', width/2, height - outputVolume * height * 0.9)\n *    fill(255, 0, 255);\n *    textAlign(LEFT);\n *    text('sound1', 5, height - sound1Volume * height * 0.9);\n *    textAlign(RIGHT);\n *    text('sound2', width - 5, height - sound2Volume * height * 0.9);\n *  }\n *</code></div>\n */\n\nvar gain_Gain =\nfunction () {\n  function Gain() {\n    gain_classCallCheck(this, Gain);\n\n    this.ac = main.audiocontext;\n    this.input = this.ac.createGain();\n    this.output = this.ac.createGain(); \n\n    this.input.gain.value = 0.5;\n    this.input.connect(this.output); \n\n    main.soundArray.push(this);\n  }\n  /**\n   *  Connect a source to the gain node.\n   *\n   *  @method  setInput\n   *  @for p5.Gain\n   *  @param  {Object} src     p5.sound / Web Audio object with a sound\n   *                           output.\n   */\n\n\n  gain_createClass(Gain, [{\n    key: \"setInput\",\n    value: function setInput(src) {\n      src.connect(this.input);\n    }\n    /**\n     *  Send output to a p5.sound or web audio object\n     *\n     *  @method  connect\n     *  @for p5.Gain\n     *  @param  {Object} unit\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect(unit) {\n      var u = unit || p5.soundOut.input;\n      this.output.connect(u.input ? u.input : u);\n    }\n    /**\n     *  Disconnect all output.\n     *\n     *  @method disconnect\n     *  @for p5.Gain\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.output) {\n        this.output.disconnect();\n      }\n    }\n    /**\n     *  Set the output level of the gain node.\n     *\n     *  @method  amp\n     *  @for p5.Gain\n     *  @param  {Number} volume amplitude between 0 and 1.0\n     *  @param  {Number} [rampTime] create a fade that lasts rampTime\n     *  @param  {Number} [timeFromNow] schedule this event to happen\n     *                                seconds from now\n     */\n\n  }, {\n    key: \"amp\",\n    value: function amp(vol) {\n      var rampTime = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var tFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var now = main.audiocontext.currentTime;\n      var currentVol = this.output.gain.value;\n      this.output.gain.cancelScheduledValues(now);\n      this.output.gain.linearRampToValueAtTime(currentVol, now + tFromNow);\n      this.output.gain.linearRampToValueAtTime(vol, now + tFromNow + rampTime);\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      var index = main.soundArray.indexOf(this);\n      main.soundArray.splice(index, 1);\n\n      if (this.output) {\n        this.output.disconnect();\n        delete this.output;\n      }\n\n      if (this.input) {\n        this.input.disconnect();\n        delete this.input;\n      }\n    }\n  }]);\n\n  return Gain;\n}();\n\n var gain = (gain_Gain);\nfunction audioVoice_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction audioVoice_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction audioVoice_createClass(Constructor, protoProps, staticProps) { if (protoProps) audioVoice_defineProperties(Constructor.prototype, protoProps); if (staticProps) audioVoice_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n/**\n * Base class for monophonic synthesizers. Any extensions of this class\n * should follow the API and implement the methods below in order to\n * remain compatible with p5.PolySynth();\n *\n * @class p5.AudioVoice\n * @constructor\n */\n\nvar audioVoice_AudioVoice =\nfunction () {\n  function AudioVoice() {\n    audioVoice_classCallCheck(this, AudioVoice);\n\n    this.ac = main.audiocontext;\n    this.output = this.ac.createGain();\n    this.connect();\n    main.soundArray.push(this);\n  }\n\n  audioVoice_createClass(AudioVoice, [{\n    key: \"play\",\n    value: function play(note, velocity, secondsFromNow, sustime) {}\n  }, {\n    key: \"triggerAttack\",\n    value: function triggerAttack(note, velocity, secondsFromNow) {}\n  }, {\n    key: \"triggerRelease\",\n    value: function triggerRelease(secondsFromNow) {}\n  }, {\n    key: \"amp\",\n    value: function amp(vol, rampTime) {}\n    /**\n     * Connect to p5 objects or Web Audio Nodes\n     * @method  connect\n     * @for p5.AudioVoice\n     * @param {Object} unit\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect(unit) {\n      var u = unit || main.input;\n      this.output.connect(u.input ? u.input : u);\n    }\n    /**\n     * Disconnect from soundOut\n     * @method  disconnect\n     * @for p5.AudioVoice\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      this.output.disconnect();\n    }\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      if (this.output) {\n        this.output.disconnect();\n        delete this.output;\n      }\n    }\n  }]);\n\n  return AudioVoice;\n}();\n\n var audioVoice_0 = (audioVoice_AudioVoice);\nfunction monosynth_typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { monosynth_typeof = function _typeof(obj) { return typeof obj; }; } else { monosynth_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return monosynth_typeof(obj); }\n\nfunction monosynth_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction monosynth_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction monosynth_createClass(Constructor, protoProps, staticProps) { if (protoProps) monosynth_defineProperties(Constructor.prototype, protoProps); if (staticProps) monosynth_defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction monosynth_possibleConstructorReturn(self, call) { if (call && (monosynth_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return monosynth_assertThisInitialized(self); }\n\nfunction monosynth_assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction monosynth_get(target, property, receiver) { if (typeof Reflect !== \"undefined\" && Reflect.get) { monosynth_get = Reflect.get; } else { monosynth_get = function _get(target, property, receiver) { var base = monosynth_superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(receiver); } return desc.value; }; } return monosynth_get(target, property, receiver || target); }\n\nfunction monosynth_superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = monosynth_getPrototypeOf(object); if (object === null) break; } return object; }\n\nfunction monosynth_getPrototypeOf(o) { monosynth_getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return monosynth_getPrototypeOf(o); }\n\nfunction monosynth_inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) monosynth_setPrototypeOf(subClass, superClass); }\n\nfunction monosynth_setPrototypeOf(o, p) { monosynth_setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return monosynth_setPrototypeOf(o, p); }\n\n\n\n\n\n\nvar DEFAULT_SUSTAIN = 0.15;\n/**\n *  A MonoSynth is used as a single voice for sound synthesis.\n *  This is a class to be used in conjunction with the PolySynth\n *  class. Custom synthetisers should be built inheriting from\n *  this class.\n *\n *  @class p5.MonoSynth\n *  @constructor\n *  @example\n *  <div><code>\n *  let monoSynth;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playSynth);\n *    background(220);\n *    textAlign(CENTER);\n *    text('tap to play', width/2, height/2);\n *\n *    monoSynth = new p5.MonoSynth();\n *  }\n *\n *  function playSynth() {\n *    userStartAudio();\n *\n *    let note = random(['Fb4', 'G4']);\n *    // note velocity (volume, from 0 to 1)\n *    let velocity = random();\n *    // time from now (in seconds)\n *    let time = 0;\n *    // note duration (in seconds)\n *    let dur = 1/6;\n *\n *    monoSynth.play(note, velocity, time, dur);\n *  }\n *  </code></div>\n **/\n\nvar monosynth_MonoSynth =\nfunction (_AudioVoice) {\n  monosynth_inherits(MonoSynth, _AudioVoice);\n\n  function MonoSynth() {\n    var _this;\n\n    monosynth_classCallCheck(this, MonoSynth);\n\n    _this = monosynth_possibleConstructorReturn(this, monosynth_getPrototypeOf(MonoSynth).call(this));\n    _this.oscillator = new oscillator();\n    _this.env = new envelope(); \n\n    _this.env.setRange(1, 0);\n\n    _this.env.setExp(true); \n\n\n    _this.setADSR(0.02, 0.25, 0.05, 0.35); \n\n\n    _this.oscillator.disconnect();\n\n    _this.oscillator.connect(_this.output);\n\n    _this.env.disconnect();\n\n    _this.env.setInput(_this.output.gain); \n\n\n    _this.oscillator.output.gain.value = 1.0;\n\n    _this.oscillator.start();\n\n    _this.connect();\n\n    main.soundArray.push(monosynth_assertThisInitialized(_this));\n    /**\n     * Getters and Setters\n     * @property {Number} attack\n     * @for p5.MonoSynth\n     */\n\n    /**\n     * @property {Number} decay\n     * @for p5.MonoSynth\n     */\n\n    /**\n     * @property {Number} sustain\n     * @for p5.MonoSynth\n     */\n\n    /**\n     * @property {Number} release\n     * @for p5.MonoSynth\n     */\n\n    Object.defineProperties(monosynth_assertThisInitialized(_this), {\n      attack: {\n        get: function get() {\n          return this.env.aTime;\n        },\n        set: function set(attack) {\n          this.env.setADSR(attack, this.env.dTime, this.env.sPercent, this.env.rTime);\n        }\n      },\n      decay: {\n        get: function get() {\n          return this.env.dTime;\n        },\n        set: function set(decay) {\n          this.env.setADSR(this.env.aTime, decay, this.env.sPercent, this.env.rTime);\n        }\n      },\n      sustain: {\n        get: function get() {\n          return this.env.sPercent;\n        },\n        set: function set(sustain) {\n          this.env.setADSR(this.env.aTime, this.env.dTime, sustain, this.env.rTime);\n        }\n      },\n      release: {\n        get: function get() {\n          return this.env.rTime;\n        },\n        set: function set(release) {\n          this.env.setADSR(this.env.aTime, this.env.dTime, this.env.sPercent, release);\n        }\n      }\n    });\n    return _this;\n  }\n  /**\n   *  Play tells the MonoSynth to start playing a note. This method schedules\n   *  the calling of .triggerAttack and .triggerRelease.\n   *\n   *  @method play\n   *  @for p5.MonoSynth\n   *  @param {String | Number} note the note you want to play, specified as a\n   *                                 frequency in Hertz (Number) or as a midi\n   *                                 value in Note/Octave format (\"C4\", \"Eb3\"...etc\")\n   *                                 See <a href = \"https://github.com/Tonejs/Tone.js/wiki/Instruments\">\n   *                                 Tone</a>. Defaults to 440 hz.\n   *  @param  {Number} [velocity] velocity of the note to play (ranging from 0 to 1)\n   *  @param  {Number} [secondsFromNow]  time from now (in seconds) at which to play\n   *  @param  {Number} [sustainTime] time to sustain before releasing the envelope. Defaults to 0.15 seconds.\n   *  @example\n   *  <div><code>\n   *  let monoSynth;\n   *\n   *  function setup() {\n   *    let cnv = createCanvas(100, 100);\n   *    cnv.mousePressed(playSynth);\n   *    background(220);\n   *    textAlign(CENTER);\n   *    text('tap to play', width/2, height/2);\n   *\n   *    monoSynth = new p5.MonoSynth();\n   *  }\n   *\n   *  function playSynth() {\n   *    userStartAudio();\n   *\n   *    let note = random(['Fb4', 'G4']);\n   *    // note velocity (volume, from 0 to 1)\n   *    let velocity = random();\n   *    // time from now (in seconds)\n   *    let time = 0;\n   *    // note duration (in seconds)\n   *    let dur = 1/6;\n   *\n   *    monoSynth.play(note, velocity, time, dur);\n   *  }\n   *  </code></div>\n   *\n   */\n\n\n  monosynth_createClass(MonoSynth, [{\n    key: \"play\",\n    value: function play(note, velocity, secondsFromNow, susTime) {\n      this.triggerAttack(note, velocity, ~~secondsFromNow);\n      this.triggerRelease(~~secondsFromNow + (susTime || DEFAULT_SUSTAIN));\n    }\n    /**\n     *  Trigger the Attack, and Decay portion of the Envelope.\n     *  Similar to holding down a key on a piano, but it will\n     *  hold the sustain level until you let go.\n     *\n     *  @param {String | Number} note the note you want to play, specified as a\n     *                                 frequency in Hertz (Number) or as a midi\n     *                                 value in Note/Octave format (\"C4\", \"Eb3\"...etc\")\n     *                                 See <a href = \"https://github.com/Tonejs/Tone.js/wiki/Instruments\">\n     *                                 Tone</a>. Defaults to 440 hz\n     *  @param  {Number} [velocity] velocity of the note to play (ranging from 0 to 1)\n     *  @param  {Number} [secondsFromNow]  time from now (in seconds) at which to play\n     *  @method  triggerAttack\n     *  @for p5.MonoSynth\n     *  @example\n     *  <div><code>\n     *  let monoSynth;\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(triggerAttack);\n     *    background(220);\n     *    text('tap here for attack, let go to release', 5, 20, width - 20);\n     *    monoSynth = new p5.MonoSynth();\n     *  }\n     *\n     *  function triggerAttack() {\n     *    userStartAudio();\n     *\n     *    monoSynth.triggerAttack(\"E3\");\n     *  }\n     *\n     *  function mouseReleased() {\n     *    monoSynth.triggerRelease();\n     *  }\n     *  </code></div>\n     */\n\n  }, {\n    key: \"triggerAttack\",\n    value: function triggerAttack(note, velocity) {\n      var secondsFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var freq = noteToFreq(note);\n      var vel = velocity || 0.1;\n      this.oscillator.freq(freq, 0, secondsFromNow);\n      this.env.ramp(this.output.gain, secondsFromNow, vel);\n    }\n    /**\n     *  Trigger the release of the Envelope. This is similar to releasing\n     *  the key on a piano and letting the sound fade according to the\n     *  release level and release time.\n     *\n     *  @param  {Number} secondsFromNow time to trigger the release\n     *  @method  triggerRelease\n     *  @for p5.MonoSynth\n     *  @example\n     *  <div><code>\n     *  let monoSynth;\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(triggerAttack);\n     *    background(220);\n     *    text('tap here for attack, let go to release', 5, 20, width - 20);\n     *    monoSynth = new p5.MonoSynth();\n     *  }\n     *\n     *  function triggerAttack() {\n     *    userStartAudio();\n     *\n     *    monoSynth.triggerAttack(\"E3\");\n     *  }\n     *\n     *  function mouseReleased() {\n     *    monoSynth.triggerRelease();\n     *  }\n     *  </code></div>\n     */\n\n  }, {\n    key: \"triggerRelease\",\n    value: function triggerRelease() {\n      var secondsFromNow = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n      this.env.ramp(this.output.gain, secondsFromNow, 0);\n    }\n    /**\n     *  Set values like a traditional\n     *  <a href=\"https://en.wikipedia.org/wiki/Synthesizer#/media/File:ADSR_parameter.svg\">\n     *  ADSR envelope\n     *  </a>.\n     *\n     *  @method  setADSR\n     *  @for p5.MonoSynth\n     *  @param {Number} attackTime    Time (in seconds before envelope\n     *                                reaches Attack Level\n     *  @param {Number} [decayTime]    Time (in seconds) before envelope\n     *                                reaches Decay/Sustain Level\n     *  @param {Number} [susRatio]    Ratio between attackLevel and releaseLevel, on a scale from 0 to 1,\n     *                                where 1.0 = attackLevel, 0.0 = releaseLevel.\n     *                                The susRatio determines the decayLevel and the level at which the\n     *                                sustain portion of the envelope will sustain.\n     *                                For example, if attackLevel is 0.4, releaseLevel is 0,\n     *                                and susAmt is 0.5, the decayLevel would be 0.2. If attackLevel is\n     *                                increased to 1.0 (using <code>setRange</code>),\n     *                                then decayLevel would increase proportionally, to become 0.5.\n     *  @param {Number} [releaseTime]   Time in seconds from now (defaults to 0)\n     */\n\n  }, {\n    key: \"setADSR\",\n    value: function setADSR(attack, decay, sustain, release) {\n      this.env.setADSR(attack, decay, sustain, release);\n    }\n    /**\n     * MonoSynth amp\n     * @method  amp\n     * @for p5.MonoSynth\n     * @param  {Number} vol      desired volume\n     * @param  {Number} [rampTime] Time to reach new volume\n     * @return {Number}          new volume value\n     */\n\n  }, {\n    key: \"amp\",\n    value: function amp(vol, rampTime) {\n      var t = rampTime || 0;\n\n      if (typeof vol !== 'undefined') {\n        this.oscillator.amp(vol, t);\n      }\n\n      return this.oscillator.amp().value;\n    }\n    /**\n     *  Connect to a p5.sound / Web Audio object.\n     *\n     *  @method  connect\n     *  @for p5.MonoSynth\n     *  @param  {Object} unit A p5.sound or Web Audio object\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect(unit) {\n      var u = unit || main.input;\n      this.output.connect(u.input ? u.input : u);\n    }\n    /**\n     *  Disconnect all outputs\n     *\n     *  @method  disconnect\n     *  @for p5.MonoSynth\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.output) {\n        this.output.disconnect();\n      }\n    }\n    /**\n     *  Get rid of the MonoSynth and free up its resources / memory.\n     *\n     *  @method  dispose\n     *  @for p5.MonoSynth\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      monosynth_get(monosynth_getPrototypeOf(MonoSynth.prototype), \"dispose\", this).call(this);\n\n      if (this.env) {\n        this.env.dispose();\n      }\n\n      if (this.oscillator) {\n        this.oscillator.dispose();\n      }\n    }\n  }]);\n\n  return MonoSynth;\n}(audioVoice_0);\n\n var monosynth = (monosynth_MonoSynth);\nfunction onsetDetect_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction onsetDetect_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction onsetDetect_createClass(Constructor, protoProps, staticProps) { if (protoProps) onsetDetect_defineProperties(Constructor.prototype, protoProps); if (staticProps) onsetDetect_defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n *  Listen for onsets (a sharp increase in volume) within a given\n *  frequency range.\n *\n *  @class p5.OnsetDetect\n *  @constructor\n *  @param {Number} freqLow     Low frequency\n *  @param {Number} freqHigh     High frequency\n *  @param {Number} threshold   Amplitude threshold between 0 (no energy) and 1 (maximum)\n *  @param {Function} callback  Function to call when an onset is detected\n */\nvar OnsetDetect =\nfunction () {\n  function OnsetDetect(freqLow, freqHigh, threshold, callback) {\n    onsetDetect_classCallCheck(this, OnsetDetect);\n\n    this.isDetected = false;\n    this.freqLow = freqLow;\n    this.freqHigh = freqHigh;\n    this.treshold = threshold;\n    this.energy = 0;\n    this.penergy = 0; \n\n    this.sensitivity = 500;\n    this.callback = callback;\n  } \n\n\n  onsetDetect_createClass(OnsetDetect, [{\n    key: \"update\",\n    value: function update(fftObject, callback) {\n      this.energy = fftObject.getEnergy(this.freqLow, this.freqHigh) / 255;\n\n      if (this.isDetected === false) {\n        if (this.energy - this.penergy > this.treshold) {\n          this.isDetected = true;\n\n          if (this.callback) {\n            this.callback(this.energy);\n          } else if (callback) {\n            callback(this.energy);\n          }\n\n          var self = this;\n          setTimeout(function () {\n            self.isDetected = false;\n          }, this.sensitivity);\n        }\n      }\n\n      this.penergy = this.energy;\n    }\n  }]);\n\n  return OnsetDetect;\n}();\n\n var onsetDetect = (OnsetDetect);\nfunction polysynth_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction polysynth_defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction polysynth_createClass(Constructor, protoProps, staticProps) { if (protoProps) polysynth_defineProperties(Constructor.prototype, protoProps); if (staticProps) polysynth_defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\n/**\n *  An AudioVoice is used as a single voice for sound synthesis.\n *  The PolySynth class holds an array of AudioVoice, and deals\n *  with voices allocations, with setting notes to be played, and\n *  parameters to be set.\n *\n *  @class p5.PolySynth\n *  @constructor\n *\n *  @param {Number} [synthVoice]   A monophonic synth voice inheriting\n *                                 the AudioVoice class. Defaults to p5.MonoSynth\n *  @param {Number} [maxVoices] Number of voices, defaults to 8;\n *  @example\n *  <div><code>\n *  let polySynth;\n *\n *  function setup() {\n *    let cnv = createCanvas(100, 100);\n *    cnv.mousePressed(playSynth);\n *    background(220);\n *    text('click to play', 20, 20);\n *\n *    polySynth = new p5.PolySynth();\n *  }\n *\n *  function playSynth() {\n *    userStartAudio();\n *\n *    // note duration (in seconds)\n *    let dur = 1.5;\n *\n *    // time from now (in seconds)\n *    let time = 0;\n *\n *    // velocity (volume, from 0 to 1)\n *    let vel = 0.1;\n *\n *    // notes can overlap with each other\n *    polySynth.play('G2', vel, 0, dur);\n *    polySynth.play('C3', vel, time += 1/3, dur);\n *    polySynth.play('G3', vel, time += 1/3, dur);\n *  }\n *  </code></div>\n **/\n\nvar polysynth_PolySynth =\nfunction () {\n  function PolySynth(audioVoice, maxVoices) {\n    polysynth_classCallCheck(this, PolySynth);\n\n    this.audiovoices = [];\n    /**\n     * An object that holds information about which notes have been played and\n     * which notes are currently being played. New notes are added as keys\n     * on the fly. While a note has been attacked, but not released, the value of the\n     * key is the audiovoice which is generating that note. When notes are released,\n     * the value of the key becomes undefined.\n     * @property notes\n     */\n\n    this.notes = {}; \n\n    this._newest = 0;\n    this._oldest = 0;\n    /**\n     * A PolySynth must have at least 1 voice, defaults to 8\n     * @property polyvalue\n     */\n\n    this.maxVoices = maxVoices || 8;\n    /**\n     * Monosynth that generates the sound for each note that is triggered. The\n     * p5.PolySynth defaults to using the p5.MonoSynth as its voice.\n     * @property AudioVoice\n     */\n\n    this.AudioVoice = audioVoice === undefined ? p5.MonoSynth : audioVoice;\n    /**\n     * This value must only change as a note is attacked or released. Due to delay\n     * and sustain times, Tone.TimelineSignal is required to schedule the change in value.\n     * @private\n     * @property {Tone.TimelineSignal} _voicesInUse\n     */\n\n    this._voicesInUse = new TimelineSignal_default.a(0);\n    this.output = main.audiocontext.createGain();\n    this.connect(); \n\n    this._allocateVoices();\n\n    main.soundArray.push(this);\n  }\n  /**\n   * Construct the appropriate number of audiovoices\n   * @private\n   * @for p5.PolySynth\n   * @method  _allocateVoices\n   */\n\n\n  polysynth_createClass(PolySynth, [{\n    key: \"_allocateVoices\",\n    value: function _allocateVoices() {\n      for (var i = 0; i < this.maxVoices; i++) {\n        this.audiovoices.push(new this.AudioVoice());\n        this.audiovoices[i].disconnect();\n        this.audiovoices[i].connect(this.output);\n      }\n    }\n    /**\n     *  Play a note by triggering noteAttack and noteRelease with sustain time\n     *\n     *  @method  play\n     *  @for p5.PolySynth\n     *  @param  {Number} [note] midi note to play (ranging from 0 to 127 - 60 being a middle C)\n     *  @param  {Number} [velocity] velocity of the note to play (ranging from 0 to 1)\n     *  @param  {Number} [secondsFromNow]  time from now (in seconds) at which to play\n     *  @param  {Number} [sustainTime] time to sustain before releasing the envelope\n     *  @example\n     *  <div><code>\n     *  let polySynth;\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(playSynth);\n     *    background(220);\n     *    text('click to play', 20, 20);\n     *\n     *    polySynth = new p5.PolySynth();\n     *  }\n     *\n     *  function playSynth() {\n     *    userStartAudio();\n     *\n     *    // note duration (in seconds)\n     *    let dur = 1.5;\n     *\n     *    // time from now (in seconds)\n     *    let time = 0;\n     *\n     *    // velocity (volume, from 0 to 1)\n     *    let vel = 0.1;\n     *\n     *    // notes can overlap with each other\n     *    polySynth.play('G2', vel, 0, dur);\n     *    polySynth.play('C3', vel, time += 1/3, dur);\n     *    polySynth.play('G3', vel, time += 1/3, dur);\n     *  }\n     *  </code></div>\n     */\n\n  }, {\n    key: \"play\",\n    value: function play(note, velocity, secondsFromNow) {\n      var susTime = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n      this.noteAttack(note, velocity, secondsFromNow);\n      this.noteRelease(note, secondsFromNow + susTime);\n    }\n    /**\n     *  noteADSR sets the envelope for a specific note that has just been triggered.\n     *  Using this method modifies the envelope of whichever audiovoice is being used\n     *  to play the desired note. The envelope should be reset before noteRelease is called\n     *  in order to prevent the modified envelope from being used on other notes.\n     *\n     *  @method  noteADSR\n     *  @for p5.PolySynth\n     *  @param {Number} [note]        Midi note on which ADSR should be set.\n     *  @param {Number} [attackTime]  Time (in seconds before envelope\n     *                                reaches Attack Level\n     *  @param {Number} [decayTime]   Time (in seconds) before envelope\n     *                                reaches Decay/Sustain Level\n     *  @param {Number} [susRatio]    Ratio between attackLevel and releaseLevel, on a scale from 0 to 1,\n     *                                where 1.0 = attackLevel, 0.0 = releaseLevel.\n     *                                The susRatio determines the decayLevel and the level at which the\n     *                                sustain portion of the envelope will sustain.\n     *                                For example, if attackLevel is 0.4, releaseLevel is 0,\n     *                                and susAmt is 0.5, the decayLevel would be 0.2. If attackLevel is\n     *                                increased to 1.0 (using <code>setRange</code>),\n     *                                then decayLevel would increase proportionally, to become 0.5.\n     *  @param {Number} [releaseTime]   Time in seconds from now (defaults to 0)\n     **/\n\n  }, {\n    key: \"noteADSR\",\n    value: function noteADSR(note, a, d, s, r) {\n      var timeFromNow = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n      var now = main.audiocontext.currentTime;\n      var t = now + timeFromNow;\n      this.audiovoices[this.notes[note].getValueAtTime(t)].setADSR(a, d, s, r);\n    }\n    /**\n     * Set the PolySynths global envelope. This method modifies the envelopes of each\n     * monosynth so that all notes are played with this envelope.\n     *\n     *  @method  setADSR\n     *  @for p5.PolySynth\n     *  @param {Number} [attackTime]  Time (in seconds before envelope\n     *                                reaches Attack Level\n     *  @param {Number} [decayTime]   Time (in seconds) before envelope\n     *                                reaches Decay/Sustain Level\n     *  @param {Number} [susRatio]    Ratio between attackLevel and releaseLevel, on a scale from 0 to 1,\n     *                                where 1.0 = attackLevel, 0.0 = releaseLevel.\n     *                                The susRatio determines the decayLevel and the level at which the\n     *                                sustain portion of the envelope will sustain.\n     *                                For example, if attackLevel is 0.4, releaseLevel is 0,\n     *                                and susAmt is 0.5, the decayLevel would be 0.2. If attackLevel is\n     *                                increased to 1.0 (using <code>setRange</code>),\n     *                                then decayLevel would increase proportionally, to become 0.5.\n     *  @param {Number} [releaseTime]   Time in seconds from now (defaults to 0)\n     **/\n\n  }, {\n    key: \"setADSR\",\n    value: function setADSR(a, d, s, r) {\n      this.audiovoices.forEach(function (voice) {\n        voice.setADSR(a, d, s, r);\n      });\n    }\n    /**\n     *  Trigger the Attack, and Decay portion of a MonoSynth.\n     *  Similar to holding down a key on a piano, but it will\n     *  hold the sustain level until you let go.\n     *\n     *  @method  noteAttack\n     *  @for p5.PolySynth\n     *  @param  {Number} [note]           midi note on which attack should be triggered.\n     *  @param  {Number} [velocity]       velocity of the note to play (ranging from 0 to 1)/\n     *  @param  {Number} [secondsFromNow] time from now (in seconds)\n     *  @example\n     *  <div><code>\n     *  let polySynth = new p5.PolySynth();\n     *  let pitches = ['G', 'D', 'G', 'C'];\n     *  let octaves = [2, 3, 4];\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(playChord);\n     *    background(220);\n     *    text('tap to play', 20, 20);\n     *  }\n     *\n     *  function playChord() {\n     *    userStartAudio();\n     *\n     *    // play a chord: multiple notes at the same time\n     *    for (let i = 0; i < 4; i++) {\n     *      let note = random(pitches) + random(octaves);\n     *      polySynth.noteAttack(note, 0.1);\n     *    }\n     *  }\n     *\n     *  function mouseReleased() {\n     *    // release all voices\n     *    polySynth.noteRelease();\n     *  }\n     *  </code></div>\n     */\n\n  }, {\n    key: \"noteAttack\",\n    value: function noteAttack(_note, _velocity) {\n      var secondsFromNow = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n      var acTime = main.audiocontext.currentTime + secondsFromNow; \n\n      var note = noteToFreq(_note);\n      var velocity = _velocity || 0.1;\n      var currentVoice; \n\n      if (this.notes[note] && this.notes[note].getValueAtTime(acTime) !== null) {\n        this.noteRelease(note, 0);\n      } \n\n\n      if (this._voicesInUse.getValueAtTime(acTime) < this.maxVoices) {\n        currentVoice = Math.max(~~this._voicesInUse.getValueAtTime(acTime), 0);\n      } \n      else {\n          currentVoice = this._oldest;\n          oldestNote = freqToMidi(this.audiovoices[this._oldest].oscillator.freq().value);\n          this.noteRelease(oldestNote);\n          this._oldest = (this._oldest + 1) % (this.maxVoices - 1);\n        } \n\n\n      this.notes[note] = new TimelineSignal_default.a();\n      this.notes[note].setValueAtTime(currentVoice, acTime); \n\n      var previousVal = this._voicesInUse._searchBefore(acTime) === null ? 0 : this._voicesInUse._searchBefore(acTime).value;\n\n      this._voicesInUse.setValueAtTime(previousVal + 1, acTime); \n\n\n      this._updateAfter(acTime, 1);\n\n      this._newest = currentVoice; \n\n      if (typeof velocity === 'number') {\n        var maxRange = 1 / this._voicesInUse.getValueAtTime(acTime) * 2;\n        velocity = velocity > maxRange ? maxRange : velocity;\n      } \n\n\n      this.audiovoices[currentVoice].triggerAttack(note, velocity, secondsFromNow);\n    }\n    /**\n     * Private method to ensure accurate values of this._voicesInUse\n     * Any time a new value is scheduled, it is necessary to increment all subsequent\n     * scheduledValues after attack, and decrement all subsequent\n     * scheduledValues after release\n     *\n     * @private\n     * @for p5.PolySynth\n     * @param  {[type]} time  [description]\n     * @param  {[type]} value [description]\n     * @return {[type]}       [description]\n     */\n\n  }, {\n    key: \"_updateAfter\",\n    value: function _updateAfter(time, value) {\n      if (this._voicesInUse._searchAfter(time) === null) {\n        return;\n      } else {\n        this._voicesInUse._searchAfter(time).value += value;\n\n        var nextTime = this._voicesInUse._searchAfter(time).time;\n\n        this._updateAfter(nextTime, value);\n      }\n    }\n    /**\n     *  Trigger the Release of an AudioVoice note. This is similar to releasing\n     *  the key on a piano and letting the sound fade according to the\n     *  release level and release time.\n     *\n     *  @method  noteRelease\n     *  @for p5.PolySynth\n     *  @param  {Number} [note]           midi note on which attack should be triggered.\n     *                                    If no value is provided, all notes will be released.\n     *  @param  {Number} [secondsFromNow] time to trigger the release\n     *  @example\n     *  <div><code>\n     *  let polySynth = new p5.PolySynth();\n     *  let pitches = ['G', 'D', 'G', 'C'];\n     *  let octaves = [2, 3, 4];\n     *\n     *  function setup() {\n     *    let cnv = createCanvas(100, 100);\n     *    cnv.mousePressed(playChord);\n     *    background(220);\n     *    text('tap to play', 20, 20);\n     *  }\n     *\n     *  function playChord() {\n     *    userStartAudio();\n     *\n     *    // play a chord: multiple notes at the same time\n     *    for (let i = 0; i < 4; i++) {\n     *      let note = random(pitches) + random(octaves);\n     *      polySynth.noteAttack(note, 0.1);\n     *    }\n     *  }\n     *\n     *  function mouseReleased() {\n     *    // release all voices\n     *    polySynth.noteRelease();\n     *  }\n     *  </code></div>\n     *\n     */\n\n  }, {\n    key: \"noteRelease\",\n    value: function noteRelease(_note, secondsFromNow) {\n      var now = main.audiocontext.currentTime;\n      var tFromNow = secondsFromNow || 0;\n      var t = now + tFromNow; \n\n      if (!_note) {\n        this.audiovoices.forEach(function (voice) {\n          voice.triggerRelease(tFromNow);\n        });\n\n        this._voicesInUse.setValueAtTime(0, t);\n\n        for (var n in this.notes) {\n          this.notes[n].dispose();\n          delete this.notes[n];\n        }\n\n        return;\n      } \n\n\n      var note = noteToFreq(_note);\n\n      if (!this.notes[note] || this.notes[note].getValueAtTime(t) === null) {\n        console.warn('Cannot release a note that is not already playing');\n      } else {\n        var previousVal = Math.max(~~this._voicesInUse.getValueAtTime(t).value, 1);\n\n        this._voicesInUse.setValueAtTime(previousVal - 1, t); \n\n\n        if (previousVal > 0) {\n          this._updateAfter(t, -1);\n        }\n\n        this.audiovoices[this.notes[note].getValueAtTime(t)].triggerRelease(tFromNow);\n        this.notes[note].dispose();\n        delete this.notes[note];\n        this._newest = this._newest === 0 ? 0 : (this._newest - 1) % (this.maxVoices - 1);\n      }\n    }\n    /**\n     *  Connect to a p5.sound / Web Audio object.\n     *\n     *  @method  connect\n     *  @for p5.PolySynth\n     *  @param  {Object} unit A p5.sound or Web Audio object\n     */\n\n  }, {\n    key: \"connect\",\n    value: function connect(unit) {\n      var u = unit || main.input;\n      this.output.connect(u.input ? u.input : u);\n    }\n    /**\n     *  Disconnect all outputs\n     *\n     *  @method  disconnect\n     *  @for p5.PolySynth\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this.output) {\n        this.output.disconnect();\n      }\n    }\n    /**\n     *  Get rid of the MonoSynth and free up its resources / memory.\n     *\n     *  @method  dispose\n     *  @for p5.PolySynth\n     */\n\n  }, {\n    key: \"dispose\",\n    value: function dispose() {\n      this.audiovoices.forEach(function (voice) {\n        voice.dispose();\n      });\n\n      if (this.output) {\n        this.output.disconnect();\n        delete this.output;\n      }\n    }\n  }]);\n\n  return PolySynth;\n}();\n\n var polysynth = (polysynth_PolySynth);\nfunction Signal_classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Signal_Signal = function Signal() {\n  Signal_classCallCheck(this, Signal);\n\n  console.warn('p5.Signal is deprecated , Use Tone.js Signal instead ');\n};\n\n var deprecations_Signal = (Signal_Signal);\n\n\n\np5.prototype.getAudioContext = audiocontext[\"b\" ];\np5.prototype.userStartAudio = audiocontext[\"c\" ];\n\n\np5.prototype.sampleRate = sampleRate;\np5.prototype.freqToMidi = freqToMidi;\np5.prototype.midiToFreq = midiToFreq;\np5.prototype.noteToFreq = noteToFreq;\np5.prototype.soundFormats = soundFormats;\np5.prototype.disposeSound = disposeSound;\np5.prototype._checkFileFormats = _checkFileFormats;\np5.prototype._mathChain = _mathChain;\np5.prototype.convertToWav = convertToWav;\np5.prototype.interleave = interleave;\np5.prototype.writeUTFBytes = writeUTFBytes;\np5.prototype.safeBufferSize = safeBufferSize;\np5.prototype.saveSound = saveSound; \n\np5.prototype.registerMethod('remove', p5.prototype.disposeSound);\n\n\n\np5.Panner = panner_0;\n\np5.SoundFile = soundfile;\np5.prototype.loadSound = loadSound; \n\np5.prototype.registerPreloadMethod('loadSound', p5.prototype);\n\np5.Amplitude = amplitude;\n\np5.FFT = fft;\n\np5.Oscillator = oscillator;\np5.SinOsc = SinOsc;\np5.TriOsc = TriOsc;\np5.SawOsc = SawOsc;\np5.SqrOsc = SqrOsc;\n\n\np5.Noise = noise;\n\np5.Pulse = pulse;\n\np5.AudioIn = audioin;\n\np5.Effect = effect;\n\np5.Filter = filter;\np5.LowPass = LowPass;\np5.HighPass = HighPass;\np5.BandPass = BandPass;\n\np5.EQ = eq;\n\np5.listener3D = listener3d;\n\np5.Panner3D = panner3d;\n\np5.Delay = delay;\n\np5.Reverb = Reverb;\np5.Convolver = reverb_Convolver;\np5.prototype.createConvolver = createConvolver;\np5.prototype.registerPreloadMethod('createConvolver', p5.prototype);\n\np5.Metro = metro;\n\np5.Phrase = Phrase;\np5.Part = looper_Part;\np5.Score = Score;\n\np5.SoundLoop = soundLoop;\n\np5.Compressor = compressor;\n\np5.peakDetect = peakDetect;\n\np5.SoundRecorder = soundRecorder;\n\np5.Distortion = distortion;\n\np5.Gain = gain;\n\np5.AudioVoice = audioVoice_0;\n\np5.MonoSynth = monosynth;\n\np5.OnsetDetect = onsetDetect;\n\np5.PolySynth = polysynth;\n\np5.PeakDetect = peakDetect; \n\n\np5.Signal = deprecations_Signal;\n\n })\n ]);\n"]},"metadata":{},"sourceType":"script"}